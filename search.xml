<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>qqexotestttttt</title>
      <link href="/posts/880/"/>
      <url>/posts/880/</url>
      
        <content type="html"><![CDATA[<p>tttttteeeeeeeesssssssssytttttttttttt</p><p>🙂 <strong>test</strong></p><p>test<del>特呃呃</del><a href="https://">是粉色发</a>    <a href="https://dfsf"></a></p><blockquote><ul><li>[X]  sefef</li><li>[X]  gyjyt</li></ul></blockquote><hr><p>sfefesf</p><p>awdwad</p><p>`玩儿完二位r</p><p>wsfwef</p><div class="table-container"><table><thead><tr><th>col1</th><th>col2认为让我</th><th>col3</th></tr></thead><tbody><tr><td>我认为</td><td>王任务</td><td></td></tr><tr><td></td><td></td><td>我认为若无</td></tr></tbody></table></div><p>`</p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 其他 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>test</title>
      <link href="/posts/f82e/"/>
      <url>/posts/f82e/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 人文 </category>
          
          <category> 其他 </category>
          
          <category> 文学 </category>
          
          <category> 医学 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 摘录 </tag>
            
            <tag> 文学 </tag>
            
            <tag> 医学 </tag>
            
            <tag> 随想 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>标签化文本</title>
      <link href="/posts/98ec/"/>
      <url>/posts/98ec/</url>
      
        <content type="html"><![CDATA[<h3 id="一、文本编辑"><a href="#一、文本编辑" class="headerlink" title="一、文本编辑"></a>一、文本编辑</h3><div class="tabs" id=""><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#-1">源代码引用</button></li><li class="tab"><button type="button" data-href="#-2">效果展示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% u 下划线 %&#125;</span><br><span class="line">&#123;% emp 着重号 %&#125;</span><br><span class="line">&#123;% wavy 波浪线 %&#125;</span><br><span class="line">&#123;% del 删除线 %&#125;</span><br><span class="line">&#123;% kbd 键盘样式 %&#125;</span><br><span class="line">&#123;% psw 密码 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-2"><ol><li>带 <u>下划线</u> 的文本</li><li>带 <emp>着重号</emp> 的文本</li><li>带 <wavy>波浪线</wavy> 的文本</li><li>带 <del>删除线</del> 的文本</li><li>键盘样式的文本 <kbd>command</kbd> + <kbd>D</kbd></li><li>密码样式的文本：<psw>这里没有验证码</psw></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="二、文字颜色"><a href="#二、文字颜色" class="headerlink" title="二、文字颜色"></a>二、文字颜色</h3><div class="tabs" id=""><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#-1">源代码引用</button></li><li class="tab"><button type="button" data-href="#-2">效果展示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% span red, 红色 %&#125;</span><br><span class="line">&#123;% span yellow, 黄色 %&#125;</span><br><span class="line">&#123;% span green, 绿色 %&#125;</span><br><span class="line">&#123;% span cyan, 青色 %&#125;</span><br><span class="line">&#123;% span blue, 蓝色 %&#125;</span><br><span class="line">&#123;% span gray, 灰色 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-2"><ul><li>彩色文字<br>在一段话中方便插入各种颜色的标签，包括：<span class='p red'>红色</span>、<span class='p yellow'>黄色</span>、<span class='p green'>绿色</span>、<span class='p cyan'>青色</span>、<span class='p blue'>蓝色</span>、<span class='p gray'>灰色</span>。</li><li>超大号文字<br>文档「开始」页面中的标题部分就是超大号文字。<br><span class='p left logo large'>Volantis</span> <span class='p left small'>A Wonderful Theme for Hexo</span></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="三、标签块"><a href="#三、标签块" class="headerlink" title="三、标签块"></a>三、标签块</h3><h4 id="1-浅填充"><a href="#1-浅填充" class="headerlink" title="1.浅填充"></a>1.浅填充</h4><div class="note modern"><p>默认 提示块标签</p></div><div class="note default modern"><p>default 提示块标签</p></div><div class="note primary modern"><p>primary 提示块标签</p></div><div class="note success modern"><p>success 提示块标签</p></div><div class="note info modern"><p>info 提示块标签</p></div><div class="note warning modern"><p>warning 提示块标签</p></div><div class="note danger modern"><p>danger 提示块标签</p></div><h4 id="2-深填充"><a href="#2-深填充" class="headerlink" title="2.深填充"></a>2.深填充</h4><div class="tip "><p>default</p></div><div class="tip info"><p>info</p></div><div class="tip success"><p>success</p></div><div class="tip error"><p>error</p></div><div class="tip warning"><p>warning</p></div><div class="tip bolt"><p>bolt</p></div><div class="tip ban"><p>ban</p></div><div class="tip home"><p>home</p></div><div class="tip sync"><p>sync</p></div><div class="tip cogs"><p>cogs</p></div><div class="tip key"><p>key</p></div><div class="tip bell"><p>bell</p></div><div class="tip fa-atom"><p>自定义font awesome图标</p></div><h4 id="3-动态填充"><a href="#3-动态填充" class="headerlink" title="3.动态填充"></a>3.动态填充</h4><div class="tip warning faa-horizontal animated"><p>warning</p></div><div class="tip ban faa-flash animated"><p>ban</p></div><h3 id="四、复选框"><a href="#四、复选框" class="headerlink" title="四、复选框"></a>四、复选框</h3><h4 id="1-方形复选"><a href="#1-方形复选" class="headerlink" title="1.方形复选"></a>1.方形复选</h4><div class='checkbox'><input type="checkbox" />            <p>纯文本测试</p>            </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>            <p>支持简单的 <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> 语法</p>            </div><div class='checkbox red'><input type="checkbox" />            <p>支持自定义颜色</p>            </div><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>绿色 + 默认选中</p>            </div><div class='checkbox yellow checked'><input type="checkbox" checked="checked"/>            <p>黄色 + 默认选中</p>            </div><div class='checkbox cyan checked'><input type="checkbox" checked="checked"/>            <p>青色 + 默认选中</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>蓝色 + 默认选中</p>            </div><div class='checkbox plus green checked'><input type="checkbox" checked="checked"/>            <p>增加</p>            </div><div class='checkbox minus yellow checked'><input type="checkbox" checked="checked"/>            <p>减少</p>            </div><div class='checkbox times red checked'><input type="checkbox" checked="checked"/>            <p>叉</p>            </div><h4 id="2-圆形复选"><a href="#2-圆形复选" class="headerlink" title="2.圆形复选"></a>2.圆形复选</h4><div class='checkbox'><input type="radio" />            <p>纯文本测试</p>            </div><div class='checkbox checked'><input type="radio" checked="checked"/>            <p>支持简单的 <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> 语法</p>            </div><div class='checkbox red'><input type="radio" />            <p>支持自定义颜色</p>            </div><div class='checkbox green'><input type="radio" />            <p>绿色</p>            </div><div class='checkbox yellow'><input type="radio" />            <p>黄色</p>            </div><div class='checkbox cyan'><input type="radio" />            <p>青色</p>            </div><div class='checkbox blue'><input type="radio" />            <p>蓝色</p>            </div><h3 id="五、时间轴"><a href="#五、时间轴" class="headerlink" title="五、时间轴"></a>五、时间轴</h3><div class="timeline"><p class='p h2'>时间轴,blue</p><!-- timeline 2020-07-24 [2.6.6 -> 3.0](https://github.com/volantis-x/hexo-theme-volantis/releases) -->1. 如果有 `hexo-lazyload-image` 插件，需要删除并重新安装最新版本，设置 `lazyload.isSPA: true`。2. 2.x 版本的 css 和 js 不适用于 3.x 版本，如果使用了 `use_cdn: true` 则需要删除。3. 2.x 版本的 fancybox 标签在 3.x 版本中被重命名为 gallery 。4. 2.x 版本的置顶 `top: true` 改为了 `pin: true`，并且同样适用于 `layout: page` 的页面。5. 如果使用了 `hexo-offline` 插件，建议卸载，3.0 版本默认开启了 pjax 服务。<!-- endtimeline --><!-- timeline 2020-05-15 [2.6.3 -> 2.6.6](https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.6) -->不需要额外处理。<!-- endtimeline --><!-- timeline 2020-04-20 [2.6.2 -> 2.6.3](https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.3) -->1. 全局搜索 `seotitle` 并替换为 `seo_title`。2. group 组件的索引规则有变，使用 group 组件的文章内，`group: group_name` 对应的组件名必须是 `group_name`。3. group 组件的列表名优先显示文章的 `short_title` 其次是 `title`。<!-- endtimeline --></div><h3 id="六、标签化卡片"><a href="#六、标签化卡片" class="headerlink" title="六、标签化卡片"></a>六、标签化卡片</h3><div style="display: inline-block;"><a class='link-card' target="_blank" rel="external nofollow noopener noreferrer" title='https://akilar.top/posts/615e2dec/' href='https://akilar.top/posts/615e2dec/'><div class='left'><img src=/img/emoji_bixin.jpg></div><div class='right'><p class='text'>糖果屋教程贴</p><p class='url'>https://akilar.top/posts/615e2dec/</p></div></a></div><h3 id="七、小方块"><a href="#七、小方块" class="headerlink" title="七、小方块"></a>七、小方块</h3><p><img src="https://img.shields.io/badge/Frame-Hexo-blue"><br><img src="https://img.shields.io/badge/Frame-Hexo-blue?logo=Hexo&style=plastic"><br><img src="https://img.shields.io/badge/Frame-Hexo-blue?logo=Hexo&style=flat"><br><img src="https://img.shields.io/badge/Frame-Hexo-blue?logo=Hexo&style=flat-square"><br><img src="https://img.shields.io/badge/Frame-Hexo-blue?logo=Hexo&style=for-the-badge"><br><img src="https://img.shields.io/badge/Frame-Hexo-blue?logo=Hexo&style=social"><br><img src="https://img.shields.io/badge/Frame-Hexo-blue?logo=Hexo&label=框架"><br><img src="https://img.shields.io/badge/Frame-Hexo-blue?logo=Hexo&logoWidth=30"><br><img src="https://img.shields.io/badge/Frame-Hexo-blue?logo=Hexo&label=框架&logoColor=violet&labalColor=#1fd041&color=rgb(222, 31, 31)"><br><a target="_blank" href="https://hexo.io" title="框架采用Hexo"><img src="https://img.shields.io/badge/Frame-Hexo-blue"></a><br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Butterfly-Theme-orange?logo=&color=orange&link=&"></object><br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Hexo-Frame-orange?logo=hexo&color=orange&link=&"></object><br><object class="ghbdage" style="margin-inline:5px" title="本站采用双线部署，默认线路托管于Vercel" standby="loading..." data="https://img.shields.io/badge/Vercel-Hosted-orange?logo=Vercel&color=brightgreen&link=https://vercel.com/&style=social&logoWidth=20"></object><br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Vercel-Hosted-orange?logo=Vercel&color=orange&link=&style=social&logoWidth=20&logoColor=violet"></object></p><h3 id="八、音频插入"><a href="#八、音频插入" class="headerlink" title="八、音频插入"></a>八、音频插入</h3><div class="audio"><audio controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3' type='audio/mp3'>Your browser does not support the audio tag.</audio></div><h3 id="九、视频插入"><a href="#九、视频插入" class="headerlink" title="九、视频插入"></a>九、视频插入</h3><h4 id="1-100-画幅"><a href="#1-100-画幅" class="headerlink" title="1. 100%画幅"></a>1. 100%画幅</h4><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><h4 id="2-50-画幅"><a href="#2-50-画幅" class="headerlink" title="2. 50%画幅"></a>2. 50%画幅</h4><div class="videos" col='2'><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div></div><h4 id="3-25-画幅"><a href="#3-25-画幅" class="headerlink" title="3. 25%画幅"></a>3. 25%画幅</h4><div class="videos" col='4'><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div></div><h3 id="十、相册群"><a href="#十、相册群" class="headerlink" title="十、相册群"></a>十、相册群</h3><p><div class="gallery-group-main">  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://assets.akilar.top/image/1.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">MC</div>  <p>在Rikkaの六花服务器里留下的足迹</p>  <a href='/gallery/MC/'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://assets.akilar.top/image/20200907110508327.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">Gundam</div>  <p>哦咧哇gundam哒！</p>  <a href='/gallery/Gundam/'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://assets.akilar.top/image/20200907113116651.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">I-am-Akilar</div>  <p>某种意义上也算自拍吧</p>  <a href='/gallery/I-am-Akilar/'></a>  </figcaption>  </figure>  </div></p><h3 id="十一、相册"><a href="#十一、相册" class="headerlink" title="十一、相册"></a>十一、相册</h3><div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg" alt=""></p>          </div><h3 id="十二、折叠框"><a href="#十二、折叠框" class="headerlink" title="十二、折叠框"></a>十二、折叠框</h3><details ><summary> <p>查看图片测试</p> </summary>              <div class='content'>              <p><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg" alt=""></p>              </div>            </details><details cyan open><summary> <p>查看默认打开的折叠框</p> </summary>              <div class='content'>              <p>这是一个默认打开的折叠框。</p>              </div>            </details><details green><summary> <p>查看代码测试</p> </summary>              <div class='content'>              <p>假装这里有代码块（代码块没法嵌套代码块）</p>              </div>            </details><details yellow><summary> <p>查看列表测试</p> </summary>              <div class='content'>              <ul><li>haha</li><li>hehe</li></ul>              </div>            </details><details red><summary> <p>查看嵌套测试</p> </summary>              <div class='content'>              <details blue><summary> <p>查看嵌套测试2</p> </summary>              <div class='content'>              <details ><summary> <p>查看嵌套测试3</p> </summary>              <div class='content'>              <p>hahaha <span><img src='https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/tieba/%E6%BB%91%E7%A8%BD.png' style='height:24px'></span></p>              </div>            </details>              </div>            </details>              </div>            </details><h3 id="十三、多标签栏"><a href="#十三、多标签栏" class="headerlink" title="十三、多标签栏"></a>十三、多标签栏</h3><div class="tabs" id="第一个标题"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#第一个标题-1">第一个标题 1</button></li><li class="tab"><button type="button" data-href="#第一个标题-2">第二个标题</button></li><li class="tab"><button type="button" data-href="#第一个标题-3"><i class="fab fa-apple-pay"></i>第三个标题</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="第一个标题-1"><p>标签一的内容显示，并支持MD格式。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="第一个标题-2"><p><strong>标签二的内容显示，并支持MD格式。</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="第一个标题-3"><p><strong>This is Tab 3</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h4 id="修改标题名称"><a href="#修改标题名称" class="headerlink" title="修改标题名称"></a>修改标题名称</h4><div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">第一个Tab</button></li><li class="tab"><button type="button" data-href="#test4-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button></li><li class="tab"><button type="button" data-href="#test4-3"><i class="fas fa-bomb"></i>炸弹</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p><strong>tab名字为第一个Tab</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><p><strong>只有图标 没有Tab名字</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-3"><p><strong>名字+icon</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="十四、诗词鉴赏"><a href="#十四、诗词鉴赏" class="headerlink" title="十四、诗词鉴赏"></a>十四、诗词鉴赏</h3><div class='poem'><div class='poem-title'>水调歌头</div><div class='poem-author'>苏轼</div><p>丙辰中秋，欢饮达旦，大醉，作此篇，兼怀子由。<br>明月几时有？把酒问青天。<br>不知天上宫阙，今夕是何年？<br>我欲乘风归去，又恐琼楼玉宇，高处不胜寒。<br>起舞弄清影，何似在人间？</p><p>转朱阁，低绮户，照无眠。<br>不应有恨，何事长向别时圆？<br>人有悲欢离合，月有阴晴圆缺，此事古难全。<br>但愿人长久，千里共婵娟。</p></div><h3 id="十五、说明"><a href="#十五、说明" class="headerlink" title="十五、说明"></a>十五、说明</h3><span class='nota' data-nota='可以看到注解内容出现在顶栏 ，并且为蓝色'>把鼠标移动到我上面试试，看看效果</span><h3 id="十六、进度条"><a href="#十六、进度条" class="headerlink" title="十六、进度条"></a>十六、进度条</h3><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-red"  style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-yellow"  style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-green"  style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-cyan"  style="width: 70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-blue"  style="width: 90%" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-gray"  style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div><h3 id="十七、快捷说明"><a href="#十七、快捷说明" class="headerlink" title="十七、快捷说明"></a>十七、快捷说明</h3><p>最近我学到了不少新玩意儿（虽然对很多大佬来说这些已经是旧技术了），比如CSS的<span class="bubble-content">兄弟相邻选择器</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#71a4e3;">例如 h1 + p {margin-top:50px;}</span></span>，<span class="bubble-content">flex布局</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#ec5830;">Flex 是 Flexible Box 的缩写，意为弹性布局"，用来为盒状模型提供最大的灵活性"</span></span>，<span class="bubble-content">transform变换</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#1db675;">transform 属性向元素应用 2D 或 3D 转换。该属性允许我们对元素进行旋转、缩放、移动或倾斜。</span></span>，animation的<span class="bubble-content">贝塞尔速度曲线</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#de4489;">贝塞尔曲线(Bézier curve)，又称贝兹曲线或贝济埃曲线，是应用于二维图形应用程序的数学曲线。一般的矢量图形软件通过它来精确画出曲线，贝兹曲线由线段与节点组成，节点是可拖动的支点，线段像可伸缩的皮筋</span></span>写法，还有今天刚看到的<span class="bubble-content">clip-path</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#868fd7;">clip-path属性使用裁剪方式创建元素的可显示区域。区域内的部分显示，区域外的隐藏。</span></span>属性。这些对我来说很新颖的概念狠狠的冲击着我以前积累起来的设计思路。</p><h3 id="十八、引用注释"><a href="#十八、引用注释" class="headerlink" title="十八、引用注释"></a>十八、引用注释</h3><p>Akilarの糖果屋(akilar.top)是一个私人性质的博客<span class="hidden-anchor" id="referto_[1]"></span><sup class="reference"><a href="#referfrom_[1]">[1]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Akilarの糖果屋群聊简介</span><span class="reference-title">参考资料</span></span></span>，从各类教程至生活点滴，无话不谈。建群的目的是提供一个闲聊的场所。博客采用Hexo框架<span class="hidden-anchor" id="referto_[2]"></span><sup class="reference"><a href="#referfrom_[2]">[2]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Hexo中文文档</span><span class="reference-title">参考资料</span></span></span>，Butterfly主题<span class="hidden-anchor" id="referto_[3]"></span><sup class="reference"><a href="#referfrom_[3]">[3]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Butterfly 安装文档(一) 快速开始</span><span class="reference-title">参考资料</span></span></span></p><p>本项目参考了Volantis<span class="hidden-anchor" id="referto_[4]"></span><sup class="reference"><a href="#referfrom_[4]">[4]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">hexo-theme-volantis 标签插件</span><span class="reference-title">参考资料</span></span></span>的标签样式。引入<code>[tag].js</code>，并针对<code>butterfly</code>主题修改了相应的<code>[tag].styl</code>。在此鸣谢<code>Volantis</code>主题众开发者。<br>主要参考内容包括各个volantis的内置标签插件文档<span class="hidden-anchor" id="referto_[5]"></span><sup class="reference"><a href="#referfrom_[5]">[5]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Volantis文档:内置标签插件</span><span class="reference-title">参考资料</span></span></span><br>Butterfly主题的各个衍生魔改<span class="hidden-anchor" id="referto_[6]"></span><sup class="reference"><a href="#referfrom_[6]">[6]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Butterfly 安装文档:标签外挂（Tag Plugins</span><span class="reference-title">参考资料</span></span></span><span class="hidden-anchor" id="referto_[7]"></span><sup class="reference"><a href="#referfrom_[7]">[7]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">小弋の生活馆全样式预览</span><span class="reference-title">参考资料</span></span></span><span class="hidden-anchor" id="referto_[8]"></span><sup class="reference"><a href="#referfrom_[8]">[8]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">l-lin-font-awesome-animation</span><span class="reference-title">参考资料</span></span></span><span class="hidden-anchor" id="referto_[9]"></span><sup class="reference"><a href="#referfrom_[9]">[9]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">小康的butterfly主题使用文档</span><span class="reference-title">参考资料</span></span></span></p><div class="reference-source"><span class="hidden-anchor" id="referfrom_[1]"></span><a class="reference-anchor" href="#referto_[1]">[1]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://jq.qq.com/?_wv=1027&k=pGLB2C0N">Akilarの糖果屋群聊简介</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[2]"></span><a class="reference-anchor" href="#referto_[2]">[2]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://hexo.io/zh-cn/docs/">Hexo中文文档</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[3]"></span><a class="reference-anchor" href="#referto_[3]">[3]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://butterfly.js.org/posts/21cfbf15/">Butterfly 安装文档(一) 快速开始</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[4]"></span><a class="reference-anchor" href="#referto_[4]">[4]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://volantis.js.org/v5/tag-plugins/">hexo-theme-volantis 标签插件</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[5]"></span><a class="reference-anchor" href="#referto_[5]">[5]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://volantis.js.org/tag-plugins/">Volantis文档:内置标签插件</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[6]"></span><a class="reference-anchor" href="#referto_[6]">[6]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://butterfly.js.org/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89">Butterfly 安装文档:标签外挂（Tag Plugins</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[7]"></span><a class="reference-anchor" href="#referto_[7]">[7]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://lovelijunyi.gitee.io/posts/c898.html">小弋の生活馆全样式预览</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[8]"></span><a class="reference-anchor" href="#referto_[8]">[8]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://github.com/l-lin/font-awesome-animation">l-lin-font-awesome-animation</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[9]"></span><a class="reference-anchor" href="#referto_[9]">[9]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://www.antmoe.com/posts/3b43914f/">小康的butterfly主题使用文档</a></div><h3 id="十九、旋转相册"><a href="#十九、旋转相册" class="headerlink" title="十九、旋转相册"></a>十九、旋转相册</h3><div id='SF' class='carousel'><div id="SF-drag-container" class="drag-container"><div id="SF-spin-container" class="spin-container"><img src="https://assets.akilar.top/image/20200907110444226.png" alt=""><br><img src="https://assets.akilar.top/image/20200907110508327.png" alt=""><br><img src="https://assets.akilar.top/image/20200907110525753.png" alt=""><br><img src="https://assets.akilar.top/image/20200907110600751.png" alt=""><br><img src="https://assets.akilar.top/image/20200907110621554.png" alt=""><br><img src="https://assets.akilar.top/image/20200907110637459.png" alt=""><br><img src="https://assets.akilar.top/image/20200907110654150.png" alt=""><br><img src="https://assets.akilar.top/image/20200907110707916.png" alt=""><br><img src="https://assets.akilar.top/image/20200907110719787.png" alt=""><br><img src="https://assets.akilar.top/image/20200907110731118.png" alt=""><p>strike freedom</p></div><div id="SF-carousel-ground" class="carousel-ground"></div></div></div><script type="text/javascript">carouselinit('SF');</script><div class="tip ban faa-flash animated"><p>上述代码、注释均来自 <a href="https://akilar.top/posts/615e2dec">https://akilar.top/posts/615e2dec</a> 转载说明出处！</p></div>]]></content>
      
      
      <categories>
          
          <category> 记录 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自动打开编辑器</title>
      <link href="/posts/5342/"/>
      <url>/posts/5342/</url>
      
        <content type="html"><![CDATA[<blockquote><p> 用hexo写博客，每次写文章都是件麻烦事：对我来说，要先用Code打开Hexo工作区，然后Ctrl+` 打开终端先pull一下，再开始hexo new post something，接下来去目录找到_posts，点进去打开刚创建的md，然后，才开始写文章。</p></blockquote><p>这篇post就是解决众多繁杂步骤中的一环：</p><blockquote id="fn_1"><sup>1</sup>. testing<a href="#reffn_1" title="Jump back to footnote [1] in the text."> &#8617;</a></blockquote><p>找md文件然后打开的过程。</p><p>很简单，要做的就是写个脚本让NodeJS知道我什么时候新建了post，然后脚本帮我打开刚新建好的post.md，最主要的是，可以用自己喜爱的编辑器，比如说我用的是Typora。</p><p>在你的hexo目录下新建一个文件夹名叫scripts（你的hexo目录就是你执行hexo命令的目录）</p><p><code>mkdir scripts</code><br><code>cd scripts</code></p><p>在scripts文件夹里新建一个脚本文件叫做AutoOpenEditor.js（也可以是其他名字），内容如下：</p><p><code>let spawn = require(&#39;hexo-util/lib/spawn&#39;);</code></p><p><code>hexo.on(&#39;new&#39;, (data) =&gt; &#123;</code><br>  <code>spawn(&#39;C:/\Program Files/\Typora/\Typora.exe&#39;, [data.path]);</code><br><code>&#125;);</code></p><p>这几句话的大概意思就是，在检测到执行hexo new命令后，触发这个脚本，然后脚本执行C:\Program Files\Typora\Typora.exe [文件路径]这个命令，spawn()里就是要执行的命令和参数，<strong>有斜杠的话需要用转义符</strong>。<br>这里我用的是Typora编辑器，你也可以让它用VScode来打开：</p><p><code>let spawn = require(&#39;hexo-util/lib/spawn&#39;);</code></p><p><code>hexo.on(&#39;new&#39;, (data) =&gt; &#123;</code><br>  <code>spawn(&#39;code&#39;,&#39;-r&#39;,[data.path]);</code><br><code>&#125;);</code></p><p>这是针对在VScode里已经打开hexo目录工作区的情况，-r让code不打开新窗口，而是作为标签页打开。</p><p>这样就可以了，以后每次hexo new post，都会在新建后帮你打开编辑器，虽然只是少了一小环，但是让你写博客更有动力了不是。</p><blockquote><p>该文章引用自 <a href="https://xiaoxx.cc/open-your-farvorite-editor-after-new-hexo-post/">hexo new后自动打开你喜爱的编辑器 | XiaoXX的博客</a>转载请说明出处！</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 摘录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>句选</title>
      <link href="/posts/2d0c/"/>
      <url>/posts/2d0c/</url>
      
        <content type="html"><![CDATA[<ol><li><p>世间治愈的是愿意自渡的人</p></li><li><p>深海不会因为一杯沸水而加温</p></li><li><p>请成为永远疯狂永远浪漫永远清澈的存在</p></li><li><p>林语堂先生说过：明智的放弃胜过盲目的执着</p></li><li><p>如果天空是黑暗的,那就摸黑生存</p></li></ol><p>如果发出声音是危险的,那就保持沉默;</p><p>如果自觉无力发光的,那就蜷伏于墙角。</p><p>但不要习惯了黑暗就为黑暗辩护;</p><p>不要为自己的苟且而得意;</p><p>不要嘲讽那些比自己更勇敢热情的人们。</p><p>我们可以卑微如尘土,不可扭曲如蛆虫。</p><p>要常怀敬畏之心,不要被生活的繁琐消磨热情。</p><p>因为生活本就是平庸无度。</p><p>年轻时,用力去生活。</p><p>年老时,想象自己年轻时的模样,永远朝气蓬勃。</p><p>最后祝你们,一生平安,前程万锦。</p>]]></content>
      
      
      <categories>
          
          <category> 人文 </category>
          
          <category> 文学 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 摘录 </tag>
            
            <tag> 文学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>长沙医学院简介</title>
      <link href="/posts/a9f7/"/>
      <url>/posts/a9f7/</url>
      
        <content type="html"><![CDATA[<h1 id="长沙医学院简介"><a href="#长沙医学院简介" class="headerlink" title="长沙医学院简介"></a>长沙医学院简介</h1><p>长沙医学院是经国家教育部批准的民办全日制普通高等学校。</p><p>长沙医学院前身是何彬生教授于1989年创办的湘南中等卫生职业技术学校，1996年更名为湘南卫生中等专业学校，1999年升格为湘南医学高等专科学校，2001年校本部迁至长沙市，2005年经教育部批准升格为长沙医学院。2006年获得湖南省十佳民办学校称号，2011年通过国家教育部本科教学工作合格评估，2015年通过国家教育部临床医学专业认证，2017年列入湖南省硕士学位授予单位建设点。</p><p>截至2019年10月，学校占地面积141.50万平方米，建筑面积62.11万平方米；馆藏纸质图书243.93万册；设有16个二级学院，28个本科专业；有全日制在校生23646人，其中本科生19487人，外国留学生332人；有专任教师1758人。</p><h2 id="长沙医学院历史沿革"><a href="#长沙医学院历史沿革" class="headerlink" title="长沙医学院历史沿革"></a>长沙医学院历史沿革</h2><h3 id="湘南医学高等专科学校"><a href="#湘南医学高等专科学校" class="headerlink" title="湘南医学高等专科学校"></a>湘南医学高等专科学校</h3><p>1989年，何彬生教授创办湘南中等卫生职业技术学校。</p><p>1996年，学校更名为湘南卫生中等专业学校。</p><p>1999年，学校升格为湘南医学高等专科学校。</p><p>2001年，学校本部由衡阳市迁至长沙市。</p><p>2003年，学校通过湖南省专科学校教学工作合格评估。</p><h3 id="长沙医学院"><a href="#长沙医学院" class="headerlink" title="长沙医学院"></a>长沙医学院</h3><p>2005年，学校经国家教育部批准升格为长沙医学院。</p><p>2006年，长沙医学院获得湖南省十佳民办学校称号。</p><p>2007年，长沙医学院获得全国学校规范化管理示范单位称号。</p><p>2009年，长沙医学院获得2009年度中国民办高校毕业生竞争力十佳样本院校称号。</p><p>2010年，长沙医学院获得全国创建和谐校园先进单位称号。</p><p>2011年，长沙医学院通过国家教育部本科教学工作合格评估。</p><p>2015年，长沙医学院接受教育部临床专业认证评估合格。</p><p>2017年，湖南省教育厅公布长沙医学院入围拟新增硕士学位授权点。</p>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 摘录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>海子诗歌选</title>
      <link href="/posts/4134/"/>
      <url>/posts/4134/</url>
      
        <content type="html"><![CDATA[<p> <strong>海子诗歌的起点是生命元素，他的诗歌从生命的实体出发，海子说：“诗人的任务仅仅是用自己的敏感力和生命之光将黑乎乎的实体照亮”，它给我们展现了一个宏大的前景，让我们从当下的现实抬起头来，眺望远方。</strong></p><blockquote><p>从明天起，做一个幸福的人</p><p>喂马、劈柴，周游世界</p><p>从明天起，关心粮食和蔬菜</p><p>我有一所房子，面朝大海，春暖花开</p><p>从明天起，和每一个亲人通信</p><p>告诉他们我的幸福</p><p>那幸福的闪电告诉我的</p><p>我将告诉每一个人</p><p>给每一条河每一座山取一个温暖的名字</p><p>陌生人，我也为你祝福</p><p>愿你有一个灿烂的前程</p><p>愿你有情人终成眷属</p><p>愿你在尘世获得幸福</p><p>我只愿面朝大海，春暖花开</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 人文 </category>
          
          <category> 文学 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>毛选摘录</title>
      <link href="/posts/3718/"/>
      <url>/posts/3718/</url>
      
        <content type="html"><![CDATA[<h1 id="星星之火，可以燎原"><a href="#星星之火，可以燎原" class="headerlink" title="星星之火，可以燎原"></a><strong>星星之火，可以燎原</strong></h1><p>​                                                              <strong>（一九三〇年一月五日）</strong><br>​      在对于时局的估量和伴随而来的我们的行动问题上，我们党内有一部分同志还缺少正确的认识。他们虽然相信革命高潮不可避免地要到来，却不相信革命高潮有迅速到来的可能。因此他们不赞成争取江西的计划，而只赞成在福建、广东、江西之间的三个边界区域的流动游击，同时也没有在游击区域建立红色政权的深刻的观念，因此也就没有用这种红色政权的巩固和扩大去促进全国革命高潮的深刻的观念。他们似乎认为在距离革命高潮尚远的时期做这种建立政权的艰苦工作为徒劳，而希望用比较轻便的流动游击方式去扩大政治影响，等到全国各地争取群众的工作做好了，或做到某个地步了，然后再来一个全国武装起义，那时把红军的力量加上去，就成为全国范围的大革命。他们这种全国范围的、包括一切地方的、先争取群众后建立政权的理论，是于中国革命的实情不适合的。他们的这种理论的来源，主要是没有把中国是一个许多帝国主义国家互相争夺的半殖民地这件事认清楚。如果认清了中国是一个许多帝国主义国家互相争夺的半殖民地，则一，就会明白全世界何以只有中国有这种统治阶级内部互相长期混战的怪事，而且何以混战一天激烈一天，一天扩大一天，何以始终不能有一个统一的政权。二，就会明白农民问题的严重性，因之，也就会明白农村起义何以有现在这样的全国规模的发展。三，就会明白工农民主政权这个口号的正确。四，就会明白相应于全世界只有中国有统治阶级内部期混战的一件怪事而产生出来的另一件怪事，即红军和游击队的存在和发展，以及伴随着红军和游击队而来的，成长于四围白色政权中的小块红色区域的存在和发展（中国以外无此怪事）。五，也就会明白红军、游击队和红色区域的建立和发展，是半殖民地中国在无产阶级领导之下的农民斗争的最高形式，和半殖民地农民斗争发展的必然结果；并且无疑义地是促进全国革命高潮的最重要因素。六，也就会明白单纯的流动游击政策，不能完成促进全国革命高潮的任务，而朱德毛泽东式、方志敏⑴式之有根据地的，有计划地建设政权的，深入土地革命的，扩大人民武装的路线是经由乡赤卫队、区赤卫大队、县赤卫总队、地方红军直至正规红军这样一套办法的，政权发展是波浪式地向前扩大的，等等的政策，无疑义地是正确的。必须这样，才能树立全国革命群众的信仰，如苏联之于全世界然。必须这样，才能给反动统治阶级以甚大的困难，动摇其基础而促进其内部的分解。也必须这样，才能真正地创造红军，成为将来大革命的主要工具。总而言之，必须这样，才能促进革命的高潮。</p>]]></content>
      
      
      <categories>
          
          <category> 人文 </category>
          
          <category> 文学 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 摘录 </tag>
            
            <tag> 文学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>热爱生命</title>
      <link href="/posts/ab0a/"/>
      <url>/posts/ab0a/</url>
      
        <content type="html"><![CDATA[<p>我不去想是否能够成功</p><p>既然选择了远方</p><p>便只顾风雨兼程</p><p>我不去想能否赢得爱情</p><p>既然钟情于玫瑰</p><p>就勇敢地吐露真诚</p><p>我不去想身后会不会袭来寒风冷雨</p><p>既然目标是地平线</p><p>留给世界的只能是背影</p><p>我不去想未来是平坦还是泥泞</p><p>只要热爱生命</p><p>一切，都在意料之中</p>]]></content>
      
      
      <categories>
          
          <category> 人文 </category>
          
          <category> 文学 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 摘录 </tag>
            
            <tag> 文学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/posts/3eeb/"/>
      <url>/posts/3eeb/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 摘录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于枫糖博客事件的正面回应</title>
      <link href="/posts/c0af8fff/"/>
      <url>/posts/c0af8fff/</url>
      
        <content type="html"><![CDATA[<p>如果你能看到这篇文章,那真的很抱歉,说明枫糖这人又开始作妖了.</p><span id="more"></span><p>首先我们把事情捋一遍.</p><blockquote><p>由于其博客已被其主动关闭,所有证据均是从我能收集到的部分截图的,包括网页快照和WayBackMachine</p></blockquote><h1 id="他干了什么"><a href="#他干了什么" class="headerlink" title="他干了什么"></a>他干了什么</h1><p>首先,这人在<a href="https://blog.maplesugar.top/valine-prank/">对valine评论系统的恶作剧</a>一文中详细阐述了自己刷Valine的经过.原文可能打不开,你可以通过<a href="https://webcache.googleusercontent.com/search?q=cache:x-4Jwl2NkGUJ:https://blog.maplesugar.top/valine-prank/+&amp;cd=1&amp;hl=zh-CN&amp;ct=clnk">谷歌快照</a>或<a href="https://web.archive.org/web/20211211161854/https://blog.maplesugar.top/valine-prank/">网页时光机</a>阅读原文.</p><p>在这篇文章中,他以高调的形式,讲述自己如何利用Valine的XSS漏洞给他人网页植入恶意js脚本:</p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/1.jpg" alt=""></p><p>并且认为很好玩:</p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/1.png" alt=""></p><p>就这一点就可以看出他的态度极其不端正,以恶作剧别人来取乐自己.</p><p>经过别人提醒,他暂时隐藏了脚本:</p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/2.jpg" alt=""></p><p>但仍保持无所谓态度,并且强加因果,以<code>因为我攻击了Valie</code>推出<code>我帮Valine修复了漏洞</code></p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/2.png" alt=""></p><p>并且<a href="https://webcache.googleusercontent.com/search?q=cache:LI2ze-Z6N3cJ:https://blog.maplesugar.top/valine-prank-think/+&amp;cd=2&amp;hl=zh-CN&amp;ct=clnk">依旧偏执保持着自己的观点(GoogleCache)</a></p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/3.jpg" alt=""></p><p><a href="https://blog.maplesugar.top/valine-prank-statistic/">仍然继续发文炫耀(源站,目前是关闭的)</a>:</p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/3.png" alt=""></p><p>对Valine的恶意攻击其实不在少数,据我所知,<a href="https://xiaokang.top">小康</a>也写过用python脚本恶意刷Valine的脚本.</p><p>然后关于我,我并不是受害者.我在看到群里头群友一直在辱骂他,顺便点进去看了看,然后立刻就被这奇葩的三观震惊到了.最后,我在他博客上留言:</p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/4.png" alt=""></p><p>首先我承认你的ctf技术比大多数人好，包括我，但利用漏洞攻击别人，赢得所谓的虚荣心，这就是你所说的技艺高超？你的行为已经严重影响到了别人的正常使用，即使你对valine不满，或对其他人的博客心存嫉妒，大可自己努力学习，写出更好的评论系统或文章，从正面碾压别人，赢得大家掌声，让人家心服口服，而不是恶心别人，做那君子行为，万世流芳。</p><h1 id="我为什么要报复"><a href="#我为什么要报复" class="headerlink" title="我为什么要报复"></a>我为什么要报复</h1><p>首先,他是这么回复的:</p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/4.jpg" alt=""></p><p>纯粹是<strong>纯粹是为了玩一下哦</strong>,<strong>就几个评论，删除就完了，也不会对博主造成什么困扰啊？</strong>,能说出这种言论的,绝大多数都是反社会人格,偏激,自我主义,丝毫不顾忌他人感受.如果你是开玩笑,那么玩笑是建立在<strong>对方也觉得好笑</strong>的时候才能成立,否则这只能成为单方面的攻击,那么就没有理由在对方反击你的时候狡辩.</p><p><strong>我恶作剧一两天，valine就发布了新版本，valine可是十多个月没有修复了，我怎么说也算有点贡献吧？</strong> 首先,Valine是个个人维护的开源项目,如果你发现了漏洞,应当是直接提出issue并等待修复,这才是一个正确的解决方法路径.即使你认为Valine开发者懒,不敲打就不会更新,那你也更不应该滥用此漏洞攻击无辜之人,从而满足自己的扭曲的虚荣心和变态的恶作剧心理.</p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/5.jpg" alt=""></p><p><strong>手持利刃,刀口不应指向无辜之人</strong></p><p><span  class="heimu">更何况,这还是把钝刀</span></p><p>留完言后,我就简单的看了一下他的回答,摇头叹息,这人怎么说道理都没用,三观已经腐化了.然后我就没有继续关注这件事情.</p><p>当然,我也在Valine群和其他水群中继续听闻了这件事情,但一直都没有怎么放在心上.</p><p>直到大过年翻邮件的时候看到了新的回复:</p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/5.png" alt=""></p><p><code>懵</code>字都不会写,小学生确认完毕,三年级不能再多了.</p><p>这令我感到气愤而难过,如此欠揍又油盐不进,然后我赶到他的博客底下翻了翻</p><p>有人只是解析出了其博客CloudFlareCDN节点的ip,被他嘲讽了一波.</p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/7.jpg" alt=""></p><p>以及他还挺欢迎别人搞他博客的?</p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/8.jpg" alt=""></p><p>于是我直接找到了他的源站地址,并小小的威胁了他一下:</p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/6.jpg" alt=""></p><p>但是他是这么回复的:</p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/6.png" alt=""></p><p>我并不是那种<strong>锱铢必较</strong>的人,但他这份言论侮辱了我的人格和我的父母,既然找到了他的源ip,那我就对其小小的报复了一下.</p><h1 id="报复的结果"><a href="#报复的结果" class="headerlink" title="报复的结果"></a>报复的结果</h1><p>CC攻击流量150GB持续两小时,UDPFlood流量600GB持续半小时,CC数据库高频查询200线程持续一小时</p><p>UDP攻击似乎大部分被DigitalOcean防火墙吃了,于是简单打了一下就主用CC</p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/9.jpg" alt=""></p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/10.jpg" alt=""></p><h1 id="证据截图"><a href="#证据截图" class="headerlink" title="证据截图"></a>证据截图</h1><h2 id="2-2-10-24pm"><a href="#2-2-10-24pm" class="headerlink" title="2-2 10:24pm"></a>2-2 10:24pm</h2><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/11.jpg" alt=""></p><h2 id="2-2-10-39pm"><a href="#2-2-10-39pm" class="headerlink" title="2-2 10:39pm"></a>2-2 10:39pm</h2><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/7.png" alt=""></p><h2 id="2-2-10-53pm"><a href="#2-2-10-53pm" class="headerlink" title="2-2 10:53pm"></a>2-2 10:53pm</h2><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/8.png" alt=""></p><h2 id="2-2-10-57pm"><a href="#2-2-10-57pm" class="headerlink" title="2-2 10:57pm"></a>2-2 10:57pm</h2><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/13.jpg" alt=""></p><h2 id="2-2-11-03pm"><a href="#2-2-11-03pm" class="headerlink" title="2-2 11:03pm"></a>2-2 11:03pm</h2><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/8.png" alt=""></p><h2 id="2-2-11-06pm"><a href="#2-2-11-06pm" class="headerlink" title="2-2 11:06pm"></a>2-2 11:06pm</h2><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/13.jpg" alt=""></p><h2 id="2-2-11-23pm"><a href="#2-2-11-23pm" class="headerlink" title="2-2 11:23pm"></a>2-2 11:23pm</h2><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/14.jpg" alt=""></p><h2 id="2-2-11-33pm"><a href="#2-2-11-33pm" class="headerlink" title="2-2 11:33pm"></a>2-2 11:33pm</h2><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/15.jpg" alt=""></p><h2 id="2-3-00-01pm"><a href="#2-3-00-01pm" class="headerlink" title="2-3 00:01pm"></a>2-3 00:01pm</h2><blockquote><p>此时对面博客已经打垮了,这是在我的博客上留言的</p><p>注意时间是在上文睡觉后发的</p></blockquote><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/16.jpg" alt=""></p><h2 id="2-3-00-02pm"><a href="#2-3-00-02pm" class="headerlink" title="2-3 00:02pm"></a>2-3 00:02pm</h2><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/17.jpg" alt=""></p><h2 id="2-3-00-03pm"><a href="#2-3-00-03pm" class="headerlink" title="2-3 00:03pm"></a>2-3 00:03pm</h2><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/18.jpg" alt=""></p><h2 id="2-3-00-05pm"><a href="#2-3-00-05pm" class="headerlink" title="2-3 00:05pm"></a>2-3 00:05pm</h2><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/19.jpg" alt=""></p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/20.jpg" alt=""></p><h1 id="我的正面回应"><a href="#我的正面回应" class="headerlink" title="我的正面回应"></a>我的正面回应</h1><p>首先总结一下骂人规律:以妈为中心,亲戚关系为半径,以性侮辱性关系为立体维度,画个球,然后在这个集合里面一个一个骂过去,主用你妈的,次用我是你爹,夹带白莲花 大头鬼等高端词语,尝试用强加伦理关系压制,并且搞不过就创造一个子虚乌有的高级朋.最后尝试各种侮辱性脏字堵住别人的嘴.</p><p>这种行为极其类似鲁迅笔下的阿Q,试图强加一个单方面的伦理关系自我满足,妥妥的一个可怜的小人行为，以这种姿态还想妄称为别人的爹，简直就是小丑行为。</p><p>以及各种奇葩言论，前叫嚣<strong>特别期待</strong>,后面又试图搬出一个朋友威胁我不要攻击;宣称自己有很多流量,被刷的时候又破口大骂;以及用自己扭曲的价值观来妄图矫正我的观点.</p><p>所有的言论更像是出于一种宣泄情绪的存在,没有共情能力,满口脏字却词汇贫乏,丝毫不见理性.</p><p>关于攻击理由，我并不是无缘无故就照着你的博客开始打，大部分人应该能看出其恶意。你攻击别人的行为只是处于一种恶趣味，尝试通过入侵的方式满足自己扭曲的傲气。并且你攻击别人的方式甚至不是自己研究出来的，而是照抄issue里面的样例代码实行攻击。而我攻击的原因是你侮辱了我，并且你自身完全没有意识到自己的错误，依旧偏执地认为自己只是开个玩笑无伤大雅。</p><p><strong>这几把小学生的脾气，调侃一句就受不了了？</strong>如果你认为我是小学生脾气,并且你认为你的行为是调侃,那我并不承认.你的各种言语已经严重侵犯了我的人格,并且,在说我脾气不好的时候,请你自己看看你是为什么攻击别人的呢?</p><p><a href="https://webcache.googleusercontent.com/search?q=cache:LI2ze-Z6N3cJ:https://blog.maplesugar.top/valine-prank-think/+&amp;cd=2&amp;hl=zh-CN&amp;ct=clnk">valine恶作剧回忆录(GoogleCache)</a></p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r12/12.jpg" alt=""></p><p>只是<code>那就别用</code>,并没有主动挑衅,一句简单的拒绝的话语连基本情感语句都读不出,还多次踩点报复.你这又是何德称我为<code>小学生</code>呢.</p><p>既然你认为我要早点搞死你,那我就真的这么做了.</p><p>如果你只是认为关站只是看不起我,那抱歉,在互联网中,这种攻击行为无论是<strong>君子游戏</strong>还是<strong>恶意打击</strong>,只要你防御不住，关站了，就意味着投降，无论是基于什么原因。</p><p>你认为我的攻击方式很low,只要你是选择了投降,就意味着你是个loser.然而loser是完全没有资格在君子游戏后还继续嘲讽。</p><p>无论我使用什么技术，你关站了，就意味着认输，你也就失去了对我挑衅的资格。</p><p>更可笑的是，在防御不住的时候还要搬出子虚乌有的朋友，声称上面有重要文件。你应该在高调宣称自己就是攻击者的时候就要做好防御措施，而不是发一份无能狂怒的威胁信。</p><p>如果你继续把你的行为称之为高尚，我只能说包括我在内，大部分人都不会附和。这完全是一种强加意愿，不顾他人的三观腐败行为，妥妥的九年义务教育没读完的那种。</p><p>你这种行为已经欺辱到我的人格，你可以不赞同我说的话，但你不能对我人身攻击。我不是那种锱铢必较的人，更非虚与委蛇，你对我造成了侮辱，我必定会报复。</p><h1 id="End"><a href="#End" class="headerlink" title="End"></a>End</h1><p>可能会有人认为我报复的手段可能过于残忍，但对于我来说已经是最快捷的报复方式了，并且对于这种人来说，以牙还牙最为简便。</p><p>至于枫糖，你如果还想对线请只在这篇文章下骂，并且麻烦不要带脏字。我甚至可以给你搞一个置顶，只要你不担心别人把你喷死就行。</p>]]></content>
      
      
      <categories>
          
          <category> 张檄文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 回应 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>艹,你怎么能这样 - SWの奇技淫巧</title>
      <link href="/posts/c0af8604/"/>
      <url>/posts/c0af8604/</url>
      
        <content type="html"><![CDATA[<p>ServiceWorker很厉害,那他能干什么?这篇文章我将写出几个我写的\我在用的\我看到的几个奇葩但很有用处的小项目,希望这些能够帮到你.</p><span id="more"></span><blockquote><p>本文所标记的内容,大多是直接复制粘贴即可实现的.但依然会存在这和您的服务存在冲突这一情况.请阅读上一篇基础文章<a href="/p/c0af86bb.html">欲善其事，必利其器 - 论如何善用ServiceWorker</a>进行合理的修改.</p></blockquote><h1 id="前端智能切换NPM-Github-CDN节点-IntelligentCDN计划"><a href="#前端智能切换NPM-Github-CDN节点-IntelligentCDN计划" class="headerlink" title="前端智能切换NPM/Github CDN节点 - IntelligentCDN计划"></a>前端智能切换NPM/Github CDN节点 - IntelligentCDN计划</h1><p>众所周知,jsd国内掉备案,能用的节点几乎不存在.这个脚本将在SW端通过Promise.any的方式,在用户界面上劫持所有著名的CDN托管服务,并并发访问其他所有CDN,优选选择最快的节点并返回内容,同时可以避免部分CDN单点故障,提升页面静态资源加载速度和加载可用性.</p><p>同时,这个脚本还会将非latest资源永久缓存,提升二次访问速度.</p><blockquote><p>注意,此方法是以流量换速度的方式进行的,虽然在任何一个节点返回正确内容后会打断其余请求,但依然会造成不可避免的流量消耗(+~20%).如果你面向的是手机流量用户,请三思而后行</p><p>在这其中,<code>pigax_chenyfan</code>为我赞助的JP海外二次落地+pigax国内流量分发,此节点屏蔽色情与政治;<code>tianli</code>有自己的许可条款,建议前往<a href="https://tianli-blog.club/2022/01/26/cdn/">Tianli免费JSD镜像申请页</a>查看详细</p><p>此代码与<a href="https://github.com/EtherDream/freecdn-js">freecdn-js</a>核心功能相似,但实现方法并不同,并且完全支持动态网页.</p><p>此脚本仅加速npm\gh\jsd上的combine内容;WP加速原理类似,请自行更改.</p></blockquote><details>    <summary>ServiceWorker完整代码:</summary><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">CACHE_NAME</span> = <span class="string">&#x27;ICDNCache&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> cachelist = [];</span><br><span class="line">self.<span class="title function_">addEventListener</span>(<span class="string">&#x27;install&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">installEvent</span>) &#123;</span><br><span class="line">    self.<span class="title function_">skipWaiting</span>();</span><br><span class="line">    installEvent.<span class="title function_">waitUntil</span>(</span><br><span class="line">        caches.<span class="title function_">open</span>(<span class="variable constant_">CACHE_NAME</span>)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">cache</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Opened cache&#x27;</span>);</span><br><span class="line">                <span class="keyword">return</span> cache.<span class="title function_">addAll</span>(cachelist);</span><br><span class="line">            &#125;)</span><br><span class="line">    );</span><br><span class="line">&#125;);</span><br><span class="line">self.<span class="title function_">addEventListener</span>(<span class="string">&#x27;fetch&#x27;</span>, <span class="keyword">async</span> event =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        event.<span class="title function_">respondWith</span>(<span class="title function_">handle</span>(event.<span class="property">request</span>))</span><br><span class="line">    &#125; <span class="keyword">catch</span> (msg) &#123;</span><br><span class="line">        event.<span class="title function_">respondWith</span>(<span class="title function_">handleerr</span>(event.<span class="property">request</span>, msg))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleerr</span> = <span class="keyword">async</span> (<span class="params">req, msg</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">`&lt;h1&gt;CDN分流器遇到了致命错误&lt;/h1&gt;</span></span><br><span class="line"><span class="string">    &lt;b&gt;<span class="subst">$&#123;msg&#125;</span>&lt;/b&gt;`</span>, &#123; <span class="attr">headers</span>: &#123; <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;text/html; charset=utf-8&quot;</span> &#125; &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> cdn = &#123;</span><br><span class="line">    <span class="string">&quot;gh&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">jsdelivr</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://cdn.jsdelivr.net/gh&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">jsdelivr_fastly</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://fastly.jsdelivr.net/gh&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">jsdelivr_gcore</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://gcore.jsdelivr.net/gh&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">pigax_jsd</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://u.pigax.cn/gh&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">pigax_chenyfan_jsd</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://cdn-jsd.pigax.cn/gh&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">tianli</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://cdn1.tianli0.top/gh&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;combine&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">jsdelivr</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://cdn.jsdelivr.net/combine&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">jsdelivr_fastly</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://fastly.jsdelivr.net/combine&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">jsdelivr_gcore</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://gcore.jsdelivr.net/combine&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">pigax_jsd</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://u.pigax.cn/combine&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">pigax_chenyfan_jsd</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://cdn-jsd.pigax.cn/combine&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">tianli</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://cdn1.tianli0.top/combine&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;npm&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">eleme</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://npm.elemecdn.com&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">jsdelivr</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://cdn.jsdelivr.net/npm&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">zhimg</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://unpkg.zhimg.com&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">unpkg</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://unpkg.com&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">bdstatic</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://code.bdstatic.com/npm&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">pigax_jsd</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://u.pigax.cn/npm&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">pigax_unpkg</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://unpkg.pigax.cn/&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">pigax_chenyfan_jsd</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://cdn-jsd.pigax.cn/npm&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">tianli</span>: &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://cdn1.tianli0.top/npm&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> handle = <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">req</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> urlStr = req.<span class="property">url</span></span><br><span class="line">    <span class="keyword">const</span> domain = (urlStr.<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>))[<span class="number">2</span>]</span><br><span class="line">    <span class="keyword">let</span> urls = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> cdn) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j <span class="keyword">in</span> cdn[i]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (domain == cdn[i][j].<span class="property">url</span>.<span class="title function_">split</span>(<span class="string">&#x27;https://&#x27;</span>)[<span class="number">1</span>].<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>)[<span class="number">0</span>] &amp;&amp; urlStr.<span class="title function_">match</span>(cdn[i][j].<span class="property">url</span>)) &#123;</span><br><span class="line">                urls = []</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">in</span> cdn[i]) &#123;</span><br><span class="line">                    urls.<span class="title function_">push</span>(urlStr.<span class="title function_">replace</span>(cdn[i][j].<span class="property">url</span>, cdn[i][k].<span class="property">url</span>))</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (urlStr.<span class="title function_">indexOf</span>(<span class="string">&#x27;@latest/&#x27;</span>) &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="title function_">lfetch</span>(urls, urlStr)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> caches.<span class="title function_">match</span>(req).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">resp</span>) &#123;</span><br><span class="line">                        <span class="keyword">return</span> resp || <span class="title function_">lfetch</span>(urls, urlStr).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">                            <span class="keyword">return</span> caches.<span class="title function_">open</span>(<span class="variable constant_">CACHE_NAME</span>).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">cache</span>) &#123;</span><br><span class="line">                                cache.<span class="title function_">put</span>(req, res.<span class="title function_">clone</span>());</span><br><span class="line">                                <span class="keyword">return</span> res;</span><br><span class="line">                            &#125;);</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">fetch</span>(req)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">lfetch</span> = <span class="keyword">async</span> (<span class="params">urls, url</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> controller = <span class="keyword">new</span> <span class="title class_">AbortController</span>();</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">PauseProgress</span> = <span class="keyword">async</span> (<span class="params">res</span>) =&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="keyword">await</span> (res).<span class="title function_">arrayBuffer</span>(), &#123; <span class="attr">status</span>: res.<span class="property">status</span>, <span class="attr">headers</span>: res.<span class="property">headers</span> &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Promise</span>.<span class="property">any</span>) &#123;</span><br><span class="line">        <span class="title class_">Promise</span>.<span class="property">any</span> = <span class="keyword">function</span> (<span class="params">promises</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">                promises = <span class="title class_">Array</span>.<span class="title function_">isArray</span>(promises) ? promises : []</span><br><span class="line">                <span class="keyword">let</span> len = promises.<span class="property">length</span></span><br><span class="line">                <span class="keyword">let</span> errs = []</span><br><span class="line">                <span class="keyword">if</span> (len === <span class="number">0</span>) <span class="keyword">return</span> <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">AggregateError</span>(<span class="string">&#x27;All promises were rejected&#x27;</span>))</span><br><span class="line">                promises.<span class="title function_">forEach</span>(<span class="function">(<span class="params">promise</span>) =&gt;</span> &#123;</span><br><span class="line">                    promise.<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="title function_">resolve</span>(value)</span><br><span class="line">                    &#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">                        len--</span><br><span class="line">                        errs.<span class="title function_">push</span>(err)</span><br><span class="line">                        <span class="keyword">if</span> (len === <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">AggregateError</span>(errs))</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">any</span>(urls.<span class="title function_">map</span>(<span class="function"><span class="params">urls</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">fetch</span>(urls, &#123;</span><br><span class="line">                <span class="attr">signal</span>: controller.<span class="property">signal</span></span><br><span class="line">            &#125;)</span><br><span class="line">                .<span class="title function_">then</span>(<span class="title class_">PauseProgress</span>)</span><br><span class="line">                .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (res.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">                        controller.<span class="title function_">abort</span>();</span><br><span class="line">                        <span class="title function_">resolve</span>(res)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="title function_">reject</span>(res)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h1 id="ServiceWorker隐形代理"><a href="#ServiceWorker隐形代理" class="headerlink" title="ServiceWorker隐形代理"></a>ServiceWorker隐形代理</h1><p>纵使这样,如果源服务器在CloudFlare,国内访问效果依旧不尽人意.此时如果我们能够加速所有链接,岂不是更上一层楼?</p><p>我们可以在自己的服务器上写一个反代脚本,然后劫持白名单内流量加速:</p><blockquote><p><strong>请修改白名单内容</strong></p></blockquote><details>    <summary>服务端代码[CloudFlareWorker样例]:</summary><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> white_list = <span class="regexp">/^([a-zA-Z\d-_\*@]+\.|)+(cyfan\.top|eurekac\.cn|stackoverflow\.com|github\.com)$/g</span></span><br><span class="line"><span class="comment">//白名单,正则写法</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handler</span> = <span class="keyword">async</span> (<span class="params">req</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> urlStr = req.<span class="property">url</span>;</span><br><span class="line">    <span class="keyword">const</span> urlObj = <span class="keyword">new</span> <span class="title function_">URL</span>(urlStr);</span><br><span class="line">    <span class="keyword">const</span> domain = urlObj.<span class="property">hostname</span>;</span><br><span class="line">    <span class="keyword">const</span> origin_domain = req.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;c-origin&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (req.<span class="property">method</span> == <span class="string">&quot;OPTIONS&quot;</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;OPTIONS&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">handleOptions</span>(req)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!origin_domain) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&quot;No Such Endpoint&quot;</span>, &#123; <span class="attr">status</span>: <span class="number">500</span> &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (origin_domain.<span class="title function_">match</span>(white_list)) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (req.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;c-type&#x27;</span>) === <span class="string">&quot;CORS&quot;</span>) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(urlStr.<span class="title function_">replace</span>(domain, origin_domain), &#123;</span><br><span class="line">                    <span class="attr">method</span>: req.<span class="property">method</span>,</span><br><span class="line">                    <span class="attr">headers</span>: req.<span class="property">headers</span>,</span><br><span class="line">                    <span class="attr">body</span>: req.<span class="property">body</span></span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="keyword">await</span> res.<span class="title function_">arrayBuffer</span>(), &#123;</span><br><span class="line">                    <span class="attr">headers</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;content-type&quot;</span>: res.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&quot;content-type&quot;</span>),</span><br><span class="line">                        <span class="string">&quot;Access-Control-Allow-Origin&quot;</span>: <span class="string">&quot;*&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;x-server&quot;</span>: <span class="string">&quot;Chen&#x27;s Invisible Proxy&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">status</span>: <span class="keyword">await</span> res.<span class="property">status</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="title function_">fetch</span>(urlStr.<span class="title function_">replace</span>(domain, origin_domain), &#123;</span><br><span class="line">                    <span class="attr">method</span>: req.<span class="property">method</span>,</span><br><span class="line">                    <span class="attr">headers</span>: req.<span class="property">headers</span>,</span><br><span class="line">                    <span class="attr">body</span>: req.<span class="property">body</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&quot;Endpoint Is Not Allowed&quot;</span>, &#123; <span class="attr">status</span>: <span class="number">403</span> &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> corsHeaders = &#123;</span><br><span class="line">    <span class="string">&quot;Access-Control-Allow-Origin&quot;</span>: <span class="string">&quot;*&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Access-Control-Allow-Methods&quot;</span>: <span class="string">&quot;GET,HEAD,POST,OPTIONS&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Access-Control-Max-Age&quot;</span>: <span class="string">&quot;86400&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleOptions</span>(<span class="params">request</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> headers = request.<span class="property">headers</span>;</span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">        headers.<span class="title function_">get</span>(<span class="string">&quot;Origin&quot;</span>) !== <span class="literal">null</span> &amp;&amp;</span><br><span class="line">        headers.<span class="title function_">get</span>(<span class="string">&quot;Access-Control-Request-Method&quot;</span>) !== <span class="literal">null</span> &amp;&amp;</span><br><span class="line">        headers.<span class="title function_">get</span>(<span class="string">&quot;Access-Control-Request-Headers&quot;</span>) !== <span class="literal">null</span></span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="keyword">let</span> respHeaders = &#123;</span><br><span class="line">            ...corsHeaders,</span><br><span class="line">            <span class="string">&quot;Access-Control-Allow-Headers&quot;</span>: request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&quot;Access-Control-Request-Headers&quot;</span>),</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="literal">null</span>, &#123;</span><br><span class="line">            <span class="attr">headers</span>: respHeaders,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="literal">null</span>, &#123;</span><br><span class="line">            <span class="attr">headers</span>: &#123;</span><br><span class="line">                <span class="title class_">Allow</span>: <span class="string">&quot;GET, HEAD, POST, OPTIONS&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">addEventListener</span>(<span class="string">&#x27;fetch&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">    event.<span class="title function_">respondWith</span>(<span class="title function_">handler</span>(event.<span class="property">request</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></details><blockquote><p>请注意修改白名单内容和EndPoint</p></blockquote><details>    <summary>ServiceWorker完整代码:</summary><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> white_list = <span class="regexp">/^([a-zA-Z\d-_\*@]+\.|)+(cyfan\.top|eurekac\.cn|stackoverflow\.com|github\.com)$/g</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> proxy_endpoint = [</span><br><span class="line">    <span class="string">&#x27;cnk.cyfan.workers.dev&#x27;</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改上面两个变量</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">CACHE_NAME</span> = <span class="string">&#x27;IProxyCache&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> cachelist = [];</span><br><span class="line">self.<span class="title function_">addEventListener</span>(<span class="string">&#x27;install&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">installEvent</span>) &#123;</span><br><span class="line">    self.<span class="title function_">skipWaiting</span>();</span><br><span class="line">    installEvent.<span class="title function_">waitUntil</span>(</span><br><span class="line">        caches.<span class="title function_">open</span>(<span class="variable constant_">CACHE_NAME</span>)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">cache</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Opened cache&#x27;</span>);</span><br><span class="line">                <span class="keyword">return</span> cache.<span class="title function_">addAll</span>(cachelist);</span><br><span class="line">            &#125;)</span><br><span class="line">    );</span><br><span class="line">&#125;);</span><br><span class="line">self.<span class="title function_">addEventListener</span>(<span class="string">&#x27;fetch&#x27;</span>, <span class="keyword">async</span> event =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        event.<span class="title function_">respondWith</span>(<span class="title function_">handle</span>(event.<span class="property">request</span>))</span><br><span class="line">    &#125; <span class="keyword">catch</span> (msg) &#123;</span><br><span class="line">        event.<span class="title function_">respondWith</span>(<span class="title function_">handleerr</span>(event.<span class="property">request</span>, msg))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleerr</span> = <span class="keyword">async</span> (<span class="params">req, msg</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">`&lt;h1&gt;IProxy遇到了致命错误&lt;/h1&gt;</span></span><br><span class="line"><span class="string">    &lt;b&gt;<span class="subst">$&#123;msg&#125;</span>&lt;/b&gt;`</span>, &#123; <span class="attr">headers</span>: &#123; <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;text/html; charset=utf-8&quot;</span> &#125; &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//固定头</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">lfetch</span> = <span class="keyword">async</span> (<span class="params">urls, url, init</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> controller = <span class="keyword">new</span> <span class="title class_">AbortController</span>();</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">PauseProgress</span> = <span class="keyword">async</span> (<span class="params">res</span>) =&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="keyword">await</span> (res).<span class="title function_">arrayBuffer</span>(), &#123; <span class="attr">status</span>: res.<span class="property">status</span>, <span class="attr">headers</span>: res.<span class="property">headers</span> &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Promise</span>.<span class="property">any</span>) &#123;</span><br><span class="line">        <span class="title class_">Promise</span>.<span class="property">any</span> = <span class="keyword">function</span> (<span class="params">promises</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">                promises = <span class="title class_">Array</span>.<span class="title function_">isArray</span>(promises) ? promises : []</span><br><span class="line">                <span class="keyword">let</span> len = promises.<span class="property">length</span></span><br><span class="line">                <span class="keyword">let</span> errs = []</span><br><span class="line">                <span class="keyword">if</span> (len === <span class="number">0</span>) <span class="keyword">return</span> <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">AggregateError</span>(<span class="string">&#x27;All promises were rejected&#x27;</span>))</span><br><span class="line">                promises.<span class="title function_">forEach</span>(<span class="function">(<span class="params">promise</span>) =&gt;</span> &#123;</span><br><span class="line">                    promise.<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="title function_">resolve</span>(value)</span><br><span class="line">                    &#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">                        len--</span><br><span class="line">                        errs.<span class="title function_">push</span>(err)</span><br><span class="line">                        <span class="keyword">if</span> (len === <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">AggregateError</span>(errs))</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">any</span>(urls.<span class="title function_">map</span>(<span class="function"><span class="params">urls</span> =&gt;</span> &#123;</span><br><span class="line">        init = init || &#123;&#125;</span><br><span class="line">        init.<span class="property">signal</span> = controller.<span class="property">signal</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">fetch</span>(urls, init)</span><br><span class="line">                .<span class="title function_">then</span>(<span class="title class_">PauseProgress</span>)</span><br><span class="line">                .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (res.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">                        controller.<span class="title function_">abort</span>();</span><br><span class="line">                        <span class="title function_">resolve</span>(res)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="title function_">reject</span>(res)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//支持自定义Init的并发fetch</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handle = <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">req</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> urlStr = req.<span class="property">url</span></span><br><span class="line">    <span class="keyword">const</span> domain = (urlStr.<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>))[<span class="number">2</span>]</span><br><span class="line">    <span class="keyword">if</span> (domain.<span class="title function_">match</span>(white_list)) &#123;</span><br><span class="line">        <span class="keyword">let</span> proxy_url = []</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> proxy_endpoint) &#123;</span><br><span class="line">            proxy_url.<span class="title function_">push</span>(urlStr.<span class="title function_">replace</span>(domain, proxy_endpoint[i]))</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> proxy_header = <span class="keyword">new</span> <span class="title class_">Headers</span>()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> req.<span class="property">headers</span>) &#123;</span><br><span class="line">            proxy_header.<span class="title function_">set</span>(key, value)</span><br><span class="line">        &#125;</span><br><span class="line">        proxy_header.<span class="title function_">set</span>(<span class="string">&#x27;c-origin&#x27;</span>, domain)</span><br><span class="line">        <span class="comment">//在header中指定实际域名</span></span><br><span class="line">        proxy_header.<span class="title function_">set</span>(<span class="string">&#x27;c-type&#x27;</span>, <span class="string">&#x27;CORS&#x27;</span>)</span><br><span class="line">        <span class="comment">//还原整个fetch</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">lfetch</span>(proxy_url, urlStr, &#123;</span><br><span class="line">            <span class="attr">method</span>: req.<span class="property">method</span>,</span><br><span class="line">            <span class="attr">headers</span>: proxy_header,</span><br><span class="line">            <span class="attr">body</span>: req.<span class="property">body</span></span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!res) &#123; <span class="keyword">throw</span> <span class="string">&#x27;error&#x27;</span> &#125;</span><br><span class="line">            <span class="keyword">return</span> caches.<span class="title function_">open</span>(<span class="variable constant_">CACHE_NAME</span>).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">cache</span>) &#123;</span><br><span class="line">                cache.<span class="title function_">delete</span>(req);</span><br><span class="line">                cache.<span class="title function_">put</span>(req, res.<span class="title function_">clone</span>());</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> caches.<span class="title function_">match</span>(req).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">resp</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> resp || <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="literal">null</span>,&#123;<span class="attr">status</span>:<span class="number">500</span>)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">fetch</span>(req)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><blockquote><p>我的反代Endpoint已开启了白名单,暂时不接受申请.</p></blockquote><h1 id="Zaraz-IntelligentCDN"><a href="#Zaraz-IntelligentCDN" class="headerlink" title="Zaraz + IntelligentCDN"></a>Zaraz + IntelligentCDN</h1><p>额外的,这个功能还可以与CloudFlare新出的<code>Zaraz</code>插件完美匹配.<code>Zaraz</code>可以为托管在CF的网站上的网页添加一段html代码,配合CloudFlareWorker虚拟化sw脚本路径,即可做到每一个页面都用此脚本加速,无需手动一个一个适配.</p><blockquote><p>施工中</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 随心扯 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 黑科技 </tag>
            
            <tag> ServiceWorker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>欲善其事，必利其器 - 论如何善用ServiceWorker</title>
      <link href="/posts/c0af86bb/"/>
      <url>/posts/c0af86bb/</url>
      
        <content type="html"><![CDATA[<p>ServiceWorker作为前端革命领袖，毫不夸张地被誉为前端黑科技，此文将阐述如何巧妙的使用它来实现一些看起来匪夷所思的事情。</p><span id="more"></span><blockquote><p><strong>Warning</strong><br>此文为最基本的SW使用基础,如果你只是想来白嫖代码的建议退出选择下一篇实操文章.</p></blockquote><h1 id="起因-巨厦坍塌"><a href="#起因-巨厦坍塌" class="headerlink" title="起因 - 巨厦坍塌"></a>起因 - 巨厦坍塌</h1><p>2021/12/20日，赶在旧年的末尾，一则<code>JSdelivrSSL证书错误</code>缓缓上了v2ex论坛热点。</p><p>此前JSD由于各种原因,曾经不正常了一段时间,所以大家并未对此感冒.正当人们以为这只是JSdelivr每年一度的<code>年经</code>阵痛,发个issue,过一段时间就好了的时候.官方直接爆出大料:<strong>JSDelivr had lost their ICP license</strong></p><p>由此可见,过去的几年里,当人们发现JSD对个人面向国内加速拥有者无与伦比的效果时,各种滥用方式层出不穷:图床曾一阵流行,国内搜索引擎JSdelivr十有八九都是作为图床的,连PicGo插件都出了Github+JSdelivr图床;猛一点的,直接做视频床,甚至为了突破单文件20M限制开发了一套ts切片m3u8一条龙服务;作妖的,托管了不少突破网络审查的脚本和规则集;寻死的,添加了大量的政治宗教敏感,有些甚至不配称为宗教,直接上来就是骗钱的.</p><p>jsd并不是没有发布许可条款，但这并不能阻止白嫖大军的进程。在羊毛大军中，只要是你是免费的、公益的，你就要做好被薅爆的结果。但是薅羊毛的前提是羊还活着，倘若羊被薅死了，哪来的羊毛给诸君所薅？</p><p>总之，不管怎样，JSDelivr在决定将节点设置为<code>NearChina</code>，可以肯定的是，在最近很长一段时间内，我们都无法享受国内外双料同时加速的快感，换句话说，jsd在中国就被永久地打入了冷宫。</p><p>视线转向国内，jsd的替代品并不少。早在我写<a href="https://blog.cyfan.top/p/eb490c73.html">图床的千层套路</a>我就试着假想jsd不可用时，我们该用什么。最终我给出的一份较为完美的答案-npm图床，优点无非就是镜像多速度快，许可条款较为宽松，缺点也很明显，需要安装node，用专门的客户端上传。</p><p>那事情就逐渐变得扑朔迷离起来了，我们应当如何选择合理的CDN加速器呢。</p><p>这时候，我想起了前端黑科技Serviceworker。是的，这种情况下使用SW最为巧妙不过，它可以在后台自动优选最佳的CDN，甚至可以用黑中黑<code>Promise.any</code>打出一套漂亮的并行拳。经过两天的完善，我终于写出了一套具有离线可达、绕备、优选CDN、跟踪统计合一的SW脚本。<a href="/sw.js">此博客使用的SW</a></p><p>接下来我将从头开始讲述ServiceWorker的妙用。</p><h1 id="Before-Start"><a href="#Before-Start" class="headerlink" title="Before Start"></a>Before Start</h1><h2 id="What-Is-The-ServiceWorker"><a href="#What-Is-The-ServiceWorker" class="headerlink" title="What Is The ServiceWorker"></a>What Is The ServiceWorker</h2><p>网上对于SW的解释比较模糊，在这里，我将其定义为<code>用户浏览器里的服务器</code>，功能强大到令人发指。是的，接下来的两张图你应该能显著的看到这一差距：</p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r5/1.jpg" alt="没有ServiceWorker中继，平淡无奇"></p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r5/2.jpg" alt="ServiceWorker中继，刺激拉满"></p><p>在第一张图中，用户和服务器的关系直的就像电线杆，用户想要什么，服务器就还给他什么。</p><p>第二张图中，用户在被ServiceWorker控制的页面中，无论向哪个服务器发起请求，其过程都会被SW捕获，SW可以仿佛不存在一般单纯地请求服务器，返回原本应该返回的内容【透明代理】；也可以对当前服务器返回的内容进行随意的捏造、修改【请求修改结果】；甚至可以将请求指向完全另一台服务器，返回不是此服务器应该返回的内容【移花接木】；当然，SW也可以直接返回已经存储在本地的文件，甚至离线的时候也能返回【离线访问可达性】。</p><p>由于SW对于用户页面的操纵实在过于强大，因此，它被设计成<code>不可跨域请求</code>、<code>SW脚本必须在同一域名下</code>、<code>必须在HTTPS条件下运行</code>、<code>不可操纵DOM和BOM</code>，同样的，为了避免阻塞和延迟，SW也被特意设计成<code>完全异步的</code>。这些点将会在后面一一讲述。</p><blockquote><p>当然，开发者至上，为了方便本地调试，本机地址<code>localhost</code>和<code>127.0.0.1</code>被浏览器所信任，允许以<code>非HTTPS</code>方式运行serviceworker。</p></blockquote><h2 id="What-Relationship-Between-ServiceWorker-and-PWA"><a href="#What-Relationship-Between-ServiceWorker-and-PWA" class="headerlink" title="What Relationship Between ServiceWorker and PWA"></a>What Relationship Between ServiceWorker and PWA</h2><p>很多人看到sw，第一反应是PWA，即渐进式Web应用。实际上，SW确实是PWA的核心与灵魂，但SW在PWA中起的主要作用是缓存文件，提供给离线访问。并没有完整地发挥出SW的巧妙用法。</p><p>SW可以完全脱离PWA存在，当然，PWA可离不开SW ：）</p><h2 id="And-WorkBox"><a href="#And-WorkBox" class="headerlink" title="And WorkBox ?"></a>And WorkBox ?</h2><p>WorkBox是谷歌开发的一款基于SW的缓存控制器，其主要目的是方便维护PWA。核心依旧是SW，但还是没有SW原本的自定义程度高（</p><h2 id="Why-Not-WorkBox"><a href="#Why-Not-WorkBox" class="headerlink" title="Why Not WorkBox ?"></a>Why Not WorkBox ?</h2><p>首先，博客呢，是没有必要用PWA，有SW做中间件足矣。同时，WorkBox只能简单的缓存数据，并不能做到拦截篡改请求的功能，尤其不能精准把握每一个资源的缓存情况，自定义程度并不高。</p><p><del>自己编写SW，格局就打开了</del></p><h1 id="Start-From-Zero"><a href="#Start-From-Zero" class="headerlink" title="Start From Zero"></a>Start From Zero</h1><h2 id="安装-Install"><a href="#安装-Install" class="headerlink" title="安装 / Install"></a>安装 / Install</h2><p>首先，SW的本质是JS脚本，要安装它必须要经过一个html。毕竟，只有拿到了html，JS才能运行于DOM上下文。</p><p>剥离层层加成，安装的代码只有一行</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">navigator.<span class="property">serviceWorker</span>.<span class="title function_">register</span>(<span class="string">&#x27;/sw.js&#x27;</span>)</span><br></pre></td></tr></table></figure><p>其中，<code>/sw.js</code>即为ServiceWorker脚本所在，由于安全性，你不能加载跨域的SW。</p><p>例如，当前网页为<code>https://blog.cyfan.top</code>，以下加载位置是允许的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/sw.js</span><br><span class="line">https://blog.cyfan.top/sw.js</span><br></pre></td></tr></table></figure><p>以下加载是不允许的:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http://blog.cyfan.top/sw.js#非HTTPS</span><br><span class="line">https://cyfan.top/sw.js#非同一域名，视为跨域</span><br><span class="line">https://119.91.80.151:59996/sw.js#虽然为同一文件,但非同一域名，视为跨域</span><br><span class="line">./sw.js#容易造成SW脚本获取路径不一致</span><br></pre></td></tr></table></figure><p>在加载前，我们最好判断一下dom是否加载完了，不然安装sw可能会卡dom</p><p>加载完成后，register函数将返回一个<code>Promise</code>，由于前端大多不适用于<code>异步</code>，我们通常以<code>同步</code>的方式<code>.then()</code>和<code>.catch()</code>来获取是否加载成功。</p><p>为了方便判断脚本是否能够加载，我们还要判断navigator里有无sw这一属性<code>&#39;serviceWorker&#39; in navigator</code>。</p><p>由于SW安装后，页面需要刷新后才能交给SW所宰割，同时为了避免浏览器缓存的影响，我通常采用修改<code>search</code>的方式强刷新，而不是通过<code>reload</code>函数。同样的，为了避免刚安装完就刷新的尴尬感，建议用<code>setTimeout</code>延迟一秒刷新。</p><p>简易的完整安装代码如下:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, <span class="keyword">async</span> () =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">    navigator.<span class="property">serviceWorker</span>.<span class="title function_">register</span>(<span class="string">`/sw.js?time=<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>().getTime()&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">then</span>(<span class="keyword">async</span> reg =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//安装成功，建议此处强刷新以立刻执行SW</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;install&#x27;</span>) != <span class="string">&#x27;true&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;install&#x27;</span>, <span class="string">&#x27;true&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">search</span> = <span class="string">`?time=<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>().getTime()&#125;</span>`</span></span></span><br><span class="line"><span class="language-javascript">                &#125;, <span class="number">1000</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//安装失败，错误信息会由err传参</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>一刷新，世界就变成了ServiceWorker的瓮中之鳖，接下来，该是SW脚本正式登场的时候了。</p><h2 id="SW安装初始化-Installations"><a href="#SW安装初始化-Installations" class="headerlink" title="SW安装初始化 / Installations"></a>SW安装初始化 / Installations</h2><p>首先，先尴尬的开一个空缓存列表：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">CACHE_NAME</span> = <span class="string">&#x27;ICDNCache&#x27;</span>;<span class="comment">//可以为Cache版本号，但这样可能会导致缓存冗余累积</span></span><br><span class="line"><span class="keyword">let</span> cachelist = [];</span><br></pre></td></tr></table></figure><p><code>cachelist</code>里面填写的是预缓存网址，例如在离线时返回的错误页面。此处不宜添加过多网址，此处点名@一下Akilar。</p><p>此处我建议只缓存离线页面展示的内容:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> cachelist = [</span><br><span class="line">    <span class="string">&#x27;/offline.html&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;https://npm.elemecdn.com/chenyfan-os@0.0.0-r6&#x27;</span></span><br><span class="line">];</span><br></pre></td></tr></table></figure><p>同时监听sw安装时开启此缓存空间：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">self.<span class="title function_">addEventListener</span>(<span class="string">&#x27;install&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">installEvent</span>) &#123;</span><br><span class="line">    self.<span class="title function_">skipWaiting</span>();</span><br><span class="line">    installEvent.<span class="title function_">waitUntil</span>(</span><br><span class="line">        caches.<span class="title function_">open</span>(<span class="variable constant_">CACHE_NAME</span>)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">cache</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Opened cache&#x27;</span>);</span><br><span class="line">                <span class="keyword">return</span> cache.<span class="title function_">addAll</span>(cachelist);</span><br><span class="line">            &#125;)</span><br><span class="line">    );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>由于SW完全没有办法访问DOM，因此对于全局变量，不应当用<code>window</code>，而是<code>self</code>指代自己。</p><p><code>addEventListener</code>这一监听器将监听<code>install</code>,也就是这一段代码只会在脚本首次安装和更新时运行.</p><p><code>skipWaiting</code>的作用是促进新版本sw跳过waiting这一阶段，直接active。</p><blockquote><p>关于SW的状态（waiting，installing，activing）将在文后详细解释。</p></blockquote><p><code>installEvent.waitUntil</code>的作用是直接结束安装过程的等待，待会在后台完成开启缓存空间这一操作。</p><p><code>cache.addAll</code>将会直接获取<code>cachelist</code>里面所有的网址并直接缓存到CacheStorage。如果此处网址过多，将在页面加载时疯狂请求所有的url<del>(例如1k个)</del></p><p>现在，SW初始化已经完成了。接下来，我将讲述SW如何捕获页面的请求。</p><h2 id="捕获请求-Fetch-Event"><a href="#捕获请求-Fetch-Event" class="headerlink" title="捕获请求 / Fetch Event"></a>捕获请求 / Fetch Event</h2><h3 id="添加监听器-AddEventListener"><a href="#添加监听器-AddEventListener" class="headerlink" title="添加监听器 / AddEventListener"></a>添加监听器 / AddEventListener</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">self.<span class="title function_">addEventListener</span>(<span class="string">&#x27;fetch&#x27;</span>, <span class="keyword">async</span> event =&gt; &#123;</span><br><span class="line">    event.<span class="title function_">respondWith</span>(<span class="title function_">handle</span>(event.<span class="property">request</span>))</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handle</span> = <span class="keyword">async</span>(<span class="params">req</span>)=&gt;&#123;</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第一行很简单，绑定一个监听器，监听<code>fetch</code>事件，即网页向服务器获取请求，也就是相当于前端的<code>XMLHTTPRequest</code></p><p><code>event.respondWith</code>即设定返回内容，交给<code>handle</code>主函数处理，传参<code>event.request</code>。这是一个<code>Request</code>对象，里面包含了请求的详细信息。</p><p>接下来，我们开始实战吧。</p><blockquote><p>以下所有内容均针对handle修改</p></blockquote><h3 id="透明代理-Transparent-Proxy"><a href="#透明代理-Transparent-Proxy" class="headerlink" title="透明代理 / Transparent Proxy"></a>透明代理 / Transparent Proxy</h3><p>顾名思义，此实战脚本的作用是SW代理目前的所有流量但不进行修改，仿佛SW不存在一般。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handle</span> = <span class="keyword">async</span>(<span class="params">req</span>)=&gt;&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">fetch</span>(req)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>fetch</code>这个函数相当于前端的<code>ajax</code>或者<code>XMLHTTPRequest</code>，作用是发起一个请求，获得一个返回值。由于sw不可访问<code>window</code>，在sw中是无法使用<code>ajax</code>或<code>XMLHTTPRequest</code>。同时，<code>fetch</code>是一个异步函数，直接调用它会返回一个<code>Promise</code>。</p><p><code>fetch</code>只能传递<code>Requset</code>对象,而<code>Requset</code>对象有两个参数<code>(url,[option])</code>,第一个参数是网址,第二个参数为<code>Request</code>的内容,例如<code>body</code>或<code>header</code>。</p><p>此脚本适用于卸载<code>ServiceWorker</code>的替换脚本。因为sw在无法拉取新版本时不会主动卸载，依旧保持运行，填入一个透明代理sw即可。</p><p>由于SW冷启动【即页面关闭后SW】处于暂停状态是从硬盘读取的，这会导致第一次请求有少许性能延迟[~10ms]。</p><h3 id="篡改请求-Edit-Requset"><a href="#篡改请求-Edit-Requset" class="headerlink" title="篡改请求 / Edit Requset"></a>篡改请求 / Edit Requset</h3><p>对于一张图片，有时候服务端会变态到让你必须用<code>POST</code>协议才能获得，此时用SW篡改最为方便。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handle</span> = <span class="keyword">async</span> (<span class="params">req</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> ((req.<span class="property">url</span>.<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>))[<span class="number">2</span>].<span class="title function_">match</span>(<span class="string">&#x27;xxx.com&#x27;</span>)) &#123;</span><br><span class="line">        <span class="comment">//xxx.com为图片所在域名</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">fetch</span>(req.<span class="property">url</span>, &#123;</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">fetch</span>(req)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>注意，在ServiceWorker里面，header头是不能修改refferer和origin的，因此此方法无法绕开新浪图床反盗链</p></blockquote><h3 id="篡改响应-Edit-Response"><a href="#篡改响应-Edit-Response" class="headerlink" title="篡改响应 / Edit Response"></a>篡改响应 / Edit Response</h3><p>这个例子会检测返回内容，若为html，将把所有的”TEST”都替换成”SHIT”</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handle</span> = <span class="keyword">async</span> (<span class="params">req</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(req)</span><br><span class="line">    <span class="keyword">const</span> resp = res.<span class="title function_">clone</span>()</span><br><span class="line">    <span class="keyword">if</span> (!!resp.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;content-type&#x27;</span>)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (resp.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;content-type&#x27;</span>).<span class="title function_">includes</span>(<span class="string">&#x27;text/html&#x27;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>((<span class="keyword">await</span> resp.<span class="title function_">text</span>()).<span class="title function_">replace</span>(<span class="regexp">/TEST/g</span>, <span class="string">&#x27;SHIT&#x27;</span>), &#123;</span><br><span class="line">                <span class="attr">headers</span>: resp.<span class="property">headers</span>,</span><br><span class="line">                <span class="attr">status</span>: resp.<span class="property">status</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> resp</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>const resp = res.clone()</code>由于<code>Response</code>的<code>body</code>一旦被读取，这个<code>body</code>就会被锁死，再也无法读取。<code>clone()</code>能够创造出响应的副本用于处理。</p><p><code>resp.headers.get(&#39;content-type&#39;)</code>通过读取响应的头，判断是否包含<code>text/html</code>，如果是，将响应以<code>text()</code>异步流的方式读取，然后正则替换掉响应内容，并还原头和响应Code。</p><p>返回的内容必须是<code>Response</code>对象，所以<code>new Response</code>构建一个新对象，并直接返回。不匹配html头将直接原封不动地透明代理。</p><h3 id="移花接木-Graft-Request-To-Another-Server"><a href="#移花接木-Graft-Request-To-Another-Server" class="headerlink" title="移花接木 / Graft Request To Another Server"></a>移花接木 / Graft Request To Another Server</h3><p><code>unpkg.zhimg.com</code>是<code>unpkg.com</code>的镜像网站。此脚本将会把所有的<code>unpkg.com</code>流量直接拦截到<code>unpkg.zhimg.com</code>，用于中国大陆内CDN加速。</p><p>由于npm镜像固定为GET请求方式并且没有其他鉴权需求，所以我们没有必要还原<code>Request</code>其他数据。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handle</span> = <span class="keyword">async</span> (<span class="params">req</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> domain = req.<span class="property">url</span>.<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>)[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">if</span> (domain.<span class="title function_">match</span>(<span class="string">&quot;unpkg.com&quot;</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">fetch</span>(req.<span class="property">url</span>.<span class="title function_">replace</span>(<span class="string">&quot;https://unpkg.com&quot;</span>, <span class="string">&quot;https://zhimg.unpkg.com&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">fetch</span>(req)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>domain.match</code>捕获请求中是否有待替换域名，检查出来后直接<code>replace</code>掉域名，如果没有匹配到，直接透明代理走掉。</p><h3 id="并行请求-Request-Parallelly"><a href="#并行请求-Request-Parallelly" class="headerlink" title="并行请求 / Request Parallelly"></a>并行请求 / Request Parallelly</h3><p>SW中又一大黑科技隆重登场=&gt;<code>Promise.any</code>，这个函数拥有另外两个衍生兄弟<code>Promise.all</code>&amp;<code>Promise.race</code>。下面我将简单介绍这三种方式</p><h4 id="Promose-all"><a href="#Promose-all" class="headerlink" title="Promose.all"></a>Promose.all</h4><p>当列表中所有的<code>Promise</code>都<code>resolve</code>[即成功]后，这个函数才会返回<code>resolve</code>，只要有一个返回<code>reject</code>，整个函数都会<code>reject</code>。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([</span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">&#x27;https://unpkg.com/jquery&#x27;</span>),</span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">&#x27;https://cdn.jsdelivr.net/npm/jquery&#x27;</span>),</span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">&#x27;https://unpkg.zhimg.com/jquery&#x27;</span>)</span><br><span class="line">])</span><br></pre></td></tr></table></figure><p>这个函数将会请求三个网址，当每一个网址都链接联通后，整个函数将会返回一个列表：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="title class_">Response1</span>,<span class="title class_">Response2</span>,<span class="title class_">Response3</span>]</span><br></pre></td></tr></table></figure><p>当任何一个<code>fetch</code>失败[即<code>reject</code>]后，整个<code>Promise.all</code>函数都会直接<code>reject</code>并报错。</p><p>此函数可以检测网络连通性，由于采取并行处理，相比以前的循环效率要高不少。</p><p>这是一段检测国内国外网络连通性的测试。</p><p>没有采用<code>Promise.all</code>的代码和效果：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">test</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> url = [</span><br><span class="line">        </span><br><span class="line">        <span class="string">&quot;https://cdn.jsdelivr.net/npm/jquery@3.6.0/package.json&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://unpkg.com/jquery@3.6.0/package.json&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://unpkg.zhimg.com/jquery@3.6.0/package.json&quot;</span></span><br><span class="line">    ]</span><br><span class="line">    flag = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> url) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(url[i])</span><br><span class="line">            <span class="keyword">if</span> (res.<span class="property">status</span> !== <span class="number">200</span>) &#123;</span><br><span class="line">                flag = <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(n)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flag</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r7/1.png" alt=""></p><p>采用循环，<code>await</code>会堵塞循环，直到这次请求完成后才能执行下一个。如果有任何一个url长时间无法联通，将会导致极长的检测时间浪费。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">test</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> url = [</span><br><span class="line">        <span class="string">&quot;https://cdn.jsdelivr.net/npm/jquery@3.6.0/package.json&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://unpkg.com/jquery@3.6.0/package.json&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://unpkg.zhimg.com/jquery@3.6.0/package.json&quot;</span></span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(url.<span class="title function_">map</span>(<span class="function"><span class="params">url</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">fetch</span>(url)</span><br><span class="line">                .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (res.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">                        <span class="title function_">resolve</span>(<span class="literal">true</span>)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">                        <span class="title function_">reject</span>(<span class="literal">false</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(<span class="literal">false</span>)</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    )).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r7/2.png" alt=""></p><p><code>Promise.all</code>几乎在一瞬间请求所有的url，其请求时并行，每一个请求并不会堵塞其他请求，函数总耗时为最长请求耗时。</p><h4 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race"></a>Promise.race</h4><p>此函数也是并行执行，不过与all不同的是，只要有任何一个函数完成，就立刻返回，无论其是否<code>reject</code>或者<code>resolve</code>。</p><p>这个函数比较适合用于同时请求一些不关心结果，只要访问达到了即可，例如统计、签到等应用场景。</p><h4 id="Promise-any"><a href="#Promise-any" class="headerlink" title="Promise.any"></a>Promise.any</h4><p>这个函数非常的有用，其作用和<code>race</code>接近，不过与之不同的是，<code>any</code>会同时检测结果是否<code>resolve</code>。其并行处理后，只要有任何一个返回正确，就直接返回哪个最快的请求结果，返回错误的直接忽视，除非所有的请求都失败了，才会返回<code>reject</code></p><p>这是一段同时请求<code>jquery</code>的<code>package.json</code>代码，它将从四个镜像同时请求：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">get_json</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> urllist = [</span><br><span class="line">            <span class="string">&quot;https://cdn.jsdelivr.net/npm/jquery@3.6.0/package.json&quot;</span>,</span><br><span class="line">            <span class="string">&quot;https://unpkg.com/jquery@3.6.0/package.json&quot;</span>,</span><br><span class="line">            <span class="string">&quot;https://unpkg.zhimg.com/jquery@3.6.0/package.json&quot;</span>,</span><br><span class="line">            <span class="string">&quot;https://npm.elemecdn.com/jquery@3.6.0/package.json&quot;</span></span><br><span class="line">        ]</span><br><span class="line">        <span class="title class_">Promise</span>.<span class="title function_">any</span>(urllist.<span class="title function_">map</span>(<span class="function"><span class="params">url</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">fetch</span>(url)</span><br><span class="line">                .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (res.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">                        <span class="title function_">resolve</span>(res)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="title function_">reject</span>()</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">reject</span>()</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;))</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">await</span>(<span class="keyword">await</span> <span class="title function_">get_json</span>()).<span class="title function_">text</span>())</span><br></pre></td></tr></table></figure><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r7/3.png" alt=""></p><p>函数将会在<code>21ms</code>上下返回json中的数据。</p><p>此函数的好处在于可以在用户客户端判断哪一个镜像发挥速度最快，并保证用户每一次获取都能达到最大速度。同时，任何一个镜像站崩溃了都不会造成太大的影响，脚本将自动从其他源拉取信息。</p><p>除非所有源都炸了，否则此请求不会失败。</p><p>但是，我们会额外地发现，当知乎镜像返回最新版本后，其余的请求依旧在继续，只是没有被利用到而已。</p><p>这会堵塞浏览器并发线程数，并且会造成额外的流量浪费。所以我们应该在其中任何一个请求完成后就打断其余请求。</p><p><code>fetch</code>有一个<code>abort</code>对象，只要刚开始<code>new AbortController()</code>指定控制器，在<code>init</code>的里面指定控制器的<code>signal</code>即可将其标记为待打断函数，最后<code>controller.abort()</code>即可打断。</p><p>那么，很多同学就会开始这么写了:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">get_json</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> controller = <span class="keyword">new</span> <span class="title class_">AbortController</span>();</span><br><span class="line">        <span class="keyword">const</span> urllist = [</span><br><span class="line">            <span class="string">&quot;https://cdn.jsdelivr.net/npm/jquery@3.6.0/package.json&quot;</span>,</span><br><span class="line">            <span class="string">&quot;https://unpkg.com/jquery@3.6.0/package.json&quot;</span>,</span><br><span class="line">            <span class="string">&quot;https://unpkg.zhimg.com/jquery@3.6.0/package.json&quot;</span>,</span><br><span class="line">            <span class="string">&quot;https://npm.elemecdn.com/jquery@3.6.0/package.json&quot;</span></span><br><span class="line">        ]</span><br><span class="line">        <span class="title class_">Promise</span>.<span class="title function_">any</span>(urllist.<span class="title function_">map</span>(<span class="function"><span class="params">url</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">fetch</span>(url,&#123;</span><br><span class="line">                <span class="attr">signal</span>: controller.<span class="property">signal</span></span><br><span class="line">            &#125;)</span><br><span class="line">                .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (res.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">                        controller.<span class="title function_">abort</span>();</span><br><span class="line">                        <span class="title function_">resolve</span>(res)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="title function_">reject</span>()</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">reject</span>()</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;))</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">await</span>(<span class="keyword">await</span> <span class="title function_">get_json</span>()).<span class="title function_">text</span>())</span><br></pre></td></tr></table></figure><p>但很快，你就会发现它报错了：<code>Uncaught DOMException: The user aborted a request.</code>，并且没有任何数据输出。</p><p>让我们看一下Network选项卡：</p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r7/4.png" alt=""></p><p>其中，知乎返回的最快，但他并没有完整的返回文件[源文件1.8KB，但他只返回了1.4KB]。这也直接导致了整个函数的<code>fail</code>。</p><p>原因出在<code>fetch</code>上，这个函数在获得响应之后就立刻<code>resolve</code>了<code>Response</code>，但这个时候<code>body</code>并没有下载完成，即<code>fetch</code>的返回基于状态的而非基于响应内容，当其中<code>fetch</code>已经拿到了完整的状态代码，它就立刻把<code>Response</code>丢给了下一个管道函数，而此时<code>status</code>正确，<code>abort</code>打断了包括这一个<code>fetch</code>的所有请求，<code>fetch</code>就直接工作不正常。</p><p>我个人采取的方式是读取<code>arrayBuffer</code>，阻塞<code>fetch</code>函数直到把整个文件下载下来。函数名为<code>PauseProgress</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">get_json</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> controller = <span class="keyword">new</span> <span class="title class_">AbortController</span>();</span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">PauseProgress</span> = <span class="keyword">async</span> (<span class="params">res</span>) =&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="keyword">await</span> (res).<span class="title function_">arrayBuffer</span>(), &#123; <span class="attr">status</span>: res.<span class="property">status</span>, <span class="attr">headers</span>: res.<span class="property">headers</span> &#125;);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">const</span> urllist = [</span><br><span class="line">            <span class="string">&quot;https://cdn.jsdelivr.net/npm/jquery@3.6.0/package.json&quot;</span>,</span><br><span class="line">            <span class="string">&quot;https://unpkg.com/jquery@3.6.0/package.json&quot;</span>,</span><br><span class="line">            <span class="string">&quot;https://unpkg.zhimg.com/jquery@3.6.0/package.json&quot;</span>,</span><br><span class="line">            <span class="string">&quot;https://npm.elemecdn.com/jquery@3.6.0/package.json&quot;</span></span><br><span class="line">        ]</span><br><span class="line">        <span class="title class_">Promise</span>.<span class="title function_">any</span>(urllist.<span class="title function_">map</span>(<span class="function"><span class="params">url</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">fetch</span>(url, &#123;</span><br><span class="line">                <span class="attr">signal</span>: controller.<span class="property">signal</span></span><br><span class="line">            &#125;)</span><br><span class="line">                .<span class="title function_">then</span>(<span class="title class_">PauseProgress</span>)</span><br><span class="line">                .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (res.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">                        controller.<span class="title function_">abort</span>();</span><br><span class="line">                        <span class="title function_">resolve</span>(res)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="title function_">reject</span>()</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">reject</span>()</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;))</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">await</span>(<span class="keyword">await</span> <span class="title function_">get_json</span>()).<span class="title function_">text</span>())</span><br></pre></td></tr></table></figure><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r7/5.png" alt=""></p><p>在这其中通过<code>arrayBuffer()</code>方法异步读取<code>res</code>的<code>body</code>，将其读取为二进制文件，并新建一个新的<code>Response</code>，还原状态和头，然后丢给管道函数同步处理。</p><p>在这里，我们就实现了暴力并发，以流量换速度的方式。同时也获得了一个高可用的SW负载均衡器。</p><p>这一段函数可以这样写在SW中：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">lfetch</span> = (<span class="params">urllist</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> controller = <span class="keyword">new</span> <span class="title class_">AbortController</span>();</span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">PauseProgress</span> = <span class="keyword">async</span> (<span class="params">res</span>) =&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="keyword">await</span> (res).<span class="title function_">arrayBuffer</span>(), &#123; <span class="attr">status</span>: res.<span class="property">status</span>, <span class="attr">headers</span>: res.<span class="property">headers</span> &#125;);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="title class_">Promise</span>.<span class="title function_">any</span>(urllist.<span class="title function_">map</span>(<span class="function"><span class="params">url</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">fetch</span>(url, &#123;</span><br><span class="line">                <span class="attr">signal</span>: controller.<span class="property">signal</span></span><br><span class="line">            &#125;)</span><br><span class="line">                .<span class="title function_">then</span>(<span class="title class_">PauseProgress</span>)</span><br><span class="line">                .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (res.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">                        controller.<span class="title function_">abort</span>();</span><br><span class="line">                        <span class="title function_">resolve</span>(res)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="title function_">reject</span>()</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">reject</span>()</span><br><span class="line">                &#125;)</span><br><span class="line">        &#125;))</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handle</span> = <span class="keyword">async</span> (<span class="params">req</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> npm_mirror = [</span><br><span class="line">        <span class="string">&#x27;https://cdn.jsdelivr.net/npm/&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://unpkg.com/&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://npm.elemecdn.com/&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://unpkg.zhimg.com/&#x27;</span></span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> npm_mirror) &#123;</span><br><span class="line">        <span class="keyword">if</span> (req.<span class="property">url</span>.<span class="title function_">match</span>(npm_mirror[k]) &amp;&amp; req.<span class="property">url</span>.<span class="title function_">replace</span>(<span class="string">&#x27;https://&#x27;</span>, <span class="string">&#x27;&#x27;</span>).<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>)[<span class="number">0</span>] == npm_mirror[k].<span class="title function_">replace</span>(<span class="string">&#x27;https://&#x27;</span>, <span class="string">&#x27;&#x27;</span>).<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>)[<span class="number">0</span>]) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">lfetch</span>((<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> l = []</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; npm_mirror.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                    l.<span class="title function_">push</span>(npm_mirror[i] + req.<span class="property">url</span>.<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>)[<span class="number">3</span>])</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> l</span><br><span class="line">            &#125;)())</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">fetch</span>(req)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>另外,<code>Promise.any</code>,兼容性比较差:</p><p><img src="https://npm.elemecdn.com/chenyfan-os@0.0.0-r9/1.png" alt=""></p><p>因此,我的解决办法是判断浏览器如果不支持,就提前polyfill一下:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="title class_">Promise</span>.<span class="property">any</span>) &#123;</span><br><span class="line">        <span class="title class_">Promise</span>.<span class="property">any</span> = <span class="keyword">function</span> (<span class="params">promises</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">                promises = <span class="title class_">Array</span>.<span class="title function_">isArray</span>(promises) ? promises : []</span><br><span class="line">                <span class="keyword">let</span> len = promises.<span class="property">length</span></span><br><span class="line">                <span class="keyword">let</span> errs = []</span><br><span class="line">                <span class="keyword">if</span> (len === <span class="number">0</span>) <span class="keyword">return</span> <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">AggregateError</span>(<span class="string">&#x27;All promises were rejected&#x27;</span>))</span><br><span class="line">                promises.<span class="title function_">forEach</span>(<span class="function">(<span class="params">promise</span>) =&gt;</span> &#123;</span><br><span class="line">                    promise.<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="title function_">resolve</span>(value)</span><br><span class="line">                    &#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">                        len--</span><br><span class="line">                        errs.<span class="title function_">push</span>(err)</span><br><span class="line">                        <span class="keyword">if</span> (len === <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">AggregateError</span>(errs))</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="缓存控制-Cache"><a href="#缓存控制-Cache" class="headerlink" title="缓存控制 / Cache"></a>缓存控制 / Cache</h2><h3 id="持久化缓存-Cache-Persistently"><a href="#持久化缓存-Cache-Persistently" class="headerlink" title="持久化缓存 / Cache Persistently"></a>持久化缓存 / Cache Persistently</h3><p>对于来自CDN的流量，大部分是持久不变的，因此，如果我们将文件获得后直接填入缓存，之后访问也直接从本地缓存中读取，那将大大提升访问速度。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handle</span> = <span class="keyword">async</span> (<span class="params">req</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> cache_url_list = [</span><br><span class="line">        <span class="regexp">/(http:\/\/|https:\/\/)cdn\.jsdelivr\.net/g</span>,</span><br><span class="line">        <span class="regexp">/(http:\/\/|https:\/\/)cdn\.bootcss\.com/g</span>,</span><br><span class="line">        <span class="regexp">/(http:\/\/|https:\/\/)zhimg\.unpkg\.com/g</span>,</span><br><span class="line">        <span class="regexp">/(http:\/\/|https:\/\/)unpkg\.com/g</span></span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> cache_url_list) &#123;</span><br><span class="line">        <span class="keyword">if</span> (req.<span class="property">url</span>.<span class="title function_">match</span>(cache_url_list[i])) &#123;</span><br><span class="line">            <span class="keyword">return</span> caches.<span class="title function_">match</span>(req).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">resp</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> resp || <span class="title function_">fetch</span>(req).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> caches.<span class="title function_">open</span>(<span class="variable constant_">CACHE_NAME</span>).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">cache</span>) &#123;</span><br><span class="line">                        cache.<span class="title function_">put</span>(req, res.<span class="title function_">clone</span>());</span><br><span class="line">                        <span class="keyword">return</span> res;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">fetch</span>(req)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>cache_url_list</code>列出所有待匹配的域名(包括http/https头是为了避免误杀其他url)，然后<code>for</code>开始遍历待列表，如果url中匹配到了，开始执行返回缓存操作。</p><p>cache是一个近似于Key/Value(键名/键值)，只要有对应的<code>Request</code>(<code>KEY</code>)，就能匹配到响应的<code>Response</code>(<code>VALUE</code>)。</p><p><code>caches.match(req)</code>将会试图在CacheStorage中匹配请求的url获取值，然后丢给管道同步函数<code>then</code>，传参<code>resp</code>为Cache匹配到的值。</p><p>此时管道内将尝试返回resp，如果resp为<code>null</code>或<code>undefined</code>[即获取不到对应的缓存]，将执行fetch操作，fetch成功后将<code>open</code>打开CacheStorage，并<code>put</code>放入缓存。此时如果<code>fetch</code>失败将直接报错，不写入缓存。</p><p>在下一次获取同一个URL的时候，缓存匹配到的将不再是空白值，此时<code>fetch</code>不执行，直接返回缓存，大大提升了速度。</p><p>由于npm的cdn对于latest缓存并不是持久有效的，所以我们最好还是判断一下url版本中是否以@latest为结尾。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">is_latest</span> = (<span class="params">url</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> url.<span class="title function_">replace</span>(<span class="string">&#x27;https://&#x27;</span>, <span class="string">&#x27;&#x27;</span>).<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>)[<span class="number">1</span>].<span class="title function_">split</span>(<span class="string">&#x27;@&#x27;</span>)[<span class="number">1</span>] === <span class="string">&#x27;latest&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> cache_url_list) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">is_latest</span>(req.<span class="property">url</span>)) &#123; <span class="keyword">return</span> <span class="title function_">fetch</span>(req) &#125;</span><br><span class="line">    <span class="keyword">if</span> (req.<span class="property">url</span>.<span class="title function_">match</span>(cache_url_list[i])) &#123;</span><br><span class="line">        <span class="keyword">return</span> caches.<span class="title function_">match</span>(req).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">resp</span>) &#123;</span><br><span class="line">            <span class="comment">//...</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="离线化缓存-Cache-For-Offline"><a href="#离线化缓存-Cache-For-Offline" class="headerlink" title="离线化缓存 / Cache For Offline"></a>离线化缓存 / Cache For Offline</h3><p>对于博客来说，并不是所有内容都是一成不变的。传统PWA采用SW更新同时刷新缓存，这样不够灵活，同时刷新缓存的版本号管理也存在着很大的漏洞，长时间访问极易造成庞大的缓存冗余。因此，对于博客的缓存，我们要保证用户每次获取都是最新的版本，但也要保证用户在离线时能看到最后一个版本的内容。</p><p>因此，针对博客来说，策略应该是先获取最新内容，然后更新本地缓存，最后返回最新内容；离线的时候，尝试访问最新内容会回退到缓存，如果缓存也没有，就回退到错误页面。</p><p>即：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Online:</span><br><span class="line">发起Request =&gt; 发起fetch =&gt; 更新Cache =&gt; 返回Response</span><br><span class="line">Offline:</span><br><span class="line">发起Request =&gt; 获取Cache =&gt; 返回Response</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handle</span> = <span class="keyword">async</span> (<span class="params">req</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">fetch</span>(req.<span class="property">url</span>).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!res) &#123; <span class="keyword">throw</span> <span class="string">&#x27;error&#x27;</span> &#125; <span class="comment">//1</span></span><br><span class="line">        <span class="keyword">return</span> caches.<span class="title function_">open</span>(<span class="variable constant_">CACHE_NAME</span>).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">cache</span>) &#123;</span><br><span class="line">            cache.<span class="title function_">delete</span>(req);</span><br><span class="line">            cache.<span class="title function_">put</span>(req, res.<span class="title function_">clone</span>());</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> caches.<span class="title function_">match</span>(req).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">resp</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> resp || caches.<span class="title function_">match</span>(<span class="keyword">new</span> <span class="title class_">Request</span>(<span class="string">&#x27;/offline.html&#x27;</span>)) <span class="comment">//2</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>if (!res) &#123; throw &#39;error&#39; &#125;</code> 如果没有返回值，直接抛出错误，会被下面的Catch捕获，返回缓存或错误页面</p><p><code>return resp || caches.match(new Request(&#39;/offline.html&#39;))</code> 返回缓存获得的内容。如果没有，就返回从缓存中拿到的错误网页。此处offline.html应该在最开始的时候就缓存好</p><h2 id="持久化存储-Storage-Persistently"><a href="#持久化存储-Storage-Persistently" class="headerlink" title="持久化存储 / Storage Persistently"></a>持久化存储 / Storage Persistently</h2><p>由于sw中无<code>window</code>，我们不能使用<code>localStorage</code>和<code>sessionStorage</code>。SW脚本会在所有页面都关闭或重载的时候丢失原先的数据。因此，如果想要使用持久化存储，我们只能使用<code>CacheAPI</code>和<code>IndexdDB</code>。</p><h3 id="IndexdDB"><a href="#IndexdDB" class="headerlink" title="IndexdDB"></a>IndexdDB</h3><p>这货结构表类型类似于<code>SQL</code>，能够存储JSON对象和数据内容，但版本更新及其操作非常麻烦，因此本文不对此做过多解释。</p><h3 id="CacheAPI"><a href="#CacheAPI" class="headerlink" title="CacheAPI"></a>CacheAPI</h3><p>这东西原本是用来缓存响应，但其本身的特性我们可以将其改造成一个简易的Key/Value数据表，可以存储文本/二进制，可扩展性远远比IndexdDB要好。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">self.<span class="property">CACHE_NAME</span> = <span class="string">&#x27;SWHelperCache&#x27;</span>;</span><br><span class="line">self.<span class="property">db</span> = &#123;</span><br><span class="line">    <span class="attr">read</span>: <span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            caches.<span class="title function_">match</span>(<span class="keyword">new</span> <span class="title class_">Request</span>(<span class="string">`https://LOCALCACHE/<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(key)&#125;</span>`</span>)).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">                res.<span class="title function_">text</span>().<span class="title function_">then</span>(<span class="function"><span class="params">text</span> =&gt;</span> <span class="title function_">resolve</span>(text))</span><br><span class="line">            &#125;).<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">resolve</span>(<span class="literal">null</span>)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">read_arrayBuffer</span>: <span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            caches.<span class="title function_">match</span>(<span class="keyword">new</span> <span class="title class_">Request</span>(<span class="string">`https://LOCALCACHE/<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(key)&#125;</span>`</span>)).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">                res.<span class="title function_">arrayBuffer</span>().<span class="title function_">then</span>(<span class="function"><span class="params">aB</span> =&gt;</span> <span class="title function_">resolve</span>(aB))</span><br><span class="line">            &#125;).<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">resolve</span>(<span class="literal">null</span>)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">write</span>: <span class="function">(<span class="params">key, value</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            caches.<span class="title function_">open</span>(<span class="variable constant_">CACHE_NAME</span>).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">cache</span>) &#123;</span><br><span class="line">                cache.<span class="title function_">put</span>(<span class="keyword">new</span> <span class="title class_">Request</span>(<span class="string">`https://LOCALCACHE/<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(key)&#125;</span>`</span>), <span class="keyword">new</span> <span class="title class_">Response</span>(value));</span><br><span class="line">                <span class="title function_">resolve</span>()</span><br><span class="line">            &#125;).<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">reject</span>()</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用操作：</p><p>写入key，value:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> db.<span class="title function_">wtite</span>(key,value)</span><br></pre></td></tr></table></figure><p>以文本方式读取key：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> db.<span class="title function_">read</span>(key)</span><br></pre></td></tr></table></figure><p>以二进制方式读取key：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> db.<span class="title function_">read_arrayBuffer</span>(key)</span><br></pre></td></tr></table></figure><p>其余的blob读取、delete操作此处不过多阐述。</p><h2 id="页面与SW通信-Build-Communication-with-Page-and-ServiceWorker"><a href="#页面与SW通信-Build-Communication-with-Page-and-ServiceWorker" class="headerlink" title="页面与SW通信 / Build Communication with Page and ServiceWorker"></a>页面与SW通信 / Build Communication with Page and ServiceWorker</h2><h3 id="单向连接-Unidirectional-Connect"><a href="#单向连接-Unidirectional-Connect" class="headerlink" title="单向连接 / Unidirectional Connect"></a>单向连接 / Unidirectional Connect</h3><h3 id="Clients-To-SW"><a href="#Clients-To-SW" class="headerlink" title="Clients To SW"></a>Clients To SW</h3><p>浏览器 =&gt; SW</p><p>ServiceWorker中有一个非常简单的API<code>postMessage</code>,全路径为<code>navigator.serviceWorker.controller.postMessage</code>.</p><p>因此,如果你只是作为页面单方面传递给SW,此api是个不错的选择.</p><p>前端写法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = <span class="number">123</span></span><br><span class="line">navigator.<span class="property">serviceWorker</span>.<span class="property">controller</span>.<span class="title function_">postMessage</span>(data)</span><br><span class="line"><span class="comment">//发送123</span></span><br></pre></td></tr></table></figure><p>SW接收</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">self.<span class="title function_">addEventListener</span>(<span class="string">&#x27;message&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">data</span>)</span><br><span class="line">  <span class="comment">//输出123</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>此方法可用于单方面向SW提交数据,但无需返回值.比如提示SW可以SkipWaiting,或者提交前端统计数据等等.</p><h4 id="SW-To-Clients"><a href="#SW-To-Clients" class="headerlink" title="SW To Clients"></a>SW To Clients</h4><p>首先,Clients必须要从SW中的一个event事件中获取,比如<code>fetch</code>.无法从<code>message</code>事件中获取client.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">addEventListener</span>(<span class="string">&#x27;fetch&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">    event.<span class="title function_">waitUntil</span>(<span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!event.<span class="property">clientId</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">const</span> client = <span class="keyword">await</span> clients.<span class="title function_">get</span>(event.<span class="property">clientId</span>);</span><br><span class="line">        <span class="keyword">if</span> (!client) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">const</span> data = <span class="number">123</span>;</span><br><span class="line">        client.<span class="title function_">postMessage</span>(data);</span><br><span class="line">    &#125;());</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="双向通讯-Connect-Each"><a href="#双向通讯-Connect-Each" class="headerlink" title="双向通讯 / Connect Each"></a>双向通讯 / Connect Each</h3><p>浏览器 &lt;=&gt; SW</p><p>我们拥有两种方式双向通讯:</p><ol><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Broadcast_Channel_API">Broadcast Channel API</a> 多对多,广播形式.</li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/MessageChannel">Message Channel</a> 一对一</li></ol><h4 id="MessageChannel"><a href="#MessageChannel" class="headerlink" title="MessageChannel"></a>MessageChannel</h4><p>顾名思义，MessageChannel API 设置了一个可以发送消息的通道。</p><p>该实现可以归结为3个步骤。</p><p>1.在两侧设置事件侦听器以接收<code>message</code> 事件<br>2.通过发送<code>port</code>并将其存储在SW中，建立与SW的连接。<br>3.使用存储的<code>port</code>回复客户端</p><p>前端写法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> messageChannel = <span class="keyword">new</span> <span class="title class_">MessageChannel</span>();</span><br><span class="line">navigator.<span class="property">serviceWorker</span>.<span class="property">controller</span>.<span class="title function_">postMessage</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;INIT&#x27;</span>,<span class="comment">//发送init信息,表示以port2为接收端[即SW的发送端]</span></span><br><span class="line">&#125;, [messageChannel.<span class="property">port2</span>]);</span><br><span class="line">messageChannel.<span class="property">port1</span>.<span class="property">onmessage</span> = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//监听port1</span></span><br><span class="line">  navigator.<span class="property">serviceWorker</span>.<span class="property">controller</span>.<span class="title function_">postMessage</span>(&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;PING&#x27;</span><span class="comment">//发送PING</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>SW端写法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">self.<span class="title function_">addEventListener</span>(<span class="string">&quot;message&quot;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> data = event.<span class="property">data</span>;</span><br><span class="line">    <span class="keyword">if</span> (!!data) &#123;</span><br><span class="line">        <span class="keyword">switch</span> (data.<span class="property">type</span>) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;INIT&#x27;</span>:</span><br><span class="line">                self.<span class="property">ClientPort</span> = event.<span class="property">ports</span>[<span class="number">0</span>];</span><br><span class="line">            <span class="attr">default</span>:</span><br><span class="line">                self.<span class="property">ClientPort</span>.<span class="title function_">postMessage</span>(&#123;</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&#x27;DATA&#x27;</span>,</span><br><span class="line">                    <span class="attr">data</span>: <span class="string">&#x27;pong&#x27;</span></span><br><span class="line">                &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>然后查看控制台,你就会看到里面一直在乒乒乓乓,说明成功了.</p><p>我们简单的改写一下,变成异步形式传输数据:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mCh = &#123;</span><br><span class="line">        <span class="attr">init</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">window</span>.<span class="property">messageChannel</span> = <span class="keyword">new</span> <span class="title class_">MessageChannel</span>();</span><br><span class="line">            navigator.<span class="property">serviceWorker</span>.<span class="property">controller</span>.<span class="title function_">postMessage</span>(&#123;</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;INIT&#x27;</span>,</span><br><span class="line">            &#125;, [messageChannel.<span class="property">port2</span>]);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">send</span>: <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> uuid = (<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&#x27;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&#x27;</span>.<span class="title function_">replace</span>(<span class="regexp">/[xy]/g</span>, <span class="keyword">function</span> (<span class="params">c</span>) &#123;</span><br><span class="line">                        <span class="keyword">var</span> r = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">16</span> | <span class="number">0</span>, v = c == <span class="string">&#x27;x&#x27;</span> ? r : (r &amp; <span class="number">0x3</span> | <span class="number">0x8</span>);</span><br><span class="line">                        <span class="keyword">return</span> v.<span class="title function_">toString</span>(<span class="number">16</span>);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;)()</span><br><span class="line">                navigator.<span class="property">serviceWorker</span>.<span class="property">controller</span>.<span class="title function_">postMessage</span>(&#123;</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&#x27;DATA&#x27;</span>,</span><br><span class="line">                    <span class="attr">data</span>: data,</span><br><span class="line">                    <span class="attr">id</span>: uuid</span><br><span class="line">                &#125;);</span><br><span class="line">                <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(&#123;</span><br><span class="line">                        <span class="attr">message</span>: <span class="string">&#x27;timeout&#x27;</span>,</span><br><span class="line">                        <span class="attr">ok</span>: <span class="literal">false</span></span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;, <span class="number">2000</span>);</span><br><span class="line">                messageChannel.<span class="property">port1</span>.<span class="property">onmessage</span> = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (event.<span class="property">data</span>.<span class="property">id</span> === uuid) &#123;</span><br><span class="line">                        <span class="title function_">resolve</span>(&#123;</span><br><span class="line">                            <span class="attr">message</span>: event.<span class="property">data</span>.<span class="property">data</span>,</span><br><span class="line">                            <span class="attr">ok</span>: <span class="literal">true</span></span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125;;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>由于MessageChannel特性,一个port只要不是连续传输数据就会被断开.所以每次传输时我们要先初始化,后发送数据.</p><p>由于传输时无状态的,我们将每一个包都打上特定的uuid,返回包里也写上对应的uuid即可判断那个包是哪个对应的返回值.</p><p>SW端也要做一点点相应的改动</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">self.<span class="property">ClientPort</span>.<span class="title function_">postMessage</span>(&#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="attr">id</span>: data.<span class="property">id</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>这样,一个兼容性较好的SW双向传输就解决了.</p><h4 id="Broadcast-Channel"><a href="#Broadcast-Channel" class="headerlink" title="Broadcast Channel"></a>Broadcast Channel</h4><blockquote><p>请注意,BroadCast虽然写法建议,但是对浏览器兼容性要求非常高[Chrome 54,IOS Safari全线不支持].用此api请三思.</p><p>另外,由于是广播形式,一个页面如果有多个SW,他们会同时收到消息.</p></blockquote><p>前端</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> broadcast = <span class="keyword">new</span> <span class="title class_">BroadcastChannel</span>(<span class="string">&#x27;Channel Name&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">send_ping</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    broadcast.<span class="title function_">postMessage</span>(&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;PING&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">broadcast.<span class="property">onmessage</span> = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;PONG&#x27;</span>)</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">send_ping</span>()</span><br><span class="line">    &#125;, <span class="number">500</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">send_ping</span>()</span><br></pre></td></tr></table></figure><p>SW端</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> broadcast = <span class="keyword">new</span> <span class="title class_">BroadcastChannel</span>(<span class="string">&#x27;Channel Name&#x27;</span>);</span><br><span class="line">broadcast.<span class="property">onmessage</span> = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    broadcast.<span class="title function_">postMessage</span>(&#123; <span class="attr">type</span>: <span class="string">&quot;PONG&quot;</span> &#125;)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>只要ChannelName对应,即可在里面顺利传输消息.</p><h2 id="细节与注意-Something-Small-But-Need-to-Be-Mentioned"><a href="#细节与注意-Something-Small-But-Need-to-Be-Mentioned" class="headerlink" title="细节与注意 / Something Small But Need to Be Mentioned"></a>细节与注意 / Something Small But Need to Be Mentioned</h2><h3 id="无法修改的-Header"><a href="#无法修改的-Header" class="headerlink" title="无法修改的 Header"></a>无法修改的 Header</h3><p>由于ServiceWorker本质上仍然属于浏览器,因此,你无法控制例如header中的<code>Host</code>\<code>Refferer</code>\<code>Access-Control-Allow-Origin</code>用于绕过防盗链\CORS\指定host选择ip</p><h3 id="难以卸载的-SW"><a href="#难以卸载的-SW" class="headerlink" title="难以卸载的 SW"></a>难以卸载的 SW</h3><p>SW一大特性,一旦被安装,就不能通过传统方式卸载掉.</p><p>如果你直接删除<code>sw.js</code>文件并删除安装代码,那么,新用户是不会被安装的,但是原先已经安装过的用户sw会继续劫持这他们的网页,导致老用户网页不更新或者出现异常.</p><p>正确的删除方法是将安装代码改成卸载代码:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">navigator.serviceWorker.getRegistrations().then(function(registrations) &#123;</span><br><span class="line"> for(let registration of registrations) &#123;</span><br><span class="line">  registration.unregister()</span><br><span class="line">&#125; &#125;)</span><br></pre></td></tr></table></figure><p>并将sw内容改成透明代理,方便没有卸载的用户正常使用.</p><h3 id="堵塞整个浏览器的代码"><a href="#堵塞整个浏览器的代码" class="headerlink" title="堵塞整个浏览器的代码"></a>堵塞整个浏览器的代码</h3><p>由于SW运行在DOM上下文,如果在sw中执行一些消耗资源的代码会直接耗尽浏览器资源,与dom不同的是,dom耗资源代码只会堵塞一个线程,另一个线程依旧可以正常工作,而sw一旦堵塞会将整个浏览器堵死.因此sw固然可以更快的计算,但万不可将一些极易死机的代码交给sw处理.</p><h1 id="End"><a href="#End" class="headerlink" title="End"></a>End</h1><p>这篇文章结尾的很仓促,毕竟已经快拖了一个月了,也有很多东西没有讲清楚,未来可能会小修小改.</p><p>篇幅所限,一些sw其他功能并没有详细讲述,比如后台更新或者推送通知.这些功能在实际开发中并不是特别有用,或者在国内大环境下并不适合.可能这些功能会在下一篇文章,sw的实操中讲述.</p><p>停下笔的时候,hexo统计这篇文章已经将近1万字,阅读时间近100分钟.不过我认为这值得,毕竟sw就是这么一个凭借着奇思妙想就能绽放出Spark的事物.唯有独特的创造力才能激发无限可能.</p><p>当然,这篇文章讲述的都是些非常基础的东西,那在下一篇文章,我会贴出一个个demo,希望你们能对这些充满着智慧的样例激发你们的灵感.</p><p>另外,在祝贺你们,虎年大吉,新年快乐!</p>]]></content>
      
      
      <categories>
          
          <category> 随心扯 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 黑科技 </tag>
            
            <tag> JSdelivr </tag>
            
            <tag> ServiceWorker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022新春小记</title>
      <link href="/posts/7c7f6808/"/>
      <url>/posts/7c7f6808/</url>
      
        <content type="html"><![CDATA[<p>这是一篇随迟但到的新春贺词（<br><span id="more"></span></p><p>首先呢，旧年总结是不可能做的，这辈子都不可能做的。我发这篇文章的首要目的就是证明我还活着，毕竟上一篇文章到现在已经快半年了（实际上确实有半年）</p><p>2021年是牛年，这一年过得很平淡，但却伴随着不少热点事件，刨去政治的，防沉迷、反诈、jsd掉备等等。这些热点我会在以后（maybe）一一热炒冷饭。</p><p>新文仍在赶工，可以<a href="/p/c0af86bb.html">戳我围观新文</a>（还没写完）</p><p>博客已经开启了自己写的ChenBlogHelper，在第一次进入博客的时候会自动安装并刷新激活。此helper能够在前端绕过备案、优选cdn以及统计。</p><p>博客现在在中国大陆有一个广州节点承载，希望这能够给你们带来更好的访问体验。</p><p>总之，新的一年，祝大家顺心顺意，愉快地享受新年的每一天！</p>]]></content>
      
      
      <categories>
          
          <category> 随心扯 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 新年贺词 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>为什么是APP而不是网页</title>
      <link href="/posts/c0af86a9/"/>
      <url>/posts/c0af86a9/</url>
      
        <content type="html"><![CDATA[<p>一个简单的功能，完全可以在浏览器内实现，凭什么国内某些软件这么希望你去下载，去使用他们的app？</p><span id="more"></span><p>就在不久前，我是真的体会到了什么叫流氓厂商。点名批评一下百度，我苹果手机Safari随便在百度上搜索点什么，还没把营销号、广告和垃圾信息从眼中剔除，突然间，AppStore界面平移到我眼前，一个叫<code>百度</code>的软件可怜巴巴的望着我。于是我点击左上角返回键，然后继续搜索…</p><p>这不是一件在国内很常见的事情吗，然后我继续浏览，点击一个百度百科网页链接，又是还没开看，appstore显示了出来，这次是百度百科app。</p><p>好，没事，我平复了一下心情，整理了一下被打乱的思绪，继续浏览着百科，滑到页面底部，加载新的内容时，一个弹窗显示出来：使用百度百科APP，获取更好的浏览体验！</p><p>关闭，继续浏览。</p><p>点击百科内部的内链，尝试跳转到另一个百科界面，突然，浏览器一片空白，我又被引导向appstore。</p><p>很抱歉，我直接关闭了百度，使用谷歌和维基百科继续查询资料。这一次，谷歌虽然也在下方提示【在IOS上尝试使用谷歌桌面版，获取更好的体验】，但至始至终没有把我强制跳到appstore。维基百科就更不用说了，连使用app都没有提示。</p><p>退出了浏览器，我不禁陷入了沉思。我还记得不久前拿到朋友的新鸿蒙手机，划开屏幕一看，第一个界面全是百度系列：百度、百度搜索、百度智能浏览器、百度贴吧、百度知道…一个个功能冗余的百度app赫然显示在我的眼前，当我一脸震惊地看向朋友，他耸耸肩：点进去就自己下载的，不安装就没办法看了。</p><p>看着自己苹果手机中的两个一个浏览器：Safari和Alook，我停止了思考，当一个大厂天天为自己的免费网盘带宽叫屈，下载一个3M的电子书被限成一副狗样时，你还能相信他有这么大的带宽给用户推自己的动辄100MB的APP？这能算是本末倒置吗？</p><p>从此，我在手机上再也没有用过百度系。必应和谷歌，DogeDoge和DuckDuckGo成为了我的搜索主力。</p><h1 id="为什么是APP"><a href="#为什么是APP" class="headerlink" title="为什么是APP"></a>为什么是APP</h1><h2 id="隐私"><a href="#隐私" class="headerlink" title="隐私"></a>隐私</h2><p>app对隐私的疯狂到了什么地步？我也就不贴知乎链接了，就贴一个今天cctv的内容吧：</p><p><a href="https://tv.cctv.com/live/cctv13/index.shtml?spm=C28340.P1dzdfA9CsHZ.E1oxZyG629bH.79&amp;stime=1627446780&amp;etime=1627448400&amp;type=lbacks">https://tv.cctv.com/live/cctv13/index.shtml?spm=C28340.P1dzdfA9CsHZ.E1oxZyG629bH.79&amp;stime=1627446780&amp;etime=1627448400&amp;type=lbacks</a></p><p>在安卓环境【尤其是国内某些套壳系统】下，app的权限不算小，有些时候可以在没有提醒的情况下把你的浏览器记录翻个遍。</p><p>ios其实相对安卓来说，至少系统能主动提醒用户是否给予其访问权利。</p><p>这一点我也十分佩服MIUI，能在这种隐私岁随意获取风气下站住来守住用户的底线，无论其目的如何，这一点已经赢得了我的好感【虽然我不用安卓】</p><p>对于软件商来说，用户的数据是一大笔财富。比如知道所有人的喜好、购买能力等，这些信息掌握得越细致，越能挖掘到更多的商机。</p><p>暂且不说百度，就连TIM和QQ也会主动扫描用户Chrome浏览记录<span class="heimu"><del>我靠那我的nhentai浏览记录怎么办</del></span></p><h2 id="互唤醒【For安卓】"><a href="#互唤醒【For安卓】" class="headerlink" title="互唤醒【For安卓】"></a>互唤醒【For安卓】</h2><p>为了实现广告营销，部分软件实际上要向用户主动推送广告信息。</p><p>尤其是安卓，由于谷歌市场退出中国大陆，国内安卓生态其实很乱，一个简单的消息推送，也能难倒一群开发者。</p><p>为什么消息推送变成了一个难题？其实我们想象中的消息推送与实际上的方式有很大差距:</p><p>想象中：用户手机&lt;==主动推送==微信服务器<br>实际上：用户手机&lt;==被动推送==&gt;苹果|安卓消息推送服务器&lt;==主动推送==微信服务器</p><p>苹果还好说，18年以前经常会出现微信无法推送的情况，但自从大陆线路优化以及云上贵州的迁移，其推送服务逐渐变得正常。然而谷歌早已退出中国市场，其内置的推送服务器已经不可链接，请问这些app这么办？</p><p>答：常驻系统后台。</p><p>但是常驻系统后台成为一个Zombine进程也不可避免会被杀掉，请问这又能怎么办？</p><p>答：相互唤醒。</p><p>当用户打开一个app，此app会在后台激活另一群app，然后如果当前app被杀了，被激活的app又会激活那个被杀的app。</p><p>这样就很好理解了虽然只有百度app才会推送广告，但他依旧会引导你去下载百度浏览器—-避免被杀掉啊。</p><h1 id="为什么不是浏览器应用"><a href="#为什么不是浏览器应用" class="headerlink" title="为什么不是浏览器应用"></a>为什么不是浏览器应用</h1><h2 id="隐私-1"><a href="#隐私-1" class="headerlink" title="隐私"></a>隐私</h2><p>在这个隐私即金钱的时代，对于国内厂商来说，首先一个遗憾的事情是，浏览器是很难获取到用户的隐私信息。不是说功能限制，而是浏览器其核心就是沙盒化。在没有用户同意和外接接口、插件的前提下，你不可能直接用js获取到用户手机/电脑上的文件。</p><p>而且最致命的是，如果网页应用敢在后台偷偷上传用户隐私，控制台一开就会使其暴露无遗，相对比APP的黑盒操作，那简直是天差地别。</p><h2 id="功能限制"><a href="#功能限制" class="headerlink" title="功能限制"></a>功能限制</h2><p>js功能其实很强大，但有些底层和协议上的限制不能做就是不能做，你不可能用js空手写一个SMTP发送邮件，你也不可能直接用SSH协议链接服务器【WebSSH需要在服务器主动安装服务端】</p><p>其次，一些十分耗资源和计算力的服务不可能在浏览器上实现，比如腾讯不可能把王者荣耀搬到浏览器上，你也不可能在浏览器里跑机器学习。</p><h2 id="网络限制"><a href="#网络限制" class="headerlink" title="网络限制"></a>网络限制</h2><p>如果使用浏览器，其每一次打开服务网店都要重新下载上面的js、css和图片资源，这一瞬间爆发对服务器压力其实不小。</p><p>而使用app，他可以事先在后台下载好广告图片，其样式和功能无需重新下载，并且很多资源可以缓存在本地，即使短暂离线也能推送。</p><p>这一点，PWA技术完全可以胜任。PWA通过在浏览器内ServiceWorker拦截和缓存内容实现离线浏览。但目前来讲PWA技术在国内不温不火【很明显，触碰到了某些企业的利益】，所以还是以应用程序为主。</p><p><span class="heimu">但是，你这样剩下来的流量费还是比不过强制更新来的多啊</span></p><h1 id="为什么国外没有出现类似的情况"><a href="#为什么国外没有出现类似的情况" class="headerlink" title="为什么国外没有出现类似的情况"></a>为什么国外没有出现类似的情况</h1><h2 id="监管缺失"><a href="#监管缺失" class="headerlink" title="监管缺失"></a>监管缺失</h2><p>海外，安卓应用最官方的商店只有一家：GooglePlay，虽然不像AppStore那种不上架连安装都不给的程度，但也是一种象征。没有上架谷歌商店的应用基本都会被判定为盗版或者危险。而且谷歌play对广告监管很严。如果一个应用敢像百度般，疯狂推送广告和自唤醒，可能连安全审查都过不去。</p><p>在国内，连老大都管不了，宛若袁世凯暴毙天下军阀混战，其乱象不言而喻。</p><h2 id="隐私意识缺乏"><a href="#隐私意识缺乏" class="headerlink" title="隐私意识缺乏"></a>隐私意识缺乏</h2><p>李彦宏有句<del>名言</del>：中国人更愿意用隐私交换便捷性。</p><p>虽然此话一出被无数网友嘲讽，但也不得不承认这确实如此。甚至有些时候自己也是被迫的。没有多少人会上网的时候开无数个虚拟机中继代理AdGuard，相反，有更多人为了PDD的几分钱蔬菜而抢破头。一句话：国人都喜欢薅羊毛，但最终都会成为韭菜被割。</p><p>相反，在国外，人们对于隐私十分看重，哪怕GoogleAdsense都被罚了好几次，还不用说Tor之类的隐私保护软件。</p><h2 id="使用观念的不同"><a href="#使用观念的不同" class="headerlink" title="使用观念的不同"></a>使用观念的不同</h2><p>我个人的习惯是，完成一件事情，用什么东西都越轻越好，不是有必要就不下客户端。比如在电脑微信接收消息，你可以选择下载微信客户端完成传输，也可以用<a href="https://wx.qq.com">网页微信</a>。相较于前者，后者用完就关，不留痕迹，速度也快。</p><p>然而国人的习惯大多是：先下载下来，万一以后有用呢。</p><p>当我看到电视上的手机广告，大多8H16G运存128G内存起步，盯着手里这台国产只装了QQ到2021年还能打Minecraft的iPhone6s【实际配置2GB运存A9处理器】，不禁留下了悔恨的泪水：幸好没买安卓。</p><p>安卓手机即使内存再大，其底层核心还是虚拟化，加上国内的恶劣的生态，如果你不留神多下点软件，其流畅度甚至比不过6年前的6s。</p><p>而手机卡，大多数人的第一个想法是：换一台手机。而不是：我删掉点软件，只保留QQ和微信。</p><p>尤其是，在国内的内循环已经完成的前提下，更多人选择了买爱国手机，装爱国软件。实际上，留一条隐私底线其实也没有什么。但偏偏有人喜欢把自己隐私送给别人。</p><h1 id="后言"><a href="#后言" class="headerlink" title="后言"></a>后言</h1><p>实际上，绝大多数软件从C/S架构向B/S架构的转换是不可避免的。但是国内的生态似乎在阻碍着这一发展。</p><p>或许有人会问，隐私再保护有什么用。那我只能说，如果你的隐私在黑市只能卖1毛钱一条，那隐私保护的好的人或许能卖5块钱一条。真正的危害其实不在于精准推送，而更怕有人会拿去做违法事情，暴力你，诈骗你。</p>]]></content>
      
      
      <categories>
          
          <category> 叨叨念 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 浏览器 </tag>
            
            <tag> 应用 </tag>
            
            <tag> 隐私 </tag>
            
            <tag> app </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>致敬袁老，精神永在</title>
      <link href="/posts/4ee6384/"/>
      <url>/posts/4ee6384/</url>
      
        <content type="html"><![CDATA[<p>“共和国勋章”获得者、中国工程院院士、国家杂交水稻工程技术研究中心主任、湖南省政协原副主席袁隆平，因多器官功能衰竭，于2021年5月22日13时07分在长沙逝世，享年91岁。</p><p>感谢袁老，让我们端的起饭碗，让我们00后的孩子至少吃得饱。一路走好。</p><p>我的博客即将同步至腾讯云+社区，邀请大家一同入驻：<a href="https://cloud.tencent.com/developer/support-plan?invite_code=3uzi7w7znlsa">https://cloud.tencent.com/developer/support-plan?invite_code=3uzi7w7znlsa</a></p><style>html{filter: grayscale(100%);-webkit-filter: grayscale(100%);-moz-filter: grayscale(100%);-ms-filter: grayscale(100%);-o-filter: grayscale(100%);filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);}</style>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>再见Z16，Hi Laffey！</title>
      <link href="/posts/a12e0ab7/"/>
      <url>/posts/a12e0ab7/</url>
      
        <content type="html"><![CDATA[<p>2019-7-16 本站建成，第二天，Z16进入了我的博客。今天，我更换了陪伴我641天的看板娘。</p><span id="more"></span><p>越来越多的模型采用了最新版本的Live2d Cubism 3或4【以下简称Live2d V3/V4】，而我用的hexo live2d插件<a href="https://github.com/EYHN/hexo-helper-live2d">hexo-helper-live2d</a>已经很久没更新了，直接使用v3模型显然是不行的。</p><p>原来用的Z16【V2】模型地址：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://npm.elemecdn.com/chenyfan-cdn@2.0.0/js/live2d-widget-model-z16/assets/z16.model.json</span><br></pre></td></tr></table></figure><p>格式如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Live2DViewerEX Config 1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;moc/z16.moc&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;textures&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;moc/z16.1024/texture_00.png&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;layout&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;center_x&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;center_y&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;width&quot;</span><span class="punctuation">:</span> <span class="number">2</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;motions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;idle&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;file&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mtn/idle.mtn&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;expressions&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;f00.exp.json&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;file&quot;</span><span class="punctuation">:</span> <span class="string">&quot;exp/f00.exp.json&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;physics&quot;</span><span class="punctuation">:</span> <span class="string">&quot;z16.physics.json&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>而V3模型普遍长这样：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Version&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;FileReferences&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;Moc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lafei_4.moc3&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Textures&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;textures/texture_00.png&quot;</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Physics&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lafei_4.physics3.json&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Motions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;File&quot;</span><span class="punctuation">:</span> <span class="string">&quot;motions/complete.motion3.json&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                ...</span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Groups&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;Target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Parameter&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;Name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LipSync&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;Ids&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;ParamMouthOpenY&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>将所有除了Ver信息全部移入了<code>FileReferences</code>Key里面。</p><p>当然，V3和V2的差别肯定不止json格式的差异，所以我们很显然要一个新的js加载V3。</p><h1 id="更新V3-4-Core"><a href="#更新V3-4-Core" class="headerlink" title="更新V3/4 Core"></a>更新V3/4 Core</h1><blockquote><p>Live2d官网已经决定后来的live2d版本都允许向前兼容到V3,所以V4的core还是能加载V3的模型[当然V2不行]</p></blockquote><p>啃了一遍官文,我们首先需要这些js插件:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">live2dcubismcore.js</span><br><span class="line">live2dcubismframework.js</span><br><span class="line">pixi.js</span><br><span class="line">live2dcubismpixi.js</span><br></pre></td></tr></table></figure><p>首先说<code>live2dcubismcore.js</code>,这是一个急需注意的js,由于版权原因,你需要自行去官网下载再上传到自己的cdn,所以不能随便找一个人的网站就爬下来<strong>[包括我的]</strong>,这样会收到官方警告的。</p><p>前往<a href="https://cubism.live2d.com/sdk-web/cubismcore/live2dcubismcore.min.js">https://cubism.live2d.com/sdk-web/cubismcore/live2dcubismcore.min.js</a>下载。</p><p>然后剩下的你可以选择嫖我的</p><p><a href="&#109;&#97;&#x69;&#x6c;&#x74;&#x6f;&#58;&#104;&#x74;&#x74;&#x70;&#115;&#x3a;&#47;&#47;&#99;&#100;&#x6e;&#46;&#x6a;&#115;&#100;&#101;&#108;&#x69;&#118;&#114;&#x2e;&#x6e;&#x65;&#x74;&#x2f;&#99;&#111;&#109;&#98;&#105;&#110;&#x65;&#47;&#110;&#112;&#x6d;&#x2f;&#x63;&#x68;&#101;&#110;&#x79;&#x66;&#97;&#x6e;&#x2d;&#x6f;&#115;&#115;&#x40;&#x32;&#46;&#x30;&#46;&#51;&#47;&#112;&#x69;&#120;&#105;&#46;&#109;&#x69;&#x6e;&#x2e;&#x6a;&#115;&#44;&#110;&#x70;&#109;&#x2f;&#x63;&#104;&#101;&#110;&#x79;&#102;&#97;&#x6e;&#x2d;&#x6f;&#x73;&#x73;&#64;&#50;&#x2e;&#x30;&#46;&#x33;&#47;&#x6c;&#x69;&#x76;&#x65;&#50;&#x64;&#x63;&#117;&#98;&#105;&#115;&#109;&#102;&#x72;&#97;&#109;&#101;&#119;&#111;&#x72;&#x6b;&#46;&#109;&#x69;&#x6e;&#46;&#x6a;&#x73;&#44;&#110;&#112;&#109;&#x2f;&#99;&#104;&#101;&#110;&#121;&#102;&#x61;&#x6e;&#45;&#111;&#x73;&#x73;&#64;&#50;&#46;&#x30;&#46;&#x33;&#47;&#x6c;&#105;&#x76;&#101;&#50;&#x64;&#99;&#x75;&#x62;&#105;&#x73;&#x6d;&#112;&#x69;&#x78;&#105;&#46;&#x6d;&#105;&#x6e;&#x2e;&#106;&#115;">&#104;&#x74;&#x74;&#x70;&#115;&#x3a;&#47;&#47;&#99;&#100;&#x6e;&#46;&#x6a;&#115;&#100;&#101;&#108;&#x69;&#118;&#114;&#x2e;&#x6e;&#x65;&#x74;&#x2f;&#99;&#111;&#109;&#98;&#105;&#110;&#x65;&#47;&#110;&#112;&#x6d;&#x2f;&#x63;&#x68;&#101;&#110;&#x79;&#x66;&#97;&#x6e;&#x2d;&#x6f;&#115;&#115;&#x40;&#x32;&#46;&#x30;&#46;&#51;&#47;&#112;&#x69;&#120;&#105;&#46;&#109;&#x69;&#x6e;&#x2e;&#x6a;&#115;&#44;&#110;&#x70;&#109;&#x2f;&#x63;&#104;&#101;&#110;&#x79;&#102;&#97;&#x6e;&#x2d;&#x6f;&#x73;&#x73;&#64;&#50;&#x2e;&#x30;&#46;&#x33;&#47;&#x6c;&#x69;&#x76;&#x65;&#50;&#x64;&#x63;&#117;&#98;&#105;&#115;&#109;&#102;&#x72;&#97;&#109;&#101;&#119;&#111;&#x72;&#x6b;&#46;&#109;&#x69;&#x6e;&#46;&#x6a;&#x73;&#44;&#110;&#112;&#109;&#x2f;&#99;&#104;&#101;&#110;&#121;&#102;&#x61;&#x6e;&#45;&#111;&#x73;&#x73;&#64;&#50;&#46;&#x30;&#46;&#x33;&#47;&#x6c;&#105;&#x76;&#101;&#50;&#x64;&#99;&#x75;&#x62;&#105;&#x73;&#x6d;&#112;&#x69;&#x78;&#105;&#46;&#x6d;&#105;&#x6e;&#x2e;&#106;&#115;</a></p><h1 id="加载模型"><a href="#加载模型" class="headerlink" title="加载模型"></a>加载模型</h1><p>我选择白嫖<a href="https://github.com/Himehane/live2d_on_website/blob/master/loadModel.js">https://github.com/Himehane/live2d_on_website/blob/master/loadModel.js</a></p><p>当然这有一点点小问题，比如上面这么配置：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> baseModelPath = <span class="string">&#x27;https://npm.elemecdn.com/chenyfan-oss@2.0.2&#x27;</span></span><br><span class="line"><span class="keyword">var</span> modelNames = [<span class="string">&quot;lafei_4&quot;</span>];</span><br></pre></td></tr></table></figure><p>那么他会这么请求</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://npm.elemecdn.com/chenyfan-oss@2.0.2/lafei_4/lafei_4.model3.json</span><br></pre></td></tr></table></figure><p>可是问题是我没有加一层文件夹。。。我的位置是</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://npm.elemecdn.com/chenyfan-oss@2.0.2/lafei_4.model3.json</span><br></pre></td></tr></table></figure><p>修改loadModel 288行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- modelPath =  baseModelPath + modelName + &quot;/&quot; + modelName + &quot;.model3.json&quot;;</span><br><span class="line">+ modelPath = baseModelPath + &quot;/&quot; + modelName + &quot;.model3.json&quot;;</span><br></pre></td></tr></table></figure><h1 id="样式调整"><a href="#样式调整" class="headerlink" title="样式调整"></a>样式调整</h1><p>首先给live2d一个div位置</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;live2d&quot;</span> <span class="attr">class</span>=<span class="string">&quot;live2d&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;live2dm&quot;</span> <span class="attr">class</span>=<span class="string">&quot;live2d&quot;</span> <span class="attr">style</span>=<span class="string">&quot;z-index: 999!important;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后样式微调</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.live2d</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed; </span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: -<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">500px</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">437.5px</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">998</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>bottom</code>将其固定页面底端，大小用<code>!important</code>强制固定<del>【不规范写法，请勿模仿】</del></p><h1 id="判断屏幕大小进行懒加载"><a href="#判断屏幕大小进行懒加载" class="headerlink" title="判断屏幕大小进行懒加载"></a>判断屏幕大小进行懒加载</h1><p>嘿嘿，这么大的js怎么不能懒加载呢</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">loadScript</span>(<span class="params">src, callback</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>),</span><br><span class="line">            head = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;head&#x27;</span>)[<span class="number">0</span>];</span><br><span class="line">        script.<span class="property">type</span> = <span class="string">&#x27;text/javascript&#x27;</span>;</span><br><span class="line">        script.<span class="property">charset</span> = <span class="string">&#x27;UTF-8&#x27;</span>;</span><br><span class="line">        script.<span class="property">src</span> = src;</span><br><span class="line">        <span class="keyword">if</span> (script.<span class="property">addEventListener</span>) &#123;</span><br><span class="line">            script.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="title function_">callback</span>();</span><br><span class="line">            &#125;, <span class="literal">false</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (script.<span class="property">attachEvent</span>) &#123;</span><br><span class="line">            script.<span class="title function_">attachEvent</span>(<span class="string">&#x27;onreadystatechange&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> target = <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">srcElement</span>;</span><br><span class="line">                <span class="keyword">if</span> (target.<span class="property">readyState</span> == <span class="string">&#x27;loaded&#x27;</span>) &#123;</span><br><span class="line">                    <span class="title function_">callback</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        head.<span class="title function_">appendChild</span>(script);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">loadlive2d</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientWidth</span> &gt; <span class="number">600</span>) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="property">onreadystatechange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">readyState</span> == <span class="string">&quot;complete&quot;</span>) &#123;</span><br><span class="line">                    <span class="title function_">loadScript</span>(<span class="string">&#x27;https://npm.elemecdn.com/chenyfan-os@0.0.0-r1/load.js&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">                        <span class="title function_">loadModel</span>();</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="title function_">loadlive2d</span>()</span><br></pre></td></tr></table></figure><p><code>document.body.clientWidth</code>判断可见宽度，<code>loadScript</code>强制异步执行loadModel，丢上去就行了</p><p>然后你就可以正常使用live2d了，这是一个demo：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.live2d</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">left</span>: -<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">bottom</span>: -<span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">500px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">437.5px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">z-index</span>: <span class="number">998</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;live2d&quot;</span> <span class="attr">class</span>=<span class="string">&quot;live2d&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;live2dm&quot;</span> <span class="attr">class</span>=<span class="string">&quot;live2d&quot;</span> <span class="attr">style</span>=<span class="string">&quot;z-index: 999!important;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://npm.elemecdn.com/chenyfan-oss@2.0.3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0-img/hpp_upload/1618822975000.png" alt=""></p><p>然后添加到Hexo就改模板吧…没什么好说的<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.8/5896ec2cb7f39.gif" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 随心记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Live2d </tag>
            
            <tag> Z16 </tag>
            
            <tag> Laffey </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>看毛片(KMP)算法小记</title>
      <link href="/posts/cef76c6c/"/>
      <url>/posts/cef76c6c/</url>
      
        <content type="html"><![CDATA[<p>一直摸鱼的CYF突然安静了下来,因为他想学学一个别人都会的算法。<br><span id="more"></span></p><p><del>我菜就是菜，只能学别人早就会的算法了</del></p><p>先贴维基链接【讲的比CSDN清楚，自己访问】</p><p><a href="https://zh.wikipedia.org/wiki/KMP%E7%AE%97%E6%B3%95">https://zh.wikipedia.org/wiki/KMP%E7%AE%97%E6%B3%95</a></p><p>长串匹配短串，基本上DP打一遍就冲了。</p><p>DP本质简单的很：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">匹配串：</span><br><span class="line">ABCDPOPABQO</span><br><span class="line">待匹配串：</span><br><span class="line">ABQ</span><br></pre></td></tr></table></figure><p>开始匹配</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ABCDPOPABQO</span><br><span class="line">↑</span><br><span class="line">ABQ</span><br><span class="line">↑</span><br><span class="line"></span><br><span class="line">ABCDPOPABQO</span><br><span class="line"> ↑</span><br><span class="line">ABQ</span><br><span class="line"> ↑</span><br><span class="line"> </span><br><span class="line">ABCDPOPABQO</span><br><span class="line">  ↑</span><br><span class="line">ABQ</span><br><span class="line">  ↑</span><br><span class="line">  </span><br><span class="line">ABCDPOPABQO</span><br><span class="line"> ↑</span><br><span class="line"> ABQ</span><br><span class="line"> ↑</span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>显而易见，这种复杂度极高【O(m*n)】，当然，冲个入门级别的绝对没问题</p><p>然而类似基因匹配这种数量级恶心心的东西，DP绝对是不够的。</p><p>或者说一个恶心的数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB</span><br><span class="line">AAB</span><br></pre></td></tr></table></figure><p>这样如果直接硬DP，那绝对TLE。</p><p>于是，我们选择一个简单的算法，<span class="heimu">看毛片</span> KMP算法，他可以很好的提升我们匹配的效率</p><h1 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h1><p>首先名字很有意思，之所以叫做KMP，是因为这个算法是由Knuth、Morris、Pratt三个提出来的，取了这三个人的名字的头一个字母。</p><h2 id="跳过已匹配字符"><a href="#跳过已匹配字符" class="headerlink" title="跳过已匹配字符"></a>跳过已匹配字符</h2><p>扯远了，将匹配方式简单讲一下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ABCDPOPABQO</span><br><span class="line">↑</span><br><span class="line">ABQ</span><br><span class="line">↑</span><br><span class="line"></span><br><span class="line">匹配，指针右移【以下未特殊表明均指针】</span><br><span class="line"></span><br><span class="line">ABCDPOPABQO</span><br><span class="line"> ↑</span><br><span class="line">ABQ</span><br><span class="line"> ↑</span><br><span class="line"> </span><br><span class="line">匹配，右移</span><br><span class="line"></span><br><span class="line">ABCDPOPABQO</span><br><span class="line">  ↑</span><br><span class="line">ABQ</span><br><span class="line">  ↑</span><br></pre></td></tr></table></figure><p>这时候我们撞上了不匹配的情景，怎么办？右移一位？</p><p>不，我们发现原串里面的<code>C</code>在待匹配串里面根本没出现，并且原串[0]~[2]均不匹配，所以我们选择把匹配串整个向右移动三位</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">ABCDPOPABQO</span><br><span class="line">   ↑</span><br><span class="line">   ABQ</span><br><span class="line">   ↑</span><br><span class="line">   </span><br><span class="line">不匹配，字符串右移一位</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ABCDPOPABQO</span><br><span class="line">↑</span><br><span class="line">    ABQ</span><br><span class="line">    ↑</span><br><span class="line">   </span><br><span class="line">省略数步</span><br><span class="line"></span><br><span class="line">ABCDPOPABQO</span><br><span class="line">       ↑</span><br><span class="line">       ABQ</span><br><span class="line">       ↑</span><br><span class="line">   </span><br><span class="line">匹配，右移</span><br><span class="line"></span><br><span class="line">ABCDPOPABQO</span><br><span class="line">        ↑</span><br><span class="line">       ABQ</span><br><span class="line">        ↑</span><br><span class="line"></span><br><span class="line">匹配，右移</span><br><span class="line"></span><br><span class="line">ABCDPOPABQO</span><br><span class="line">         ↑</span><br><span class="line">       ABQ</span><br><span class="line">         ↑</span><br><span class="line"></span><br><span class="line">匹配，右移</span><br><span class="line"></span><br><span class="line">这时候待匹配串已匹配完毕，记录并将整个串移动到末尾</span><br><span class="line"></span><br><span class="line">ABCDPOPABQO</span><br><span class="line">          ↑</span><br><span class="line">          ABQ</span><br><span class="line">          ↑</span><br><span class="line">  </span><br><span class="line">待匹配串已超过原串长度，结束</span><br></pre></td></tr></table></figure><h2 id="部分匹配"><a href="#部分匹配" class="headerlink" title="部分匹配"></a>部分匹配</h2><p>上面的例子可能没有讲到重点，接下来换个例子，部分匹配才是KMP的核心</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ABCEABCABCDABD</span><br><span class="line">ABCDABD</span><br></pre></td></tr></table></figure><p>OK我们开始匹配</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">ABCDABCDABDABCDABD</span><br><span class="line">↑</span><br><span class="line">ABCDABD</span><br><span class="line">↑</span><br><span class="line"></span><br><span class="line">ABCDABCDABDABCDABD</span><br><span class="line"> ↑</span><br><span class="line">ABCDABD</span><br><span class="line"> ↑</span><br><span class="line"> </span><br><span class="line">ABCDABCDABDABCDABD</span><br><span class="line">  ↑</span><br><span class="line">ABCDABD</span><br><span class="line">  ↑</span><br><span class="line"></span><br><span class="line">ABCDABCDABDABCDABD</span><br><span class="line">   ↑</span><br><span class="line">ABCDABD</span><br><span class="line">   ↑</span><br><span class="line">   </span><br><span class="line">ABCDABCDABDABCDABD</span><br><span class="line">    ↑</span><br><span class="line">ABCDABD</span><br><span class="line">    ↑</span><br><span class="line"></span><br><span class="line">ABCDABCDABDABCDABD</span><br><span class="line">     ↑</span><br><span class="line">ABCDABD</span><br><span class="line">     ↑</span><br><span class="line"></span><br><span class="line">ABCDABCDABDABCDABD</span><br><span class="line">      ↑</span><br><span class="line">ABCDABD</span><br><span class="line">      ↑</span><br></pre></td></tr></table></figure><p>这个时候我们发现了原串[6]与比较串不符合,这时候怎么办?直接跳到后面去?</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ABCDABCDABDABCDABD</span><br><span class="line">       ↑</span><br><span class="line">       ABCDABD</span><br><span class="line">       ↑</span><br></pre></td></tr></table></figure><p>好家伙,你会直接丢掉[4]~[10],而这正是我们要匹配的</p><p>所以我们定个小规矩:</p><blockquote><p>移动位数 = 已匹配的字符数 - 对应的部分匹配值</p><p>换句话说,就是移动到下一个重复片段的地方</p></blockquote><p>所以这个时候我们应该移动<strong>4位</strong>而不是<strong>6位</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ABCDABCDABDABCDABD</span><br><span class="line">      ↑</span><br><span class="line">    ABCDABD</span><br><span class="line">      ↑</span><br><span class="line">  </span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">ABCDABCDABDABCDABD</span><br><span class="line">          ↑</span><br><span class="line">    ABCDABD</span><br><span class="line">          ↑</span><br></pre></td></tr></table></figure><p>这个时候我们已经匹配到了一串,那么接下来怎么移?还是直接移动6位?</p><p>不,我们还是要用自己定下的规矩,移动<strong>4位</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ABCDABCDABDABCDABD</span><br><span class="line">          ↑</span><br><span class="line">        ABCDABD</span><br><span class="line">          ↑</span><br></pre></td></tr></table></figure><p>此时,我们才能将其整个向右移动<strong>2位</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ABCDABCDABDABCDABD</span><br><span class="line">           ↑</span><br><span class="line">           ABCDABD</span><br><span class="line">           ↑</span><br><span class="line">   </span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">ABCDABCDABDABCDABD</span><br><span class="line">                 ↑</span><br><span class="line">           ABCDABD</span><br><span class="line">                 ↑</span><br></pre></td></tr></table></figure><p>OK我们将其匹配完毕,整个<code>ABCDABCDABDABCDABD</code>包含两处<code>ABCDABD</code></p><h2 id="部分匹配表"><a href="#部分匹配表" class="headerlink" title="部分匹配表"></a>部分匹配表</h2><p>这是一张神奇的表格</p><p>首先我们搞清楚前缀和后缀是什么</p><p><code>SHITERS</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- 前缀Q[&#x27;S&#x27;,&#x27;SH&#x27;,&#x27;SHI&#x27;,&#x27;SHIT&#x27;,&#x27;SHITE&#x27;,&#x27;SHITER&#x27;]</span><br><span class="line">- 后缀H[&#x27;HITERS&#x27;,&#x27;ITERS&#x27;,&#x27;TERS&#x27;,&#x27;ERS&#x27;,&#x27;RS&#x27;,&#x27;S&#x27;]</span><br></pre></td></tr></table></figure><p>“部分匹配值”就是”前缀”和”后缀”的最长的共有元素的长度</p><p>那么<code>SHITERS</code>的部分匹配值是多少呢?相当于Q和H里面有几个元素是共存的?</p><p>答,一个</p><p>所以,其<code>S</code>部分匹配值是1，而其他均为0</p><p>所以这张表有什么用?和部分匹配表有什么关系?</p><p>回到之前的,我们会发现有些时候往后匹配时有时候后缀和前缀会相同,那么匹配值向右移动就是其部分匹配值。</p><h1 id="尝试上手"><a href="#尝试上手" class="headerlink" title="尝试上手"></a>尝试上手</h1><h2 id="板子题P3375"><a href="#板子题P3375" class="headerlink" title="板子题P3375"></a>板子题<a href="https://www.luogu.com.cn/problem/P3375">P3375</a></h2><p>匹配这样子就是有手就行，而所谓的<code>border</code>其实就是部分匹配值<del>比较扯淡的是第一次看的时候就是没搞懂border</del></p><p>扯皮点，直接搞getfail</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">getfail</span><span class="params">(<span class="type">int</span> plen)</span></span>&#123;</span><br><span class="line">    border[<span class="number">0</span>]=<span class="number">0</span>; </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;plen;i++)&#123;</span><br><span class="line">        <span class="type">int</span> j=border[i];</span><br><span class="line">        <span class="keyword">while</span>(j&amp;&amp;p[i]!=p[j]) j=border[j];</span><br><span class="line"><span class="keyword">if</span>(p[i]==p[j])border[i+<span class="number">1</span>]=j+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后夹带上主代码直接冲了</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> M 1000000</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//脚手架</span></span><br><span class="line"><span class="type">char</span> c[M],p[M];</span><br><span class="line"><span class="type">int</span> border[M];</span><br><span class="line"><span class="comment">//...getfail丢着</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,c);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,p);</span><br><span class="line">    <span class="type">int</span> clen=<span class="built_in">strlen</span>(c);</span><br><span class="line"><span class="type">int</span> plen=<span class="built_in">strlen</span>(p);</span><br><span class="line">    <span class="built_in">getfail</span>(plen);</span><br><span class="line">    <span class="type">int</span> j=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;clen;i++)&#123;</span><br><span class="line">        <span class="keyword">while</span>(j&amp;&amp;p[j]!=c[i]) j=border[j];</span><br><span class="line">        <span class="keyword">if</span>(p[j]==c[i]) j++;</span><br><span class="line">        <span class="keyword">if</span>(j==plen) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,i-plen+<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=plen;i++) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,border[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 摸鱼小记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Euserv正确打开优化方式</title>
      <link href="/posts/d788bdf3/"/>
      <url>/posts/d788bdf3/</url>
      
        <content type="html"><![CDATA[<p>Euserv，盛名远扬【老白嫖怪了】，但是如何合理打开它，却是一个难题。这篇文章就是简单讲讲合理使用其免费的纯IPv6小鸡</p><span id="more"></span><p>首先是bench测试普通小鸡</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">----------------------------------------------------------------------</span><br><span class="line"> CPU Model             : AMD Phenom(tm) II X6 1055T Processor</span><br><span class="line"> CPU Cores             : 1</span><br><span class="line"> CPU Frequency         : 3101.198 MHz</span><br><span class="line"> CPU Cache             : 512 KB</span><br><span class="line"> Total Disk            : 9.8 GB (3.4 GB Used)</span><br><span class="line"> Total Mem             : 976 MB (334 MB Used)</span><br><span class="line"> Total Swap            : 976 MB (0 MB Used)</span><br><span class="line"> System <span class="built_in">uptime</span>         : 76 days, 21 hour 6 min</span><br><span class="line"> Load average          : 16.17, 19.45, 20.53</span><br><span class="line"> OS                    : CentOS Linux release 7.9.2009 (Core)</span><br><span class="line"> Arch                  : x86_64 (64 Bit)</span><br><span class="line"> Kernel                : 4.20.8-1.el7.elrepo.x86_64</span><br><span class="line"> TCP CC                : cubic</span><br><span class="line"> Virtualization        : LXC</span><br><span class="line"> Organization          : AS29432 TREX Regional Exchanges Oy</span><br><span class="line"> Region                : Pirkanmaa</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> I/O Speed(1st run)    : 19.3 MB/s</span><br><span class="line"> I/O Speed(2nd run)    : 28.5 MB/s</span><br><span class="line"> I/O Speed(3rd run)    : 34.0 MB/s</span><br><span class="line"> Average I/O speed     : 27.3 MB/s</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> Node Name        Upload Speed      Download Speed      Latency     </span><br><span class="line"> Speedtest.net    288.12 Mbps       350.72 Mbps         46.84 ms </span><br></pre></td></tr></table></figure><p>这是一张简单优化后的小鸡</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">----------------------------------------------------------------------</span><br><span class="line"> CPU Model             : Intel(R) Xeon(R) CPU E3-1270 v3 @ 3.50GHz</span><br><span class="line"> CPU Cores             : 1</span><br><span class="line"> CPU Frequency         : 3740.322 MHz</span><br><span class="line"> CPU Cache             : 8192 KB</span><br><span class="line"> Total Disk            : 9.8 GB (0.9 GB Used)</span><br><span class="line"> Total Mem             : 976 MB (60 MB Used)</span><br><span class="line"> Total Swap            : 976 MB (0 MB Used)</span><br><span class="line"> System <span class="built_in">uptime</span>         : 0 days, 0 hour 36 min</span><br><span class="line"> Load average          : 5.06, 6.01, 7.01</span><br><span class="line"> OS                    : Debian GNU/Linux 10</span><br><span class="line"> Arch                  : x86_64 (64 Bit)</span><br><span class="line"> Kernel                : 4.20.8-1.el7.elrepo.x86_64</span><br><span class="line"> TCP CC                : cubic</span><br><span class="line"> Virtualization        : LXC</span><br><span class="line"> Organization          : AS13335 Cloudflare, Inc.</span><br><span class="line"> Location              : Frankfurt am Main / DE</span><br><span class="line"> Region                : Hesse</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> I/O Speed(1st run)    : 71.8 MB/s</span><br><span class="line"> I/O Speed(2nd run)    : 58.1 MB/s</span><br><span class="line"> I/O Speed(3rd run)    : 57.3 MB/s</span><br><span class="line"> Average I/O speed     : 62.4 MB/s</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> Node Name        Upload Speed      Download Speed      Latency     </span><br><span class="line"> Speedtest.net    203.45 Mbps       105.67 Mbps         9.28 ms     </span><br><span class="line"> Beijing    CU    71.94 Mbps        112.58 Mbps         271.97 ms   </span><br><span class="line"> Shanghai   CU    89.92 Mbps        111.97 Mbps         245.60 ms   </span><br><span class="line"> Guangzhou  CT    0.18 Mbps         131.79 Mbps         234.00 ms   </span><br><span class="line"> Guangzhou  CU    103.38 Mbps       118.68 Mbps         284.22 ms   </span><br><span class="line"> Shenzhen   CU    82.26 Mbps        115.67 Mbps         268.41 ms   </span><br><span class="line"> Hongkong   CN    81.69 Mbps        141.33 Mbps         274.20 ms   </span><br><span class="line"> Singapore  SG    99.51 Mbps        108.96 Mbps         330.77 ms   </span><br><span class="line"> Tokyo      JP    104.81 Mbps       85.70 Mbps          246.56 ms   </span><br><span class="line">----------------------------------------------------------------------</span><br></pre></td></tr></table></figure><h1 id="安装-Debian10"><a href="#安装-Debian10" class="headerlink" title="安装 - Debian10"></a>安装 - Debian10</h1><p>这里务必要安装Debian系统，不然后面可能会有点小问题</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1615692757000.png" alt=""></p><p>可能要很长一段时间，完毕后<code>ServerData</code>记录ipv6地址和密码备用</p><h1 id="链接SSH"><a href="#链接SSH" class="headerlink" title="链接SSH"></a>链接SSH</h1><p>由于次小鸡用的是纯ipv6,鉴于国内ipv6的部署情况您很有可能连接不上,请选择以下六种方式链接</p><ul><li>CloudFlareSpectrum + UcloudGlobalSSH</li><li>嘿哟终端</li><li>ZeroTier虚拟局域网</li><li>挂ipv6代理</li><li>使用另一台已安装宝塔的Euserv小鸡,用宝塔自带的终端ssh中继到另一台服务器</li><li>使用ipv4+ipv6双栈vps,用ssh链接</li></ul><p>篇幅所限,只讲第一种</p><h2 id="CloudFlareSpectrum-UcloudGlobalSSH"><a href="#CloudFlareSpectrum-UcloudGlobalSSH" class="headerlink" title="CloudFlareSpectrum + UcloudGlobalSSH"></a>CloudFlareSpectrum + UcloudGlobalSSH</h2><p><strong>这个方案比较推荐,就是需要白嫖一个CloudFlarePro</strong></p><p> UcloudGlobalSSH只能支持ipv4,所以你需要一个CloudFlareSpectrum中继</p><p>CloudFlareSpectrum每月5GB流量,仅SSH链接完全足够</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1615692972000.png" alt=""></p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1615693007000.png" alt=""></p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1615693064000.png" alt=""></p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1615693130000.png" alt=""></p><p>这一步之后需要注意解析你的专属ip，CloudFlareSpectrum使用的ip不是供用的。</p><p>Windows命令提示符使用</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nslookup abc.cyfan.top.cdn.cloudflare.<span class="built_in">net</span></span><br></pre></td></tr></table></figure><p>或者使用我的DNS over HTTPS</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://api.cyfan.top/ohhhdns?name=abc.cyfan.top.cdn.cloudflare.net&amp;host=true</span><br></pre></td></tr></table></figure><p>请自己更改abc.cyfan.top这个域名。</p><p>解析的ip形如<code>172.65.124.0</code>,但这个ip并不好,三网都很差,所以用UcloudGlobalSSH</p><p>UcloudGlobalSSH拥有免费版一天1GB,完全足矣</p><p><a href="https://console.ucloud.cn/upathx/globalssh">https://console.ucloud.cn/upathx/globalssh</a></p><p>新建一个隧道</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1615693476000.png" alt=""></p><p>将之前解析的ip写入，区域建议香港，点击确定，生成专属域名</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1615693543000.png" alt=""></p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1615693601000.png" alt=""></p><p>然后链接，我这里用的是XShell，其实客户端自己看喜好</p><p>域名就是ucloud的专属域名，<strong>端口是UC分配给你的而不是22</strong>，922是UC给我的端口，密码是Euserv的密码，用户直接用<code>root</code></p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1615693743000.png" alt=""></p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1615693767000.png" alt=""></p><p>然后就直接链接</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1615693951000.png" alt=""></p><p>使用此方式链接方式如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">你 - 中国 &lt;=40ms=&gt; Ucloud - 中国香港 &lt;=10ms=&gt; CloudFlareSpectrum - AnyCast &lt;=Argo 横跨北半球,150ms=&gt; Euserv - 德国</span><br></pre></td></tr></table></figure><p>也就是说链接直连可以与美国vps媲美</p><h1 id="DNS设置-DNS64"><a href="#DNS设置-DNS64" class="headerlink" title="DNS设置 -DNS64"></a>DNS设置 -DNS64</h1><p>Euserv只有一个ipv6地址,没有ipv4网卡,所以只能链接纯ipv6网站</p><p>使用DNS64可以强制把域名解析到ipv6地址,并且原来只有ipv4的也能通过算法解析到ipv6</p><p>由于你要安装Warp,为了下载来自外网的软件,需要使用DNS64</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/resolv.conf</span><br></pre></td></tr></table></figure><p>大概是这样的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">search blue.kundencontroller.de</span><br><span class="line">options rotate</span><br><span class="line">nameserver 2a02:180:6:5::1c</span><br><span class="line">nameserver 2a02:180:6:5::1e</span><br><span class="line">nameserver 2a02:180:6:5::1d</span><br><span class="line">nameserver 2a02:180:6:5::4</span><br></pre></td></tr></table></figure><p>删除最后4行nameserver,添加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nameserver 2001:67c:2b0::4</span><br><span class="line">nameserver 2001:67c:2b0::6</span><br></pre></td></tr></table></figure><h1 id="Warp安装-上IPv4地址"><a href="#Warp安装-上IPv4地址" class="headerlink" title="Warp安装 - 上IPv4地址"></a>Warp安装 - 上IPv4地址</h1><blockquote><p>Debian安装时若意外退出则需要相当麻烦解除锁定,所以建立一个稳定的隧道是必须的</p></blockquote><p>首先安装一些必要依赖</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install curl sudo lsb-release -y</span><br></pre></td></tr></table></figure><p>添加 back­ports 源,并安装wireguard</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb http://deb.debian.org/debian <span class="subst">$(lsb_release -sc)</span>-backports main&quot;</span> | sudo <span class="built_in">tee</span> /etc/apt/sources.list.d/backports.list</span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install net-tools iproute2 openresolv dnsutils -y</span><br><span class="line">sudo apt install wireguard-tools --no-install-recommends</span><br></pre></td></tr></table></figure><p>然后因为是LXC虚拟内核,无奈之下只能使用go语言编译的内核</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL git.io/wireguard-go.sh | sudo bash</span><br></pre></td></tr></table></figure><p>安装wgcf【第三方注册器】，注册并生成配置</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL git.io/wgcf.sh | sudo bash</span><br><span class="line">wgcf register</span><br><span class="line">wgcf generate</span><br></pre></td></tr></table></figure><p>修改配置</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano wgcf-profile.conf</span><br></pre></td></tr></table></figure><p>内容差不多这样：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[Interface]</span><br><span class="line">PrivateKey = xxx</span><br><span class="line">Address = 172.16.0.2/32</span><br><span class="line">Address = fd01:5ca1:ab1e:89f5:9dfa:759c:9348:13e6/128</span><br><span class="line">DNS = 1.1.1.1</span><br><span class="line">MTU = 1280</span><br><span class="line">[Peer]</span><br><span class="line">PublicKey = xxx</span><br><span class="line">AllowedIPs = 0.0.0.0/0</span><br><span class="line">AllowedIPs = ::/0</span><br><span class="line">Endpoint = engage.cloudflareclient.com:2408</span><br></pre></td></tr></table></figure><p>几个关键配置</p><ul><li>第五行DNS改成</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DNS = 2606:4700:4700::1111</span><br></pre></td></tr></table></figure><ul><li>删除第十行，否则Warp会托管ipv6<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AllowedIPs = ::/0</span><br></pre></td></tr></table></figure></li></ul><ul><li>修改第十一行为</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Endpoint = [2606:4700:d0::a29f:c001]:2408</span><br></pre></td></tr></table></figure><p>输入以下命令</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">cp</span> wgcf-profile.conf /etc/wireguard/wgcf.conf</span><br><span class="line">sudo systemctl start wg-quick@wgcf</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> wg-quick@wgcf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;precedence  ::ffff:0:0/96   100&#x27;</span> | sudo <span class="built_in">tee</span> -a /etc/gai.conf</span><br></pre></td></tr></table></figure><p>然后ping一下baidu：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@srv10866:~# ping baidu.com</span><br><span class="line">PING baidu.com (220.181.38.148) 56(84) bytes of data.</span><br><span class="line">64 bytes from 220.181.38.148 (220.181.38.148): icmp_seq=1 ttl=50 time=452 ms</span><br><span class="line">64 bytes from 220.181.38.148 (220.181.38.148): icmp_seq=2 ttl=50 time=300 ms</span><br><span class="line">64 bytes from 220.181.38.148 (220.181.38.148): icmp_seq=3 ttl=50 time=302 ms</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">^C</span><br><span class="line">--- baidu.com ping statistics ---</span><br><span class="line">26 packets transmitted, 23 received, 11.5385% packet loss, time 121ms</span><br><span class="line">rtt min/avg/max/mdev = 297.390/307.370/451.503/30.906 ms</span><br></pre></td></tr></table></figure><p>简单安装besttrace</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://cdn.ipip.net/17mon/besttrace4linux.zip</span><br><span class="line">apt-get install zip</span><br><span class="line">unzip besttrace4linux.zip</span><br><span class="line"><span class="built_in">chmod</span> +x besttrace</span><br></pre></td></tr></table></figure><p>路由到CF网络都是一步到位</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@srv10866:~<span class="comment"># ./besttrace -q 1 1.0.0.1</span></span><br><span class="line">traceroute to 1.0.0.1 (1.0.0.1), 30 hops max, 32 byte packets</span><br><span class="line"> 1  one.one.one.one (1.0.0.1)  9.61 ms  AS13335  CLOUDFLARE.COM, apnic.net</span><br><span class="line"></span><br><span class="line">root@srv10866:~<span class="comment"># ./besttrace -q 1 cloudflare.com</span></span><br><span class="line">traceroute to cloudflare.com (104.16.133.229), 30 hops max, 32 byte packets</span><br><span class="line"> 1  104.16.133.229  13.62 ms  AS13335  CLOUDFLARE.COM, cloudflare.com</span><br></pre></td></tr></table></figure><p>路由到谷歌，那就是穿透一层内网直接出去</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@srv10866:~<span class="comment"># ./besttrace -q 1 google.com</span></span><br><span class="line">traceroute to google.com (142.250.186.46), 30 hops max, 32 byte packets</span><br><span class="line"> 1  172.16.0.1  9.45 ms  *  LAN Address</span><br><span class="line"> 2  162.158.82.1  18.34 ms  AS13335  Germany, Hesse, Frankfurt, cloudflare.com</span><br><span class="line"> 3  162.158.84.5  10.08 ms  AS13335  Germany, Hesse, Frankfurt, cloudflare.com</span><br><span class="line"> 4  108.170.251.129  28.06 ms  AS15169  United States, google.com</span><br><span class="line"> 5  172.253.71.89  11.58 ms  AS15169  United States, google.com</span><br><span class="line"> 6  fra24s04-in-f14.1e100.net (142.250.186.46)  12.48 ms  AS15169  Germany, Hesse, Frankfurt, google.com</span><br></pre></td></tr></table></figure><p>路由到百度就很有意思，从HKG出去进入移动CMI北上北京</p><blockquote><p>去年10月移动在欧洲和cf做的对等互联,因为遵循路由链最短原则,电信和联通在欧洲没有比这个更短的,到联通是cf-gtt-联通,到电信是cf-level3-电信,到移动是cf-移动,所以会走移动<br>金句From — <a href="https://www.puresys.net/">CLAM</a></p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">root@srv10866:~<span class="comment"># ./besttrace -q 1 baidu.com</span></span><br><span class="line">traceroute to baidu.com (39.156.69.79), 30 hops max, 32 byte packets</span><br><span class="line"> 1  172.16.0.1  9.50 ms  *  LAN Address</span><br><span class="line"> 2  162.158.82.1  10.37 ms  AS13335  Germany, Hesse, Frankfurt, cloudflare.com</span><br><span class="line"> 3  223.119.65.37  20.01 ms  AS58453  China, Hong Kong, ChinaMobile</span><br><span class="line"> 4  *</span><br><span class="line"> 5  221.183.46.250  257.40 ms  AS9808  China, ChinaMobile</span><br><span class="line"> 6  221.176.27.253  200.99 ms  AS9808  China, ChinaMobile</span><br><span class="line"> 7  111.24.2.241  202.99 ms  AS9808  China, ChinaMobile</span><br><span class="line"> 8  *</span><br><span class="line"> 9  39.156.27.1  203.69 ms  AS9808  China, Beijing, ChinaMobile</span><br><span class="line">10  *</span><br><span class="line">11  *</span><br><span class="line">12  *</span><br><span class="line">13  *</span><br><span class="line">14  39.156.69.79  259.35 ms  AS9808  China, Beijing, ChinaMobile</span><br></pre></td></tr></table></figure><p>Speedtest</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL git.io/speedtest-cli.sh | sudo bash</span><br><span class="line">speedtest</span><br></pre></td></tr></table></figure><p>返回</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">   Speedtest by Ookla</span><br><span class="line"></span><br><span class="line">     Server: RETN - Frankfurt (<span class="built_in">id</span> = 31120)</span><br><span class="line">        ISP: Cloudflare Warp</span><br><span class="line">    Latency:     9.88 ms   (0.11 ms jitter)</span><br><span class="line">   Download:   112.57 Mbps (data used: 101.0 MB)                               </span><br><span class="line">     Upload:   127.19 Mbps (data used: 115.5 MB)                               </span><br><span class="line">Packet Loss:     0.0%</span><br><span class="line"> Result URL: https://www.speedtest.net/result/c/556afff6-e56a-4d53-844b-fe88b562ceb8</span><br></pre></td></tr></table></figure><p>速度不快,但是起码上ipv4了</p>]]></content>
      
      
      <categories>
          
          <category> 白嫖怪 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 白嫖 </tag>
            
            <tag> Euserv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>失败的光速叛逃！CloudFlarePage初体验</title>
      <link href="/posts/363f2ff1/"/>
      <url>/posts/363f2ff1/</url>
      
        <content type="html"><![CDATA[<p>众所周知，CloudFlare曾开放CloudFlarePage内测资格申请，如今我获得了资格，免费享受边缘部署岂不美哉！可万万没想到，简单的迁移过程会出现如此问题</p><span id="more"></span><p>据我所知，使用CloudFlare做hexo无非以下两种：</p><ul><li>GithubPage+CloudFlareCDN</li><li>CloudFlareWorkerKV+ClouFlareWorkerSite</li></ul><p>CloudFlare早先时候支持WorkerSite，当时KV照实没有免费，我也不想为了<code>100ms</code>的回源耗时而花费金钱。不过后来KV在一定额度上免费了，打开WorkerSite的文档，第一步wrangler直接把我劝退。</p><p>笑话，国内使用wrangler，那还不如CloudFlare+GithubPage。</p><p><a href="https://blog.skk.moe/post/deploy-blog-to-cf-workers-site/">苏卡卡大佬写的一篇文章</a>讲述了自己部署WorkerSite的经历，<a href="https://blog.ichr.me/post/cf-workers-site-deploy/">ChrAlpha’s Blog</a>也曾提到过迁移的过程。不过我懒<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.11/62.jpg" alt="">，我觉得<code>100ms</code>回源不算什么，赔个Worker还是有点亏。</p><p>2020年11月份，偶然得知CFPage<a href="https://www.cloudflare.com/zh-cn/pages-jamstack-platform-beta-sign-up/">正在公开招聘Pagebeta计划</a>，抱着试试看的心理，我简单写了些就交了上去。凭借着对CloudFlare发布新产品小心翼翼的态度，我揣摩估计很难申请到。果不其然，年都过了，连封邮件都没通知我。</p><p>2021年2月20日，我先日常翻了遍邮件，0。正准备继续开发HexoPlusPlus，登陆CloudFlare，却发现右边多了个新玩意：</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1613786871000.png" alt=""></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.1.11/156.jpg" alt=""></p><p>不愧是我，我一眼就看出来我的CFPage申请到了。</p><h1 id="迁移"><a href="#迁移" class="headerlink" title="迁移"></a>迁移</h1><p>由于我的博客源码在Github上，而CFPage只能从Github上获取源码。<br>我面向中国大陆CDN有一部分用的也是CloudFlare，通过BNXB第三方接入。<br>因为之前用的就是GithubAction的集成部署，所以<code>package.json</code>已经配置完成了。</p><p>那么我看起来确实是最佳的接入选择。</p><div class="note warning flat"><p>非常操蛋的是，我无法删除已经添加的CloudFlarePage域名，所以我没有办法重新演示我如何安装，下面的截图是删除时的错误：<br><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1613787919000.png" alt=""><br><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1613787960000.png" alt=""></p></div><p>首先，进去，点击<code>创建项目</code>选择博客的github存储库，获得GithubAccess权限后跳转到这：</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1613788198000.png" alt=""></p><p>勾选需要接入的项目</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1613788329000.png" alt=""></p><ul><li>构建设置 - 框架预设</li></ul><p>由于之前吃过Vercel的亏，不想选Hexo，但是抱着试试看的心态，还是选择了内置的hexo。</p><p>选择之后，后面的构建命令和构建输出也直接填好了，保存并部署？</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1613789246000.png" alt=""></p><blockquote><p>因为本博客使用了neat而不是gulp插件压缩html<del>管他呢反正丢CI</del>，所以构建时间会比较长。</p></blockquote><p>修改CNAME记录和TXT记录，分别去BNXB修改CNMAE和DNSPOD【NS所在处】修改TXT记录</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1613790247000.png" alt=""></p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1613790482000.png" alt=""></p><p>就好了？就好了。</p><p><span class="heimu">这是我最快的迁移速度</span></p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1613789961000.png" alt=""></p><p>NetWork选项卡里出<code>x-server: Cloudflare Pages</code>说明迁移完毕。</p><h1 id="使用体验"><a href="#使用体验" class="headerlink" title="使用体验"></a>使用体验</h1><p>简洁，加载速度快，这是我第一个感受。</p><p>用GithubAction老是卡在同一个界面不会动，要手动刷新一下才能出来，而且加载的东西贼多，我这台破笔记本有点卡。</p><p>CloudFlarePage则轻巧的多，并且部署状况很快就能体现出来。</p><p>无缝切换，这是我的第二个体验。</p><p>以前换CI换CDN的时候，非得断掉先然后才能切换回来，现在两步走之后，直接在dns平台修改无缝迁移，体验良好，总耗时不超过10分钟。</p><p>鉴于CloudFlare在国内的连接情况，电信这一条线我还是切回vercel【也是0回源】，其他的走CloudFlarePage</p><p>平台还是beta，这是第三个感受。</p><p>我删不掉已经添加的域名，这是我最纳闷的一点。</p><p>然后我不想让cfpage检测我的<code>gh-pages</code>分支，因为GithubAction还有存在的必要，但是CFpage每每还是检测pages分支，然后扔出部署失败，提示错误。</p><p>这两个问题<a href="https://community.cloudflare.com/t/cloudflarepagebug-i-cannot-delete-my-site/246093">我已经丢论坛里了</a>，目前还未回复</p><p>至于快多少，因为没有免费版本Argo做对比，也没有大量数据做对比，<strong>目前</strong>无法得出结论。</p><p>真的要说快多少，因为大部分静态资源切jsd上，所有经过cf的只有一个单html，至少我在国内大环境下，我还没体会出100ms能快多少(´இ皿இ｀)</p><p>另外CloudFlarePage用的证书很奇怪，可能是为了CNAME兼容性，不用自己自家的证书，反而用Let’s Encrypt，鉴于OSCP在国内阻断，ios用户可能会出现首次访问白屏，这一点我有点担心。</p><p>最好的一点莫过于完全贴合HexoPlusPlus了，以后我就有充分的理由宣传HPP了<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.11/320.jpg" alt=""></p><h1 id="额度"><a href="#额度" class="headerlink" title="额度"></a>额度</h1><ul><li>每月构建次数：500次</li></ul><p>【用了HPP，构建次数再多也不够500/mo，这一点我还是放心的，再说我常年咕咕咕】</p><ul><li><p>自定义域名：10个 【我也没这么多域名】</p></li><li><p>文件：2w个【绝对用不完】</p></li><li><p>总大小：25MB【图片啥的都扔图床，其实也就5MB】</p></li><li><p>带宽：无限制【！！！】</p></li></ul><h1 id="然后我切回来了"><a href="#然后我切回来了" class="headerlink" title="然后我切回来了"></a>然后我切回来了</h1><p>高高兴兴的搞完了CFPage部署，<del>水了这篇文章</del>去吃饭。吃完饭后回来一看谷歌统计，好家伙404的怎么这么多。</p><p>还好之前的GithubPage没有删掉，去bnxb赶紧切了回来。</p><p><del>完了我也经历了和Sukka大佬一样的问题</del></p><p>问题很容易定位，所有的404来自cfpage而非vercel。</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1613795675000.png" alt=""></p><p>首先是Vercel，开代理的情况下国外访问均正确解析至vercel，可以在<code>x-vercel</code>头里看出来</p><p>地址是<code>https://blog.cyfan.top/p/52382e42.html</code>，相应代码是<code>200</code></p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1613795874000.jpg" alt=""></p><p>关闭代理，将自动选择CloudFlareCDN+GithubPage，可以从<code>x-github-request-id</code>看出</p><p>地址是<code>https://blog.cyfan.top/p/52382e42.html</code>，相应代码是<code>200</code></p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1613796163000.jpg" alt=""></p><p>然后是有问题的CFPage，可以在<code>x-server</code>头里看出来</p><p>地址是<code>https://blog-9una.pages.dev/p/52382e42.html</code>，相应代码是<code>308</code><strong>跳转</strong>，跳向<code>https://blog-9una.pages.dev/p/52382e42</code>，<strong>CFPage会把末尾.html抹掉</strong></p><p>抹掉就罢了,结果在vercel这边又出问题</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1613796374000.jpg" alt=""></p><p>但是最奇葩的是,githubpage是允许不带html裸访</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1613796456000.jpg" alt=""></p><p>这就是整个经过,CFPage必须抹掉后缀,GithubPage保持无所谓,Vercel必须不能抹掉</p><h1 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h1><p>先从自己入手，CFPage和vercel不能共留，干掉vercel？好主意，毕竟国内访问CF并无大碍，但是有个大问题梗在面前，评论怎么办，之前的收录怎么办，首页链接不一致怎么办？</p><p>我又不想抛弃CFpage，于是试图和Sukka大佬针对中文解码一样来个拯救计划，结果发现，CFPage不开源……</p><p>后来仔细翻了一遍<a href="https://developers.cloudflare.com/pages/platform/serving-pages#route-matching">文档</a>才发现，这样是有意为之，故意删掉后缀名。</p><p>的，切回Github+CFCDN，这一早上的折腾白费了( ง ᵒ̌皿ᵒ̌)ง⁼³₌₃</p>]]></content>
      
      
      <categories>
          
          <category> 好方法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> CloudFlare </tag>
            
            <tag> 集成部署 </tag>
            
            <tag> CloudFlarePage </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HexoPlusPlus-从一个妄想到现实</title>
      <link href="/posts/348e7d8a/"/>
      <url>/posts/348e7d8a/</url>
      
        <content type="html"><![CDATA[<p>我一直都习惯在线写作，但因为口袋里没钱，不能买服务器用动态博客，使用Hexo，即使实现了集成部署，想要在github上直接书写，尤其是出门在外有所灵感，国内手机登陆github真的是极其糟糕的体验。博客本就是碎片化写作和高质量文章发布处，使用hexo却使我无法发挥博客的用处。<br><span id="more"></span><br>先前，我曾使用白嫖的Euserv搭建的Typecho，也是用过wordpress.com白嫖的wordpress，但两个都不符合我对速度和可用性的追求，一个连CloudFlare能不能连上都是问题，另一个中国支持贼差【虽然可以用万能Worker可以替换加解决,但是就是不想用啊】。免空的选择又难以择手<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.11/194.jpg" alt="">，弄来弄去还是用回Hexo。</p><p>但是Hexo就是有一点不爽，每次使用的时候就必须要在本地进行构建静态网页，然后上传到GithubPage。后来实现了集成部署【没想到折腾了很长时间的集成部署最后用到这里了】，方便了不少，直接在Github上面改源代码。但相较于Typecho和Wordpress，没有后台的写作总感觉有点难受<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.8/5896e9710dfd5.jpg" alt="">，每次更改源代码都要上Github<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.8/5896ece2ab57a.jpg" alt="">，在国内这种大环境下总是不太好使的。</p><p>2020年最后一个月，我总是在想如何解决这个问题，我的要求很简单，能弄个在线书写环境就好了。</p><p>在当时，真的只是睡觉的时候想想，现在回头不禁感慨，这妄想真的实现了。</p><p>由于我的文件是存储在Github上，于是我第一个先去Github文档查找相关资料，果不其然，Github的API能够上传、删除、下载【废话】、列表文件，并且能通过base64上传，直接免去了手写头的问题.关于调用限制，没鉴权时每个ip每小时只有<strong>60次</strong>，但一旦鉴权每个用户每小时就有<strong>5000次</strong>。这些api完全能够支撑起一个在线写作的环境,<a href="https://developer.github.com/v3/guides/getting-started/">https://developer.github.com/v3/guides/getting-started/</a>更是详细讲解并提供了数个例子。</p><p>这篇文章,就是详细讲解我如何把这个梦想变成现实.具体步骤很多,请慢慢咀嚼<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.8/5896ece2ab57a.jpg" alt=""></p><blockquote><p><strong>这篇不是<a href="https://hexoplusplus.js.org/">使用文档</a>,而是教程</strong></p></blockquote><h1 id="原理-GithubAPI"><a href="#原理-GithubAPI" class="headerlink" title="原理 - GithubAPI"></a>原理 - GithubAPI</h1><p>譬如罢，上传一个文件，首先你要鉴权，在header中写入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">content-type: &quot;application/json;charset=UTF-8&quot;</span><br><span class="line">Authorization: &quot;token  $&#123;hpp_githubimagetoken&#125;&quot;</span><br></pre></td></tr></table></figure><blockquote><p>Anyone,你也可以在url后面加上<code>?access_token=</code>传参，但是这样不安全，Github官方也是提示将在明年彻底禁用传参鉴权</p></blockquote><p>但是记得GithubAPI不允许空User-Agent，所以你还得在header中加入UA：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user-agent: &quot;GoogleChrome&quot;,</span><br></pre></td></tr></table></figure><p>OK这么一搞鉴权这一块就完毕了，接下来，我们要搞基本功能</p><p>Github更改一个文件的url是一样的，为了方便接下来的书写和表达，我们统一将以下url称为RESTURL：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://api.github.com/repos/$&#123;Github用户名&#125;/$&#123;Github仓库名字&#125;/contents/$&#123;Github文件路径&#125;/$&#123;Github文件名&#125;?ref=$&#123;Github分支&#125;</span><br></pre></td></tr></table></figure><h2 id="拉取信息"><a href="#拉取信息" class="headerlink" title="拉取信息"></a>拉取信息</h2><p>默认情况下，直接<code>GET</code> <code>RESTURL</code>就能获取该文件/文件夹的信息,例如获取我<code>AVorBV.md</code>源文件,那么<code>RESTURL</code>如下:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://api.github.com/repos/ChenYFan/blog/contents/source/_posts/AVorBV.md?ref=master</span><br></pre></td></tr></table></figure><p>直接<code>GET</code>[我的是公开仓库,不需要鉴权就能获取],得到数据如下:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;AVorBV.md&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;source/_posts/AVorBV.md&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;sha&quot;</span><span class="punctuation">:</span> <span class="string">&quot;a0bd826f999a9bb73ac56251415f9e57199600a7&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">15742</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://api.github.com/repos/ChenYFan/blog/contents/source/_posts/AVorBV.md?ref=master&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;html_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://github.com/ChenYFan/blog/blob/master/source/_posts/AVorBV.md&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;git_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://api.github.com/repos/ChenYFan/blog/git/blobs/a0bd826f999a9bb73ac56251415f9e57199600a7&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;download_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://raw.githubusercontent.com/ChenYFan/blog/master/source/_posts/AVorBV.md&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;file&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dGl0bGU6IEFWP0JWIQphdX...&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;encoding&quot;</span><span class="punctuation">:</span> <span class="string">&quot;base64&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;_links&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;self&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://api.github.com/repos/ChenYFan/blog/contents/source/_posts/AVorBV.md?ref=master&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;git&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://api.github.com/repos/ChenYFan/blog/git/blobs/a0bd826f999a9bb73ac56251415f9e57199600a7&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;html&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://github.com/ChenYFan/blog/blob/master/source/_posts/AVorBV.md&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>这样子,我们只要提取json中的sha,就能知道到hash,进而进行修改.<br>但这样子有个非常尴尬的一点,单文件获取会把<code>content</code>一口气拿过来<br>例如下面的<code>RESTURL</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://api.github.com/repos/ChenYFan/CDN/contents/img/hpp_upload/1612843011000.jpg?ref=master</span><br></pre></td></tr></table></figure><p>你获取的时候会发现返回了这个:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;This API returns blobs up to 1 MB in size. The requested blob is too large to fetch via the API, but you can use the Git Data API to request blobs up to 100 MB in size.&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;errors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;resource&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Blob&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;field&quot;</span><span class="punctuation">:</span> <span class="string">&quot;data&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;too_large&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;documentation_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://docs.github.com/rest/reference/repos#get-repository-content&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>很显然,直接用GithubAPI不能获取单个文件的hash值</p><p>那怎么办？</p><p>答：列表获取</p><p>我们把之前的<code>RESTURL</code>去掉小尾巴,变成这样:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://api.github.com/repos/ChenYFan/CDN/contents/img/hpp_upload?ref=master</span><br></pre></td></tr></table></figure><p>这样就能获取这个目录下整个列表,然后用json循环查找遍历name,再通过name拉hash即可.</p><p>只是这样查询时间会略微变长.</p><h2 id="新建"><a href="#新建" class="headerlink" title="新建"></a>新建</h2><p>如果是新建,body中这么写</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    branch<span class="punctuation">:</span> $<span class="punctuation">&#123;</span>上传的分支<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    message<span class="punctuation">:</span> $<span class="punctuation">&#123;</span>上传的信息<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    content<span class="punctuation">:</span> $<span class="punctuation">&#123;</span>base64过的文件<span class="punctuation">&#125;</span><span class="punctuation">,</span> </span><br><span class="line">    sha<span class="punctuation">:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>接着使用<code>PUT</code>形式访问RESTURL</p><p>创建成功后状态码应该返回：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">201 Created</span><br></pre></td></tr></table></figure><h2 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h2><p>body与新建类似，但是首先你要通过拉取信息获取该文件sha值.</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    branch<span class="punctuation">:</span> $<span class="punctuation">&#123;</span>上传的分支<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    message<span class="punctuation">:</span> $<span class="punctuation">&#123;</span>上传的信息<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    content<span class="punctuation">:</span> $<span class="punctuation">&#123;</span>base64过的文件<span class="punctuation">&#125;</span><span class="punctuation">,</span> </span><br><span class="line">    sha<span class="punctuation">:</span> <span class="string">&quot;$&#123;此文件hash&#125;&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>接着使用<code>PUT</code>形式访问<code>RESTURL</code></p><p>更新成功后状态码应该返回：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">200 OK</span><br></pre></td></tr></table></figure><h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><p>相对来说,删除就更简单了</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    branch<span class="punctuation">:</span> $<span class="punctuation">&#123;</span>删除文件的分支<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    message<span class="punctuation">:</span> $<span class="punctuation">&#123;</span>删除的信息<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    sha<span class="punctuation">:</span> <span class="string">&quot;$&#123;此文件hash&#125;&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>hash这一步逃不掉,用<code>DELETE</code>形式访问<code>RESTURL</code>,返回<code>200</code>说明删除成功</p><h1 id="原理-CloudFlareWorkers"><a href="#原理-CloudFlareWorkers" class="headerlink" title="原理 - CloudFlareWorkers"></a>原理 - CloudFlareWorkers</h1><p>之前看过<a href="https://github.com/GitHub-Laziji/VBlog">Laziji-VBlog</a>项目,这个项目新颖的一点是将文章发布在gists,然后用户通过api访问获取.</p><p>但这样有两个致命问题:</p><p>1.API没鉴权，每小时单个ip只能访问60次，一开就爆<br>2.在国内受干扰，不稳定</p><p>并且什么迁入迁出麻烦、token容易忘记等等问题</p><p>最最最早版本中,我是打算纯静态实现文章编辑和更改的，但很快我就遇到了和VBlog一样的缺陷，这逼使我切换了平台。</p><p>好诶，既然直连效果那么差，我们就选择中继。利用服务器中继我们首先排除【用Hexo基本就是贪无服务器】。目前比较流行的无服务器平台有Heroku、CloudFlareWorker和Vercel，Heroku支持了多种服务器语言，CFWorker基于GoogleV8，因为JSProxy在国内意外走红，Vercel在国内拥有较好的运营商线路。</p><p>我们第一个排除heroku，冷启动唤醒需要10s，并且无法绑定域名【这里其实也可用worker反代（bushi】。目光看向worker和vercel，又有一个新问题出来，自定义配置存哪？<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.8/5896e6ec1d528.jpg" alt=""></p><p>存变量里当然是个好主意，但是很难修改。外部存储也不是什么大问题，mongodb、firebase、<del>Leancloud</del>都可以上手，但我个人终究不喜欢为了查询而发送子请求。<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.11/194.jpg" alt=""></p><p>由于我是OIer【虽然很差】，习惯使用C++的逻辑，因为JS的逻辑和C++其实差不多，所以我更倾向用WorkerJS书写。</p><p>非常赞的是，去年11月，<a href="https://blog.cloudflare.com/workers-kv-free-tier/">CloudFlare官方宣布KV在一定额度内免费</a>，并且免费额度喜人：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">存：1GB大小</span><br><span class="line">读：10W次/天【注：这里和Worker免费版本调用次数相同】</span><br><span class="line">写：1k次/天</span><br><span class="line">删：1k次/天</span><br><span class="line">列：1k次/天</span><br><span class="line">单个限额：25MB</span><br></pre></td></tr></table></figure><p>并且worker里面使用KV函数异常简单，绑定KVNAME后：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">FUNCNAME</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">await</span> <span class="variable constant_">KVNAME</span>.<span class="title function_">get</span>(<span class="variable constant_">INDEX</span>) <span class="comment">//读</span></span><br><span class="line"><span class="keyword">await</span> <span class="variable constant_">KVNAME</span>.<span class="title function_">put</span>(<span class="variable constant_">INDEX</span>,<span class="variable constant_">VALUE</span>) <span class="comment">//写</span></span><br><span class="line"><span class="keyword">await</span> <span class="variable constant_">KVNAME</span>.<span class="title function_">delete</span>(<span class="variable constant_">INDEX</span>) <span class="comment">//删</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>按照<a href="https://developers.cloudflare.com/workers/learning/how-kv-works">官方文档</a>的说法，实际读取与读取静态页面差不多，我写了个简单测试函数，根据时间戳判断，单次读取只需要不超过2ms。</p><p>并且worker有非常赞的fetch函数，无痛自定义header，拉取后端无压力。</p><p>好，那么就开始吧。</p><h1 id="实现-迈出的第一步"><a href="#实现-迈出的第一步" class="headerlink" title="实现 - 迈出的第一步"></a>实现 - 迈出的第一步</h1><p>首先你要绑定个监听器：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">addEventListener</span>(<span class="string">&quot;fetch&quot;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">  event.<span class="title function_">respondWith</span>(<span class="title function_">handleRequest</span>(event.<span class="property">request</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>由于<code>fetch</code>只能在<code>async</code>函数执行,于是我们写个<code>async</code>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">handleRequest</span>(<span class="params">request</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以，这样我们就简单实现了一个无服务器函数<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.8/5c53d1904dcb2.gif" alt=""></p><p>接下来的函数就应该在async这个主函数写。</p><p>然后是最基本的fetch，fetch应该说是worker里最特色的函数了。</p><p>如果直接返回，那么就不用加<code>await</code>,因为在<code>async</code>里面返回了一个<code>await</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://api.github.com/repos/ChenYFan/blog/contents/source/_posts&#x27;</span>)</span><br></pre></td></tr></table></figure><p>如果要拉回来做运算，那么要加<code>await</code>，毕竟<code>fetch</code>返回的是<code>promise</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://api.github.com/repos/ChenYFan/blog/contents/source/_posts&#x27;</span>)</span><br></pre></td></tr></table></figure><p>CFWorker能用<code>.text()</code>函数和<code>.json()</code>函数处理返回的内容：</p><blockquote><p>这地方我偷懒了,本来应该用<code>then</code>来获取<code>promise</code>的值,但是个人习惯了<code>await</code>嵌套写法,所以这地方写的其实不标准,轻喷<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.11/285.jpg" alt=""></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> first_name = <span class="keyword">await</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title function_">await</span>(<span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://api.github.com/repos/ChenYFan/blog/contents/source/_posts&#x27;</span>)).<span class="title function_">text</span>())[<span class="number">0</span>][<span class="string">&quot;name&quot;</span>]</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(first_name)</span><br></pre></td></tr></table></figure><p>这个其实等价下面的：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> first_name = (<span class="title function_">await</span>(<span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://api.github.com/repos/ChenYFan/blog/contents/source/_posts&#x27;</span>)).<span class="title function_">json</span>())[<span class="number">0</span>][<span class="string">&quot;name&quot;</span>]</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(first_name)</span><br></pre></td></tr></table></figure><p>当然显然是下面的好写,但我习惯测试方便都用上面的<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.8/stick_18.png" alt=""></p><p>我们也可以通过自定义方式来自定义header完成鉴权和UA设置:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getinit = &#123;</span><br><span class="line">          <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">          <span class="attr">headers</span>: &#123;</span><br><span class="line">            <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;application/json;charset=UTF-8&quot;</span>,</span><br><span class="line">            <span class="string">&quot;user-agent&quot;</span>: <span class="string">`<span class="subst">$&#123;USERAGENT&#125;</span>`</span>,</span><br><span class="line">            <span class="string">&quot;Authorization&quot;</span>: <span class="string">`token <span class="subst">$&#123;TOKEN&#125;</span>`</span></span><br><span class="line">          &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> first_name = <span class="keyword">await</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title function_">await</span>(<span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://api.github.com/repos/ChenYFan/blog/contents/source/_posts&#x27;</span>,getinit)).<span class="title function_">text</span>())[<span class="number">0</span>][<span class="string">&quot;name&quot;</span>]</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(first_name)</span><br></pre></td></tr></table></figure><p>那么接下来就很简单了。</p><h1 id="实现-面板的设计"><a href="#实现-面板的设计" class="headerlink" title="实现 - 面板的设计"></a>实现 - 面板的设计</h1><p>Worker支持返回数据的设置，我们可以通过修改<code>content-type</code>达到返回页面的效果,并且可以通过JS奇妙的语法完成PHP难以做到的事情。</p><p>首先先定义一个网页：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> re_html =  <span class="string">`&lt;h1&gt;Hello,World!&lt;/h1&gt;`</span></span><br></pre></td></tr></table></figure><p>然后要返回吧：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(re_html, &#123;</span><br><span class="line">    <span class="attr">headers</span>: &#123; <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;text/html;charset=UTF-8&quot;</span> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>这个地方<code>content-type</code>务必要设置,不然默认返回是文本形式</p><p>然后打开预览就能看到了:</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1612929973000.png" alt=""></p><p>然后关于拼接,其实完全不必用<code>+</code>连接，可以用``包裹,然后用<code>$&#123;变量名&#125;</code>来代替</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> inner = <span class="string">`Hello,World!`</span></span><br><span class="line"><span class="keyword">const</span> re_html =  <span class="string">`&lt;h1&gt;<span class="subst">$&#123;inner&#125;</span>&lt;/h1&gt;`</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(re_html, &#123;</span><br><span class="line">    <span class="attr">headers</span>: &#123; <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;text/html;charset=UTF-8&quot;</span> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><span class="heimu">这种写法帮我省下精力重看代码</span></p><p>面板怎么说,其实直接用<a href="https://www.creative-tim.com/product/material-dashboard">material-dashboard</a>套的</p><h1 id="实现-后端API的设计"><a href="#实现-后端API的设计" class="headerlink" title="实现 - 后端API的设计"></a>实现 - 后端API的设计</h1><p>后端API本质上是一个中继,简单如我<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.8/7EYyq1TcBKa3eQ2.jpg" alt=""></p><p>废话不说直接上代码。</p><h2 id="问题解决-存储问题"><a href="#问题解决-存储问题" class="headerlink" title="问题解决 - 存储问题"></a>问题解决 - 存储问题</h2><p>KV是能存东西.配置是符合键的形式的,一个键名配对一个键值,这和KV的存储方式相同.但是这么多配置项,如果一个一个读过去,KV迟早比worker早读爆.缓存没用,还得赔一个清除缓存的APIKey,太亏了.</p><p>所以HPP将所有配置<code>JSON.stringify</code>后存储到了一个键名为<code>hpp_config</code>的键.</p><p>那关于账户密码,难道不能存KV吗?</p><p>能,当然能,但是问题是如果在登录页面还要读KV,那被打了怎么办<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.11/67.jpg" alt=""></p><p>况且,在粘贴代码完后到设置界面,中间有一段时间,万一有个人搞你咋办呢.<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.11/5.jpg" alt=""></p><p>所以HPP学习Twikoo进行强鉴权,在保证不被盗取的情况下还能减少KV读取量,岂不美哉<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.8/stick_64.png" alt=""></p><h2 id="问题解决-多层文件夹"><a href="#问题解决-多层文件夹" class="headerlink" title="问题解决 - 多层文件夹"></a>问题解决 - 多层文件夹</h2><p>默认情况下，访问无文件名的<code>RESTURL</code>会列出当前文件夹下的所有文件,但列不出文件夹下的文件.我们先看获取示例，以<code>https://api.github.com/repos/ChenYFan/blog/contents/source/_drafts?ref=master</code>为例子:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;TEST.md&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;source/_drafts/TEST.md&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;sha&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3b12464976a5fd9e07d67dd7d5cf4f0f10188410&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://api.github.com/repos/ChenYFan/blog/contents/source/_drafts/TEST.md?ref=master&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;html_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://github.com/ChenYFan/blog/blob/master/source/_drafts/TEST.md&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;git_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://api.github.com/repos/ChenYFan/blog/git/blobs/3b12464976a5fd9e07d67dd7d5cf4f0f10188410&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;download_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://raw.githubusercontent.com/ChenYFan/blog/master/source/_drafts/TEST.md&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;file&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;_links&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;self&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://api.github.com/repos/ChenYFan/blog/contents/source/_drafts/TEST.md?ref=master&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;git&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://api.github.com/repos/ChenYFan/blog/git/blobs/3b12464976a5fd9e07d67dd7d5cf4f0f10188410&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;html&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://github.com/ChenYFan/blog/blob/master/source/_drafts/TEST.md&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;TEST&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;source/_drafts/TEST&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;sha&quot;</span><span class="punctuation">:</span> <span class="string">&quot;18391dac960bd390d4213818b7a79c63dcd2fb44&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://api.github.com/repos/ChenYFan/blog/contents/source/_drafts/TEST?ref=master&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;html_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://github.com/ChenYFan/blog/tree/master/source/_drafts/TEST&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;git_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://api.github.com/repos/ChenYFan/blog/git/trees/18391dac960bd390d4213818b7a79c63dcd2fb44&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;download_url&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dir&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;_links&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;self&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://api.github.com/repos/ChenYFan/blog/contents/source/_drafts/TEST?ref=master&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;git&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://api.github.com/repos/ChenYFan/blog/git/trees/18391dac960bd390d4213818b7a79c63dcd2fb44&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;html&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://github.com/ChenYFan/blog/tree/master/source/_drafts/TEST&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><p>文件夹是<code>dir</code>,文件是<code>file</code>,甚至可以通过<code>self</code>往下找,连路径都不用拼接了,那事情就好办了,写个搜索递归吧.</p><blockquote><p>这个地方在群里我一直和<a href="https://noionion.top/">2X</a>吵架,因为我觉得此处用广搜比较好,然后我一直想写BFS,结果写着写着就成DFS了,你甚至现在还能看到一个叫<code>fetch_bfs</code>的函数<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.8/BnTMX35EPxleVmA.jpg" alt=""></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetch_bfs</span>(<span class="params">arr, url, getinit</span>) &#123; <span class="comment">//开始深搜</span></span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> hpp_getlist = <span class="keyword">await</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="keyword">await</span> (<span class="keyword">await</span> <span class="title function_">fetch</span>(url, hpp_githubgetdocinit)).<span class="title function_">text</span>()) <span class="comment">//拉取github列表</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="title function_">getJsonLength</span>(hpp_getlist); i++) &#123; <span class="comment">//循环查找</span></span><br><span class="line">              <span class="keyword">if</span> (hpp_getlist[i][<span class="string">&quot;type&quot;</span>] != <span class="string">&quot;dir&quot;</span>) &#123; <span class="comment">//如果不是文件夹</span></span><br><span class="line">                arr.<span class="title function_">push</span>(hpp_getlist[i])<span class="comment">//弹到目标数组末尾</span></span><br><span class="line">              &#125; <span class="keyword">else</span> &#123; <span class="comment">//否则</span></span><br><span class="line">                <span class="keyword">await</span> <span class="title function_">fetch_bfs</span>(arr, hpp_getlist[i][<span class="string">&quot;_links&quot;</span>][<span class="string">&quot;self&quot;</span>], getinit) <span class="comment">//进入该文件夹深搜</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> arr;</span><br><span class="line">          &#125; <span class="keyword">catch</span> (e) &#123; <span class="keyword">return</span> &#123;&#125; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>代码本意很简单,传入一个空数组,抓取列表,循环递归,如果不是文件夹就扔到数组,是的话就向下搜索<span class="heimu">其实就是DFS嘛</span></p><p>用<code>try</code>的原因是因为莫些人没有草稿，不用try的话这个函数就会炸，没草稿返回空数组。</p><p>然后就试试呗，以获取草稿列表为例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (path == <span class="string">&quot;/hpp/admin/api/get_draftlist&quot;</span>) &#123; <span class="comment">//判断路径</span></span><br><span class="line">          <span class="keyword">let</span> hpp_doc_draft_list_index = <span class="keyword">await</span> <span class="variable constant_">KVNAME</span>.<span class="title function_">get</span>(<span class="string">&quot;hpp_doc_draft_list_index&quot;</span>) <span class="comment">//获取索引</span></span><br><span class="line">          <span class="keyword">if</span> (hpp_doc_draft_list_index === <span class="literal">null</span>) &#123;<span class="comment">//如果没有索引</span></span><br><span class="line">            <span class="keyword">const</span> filepath = githubdocdraftpath.<span class="title function_">substr</span>(<span class="number">0</span>, (githubdocdraftpath).<span class="property">length</span> - <span class="number">1</span>) <span class="comment">//分离路径</span></span><br><span class="line">            <span class="keyword">const</span> url = <span class="string">`https://api.github.com/repos/<span class="subst">$&#123;hpp_githubdocusername&#125;</span>/<span class="subst">$&#123;hpp_githubdocrepo&#125;</span>/contents<span class="subst">$&#123;filepath&#125;</span>?ref=<span class="subst">$&#123;hpp_githubdocbranch&#125;</span>`</span> <span class="comment">//拼接RESTURL</span></span><br><span class="line">            hpp_doc_draft_list_index = <span class="keyword">await</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="keyword">await</span> <span class="title function_">fetch_bfs</span>([], url, hpp_githubgetdocinit)) <span class="comment">//开始深搜</span></span><br><span class="line">            <span class="keyword">await</span> <span class="variable constant_">KVNAME</span>.<span class="title function_">put</span>(<span class="string">&quot;hpp_doc_draft_list_index&quot;</span>, hpp_doc_draft_list_index) <span class="comment">//保存索引</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(hpp_doc_draft_list_index, &#123; <span class="comment">//返回路径</span></span><br><span class="line">            <span class="attr">headers</span>: &#123;</span><br><span class="line">              <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;application/json;charset=UTF-8&quot;</span>,</span><br><span class="line">              <span class="string">&quot;Access-Control-Allow-Origin&quot;</span>: hpp_cors</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们来做个小实验：</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1612936420000.png" alt=""></p><p>结构如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-source/_drafts</span><br><span class="line">  ~TEST.md</span><br><span class="line">  -TEST</span><br><span class="line">    ~TEST.md</span><br><span class="line">    -TEST</span><br><span class="line">      ~TEST.md</span><br><span class="line">      -TEST</span><br><span class="line">        ~TEST.md</span><br></pre></td></tr></table></figure><p>那么CloudFlareWorker会这样搜索:</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1612937339000.jpg" alt=""></p><p><del>其实我本来想这样的</del></p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1612937329000.jpg" alt=""></p><p>【考虑到大多数人都没有建立文件夹的习惯，本来bfs的效率会更高的(´இ皿இ｀)】</p><p>【但其实两者子请求数目是一样的】</p><p>我们去CloudFlare发一个请求啊，结果非常Amazing啊：</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1612938453000.gif" alt=""></p><p>dfs完美解决嵌套问题。</p><h2 id="问题解决-缓存问题"><a href="#问题解决-缓存问题" class="headerlink" title="问题解决 - 缓存问题"></a>问题解决 - 缓存问题</h2><h3 id="手机端POST之谜"><a href="#手机端POST之谜" class="headerlink" title="手机端POST之谜"></a>手机端POST之谜</h3><p>之前开发网页的时候，我总是希望缓存越长越好，因为有些资源从来没有变过却要重复使用。于是，我给博客加上了<code>ServiceWorker</code><span class="heimu"><del>这就是我咕咕咕的理由</del></span></p><p>但hpp不能进行太强的缓存,否则可能造成获取文件不够及时.</p><p>于是，在文章获取这一块，我故意将<code>get</code>写成<code>post</code>,发送空值,电脑端乖乖的每次都把请求发出去,毫无异常.</p><p>然后手机端炸了<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.8/5c53cee8422fc.jpg" alt=""></p><p>万万没想到,safari会将post请求给缓存了<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.8/5896ece29a8e0.jpg" alt=""></p><p>缓存也就罢了,结果ajax连<code>onreadystatechange</code>都缓存了不返回,然后接下去的函数全炸了<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.8/5896ece2a019f.jpg" alt=""></p><p>没办法,只好在post里面加时间戳</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ajax.<span class="title function_">send</span>(<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>());</span><br></pre></td></tr></table></figure><h3 id="文章索引问题"><a href="#文章索引问题" class="headerlink" title="文章索引问题"></a>文章索引问题</h3><p>然后是索引问题【本质上是把结果缓存在KV里】，因为在文件夹众多的情况下dfs会将每个文件夹找过去，先不说时间这个问题（毕竟一次子请求大约在60ms-150ms徘徊，文件夹多的情况下也尚能忍受），主要是文件夹一多，子请求跟着多起来了，worker子请求超时是30s（10ms是运算时间，我寻思只要没有上亿篇文章，加个数组应该不会炸10ms时间），并且子请求算总请求，要是这么搞一次，worker怕是不够用了，所以得加个KV强缓存：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> <span class="variable constant_">KVNAME</span>.<span class="title function_">put</span>(<span class="string">&quot;hpp_doc_list_index&quot;</span>, hpp_doc_list_index)</span><br><span class="line"><span class="keyword">await</span> <span class="variable constant_">KVNAME</span>.<span class="title function_">put</span>(<span class="string">&quot;hpp_doc_draft_list_index&quot;</span>, hpp_doc_draft_list_index)</span><br></pre></td></tr></table></figure><p>在发布、删除等<strong>可能</strong>会导致缓存失效的情况下清除KV缓存：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> <span class="variable constant_">KVNAME</span>.<span class="title function_">del</span>(<span class="string">&quot;hpp_doc_list_index&quot;</span>)</span><br><span class="line"><span class="keyword">await</span> <span class="variable constant_">KVNAME</span>.<span class="title function_">del</span>(<span class="string">&quot;hpp_doc_draft_list_index&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="功能实现-自动更新"><a href="#功能实现-自动更新" class="headerlink" title="功能实现 - 自动更新"></a>功能实现 - 自动更新</h2><p>这怕是所有Worker程序里面第一个实现自动更新的程序了<del>【所以我最近发包很快啊】</del><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1612940443000.gif" alt=""></p><p>其实刚开始没想到这么多，后来<a href="https://github.com/MCSeekeri">@MCSeekeri </a>开了<a href="https://github.com/HexoPlusPlus/HexoPlusPlus/issues/21">#21</a>,其中提到了这一点,然后我就开了<a href="https://github.com/HexoPlusPlus/HexoPlusPlus/issues/23">#23</a>。</p><p>查一遍<a href="https://api.cloudflare.com/#worker-script-upload-worker">CloudFlareAPI文档</a>，我们就会发现这做起来简直轻而易举：</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1612941346000.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -X PUT &quot;https://api.cloudflare.com/client/v4/accounts/9a7806061c88ada191ed06f989cc3dac/workers/scripts/this-is_my_script-01&quot; \</span><br><span class="line">     -H &quot;X-Auth-Email: user@example.com&quot; \</span><br><span class="line">     -H &quot;X-Auth-Key: c2547eb745079dac9320b638f5e225cf483cc5cfdda41&quot; \</span><br><span class="line">     -H &quot;Content-Type: application/javascript&quot; \</span><br><span class="line">--data &quot;addEventListener(&#x27;fetch&#x27;, event =&gt; &#123; event.respondWith(fetch(event.request)) &#125;)&quot;</span><br></pre></td></tr></table></figure><p>curl,我寻思fetch也能做到.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> update_script = <span class="keyword">await</span> (<span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`https://raw.githubusercontent.com/HexoPlusPlus/HexoPlusPlus/main/index.js`</span>)).<span class="title function_">text</span>() <span class="comment">//获取更新脚本</span></span><br><span class="line"><span class="keyword">const</span> up_init = &#123;</span><br><span class="line">            <span class="attr">body</span>: update_script,<span class="comment">//更新脚本内容</span></span><br><span class="line">            <span class="attr">method</span>: <span class="string">&quot;PUT&quot;</span>,<span class="comment">//method是put</span></span><br><span class="line">            <span class="attr">headers</span>: &#123;</span><br><span class="line">              <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;application/javascript&quot;</span>,<span class="comment">//content-type和文档一样</span></span><br><span class="line">              <span class="string">&quot;X-Auth-Key&quot;</span>: hpp_CF_Auth_Key,<span class="comment">//GlobalKey,账户最高Token</span></span><br><span class="line">              <span class="string">&quot;X-Auth-Email&quot;</span>: hpp_Auth_Email<span class="comment">//登录邮箱</span></span><br><span class="line">            &#125;</span><br><span class="line">&#125;</span><br><span class="line">          <span class="keyword">const</span> update_resul = <span class="keyword">await</span> (<span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`https://api.cloudflare.com/client/v4/accounts/<span class="subst">$&#123;hpp_account_identifier&#125;</span>/workers/scripts/<span class="subst">$&#123;hpp_script_name&#125;</span>`</span>, up_init)).<span class="title function_">text</span>()<span class="comment">//拼接workerid,请求url,上传</span></span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(update_resul)[<span class="string">&quot;success&quot;</span>])<span class="comment">//查询更新状态</span></span><br></pre></td></tr></table></figure><p>OK那没问题了,手动更新完成.</p><p>那自动更新呢?</p><p>目前自动更新理论上可以实现,使用CronJob每天定时执行函数.<br>但我懒<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.8/5896e8a408253.jpg" alt=""></p><p>其实你也可以用其它什么能定时访问的带上cookie访问<code>/hpp/admin/api/update</code>就行<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.8/5896ece29a8e0.jpg" alt=""></p><h2 id="功能实现-文章管理-amp-草稿"><a href="#功能实现-文章管理-amp-草稿" class="headerlink" title="功能实现 - 文章管理&amp;草稿"></a>功能实现 - 文章管理&amp;草稿</h2><p>其实就是上传文件<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.11/92.jpg" alt=""></p><p>当然因为是hexo，本来就有<code>/source/_posts</code>和<code>/source/_drafts</code>两个草稿分区,所以在<code>1.1.0</code>版本,将<code>docpath</code>改为了<code>docroot</code>,通过定位hexo根目录来实现全站自适应管理.</p><h2 id="功能实现-图床"><a href="#功能实现-图床" class="headerlink" title="功能实现 - 图床"></a>功能实现 - 图床</h2><p>我知道有很多人还是困扰于图床这个问题,PicGo虽然能实现上传,但是配置一大堆,麻烦,并且配置不能随意迁移;PicX也使用Github+JSD做图床,但是没有中继速度慢,国内难以上传.</p><p>其实还是上传文件<img src="https://npm.elemecdn.com/chenyfan-oss@1.1.11/162.jpg" alt=""></p><p>但是我们必须知道,CFWorker单次执行最多10ms,正常图片三四百KB,在worker里base64,这能不超时我把CF吃了.</p><p>没办法,我们只能在前端进行base64,然后将编码后的值直接上传,用Worker中继.</p><h2 id="功能实现-说说"><a href="#功能实现-说说" class="headerlink" title="功能实现 - 说说"></a>功能实现 - 说说</h2><p>这个最早受<a href="https://artitalk.js.org/">Artitalk</a>影响，在artitalk官方群里<del>潜伏了</del>一年，我明确知道说说这一块的用户需求是多么大，并且大多数都是小白，不想用太多配置。</p><p>于是，HPP_TALK诞生了。诞生的初衷就是简化发布和配置流程，在1.1.2版本版本中自带了一个预览页面，实现了无域名也能使用说说。</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1612945005000.png" alt="&#39;说说发布页面&#39;"></p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1612945225000.jpg" alt="&#39;用户查看界面&#39;"></p><p>甚至支持自定义主题：</p><p><img src="https://npm.elemecdn.com/chenyfan-cdn@2.0.0/img/hpp_upload/1612945296000.jpg" alt="&#39;由2X开发的说说主题&#39;"></p><p>HPPTALK配置也简单，后端配置可以直接缺省发布，而前段也只要传递4个变量。</p><p>【但是我但是傻乎乎用了cookie记录，下次绝壁用LocalStr】</p><h2 id="功能实现-TwikooPlus"><a href="#功能实现-TwikooPlus" class="headerlink" title="功能实现 - TwikooPlus"></a>功能实现 - TwikooPlus</h2><blockquote><p>其实这个东西写的很粗糙,大家就看看行了哈</p></blockquote><p>Twikoo首次匿名登录实在把我看傻了,6个请求,放国外不得炸掉.</p><p>然后就看,实际上只有前面几个有效的,后面其实是获取配置.</p><p>首先规定一下<code>RESTURL</code>=<code>https://tcb-api.tencentcloudapi.com/web?env=$&#123;ENVID&#125;</code></p><p>三步走:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.空手拉refresh_token</span><br><span class="line">2.用refresh_token套access_token</span><br><span class="line">3.用access_token套评论</span><br></pre></td></tr></table></figure><p>其中refresh_token两小时有效,access_token30天有效</p><p>那就很有意思了同学们:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">get_refresh_token</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">/*第一步获得refresh_token*/</span></span><br><span class="line">        <span class="keyword">const</span> step_1_body = &#123;</span><br><span class="line">          <span class="attr">action</span>: <span class="string">&quot;auth.signInAnonymously&quot;</span>,</span><br><span class="line">          <span class="attr">anonymous_uuid</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">          <span class="attr">dataVersion</span>: <span class="string">&quot;1970-1-1&quot;</span>,</span><br><span class="line">          <span class="attr">env</span>: env_id,</span><br><span class="line">          <span class="attr">refresh_token</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">          <span class="attr">seqId</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> step_1 = &#123;</span><br><span class="line">          <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(step_1_body),</span><br><span class="line">          <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">          <span class="attr">headers</span>: &#123;</span><br><span class="line">            <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;application/json;charset=UTF-8&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*refresh_token到手*/</span></span><br><span class="line">        <span class="comment">//console.log(step_1_body)</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="keyword">await</span> (<span class="keyword">await</span> <span class="title function_">fetch</span>(url, step_1)).<span class="title function_">text</span>())[<span class="string">&quot;refresh_token&quot;</span>]</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">get_access_token</span>(<span class="params">refresh_token</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> step_2_body = &#123;</span><br><span class="line">          <span class="attr">action</span>: <span class="string">&quot;auth.fetchAccessTokenWithRefreshToken&quot;</span>,</span><br><span class="line">          <span class="attr">anonymous_uuid</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">          <span class="attr">dataVersion</span>: <span class="string">&quot;1970-1-1&quot;</span>,</span><br><span class="line">          <span class="attr">env</span>: env_id,</span><br><span class="line">          <span class="attr">refresh_token</span>: refresh_token,</span><br><span class="line">          <span class="attr">seqId</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> step_2 = &#123;</span><br><span class="line">          <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(step_2_body),</span><br><span class="line">          <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">          <span class="attr">headers</span>: &#123;</span><br><span class="line">            <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;application/json;charset=UTF-8&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*access_token到手*/</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="keyword">await</span> (<span class="keyword">await</span> <span class="title function_">fetch</span>(url, step_2)).<span class="title function_">text</span>())[<span class="string">&quot;access_token&quot;</span>];</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">get_comment</span>(<span class="params">access_token, path, before</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> re_data = &#123; <span class="string">&quot;event&quot;</span>: <span class="string">&quot;COMMENT_GET&quot;</span>, <span class="string">&quot;url&quot;</span>: path, <span class="string">&quot;before&quot;</span>: before &#125;</span><br><span class="line">        <span class="keyword">const</span> step_3_body = &#123;</span><br><span class="line">          <span class="attr">access_token</span>: access_token,</span><br><span class="line">          <span class="attr">action</span>: <span class="string">&quot;functions.invokeFunction&quot;</span>,</span><br><span class="line">          <span class="attr">dataVersion</span>: <span class="string">&quot;1970-1-1&quot;</span>,<span class="comment">//开始时间</span></span><br><span class="line">          <span class="attr">env</span>: env_id,</span><br><span class="line">          <span class="attr">function_name</span>: <span class="string">&quot;twikoo&quot;</span>,</span><br><span class="line">          <span class="attr">request_data</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(re_data),</span><br><span class="line">          <span class="attr">seqId</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> step_3 = &#123;</span><br><span class="line">          <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(step_3_body),</span><br><span class="line">          <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">          <span class="attr">headers</span>: &#123;</span><br><span class="line">            <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;application/json;charset=UTF-8&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">await</span> (<span class="keyword">await</span> <span class="title function_">fetch</span>(url, step_3)).<span class="title function_">text</span>())</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p>这里要注意以下,套评论的时候要传递两个参数<code>path</code>和<code>before</code>,<code>path</code>是当前文章路径,<code>before</code>是上一条评论的创建时间戳<code>CreatedAt</code></p><p>然后使用的时候来一波:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">refresh_token = <span class="keyword">await</span> <span class="title function_">get_refresh_token</span>()</span><br><span class="line">access_token = <span class="keyword">await</span> <span class="title function_">get_access_token</span>(refresh_token)</span><br><span class="line">val = <span class="keyword">await</span> <span class="title function_">get_comment</span>(access_token, path, before)</span><br></pre></td></tr></table></figure><p>同时用KV缓存</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> <span class="variable constant_">KVNAME</span>.<span class="title function_">put</span>(<span class="string">&quot;hpp_comment_refresh_token&quot;</span>, refresh_token)</span><br><span class="line"><span class="keyword">await</span> <span class="variable constant_">KVNAME</span>.<span class="title function_">put</span>(<span class="string">&quot;hpp_comment_access_token&quot;</span>, access_token)</span><br></pre></td></tr></table></figure><p>OK起飞</p><h2 id="问题解决-EditorMD移动端问题"><a href="#问题解决-EditorMD移动端问题" class="headerlink" title="问题解决 - EditorMD移动端问题"></a>问题解决 - EditorMD移动端问题</h2><p>本来HPP开始写的时候就是用EditorMD的,好康,功能多.</p><p>但是很快手机端就炸出问题了:</p><p>安卓:打一个字换一行<br>苹果:打一个字复制一遍</p><p>非常有问题,原仓库有一个Close的issues说把codemirror更新到最新版本就行,但是我更新到5.x最后一个版本问题仍复发.</p><p>Github上面大多数编辑器也用的是CodeMirror.</p><p>然后找了半天实在没有解决方案，就<strong>花一个下午时间手写了一个编辑器</strong></p><p>用的是最基础的<strong>textarea</strong>，这能出兼容性问题我把<strong>Github整个吃了</strong></p><p>预览功能是靠markedjs通过调整<code>display</code>在一个<code>div</code>里面预览,在1.1.0版本支持了代码高亮.</p><p><del>话说手写一个很多功能就很好集成了诶</del></p><h1 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h1><p>还有很多开发细节想不起来了,先水到这里了,<span class="heimu">滚回去修bug了</span></p><p><a href="https://jq.qq.com/?_wv=1027&amp;k=JPokmJdL">QQ群:467731779</a></p><p>最后加一句，用HPP时CI强烈建议使用GithubAction并公开，<del>我是也不明白我Travis-CI怎么把积分耗完的</del></p><p>预计会添加的功能：</p><ul><li>Hexo、主题配置修改</li><li>输入框粘贴上传图片</li><li>友链系统</li><li>基于KV/IPFS的自动保存功能</li><li>列表分页功能</li><li>博主工具箱</li></ul>]]></content>
      
      
      <categories>
          
          <category> 好方法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 集成部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PanList：ServerLess百度网盘列表直链程序</title>
      <link href="/posts/32883f0c/"/>
      <url>/posts/32883f0c/</url>
      
        <content type="html"><![CDATA[<div class="note success flat"><h3 id="警告"><a href="#警告" class="headerlink" title="警告"></a>警告</h3><p>本篇文章在panlist发布后两天内写成，panlist尚处于高速迭代状态，本篇教程随时会失效！</p></div><blockquote><p> <del>百度网盘2021年最新不限速下载方式是怎么回事呢？百度网盘相信大家都很熟悉，但是百度网盘2021年最新不限速下载方式是怎么回事呢，下面就让小编带大家一起了解吧。</del><br><del>百度网盘2021年最新不限速下载方式，其实就是PandownloadCloudFlareWorkers版本，大家可能会很惊讶百度网盘怎么会2021年最新不限速下载方式呢？但事实就是这样，小编也感到非常惊讶。</del><br><del>这就是关于百度网盘2021年最新不限速下载方式的事情了，大家有什么想法呢，欢迎在评论区告诉小编一起讨论哦！</del></p></blockquote><p>之前写过<a href="/p/74e90c90.html">GoogleDrive</a>、<a href="/p/4fb070ca.html">OneDrive</a> 的CloudFlare列表程序，这两个有个共同点，那就是国内都无法很好的下载，所以用CloudFlareWorkers作为中间件转发流量。</p><p>比较讽刺的是，CloudFlareWorkers用的都是国外节点，但以上两个运行于此的目录列表程序支持的下载速度却远远大于国内有节点的百度网盘，不说是移动BGP走香港有多好，至少我在『电信』网络环境下的下载速度都远远大于百度网盘。很显然，百度网盘作为垄断国内网盘市场的资本，既然已经度过了烧钱的时间，那么现在自然是能剩多少省多少，这就是『吃相难看』。</p><p>两年前，当微博上的人们开始质问突然『诈尸』的百度网盘微博账号，网友们才纷纷意识到自己的百度网盘被恶意限速了，紧接着，破解百度网盘限速的方式层出不穷。只是后来，这些方式一点一点被打压下去，最终戛然而止。</p><p>最近这几天因为在写<a href="https://github.com/HexoPlusPlus/HexoPlusPlus">HexoPlusPlus: A ServerLess Hexo Dashboard</a> 正在努力学习CloudFlareWorkers。由于评论模块需要数据结构有关知识，可惜这一块知识大都都被一些所谓白嫖CloudFlareWorkers的教程所淹没：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.1.5/101043.jpg" alt="&quot;Google上CloudFlareWorkers搜索结果&quot;"></p><p>在查询有关资料的时候，Github上一颗冉冉新星引起了我的注意，<a href="https://github.com/teardr0p/PanList">PanList</a> ,根据其Commit显示,这个仓库仅仅是两天前刚刚开辟的,但是本文写是就有61Star和21Fork 【当然我也有Star】，可见其热门程度。不过简单的翻看了一下我就明白其为何如此热门，第一，它是专门对付令人头疼的百度网盘，第二，它是构建于CloudFlareWorkers。</p><h1 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h1><p>电脑登录百度网盘：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.1.5/101056.jpg" alt="&quot;百度网盘&quot;"></p><p>按下F12进入开发者模式，选择<code>Application</code>模块，点击<code>Cookies</code>:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.1.5/101101.jpg" alt="&quot;Cookies&quot;"></p><p>在这里，我们需要获取两个Cookie：<code>BDUSS</code>和<code>STOKEN</code></p><h1 id="获取"><a href="#获取" class="headerlink" title="获取"></a>获取</h1><div class="table-container"><table><thead><tr><th>Github</th><th>JSDelivr</th></tr></thead><tbody><tr><td><a href="https://raw.githubusercontent.com/teardr0p/PanList/master/index.js">原版Github下载地址</a></td><td><a href="https://cdn.jsdelivr.net/gh/teardr0p/PanList@master/index.js">原版JSDelivr下载地址</a></td></tr></tbody></table></div><p>修改前面四行代码，分别为</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">BDUSS</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">STOKEN</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">USERNAME</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PASSWORD</span> = <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>将获取到的Cookie复制到第一行和第二行。第三、四行是登录后台所需的账号密码。</p><blockquote><p>AnyWay，你也可以将这些写入到后台变量</p></blockquote><p>新建一个Worker，将处理好的代码直接复制进去：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.1.5/101307.jpg" alt="复制代码"></p><p>保存并部署，确定。</p><h1 id="绑定域名"><a href="#绑定域名" class="headerlink" title="绑定域名"></a>绑定域名</h1><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.1.5/101107.jpg" alt="绑定域名"></p><p>路由：<code>&#123;待绑定的域名&#125;/*</code> [后面*的原理是覆盖该路径下所有文件]<br>Worker：你新建的Worker名字</p><h1 id="评测"><a href="#评测" class="headerlink" title="评测"></a>评测</h1><p>登陆界面：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.1.5/101115.jpg" alt="login"></p><p>打开后：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.1.5/101118.jpg" alt=""></p><blockquote><p>挺讽刺的是，去除了百度网盘原始界面乱七八糟的东西，CloudFlareWorkers的国外服务器打开速度都比百度网盘快</p></blockquote><p>Chrome直接下载速度</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.1.5/101447.jpg" alt=""></p><p>传递Cookie后IDM下载速度：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.1.5/101120.jpg" alt=""></p><p>注：单线程下载速率最终取决于百度网盘的限制，也就是说无论如何你也无法逃避百度网盘对源头的遏制，就在我下完<code>Soul</code>这部将近2GB的电影后，我的账号就被百度拉入黑名单，现在即使用IDM也只有80kb/s <span class="heimu">但是还是比原来的客户端快</span></p><h1 id="尾声"><a href="#尾声" class="headerlink" title="尾声"></a>尾声</h1><p>本质上panlist无非就是通过baidu没有公开的API通过Cookie鉴权来获取文件列表和下载，虽然依旧没有突破单线程下载限速，但至少实现了直链下载和多线程下载的功能，并且部署在CloudFlareWorkers上的方式确实大开眼界，无服务器应用的范围又扩展了一步，我十分看好这个项目。</p><p>另外，本人也在努力开发一款同样基于CloudFlareWorkers的评论系统，以下是截图：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.1.5/101127.jpg" alt=""></p><p>最后，来一句姗姗来迟的新年祝福：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.1.5/happy.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 好方法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CloudFlare </tag>
            
            <tag> 网盘 </tag>
            
            <tag> 百度网盘 </tag>
            
            <tag> CloudFlareWorkers </tag>
            
            <tag> 薅羊毛 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自定義側邊欄</title>
      <link href="/posts/ea33ab97/"/>
      <url>/posts/ea33ab97/</url>
      
        <content type="html"><![CDATA[<div class="note info flat"><p>適用於 &gt;= 3.8.0</p></div><p>側邊欄現在支持自定義了，可以添加自己喜歡的 widget。</p><p>可添加自己的 widget，也可以對現有的 widget 進行排序（<code>博客資料</code>和 <code>公告</code>這兩個固定，其它的能排序）</p><h2 id="widget-排序"><a href="#widget-排序" class="headerlink" title="widget 排序"></a>widget 排序</h2><p>只需要配置 <code>sort_order</code>就行。（使用了 <code>Flex</code> 佈局的 <code>order</code> 屬性，具體可查看 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Ordering_Flex_Items">mozilla 文檔</a>。簡單來講，就是配置<strong>數字</strong>來實現排序，如果不配置，則默認為 0。數字越小，排序越靠前。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">aside:</span></span><br><span class="line"> <span class="string">...</span></span><br><span class="line">  <span class="attr">card_recent_post:</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_categories:</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_tags:</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_archives:</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_webinfo:</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line"></span><br><span class="line"><span class="attr">newest_comments:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br></pre></td></tr></table></figure><h2 id="自定義-widget"><a href="#自定義-widget" class="headerlink" title="自定義 widget"></a>自定義 widget</h2><p>如果你想添加自己的內容到側邊欄去，你可以自定義。</p><h3 id="創建-widget-yml"><a href="#創建-widget-yml" class="headerlink" title="創建 widget.yml"></a>創建 widget.yml</h3><p>在Hexo博客目錄中的<code>source/_data</code>（如果沒有 _data 文件夾，請自行創建），創建一個文件 <code>widget.yml</code></p><h3 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">top:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">class_name:</span></span><br><span class="line">    <span class="attr">id_name:</span></span><br><span class="line">    <span class="attr">name:</span></span><br><span class="line">    <span class="attr">icon:</span></span><br><span class="line">    <span class="attr">html:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">bottom:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">class_name:</span></span><br><span class="line">    <span class="attr">id_name:</span></span><br><span class="line">    <span class="attr">name:</span></span><br><span class="line">    <span class="attr">icon:</span></span><br><span class="line">    <span class="attr">order:</span></span><br><span class="line">    <span class="attr">html:</span></span><br></pre></td></tr></table></figure><blockquote><p>參數詳解</p></blockquote><p><strong>top</strong>:  創建的 widget 會出現在非 sticky 區域（即所有頁面都會顯示)</p><p><strong>bottom</strong>:  創建的 widget 會出現在 sticky 區域（除了文章頁都會顯示)</p><div class="table-container"><table><thead><tr><th>參數</th><th>解釋</th></tr></thead><tbody><tr><td>class_name</td><td>所創建的 widget  父類 class 名 （可選）</td></tr><tr><td>id_name</td><td>所創建的 widget  父類 id 名（可選）</td></tr><tr><td>name</td><td>所創建的 widget 標題</td></tr><tr><td>icon</td><td>所創建的 widget 圖標</td></tr><tr><td>order</td><td>所創建的 widget 排序 （可選）</td></tr><tr><td>html</td><td>所創建的 widget 相關代碼</td></tr></tbody></table></div><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/adside-diy-parameter.png" alt="image-20201230223506507"></p><p>生成的 代碼 為</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-widget 所寫的 class_name&quot;</span> <span class="attr">id</span>=<span class="string">&quot;所寫的 id_name&quot;</span> <span class="attr">style</span>=<span class="string">&quot;order: 所寫的 order&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-headline&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;所寫的 icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>所寫的 name<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-content&quot;</span>&gt;</span></span><br><span class="line">        所寫的 html</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果你需要對添加的 widget 進行 UI 調整，請自行添加 css 到 inject 去。</p><h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p>以  <a href="https://clustrmaps.com/profile/1b7ep/widget/code/globe">訪客地圖</a> 為例子</p><ol><li><p>獲取訪客地圖的 html 代碼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">id</span>=<span class="string">&quot;clstr_globe&quot;</span> <span class="attr">src</span>=<span class="string">&quot;//clustrmaps.com/globe.js?d=5V2tOKp8qAdRM-i8eu7ETTO9ugt5uKbbG-U7Yj8uMl8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>創建 widget.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">bottom:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">user-map</span></span><br><span class="line">      <span class="attr">id_name:</span> <span class="string">user-map</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">訪客地圖</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-heartbeat</span></span><br><span class="line">      <span class="attr">order:</span></span><br><span class="line">      <span class="attr">html:</span> <span class="string">&#x27;&lt;script type=&quot;text/javascript&quot; id=&quot;clstr_globe&quot; src=&quot;//clustrmaps.com/globe.js?d=5V2tOKp8qAdRM-i8eu7ETTO9ugt5uKbbG-U7Yj8uMl8&quot;&gt;&lt;/script&gt;&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>運行 hexo</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/aside-diy-sample.png" alt="image-20201230224442356"></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 進階教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
            <tag> 主題 </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>當設置 top_img 為 false 時</title>
      <link href="/posts/c9711c19/"/>
      <url>/posts/c9711c19/</url>
      
        <content type="html"><![CDATA[<p>當設置 top_img 為 false 時，不顯示頂部圖</p>]]></content>
      
      
      <categories>
          
          <category> Demo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> butterfly </tag>
            
            <tag> top_img </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>无服务器搭建Artalk评论系统后端</title>
      <link href="/posts/480ab6ed/"/>
      <url>/posts/480ab6ed/</url>
      
        <content type="html"><![CDATA[<blockquote><p>这篇的无服务器部署Artalk，指的是NoServer而不是Serverless</p><p>这篇所写的是部署后端，关于前端部署十分简单，这里不多阐述</p></blockquote><p><a href="https://artalk.js.org/">Artalk</a>，一款简洁有趣的自托管评论系统。此时，Valine作为老大哥就不得不跳出来了。但是，作为Valine的Leancloud作为第三方托管，数据放在别人那里总是不舒服的，譬如<a href="https://status.leancloud.cn/">2020/9/24Leancloud华北节点云引擎被 DDoS 攻击</a><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/5c53d1e2ad89f.jpg?q=45" alt=""></p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001071558.png?q=45" alt="image-20201001071514956"></p><p>或者说LeanCloud将开发版限额一限在限，亦或者leancloud多次宕机,作为自由开放的我自然不舒服。加上leancloud开发版的SLA实在令人担忧【不包括休眠时间，一个月内宕机超过20次（不过leancloud开发版确实没有保证SLA）】，以及比较严重的管理员冒充。我一直再找一个能用自己服务器托管评论系统，真巧，我找到了Artalk。Artalk的优点：</p><ul><li><p>轻量简洁 (~23kB gzipped)</p></li><li><p>有趣有爱</p></li><li><p>自托管</p></li><li><p>Markdown</p></li><li><p>表情自定</p></li><li><p>滑稽表情包</p></li><li><p><strong>管理员密码，防冒名</strong></p></li><li><p>验证码，提交频率限制</p></li><li><p><strong>通知中心</strong>，邮件提醒</p></li><li><p>自定义某些页面<strong>仅管理员可评论</strong></p></li><li><p>无限层级回复</p></li><li><p>滚动加载更多</p></li><li><p><strong>评论折叠</strong></p></li><li><p>一页多个评论</p></li><li><p>TypeScript</p></li><li><p><strong>提交频繁验证码</strong></p></li><li><p><strong>无数据库</strong></p><p><span class="heimu">当然没有垃圾评论检测就很蛋疼</span></p></li></ul><p>有服务器部署起来相当简单，宝塔【虽然被炸0day，不过修修补补还能用】+Artalk能实现5分钟部署完毕<a href="https://blog.jalenchuh.cn/posts/artalk-api-php/">【Jalen的Artalk 自托管评论系统的后端部署】</a>，但是，习惯Valine的群友一看到后端部署就立刻皱起了眉头：我没有服务器，怎么办？<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/BnTMX35EPxleVmA.jpg?q=45" alt=""></p><p>Artalk的后端是PHP的，虽然作者也承诺了会开发别的后端<code>Go API / Node API / Python API</code>，但迟迟没有写出来，考虑到<a href="https://github.com/qwqcode">QWQCODE</a>是个学生【我也是】，那么咕咕咕就情有可原了。<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/5c53d78c3f4a5.jpg" alt=""></p><p>实际上，我用的是Euserv白嫖的，至少SLA还是过的去【&gt;=99%】，但是无论是申请还是部署都非常麻烦。此时，我就在想，既然有免费的php托管商，何苦不用呢？<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/5896e9712a3c1.gif" alt=""></p><p>目前找到两个：Gearhost和000webhost</p><blockquote><p>注意，heroku虽然也有免费容器部署php，但是heroku是沙盒制度，一个评论存储为文件后会删除，所以heroku并不适合作为artalk后端。</p></blockquote><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="设置Artalk"><a href="#设置Artalk" class="headerlink" title="设置Artalk"></a>设置Artalk</h2><p>与其它评论系统不同，artalk本身并没有做到开箱即用这一特点，所以，你还要做一些事先准备。</p><h3 id="GithubAction-Composer安装"><a href="#GithubAction-Composer安装" class="headerlink" title="GithubAction+Composer安装"></a>GithubAction+Composer安装</h3><p>Artalk为了缩小原文件大小，并没有安装好依赖，依赖需要你自己安装。</p><p>如果你本地有composer，那就直接克隆本地运行composer。但不论其便携性还是效率都不高【composer安装起来比较麻烦】，所以，我建议此处用GithubAction实现composer安装。当然你有composer环境就可以直接clone在本地安装。<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/5896ece29d8a5.gif" alt=""></p><p>进入<a href="https://github.com/qwqcode/Artalk-API-PHP">原项目</a>，Fork到你自己的账户</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001073813.png?a=45" alt="image-20201001073812407"></p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001073914.png?q=45" alt="image-20201001073913581"></p><p>新建一个文件，文件名为：<code>.github/workflows/composer.yml</code></p><p>内容为：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">composer</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span> </span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">master</span> <span class="comment"># build master branch only</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">download:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">ref:</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">        npm install composer</span></span><br><span class="line"><span class="string">        composer install</span></span><br><span class="line"><span class="string"></span>        </span><br><span class="line">        </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v3</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">github_token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">publish_dir:</span> <span class="string">./</span></span><br></pre></td></tr></table></figure><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001074024.png?q=45" alt="image-20201001074023800"></p><p>设置Secret，NAME为<code>TOKEN</code>,内容为你的GithubTOKEN.【Token的获取与这篇文章关联不大】，请自行百度。</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001081903.png?q=45" alt="image-20201001081902077"></p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001081942.png?q=45" alt="image-20201001081941932"></p><p>回到仓库，<strong>新建一个空白的<code>.htaccess 文件夹，里面什么都不写</code></strong><sup><a href="#fn_1" id="reffn_1">1</a></sup>，并删除根目录底下的<code>.gitignore</code>触发GithubAction<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/%E6%83%B3%E4%B8%80%E6%83%B3.png" alt=""></p><blockquote><p>此处必须删除<code>.gitignore</code>【或者你自行修改】，否则接下来出错一律不管</p></blockquote><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001082247.png?q=45" alt=""></p><p>稍后即部署完毕</p><h3 id="本地修改配置文件"><a href="#本地修改配置文件" class="headerlink" title="本地修改配置文件"></a>本地修改配置文件</h3><p>Clone你的仓库，指定为gh-pages分支</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b gh-pages https://github.com/ChenYFan-Tester/Artalk-API-PHP.git</span><br></pre></td></tr></table></figure><blockquote><p>-b是强制指定分支的意思</p><p>速度慢试试github.com.cnpmjs.org，阿里github镜像</p></blockquote><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001082654.png?q=45" alt="image-20201001082653387"></p><p>打开并修改<code>Config.example.php</code> 具体参照<a href="https://github.com/qwqcode/Artalk-API-PHP">官方文档</a></p><p>完毕后退出，将<code>Config.example.php</code>重命名为<code>Config.php</code></p><p>此时,你的artalk安装终于告一段落,但是,你还没有将他们部署上去.</p><h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><h2 id="Gearhost"><a href="#Gearhost" class="headerlink" title="Gearhost"></a>Gearhost</h2><p>Gearhost其实是一个小有名气的托管商，Free计划提供了最高一线程、每小时256MB内存、每小时5%CPU周期和每月1GB流量，作为评论托管是完全足够的。并且不需要信用卡。</p><p>进入<a href="https://www.gearhost.com/">Gearhost</a>注册一个账号,新建一个免费的CloudSite。</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001083231.png?q=45" alt="image-20201001083231112"></p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001083259.png?q=45" alt="image-20201001083258674"></p><p>构建完毕后稍等片刻，进入面板设置：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001083743.png?q=45" alt="image-20201001083743275"></p><p>PHP版本设置为7.1</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001085603.png?q=45" alt="image-20201001085602629"></p><p><code>Virtual Directories</code>网址设置为<code>/</code>路径设置为<code>site\wwwroot\public\</code></p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001084000.png?q=45" alt="image-20201001083959803"></p><p>进入<code>Publish</code>选项卡，勾选<code>Local Git</code>，<code>Activate</code>这个方式</p><blockquote><p>注意，我强烈不推荐你使用FTP上传，FTP看起来有图形化很方便，但是请注意，Composer后的文件将近<strong>300+</strong>，FTP最致命的上传方式是<strong>每上传一个文件就会握一次手</strong>，这样子会严重浪费你的时间。而是用Github链接的同学我就要考虑你的危险的想法了，如果<strong>没有</strong>将仓库设置为Private，那么用Github链接是一个非常<strong>不明智</strong>的选择</p></blockquote><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001084334.png?q=45" alt="image-20201001084334323"></p><p>绑定git，上传三步走，<code>git init &amp;&amp; git add . &amp;&amp; git commit -m &quot;OHH&quot; &amp;&amp; git push website master</code></p><p>绑定域名什么不多说了，建议套一层CloudFlare。</p><p>Gearhost所用的共享ip，来自美国 科罗拉多州 丹佛，三网优化都不好。当然回源CloudFlare还是不错的。</p><p>DEMO：<code>https://artalk-pub1.cyfan.top/</code></p><p>SLA：还在测试，大约95%，你可以前往<a href="https://status.cyfan.top">https://status.cyfan.top</a>查看详情<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/5c53d1904dcb2.gif" alt=""></p><p>在页面id为12345有几个测试评论，你可以去测试一下，跨域均设置为’*‘。</p><p>管理员用户名：admin</p><p>管理员邮箱：admin@admin.admin</p><p>管理员密码：admin</p><h2 id="000webhost"><a href="#000webhost" class="headerlink" title="000webhost"></a>000webhost</h2><p><a href="https://www.000webhost.com/">000webhost</a>也是个著名的免费php托管商，虽然早年的种种行为看着十分恶心，但是好歹也是个能白嫖的托管商。000webhost提供了每个账户一个免费的容器，每个容器每月3GB流量、300MB空间、1w个文件和每天25次邮箱发送。</p><p>000webhost的部署相对简单些，直接将所有文件拖拽上传【因为它不支持git上传】，稍等即可</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001150747.png?q=45" alt="image-20201001150747082"></p><p>上传至<code>public_html</code>子文件夹下：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001151010.png?q=45" alt="image-20201001151009729"></p><p>000webhost不支持设置运行目录，这意味着data文件夹将会被曝光，但是我们可以设置000webhost的但目录密码保护：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001151720.png?q=45" alt="image-20201001151719382"></p><p>这样，当有人试图访问<code>data/comments.data.json</code> 时，就会遭到密码拦截。</p><h4 id="绑定域名"><a href="#绑定域名" class="headerlink" title="绑定域名"></a>绑定域名</h4><p>由于000webhost域名验证需要一段时间，请先前往域名托管商设置记录。比如我的app名字是XXX.000webhostapp.com，我要绑定的是artalk-pub2.cyfan.top，就应该这样设置：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001152945.png?q=45" alt="image-20201001152944348"></p><blockquote><p>请注意000webhost验证域名是通过dns记录来验证的，在验证完毕前请不要开启CDN！</p></blockquote><p>绑定域名，请鼠标移至卡片上，点击QuickActions，点击Details</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001152258.png?q=45" alt="image-20201001152257105"></p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001152417.png?q=45" alt="image-20201001152417027"></p><p>点击My Domains,进入设置界面：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001153113.png?q=45" alt="image-20201001153112150"></p><p>点击Add domain</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001153038.png?q=45" alt="image-20201001153038499"></p><p>选择PointDomain【毕竟把ns改到000webhost是不可能的】</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20201001153224.png?q=45" alt="image-20201001153224077"></p><p>如实填写，稍等即可。</p><p>DEMO:<a href="https://artalk-pub2.cyfan.top/public/">https://artalk-pub2.cyfan.top/public/</a></p><p>SLA：还在测试，大约90%，你可以前往<a href="https://status.cyfan.top">https://status.cyfan.top</a>查看详情</p><p>000webhost默认线路烂的和shit一样，强烈建议套CloudFlare</p><p>和另一个demo一样在页面id为12345有几个测试评论，你可以去测试一下，跨域为’*‘。</p><p>管理员用户名：admin</p><p>管理员邮箱：admin@admin.admin</p><p>管理员密码：admin</p><p>000webhost对于这些不能展现他的广告徽标的账户可能会存在限制处理，请注意【老恶心了】。</p><h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>国庆作业有点多，这篇要不是被我<del>亲爱</del>的群友催的要紧，我也不会水这一篇啊呜呜呜。<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/5896ece2a019f.jpg" alt=""></p><p>如果你的artalk卡在了转圈圈的问题上，你可以在html前面加上这一句</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://XXX.XXX.XXX/index.php&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;preconnect&quot;</span> <span class="attr">crossorigin</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>preconnect</code>可以强制在渲染页面试并发一个请求，可以有效解决5s超时问题和并发过多不稳定导致cancel问题。</p><p>另外你也可以用我的artalk脚本：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://cdn.jsdelivr.net/gh/ChenYFan-Tester/Artalk@gh-pages/Artalk.js</span><br><span class="line">https://cdn.jsdelivr.net/gh/ChenYFan-Tester/Artalk@gh-pages/Artalk.css</span><br></pre></td></tr></table></figure><ul><li>修改超时时间为60s</li><li>掩盖artalk标识</li><li><strong>杰哥</strong>提示语</li></ul><p>如果你觉得不放心，你可以亲自检查<a href="https://github.com/ChenYFan-Tester/Artalk/commits/master">我做了什么</a>，我会尽量保证与原仓库同步。</p><p><del>国庆快乐！</del>写作业去了<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/5c53dbe510bcf.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 随心记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 评论 </tag>
            
            <tag> Artalk </tag>
            
            <tag> 无服务器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图床的千层套路</title>
      <link href="/posts/eb490c73/"/>
      <url>/posts/eb490c73/</url>
      
        <content type="html"><![CDATA[<blockquote><p> 博客最近在细心打磨终于上95分了，其中我认为图片功劳不可没。<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/cUEQrVYGFiDjqhy.jpg" alt=""></p></blockquote><p>2020年8月9日<a href="https://github.com/jsdelivr/jsdelivr/pull/18247/files">Jsdelivr发布了一次使用政策：Create Acceptable Use Policy</a>，其中第4条Prohibited Use引起了众多议论：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">4.</span> Prohibited Use</span><br><span class="line"></span><br><span class="line">The following behavior is prohibited:</span><br><span class="line"></span><br><span class="line"><span class="bullet"> 1.</span> Hosting or accessing content that:</span><br><span class="line"><span class="bullet">     -</span> contains malware or harmful code in any form,</span><br><span class="line"><span class="bullet">     -</span> violates proprietary rights of others,</span><br><span class="line"><span class="bullet">     -</span> is sexually explicit,</span><br><span class="line"><span class="bullet">     -</span> is potentially illegal in the EU or the USA.</span><br><span class="line"></span><br><span class="line"><span class="bullet"> 2.</span> Abusing the service and its resources, or using jsDelivr as a general-purpose</span><br><span class="line"><span class="code">    file or media hosting service. This includes, for example:</span></span><br><span class="line"><span class="code">     - running an image hosting website and using jsDelivr as a storage for all</span></span><br><span class="line"><span class="code">       uploaded images,</span></span><br><span class="line"><span class="code">     - hosting videos, file backups, or other files in large quantities.</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">    We recognize that there are legitimate projects that consist of a large number</span></span><br><span class="line"><span class="code">    of files, and these are not considered abuse. For example: icons packs, apps,</span></span><br><span class="line"><span class="code">    or games with a large number of assets.</span></span><br><span class="line"><span class="code"></span></span><br></pre></td></tr></table></figure><p>其中<code>running an image hosting website and using jsDelivr as a storage for all uploaded images</code> 这一句相当的有歧义，要多少的图片才能算是图站？博客里面图片放里面算吗？上传的图片怎样才不行？<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/TlAGjm6IvJSMVpq.jpg" alt=""></p><p>反观网上流传的白嫖Github做图床，基本点进去都是<code>https://cdn.jsdelivr.net/gh/</code> 这样子的图床，这种行为，我不敢妄加评论。但是，jsdelivr诞生的意义似乎并不是为了图床而生的，这种行为也很难判断成滥用。<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/5896ece29a8e0.jpg" alt=""></p><p>使用政策发布之后，一时间，QQ群、v2ex、知乎上立刻就炸了锅。很多人猜测jsdelivr是不是滥用过度而禁止将其作为图床？免费图床的白嫖日子要结束了吗？更多的人，是在哭诉和询问那里还有像jsd一样优秀的<strong>图床</strong>可以白嫖，微博炸了，那里还有免费图床啊？</p><p>实际上，我一般采用的是<code>BackBlaze+CloudFlare</code> 但是自从八月底移动开始改道，从原先优秀的CMI绕路LAX后，国内CloudFlare访问质量再次暴跌，这不得不使我将博客迁至Vercel。好在八月份我有幸申请到了<code>doegdoge图床</code>使用权限，获得了国内较高速的图床.</p><p>但是，对于哪些没有没有图床的人来说，免费图床真的这么难以获得吗？</p><p>不好意思，<strong>免费图床非常多</strong>，只是你不会用而已，这篇文章，就是拯救面前陷入图床危机的你【当然是面向小白，大佬也可以在底下给我提意见鸭】。<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/stick_56.png" alt=""></p><h1 id="公益图床"><a href="#公益图床" class="headerlink" title="公益图床"></a>公益图床</h1><h2 id="sm-ms"><a href="#sm-ms" class="headerlink" title="sm.ms"></a>sm.ms</h2><p><a href="https://sm.ms">https://sm.ms</a></p><p>推荐程度：★</p><p>首先推荐的是这个图床，loli.net域名经典重现。三年前此图床域名还有备案采用的是国内CDN，可惜后来因为滥用吊销备案号而被迫迁移国外，用的是CloudFlare。实际使用效果面向国内确实不太好，建议备用。</p><p>你不需要注册，拖拽直接上传，只要不违反大陆和香港法律，他就能永久保留你的图片</p><p><img src="https://i.loli.net/2020/09/12/OxvnMBwd3VA8uyD.jpg" alt=""></p><p>可搭配PicGo</p><h2 id="Imgur"><a href="#Imgur" class="headerlink" title="Imgur"></a>Imgur</h2><p><a href="https://imgur.com">https://imgur.com</a></p><p>推荐程度：★★</p><p>国外一家牛逼的图片托管服务商，你可以选择注册或不注册，同样的，拖拽上传，永久保留，其SLA有着相当高的保证。</p><p>然而很可惜的是，这种网站很早就在国内被<strong>DNS域名污染</strong>，也就意味着访客无法正常加载你的图片。这也就是被打为两颗星的原因。<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/%E4%B8%8D%E8%AF%B4%E8%AF%9D.png" alt=""></p><p>当然，你也可以通过<a href="#图像缓存服务">#图像缓存服务</a> 从而实现国内访问。</p><p>可搭配PicGo【需注册】</p><h2 id="去不图床"><a href="#去不图床" class="headerlink" title="去不图床"></a>去不图床</h2><p><a href="https://7bu.top/">https://7bu.top/</a></p><p>推荐程度：★★★★</p><p>由<a href="https://dusays.com/241/">杜老师</a>提供的个人公益图床，存储于阿里和腾讯的COS，官方保证SLA&gt;=99%，是一个不错的选择，当然，7bu毕竟是个人维护的图床，能不能永久撑下去还是个问题，我也没有做过深度评测，无法表明其可用性。</p><p>可搭配PicGo。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">接口地址：https://7bu.top/api/upload</span></span><br><span class="line"><span class="string">post参数：image</span></span><br><span class="line"><span class="string">回调json：data.url</span></span><br></pre></td></tr></table></figure><p><a href="https://7bu.top/index/api.html">更准确的API文档</a></p><p><img src="https://7.dusays.com/2020/09/13/aa555748a9f38.jpg" alt=""></p><blockquote><p><del>而且，就在我上传测试图片的时候，明明已经表明图片已经上传，打开却发现COS提示404，这一点我不得陷入思考，个人维持的公益项目真的能保证SLA吗？<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/%E4%BE%BF%E4%BE%BF.png" alt=""></del></p><p>昨天上传的时候撞上服务器维修了，很抱歉做出了不够恰当的评价.7bu采用的是全国腾讯云CDN加速，国内访问速度十分优良。然而请注意，7bu刚开始建立的目的并不是面向全球【仅面对中国大陆游客】，这导致其大陆以外基本解析至国内西藏腾讯，访问效果并不好。并且，这是通过腾讯云的鉴黄，可能会存在误杀行为。具体使用请个人斟酌【不过作为开发环境还是可行的】。</p></blockquote><h1 id="白嫖的"><a href="#白嫖的" class="headerlink" title="白嫖的"></a>白嫖的</h1><h2 id="阿里图床"><a href="#阿里图床" class="headerlink" title="阿里图床"></a>阿里图床</h2><p><del>推荐程度：★★★★</del></p><p><del>我个人搭建的API：<a href="https://picbed.cyfan.top">https://picbed.cyfan.top</a> 不保证上传SLA<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/5c53ce897ab55.jpg" alt=""></del></p><p><del>由于小鸡联通国内网络不太好，很有可能无法正常上传，<a href="https://github.com/ChenYFan-Tester/Alibaba_pic">原项目已经开源</a> ，你完全可以通过在国内的机子或者是本地搭建以获得更佳体验。</del></p><p><del>如果上传成功了，图片将会托管于阿里云的CDN，无论是速度还是延迟都相当的优秀。</del></p><p><del>官方大厂，下载SLA有保障。</del></p><p><del>可搭配PicGo。</del></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">接口地址：https://picbed.cyfan.top/update.php</span></span><br><span class="line"><span class="string">post参数：file</span></span><br><span class="line"><span class="string">回调json：data.url</span></span><br></pre></td></tr></table></figure><p><strong>已失效，切勿使用</strong></p><h2 id="DogeDoge图床"><a href="#DogeDoge图床" class="headerlink" title="DogeDoge图床"></a>DogeDoge图床</h2><p>推荐程度：★★★★★</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20200912192303.jpg" alt="TEST"></p><p>其实很早就看到<a href="https://v2ex.com/t/659652">V2EX的那篇征文了</a>：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20200912190301.png?q=45" alt=""></p><p>可是当时我不够优秀啊<span class="heimu">虽然现在同样不优秀</span>，博客也没满一年啊，于是白嫖的心态搁浅了。<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/5896e8a408253.jpg" alt=""></p><p>后来突然看到<a href="https://blog.jalenchuh.cn/" content="nofollow">Jalen的博客</a>也用了DogeDoge图床，这才突然意识到原来我已经满一年了。于是抱着试试看的心态向doge官方邮箱发送了邮件，结果真过了。。。</p><p>dogedoge拥有着国内相当不错的CDN，国内访问飞快，但是国外的访问质量的确不如人意。【反正此博客面向中国大陆】</p><p>而且，DogeDoge拥有着很良心的处理参数：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">w：宽</span></span><br><span class="line"><span class="string">h：高</span></span><br><span class="line"><span class="string">mode：模式</span> <span class="bullet">-</span> <span class="string">crop</span> <span class="string">裁剪、clip</span> <span class="string">缩略</span></span><br><span class="line"><span class="string">fmt：格式</span> <span class="bullet">-</span> <span class="string">jpg、png、webp（原图为</span> <span class="string">gif，且没有</span> <span class="string">frame</span> <span class="string">参数时，不做任何裁切、缩略处理）</span></span><br><span class="line"><span class="string">frame：1</span> <span class="bullet">-</span> <span class="string">EOF帧，默认为</span> <span class="number">1</span> <span class="string">（对动画有效）</span></span><br><span class="line"><span class="string">q：压缩质量</span> <span class="bullet">-</span> <span class="number">1</span> <span class="bullet">-</span> <span class="number">100</span><span class="string">（默认</span> <span class="number">90</span> <span class="string">）</span></span><br><span class="line"><span class="string">rect：指定位置裁剪</span> <span class="bullet">-</span> <span class="string">top,left,w,h（若与</span> <span class="string">w</span> <span class="string">/</span> <span class="string">h</span> <span class="string">参数同时存在，则</span> <span class="string">会在</span> <span class="string">rect</span> <span class="string">裁剪过后，继续按照</span> <span class="string">w</span> <span class="string">/</span> <span class="string">h</span> <span class="string">的要求缩略）</span></span><br><span class="line"><span class="string">pos：（配合</span> <span class="string">w</span> <span class="string">/</span> <span class="string">h</span> <span class="string">）裁剪位置</span> <span class="bullet">-</span> <span class="string">top-left、top、top-right、left、center、right、bottom-left、bottom、bottom-right，默认为center</span></span><br><span class="line"><span class="string">pos</span> <span class="string">还有一个特殊的值</span> <span class="string">auto，该值目前为</span> <span class="string">alpha</span> <span class="string">状态，可以根据图片重点来进行</span> <span class="string">pos</span> <span class="string">的位置取舍。</span></span><br></pre></td></tr></table></figure><p>话说回来，DogeDoge也可以搭配PicGo使用。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">接口地址：https://www.dogedoge.com/tools/upload/&#123;Your_Token&#125;</span></span><br><span class="line"><span class="string">post参数：file</span></span><br><span class="line"><span class="string">回调json：data.o_url</span></span><br></pre></td></tr></table></figure><p>当然，现在的Doge图床还是处于免费的试用期【Creater】，不过好在试用期过后价格也比较合理，一般的tester也足够使用，目前看来SLA还是不错的。</p><p>不过，申请不到dogedoge图床也没关系，看下去你就会发现，白嫖的路千千万万，何必执着于一条。<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/stick_34.png" alt=""></p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20200912205753.png?q=45" alt=""></p><h2 id="BackBlaze"><a href="#BackBlaze" class="headerlink" title="BackBlaze"></a>BackBlaze</h2><p>推荐程度：★★★</p><p>具体可以看看<a href="/p/ce240368.html">这篇文章</a></p><h2 id="千奇百怪的"><a href="#千奇百怪的" class="headerlink" title="千奇百怪的"></a>千奇百怪的</h2><h2 id="Github-JSDelivr"><a href="#Github-JSDelivr" class="headerlink" title="Github+JSDelivr"></a>Github+JSDelivr</h2><p>正如我所说的，这种组合已经被广大博主所采纳，并且网上教程已经泛滥了，在这里不再阐述。</p><h2 id="npm-JSDelivr-amp-amp-Zhimg-amp-amp-bdstatic-amp-amp-自定义镜像"><a href="#npm-JSDelivr-amp-amp-Zhimg-amp-amp-bdstatic-amp-amp-自定义镜像" class="headerlink" title="npm+JSDelivr&amp;&amp;Zhimg&amp;&amp;bdstatic&amp;&amp;自定义镜像"></a>npm+JSDelivr&amp;&amp;Zhimg&amp;&amp;bdstatic&amp;&amp;自定义镜像</h2><p>推荐程度：★★★★★</p><p>为什么很多文章都没有提到用npm做图床？我想其中很大的原因是，白嫖jsd做图床的，很多都是小白【或者不愿花时间在于此的大佬】，同样的，这些文章面向的都是这些人，毕竟，以拖拽方式上传的Github和命令行方式上传，我想，大都数人会选择前者吧。</p><p>可是，你们没有想到的是，github文件镜像【github.com.cnpmjs.org是站点镜像】只有jsd一个，npm镜像可远远不止这一个啊！</p><p>让我们看看分别镜像在jsd、zhimg、bdstatic的文件怎么样：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@0.0.1/1.jpg" alt=""></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@0.0.1/2.jpg" alt=""></p><p><img src="https://code.bdstatic.com/npm/chenyfan-oss@0.0.1/3.jpg" alt=""></p><p>【unpkg镜像用的是CloudFlare，国内加速效果不好，暂时不写】</p><p>jsd就不必多说了，国内拥有强劲的网宿节点支撑【虽然以前出现过网宿下游投毒】，速度丝滑无比，国外也有强劲的CloudFlare上岗，可谓国内外两不误。而且，jsd对于npm的package单文件没有大小限制，也就是说泡个视频也不是问题。</p><p>zhimg是知乎的unpkg镜像，也是一个不错的选择【阿里CDN】，知乎官方也未对此做出限制，日常使用是可以的。</p><p>bdstatic是百度的内用npm镜像，速度也很好【百度CDN】，但是请注意，bdstatic作为内用cdn，其拉取频率较慢，经常出现无法及时更新。</p><p>啊哈？不会上传？<br><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/stick_31.png" alt="">去<a href="https://npmjs.org">npm</a><br>官网注册个账号去,然后先：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm login</span><br></pre></td></tr></table></figure><p>接着：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br><span class="line">npm publish</span><br></pre></td></tr></table></figure><p>请注意，如果你之前用过淘宝镜像，那么请先手动切回源：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmjs.org</span><br></pre></td></tr></table></figure><p>每一次发布图片后，你可以将原来的图片删除，更改<code>package.json</code> 版本号【向上增加】,然后<code>npm publish</code>即可</p><p>这个似乎可以搭配picgo，不过好像没这个插件，写起来也麻烦。。。</p><p>unpkg的国内镜像其实远远不止这些，包括七牛、饿了么、腾讯都有，不过这个就要自己找了。<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/7DgSoyqwtYBxchE.jpg" alt=""></p><p>一些推荐的npm【or unpkg镜像】：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">【jsd出品，网宿国内节点】https://npm.elemecdn.com/</span><br><span class="line">【知乎出品，网宿国内节点】https://npm.elemecdn.com/</span><br><span class="line">【百度出品，网宿国内节点】https://code.bdstatic.com/npm/</span><br><span class="line">【饿了么出品，网宿国内节点，回源是Unpkg，建议用这个】https://npm.elemecdn.com/</span><br><span class="line">【饿了么出品，网宿国内节点，回源是JSdelivr，貌似可以用github，但是我用的时候大多无法正常回源，只能获取几个已缓存的热门库】https://shadow.elemecdn.com/npm/</span><br><span class="line">【怎么都是网宿的】</span><br></pre></td></tr></table></figure><p>或者说，你还可以自建unpkg镜像。</p><p>啊，你说你没有服务器反向代理unpkg？</p><p>其实，七牛的对象存储，腾讯的COS和阿里的OSS都是支持镜像回源的鸭！</p><p>七牛http流量每月免费10GB，腾讯的国内免费60GB6个月，作为自用完全足够了！</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/L6LVJL_1ZUM2ISQ]10R%7B3HF.png?q=45" alt=""></p><h2 id="ipfs"><a href="#ipfs" class="headerlink" title="ipfs"></a>ipfs</h2><p>我曾经<a href="/2020/04/07/IPFS-CloudFlare-ServerLessWebPage/">写过关于ipfs的讲解</a> ,作为一个去中心化的存储系统拿来做公开图床其实挺不错的。</p><p>我个人搭建的ipfs镜像【托管于CloudFlareWorkers】：<a href="https://ipfs.cyfan.top">https://ipfs.cyfan.top</a> <img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/5c53d78c3f4a5.jpg" alt=""></p><p>我个人搭建的ipfs上传API：<a href="https://ipfsupload.cyfan.top">https://ipfsupload.cyfan.top</a></p><p>基于Vercel+CloudFlare<del>【我也不知道worker为什么死活上传不上去】</del></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">接口地址：https://ipfsupload.cyfan.top/api/v0/add?pin=true</span></span><br><span class="line"><span class="string">post参数：file</span></span><br><span class="line"><span class="string">回调json：Hash</span></span><br></pre></td></tr></table></figure><blockquote><p>此处Hash获得的是文件的Qmhash，你还要依托ipfs镜像，如<a href="https://ipfs.cyfan.top/ipfs/{QmHash}">https://ipfs.cyfan.top/ipfs/{QmHash}</a></p></blockquote><p><img src="https://ipfs.cyfan.top/ipfs/QmctXmCyxkN72nzoHMAgw1geR7u9XvK7sLo72W4bDZsCm2" alt=""></p><p>顺便收录一些ipfs网关【可访问】：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">【北京 阿里云】https://hashnews.k1ic.com/</span><br><span class="line">【香港 阿里云】https://ipfs.jbb.one/</span><br><span class="line">【美国 DigitalOcean】https://ipfs.telos.miami/</span><br><span class="line">【Amazon】https://ipfs.oceanprotocol.com/</span><br></pre></td></tr></table></figure><p>你可以在<a href="https://ipfs.github.io/public-gateway-checker/">https://ipfs.github.io/public-gateway-checker/</a>找到更多</p><h1 id="图片缓存服务"><a href="#图片缓存服务" class="headerlink" title="图片缓存服务"></a>图片缓存服务</h1><p>正如<a href="##Imgur">##Imgur</a>所说的，imgur在国内已经无法访问了，但是，图片缓存服务可以啊！</p><p><img src="https://search.pstatic.net/common/?src=https://i.imgur.com/Usdr0IT.jpg" alt=""></p><p>收集了一些图片缓存服务：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">【国内网宿节点，只能加载特定图床图片如imgur】https://search.pstatic.net/common/?src=</span><br><span class="line">【Akamai节点，没有使用限制】https://imageproxy.pimg.tw/resize?url=</span><br><span class="line">【CloudFlare节点】https://images.weserv.nl/?url=</span><br><span class="line">【CloudFlare节点】https://pic1.xuehuaimg.com/proxy/</span><br></pre></td></tr></table></figure><h1 id="PicGo的搭配使用"><a href="#PicGo的搭配使用" class="headerlink" title="PicGo的搭配使用"></a>PicGo的搭配使用</h1><p>PicGo默认已经集成了部分图床，其拖拽上传、自动复制剪贴板实在赢得了无数人的心。但是，对于一些冷门的图床支持似乎就不太好，这时候你需要用自定义web图床实现这一切：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20200912205225.png?q=45" alt=""></p><p>我在上方介绍的图床如果支持web端上传，基本上就会写一个post请求，你可以依葫芦画瓢填写进去</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20200912205449.png?q=45" alt=""></p><p>这样子你就可以实现较为丝滑的上传图片了：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20200912210009.jpg?q=45" alt=""></p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/20200912210420.gif?q=45" alt=""></p><p>【为了压缩方便删除了部分帧】</p><h1 id="后言"><a href="#后言" class="headerlink" title="后言"></a>后言</h1><p>实际上最保险的莫过于使用各大厂商的对象存储，当然这笔钱不大好使。<br>你也可以用自己的VPS搭建Chevereto，当然前提是你有VPS<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/5c53de1a4d14d.gif" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 随心记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 图床 </tag>
            
            <tag> 白嫖 </tag>
            
            <tag> PicGo </tag>
            
            <tag> JSDelivr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>多域名线程并发与DNS预解析</title>
      <link href="/posts/6ce8a474/"/>
      <url>/posts/6ce8a474/</url>
      
        <content type="html"><![CDATA[<p>军训结束,感想不多,就一句话</p><blockquote><p>【这就是个无限循环，每天重复训练一套动作，直到结束为止，毫无意义】</p></blockquote><p>回家之后我帮父母看店,顺便点开了浏览器,浏览器卡死了30s,终于完全加载出了一个花花绿绿的主页,是大名鼎鼎的2345主页.</p><p>虽然我很反感这种杂七杂八的傻逼导航,我也试图将主页换成magi或dogedoge,但是父亲就很不习惯,原因很难以接受:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">儿子啊，这样我怎么看天气啊。</span><br></pre></td></tr></table></figure><p>。。。</p><p>于是我顺手右键点开了源代码，闲着无聊看看，结果却刚看看就找到了好<del>康</del>看的东西：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-24%20175355.jpg" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;https://union2.50bang.org&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//h.2345cdn.net&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//image.2345.com&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//00imgmini.eastday.com&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//01imgmini.eastday.com&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//02imgmini.eastday.com&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//03imgmini.eastday.com&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//04imgmini.eastday.com&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//05imgmini.eastday.com&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//pos.baidu.com&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//p.tanx.com&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//gma.alicdn.com&quot;&gt;</span><br></pre></td></tr></table></figure><p>欸，<code>dns-prefetch</code> 是什么?</p><p>好吧，看起来你我都不懂.</p><h2 id="多并发请求"><a href="#多并发请求" class="headerlink" title="多并发请求"></a>多并发请求</h2><p>请问，一号网页和二号网页哪个加载更快？</p><blockquote><p>假设每张图片的大小为无限小,传输速度为无限大,<code>exmple1.com</code>是 <code>exmple.com</code> 的镜像</p></blockquote><p>一号：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!doctype html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple.com/1.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple.com/2.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple.com/3.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple.com/4.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple.com/5.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple.com/6.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple.com/7.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple.com/8.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple.com/9.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple.com/10.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple.com/11.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple.com/12.jpg&quot;&gt;</span><br><span class="line">&lt;/body&gt;&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>二号：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!doctype html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple.com/1.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple.com/2.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple.com/3.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple.com/4.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple.com/5.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple.com/6.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple1.com/7.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple1.com/8.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple1.com/9.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple1.com/10.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple1.com/11.jpg&quot;&gt;</span><br><span class="line">&lt;img src=&quot;https://exmple1.com/12.jpg&quot;&gt;</span><br><span class="line">&lt;/body&gt;&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>好了公布答案了,很显然<span class="heimu">二</span>号加载更快。</p><p>这时候有人就会问了，凭什么啊！不是说图片无限小吗？右边的反而会增加dns解析时间，难道不会更慢吗？</p><p>好吧好吧，实际上，你以为的加载时间是这样的</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-24%20180740.jpg" alt=""></p><p>可是实际上是这样子的：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-24%20200044.jpg" alt=""></p><p>欸这就很有意思了同学们，为什么最后六张会出现Pending状态？</p><p>实际上，浏览器是有并发请求数目限制【通常是2-8个】，虽然这种比较坑人，但这也是为了避免同时大量并发导致资源占用过度，并且只针对同一个域名的（例如向cdn.jsdelivr.net发送请求）。即一时间针对同一域名下的请求有一定数量限制。超过限制数目的请求会被阻塞并进入Pending状态。</p><p>从用户的角度来说，浏览器不可能无限量的并发请求，因此衍生出来了并发限制和HTTP/1.1的Keep alive。 所以，IE6/7在HTTP/1.1下的并发才<strong>2</strong>，但HTTP/1.0却是<strong>4</strong>。 而随着技术的发展，负载均衡和各类NoSQL的大量应用，基本已经足以应对C10K的问题。 但却并不是每个网站都懂得利用domain hash也就是多域名来加速访问。因此，新的浏览器加大了并发数的限制，但却仍控制在8以内。</p><p>然而从服务器的角度来讲，我们也可以窥见，无限制的并发请求无异于一次小型CC，对于保护服务器和优化用户体验还是相当重要的。</p><p>从网站上入手，实际上这一点相当容易理解,2345一打开就是少则五十多张图片同时加载,甚至那些下拉箭头为了兼容ie都还是图片而非fontawesome,如果不绕过并发限制,岂不是一片空白.</p><p>那么问题来了，如何避免堵塞？</p><p>答案显然易见,多换几个域名不就行了??这样图片分别从两个域名获取，直接避免恼火的Pending，</p><p>2345主页中 <code>00imgmini.eastday.com</code> 至 <code>05imgmini.eastday.com</code> 五个域名均是拿来绕开并发限制的。</p><h2 id="Cookie-Free"><a href="#Cookie-Free" class="headerlink" title="Cookie Free"></a>Cookie Free</h2><p>每请求一次资源，就会生成一次新的Cookie。如果网站每个资源cookie有1 KB、网站首页共150个资源时，用户在请求过程中需要发送150 KB的cookie信息，在512 Kbps的常见上行带宽下，需要长达3秒左右才能全部发送完毕。 尽管这个过程可以和页面下载不同资源的时间并发，但毕竟对速度造成了影响。 而且这些信息在js/css/images/html等静态资源上，几乎是没有任何必要的。</p><p> 解决方案是启用和主站不同的域名来放置静态资源，也就是cookie free。</p><blockquote><p>注意此处所指的是主域名而非子域名，子域名的Cookie会和主域名共存</p></blockquote><p>但是这样，就孪生出一个极其严重的问题，多个域名，必然会加重<strong>DNS解析时间</strong>和<strong>SSL的握手时间</strong></p><h2 id="避免DNS拥堵"><a href="#避免DNS拥堵" class="headerlink" title="避免DNS拥堵"></a>避免DNS拥堵</h2><p>一旦采用<strong>多域名的方式绕开并发量限制</strong>，就会导致浏览器在请求时必须一个一个解析过去，从<code>00imgmini.eastday.com</code>至<code>05imgmini.eastday.com</code>，然而DNS解析时间虽然短，但是多个解析必然导致严重拖慢速度，此时我们就需要进行预解析。</p><blockquote><p>请注意，预解析在部分主流浏览器中支持，但是并不是所有页面和条件下都支持。</p></blockquote><p>正常情况下打开一个网页，浏览器会做出以下动作：</p><ol><li><p>浏览器向请求网址发起DNS解析</p></li><li><p>浏览器向服务器一个GET请求，拉起进入Pending</p></li><li><p>浏览器解析html，完成初步CSS渲染【此时标题栏显示标题】</p></li><li><p>进行js解析，并请求额外的资源</p></li></ol><p>DNS解析时间的浪费主要阻塞在第四步，为避免解析时间的阻塞，我们采用<code>dns-prefetch</code>进行优化.</p><p>在html头添加</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;x-dns-prefetch-control&quot;</span> <span class="attr">content</span>=<span class="string">&quot;on&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>向浏览器表明我需要预解析。</p><p>接着【建议】在<code>&lt;meta charset=&quot;UTF-8&quot;&gt;</code> 后添加</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;dns-prefetch&quot;</span> <span class="attr">href</span>=<span class="string">&quot;//exmple.com&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;dns-prefetch&quot;</span> <span class="attr">href</span>=<span class="string">&quot;//exmple1.com&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>表明强制解析这些域名。并且以后会一直记住这个域名的解析结果直到关闭为止。</p><p>\/\/开始是为了适配 <code>https</code> 和 <code>http</code> 。就是当前请求链接是https ，那么这个\/\/前面自动补充https ，反则补充http 。</p><h1 id="建议"><a href="#建议" class="headerlink" title="建议"></a>建议</h1><p>切记 <code>dns-prefetch</code> 不能滥用，它虽然能一定提升网页打开速度，但也会对浏览器产生一定负担。</p><p>这边的建议是，作为个人，我并不推荐将此方法运用于个人博客。原因很简单，你博客一次能有几张图片？如果你是开图站的，那么这个方法刚好可以运用到你的网站里，只要进行多域名分开并dns欲解析就可以进一步提升网站体验了。</p><p>最后上生肉：</p><blockquote><p>DNS prefetching is an attempt to resolve domain names before a user tries to follow a link. This is done using the computer’s normal DNS resolution mechanism; no connection to Google is used. Once a domain name has been resolved, if the user does navigate to that domain, there will be no effective delay due to DNS resolution time. The most obvious example where DNS prefetching can help is when a user is looking at a page with many links to various domains, such as a search results page. When we encounter hyperlinks in pages, we extract the domain name from each one and resolving each domain to an IP address. All this work is done in parallel with the user’s reading of the page, using minimal CPU and network resources. When a user clicks on any of these pre-resolved names, they will on average save about 200 milliseconds in their navigation (assuming the user hadn’t already visited the domain recently). More importantly than the average savings, users won’t tend to experience the “worst case” delays for DNS resolution, which are regularly over 1 second.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 好方法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DNS </tag>
            
            <tag> 预解析 </tag>
            
            <tag> 优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CFWorker-ODIndex中文文档&amp;使用教程</title>
      <link href="/posts/4fb070ca/"/>
      <url>/posts/4fb070ca/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>写在最前面</strong><br>自从这篇博文发布后，OneIndex迎来了一次重大更新，去除了FireBase依赖，转用KV存储刷新令牌。本片教程已过时，具体会在春节前后更新最新版本。</p></blockquote><p>OneDrive，相信大家都不陌生，微软家的网盘，虽说有类似于OneManager一样的目录列表程序，但是直连海外总是会遭受严重的丢包，得到极其糟糕的体验。这时候CLoudFlare作为不那么好使的CDN就排上用场了，项目<a href="https://github.com/spencerwooo/onedrive-cf-index">onedrive-cf-index</a> 解决了这个问题,但是据我观察,这个仓库作者应该是个中国人,但是readme文档可不是中文,这对一些使用者造成了一定的困扰,而且文档相当<strong>言简意赅</strong><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/%E4%B8%AD%E6%9E%AA.png" alt="">,这一篇文章相当于文档的中文翻译和使用教程.</p><blockquote><p><strong>使用前言</strong><br>部署此项目较为麻烦,请确保你满足以下俩个及以上想法后,才继续往下读:</p><ol><li>我非常需要搭建于CloudFlare的OneDrive目录列表吗?<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/%E5%B0%8F%E7%9C%BC%E7%9D%9B.png" alt=""></li><li>我非常需要这个版本的目录列表吗?<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/%E8%82%BF%E5%8C%85.png" alt=""></li><li>我有这个耐心吗?<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/%E6%83%B3%E4%B8%80%E6%83%B3.png" alt=""><br>如果没有,那么我们建议你可以使用另一个功能和UI稍差的cf目录列表<a href="https://github.com/heymind/OneDrive-Index-Cloudflare-Worker">OneDrive-Index-Cloudflare-Worker</a> 这个版本有不是很详尽的中文文档,并且较为简单,或者试试一步生成的GDIndex,可以参考我之前写的<a href="https://blog.cyfan.top/2020/03/18/%E5%85%8D%C2%B7%E7%88%AC%C2%B7%E5%9F%8E%C2%B7%E5%9B%BD%E5%86%85%E7%AE%A1%E7%90%86%E5%88%86%E4%BA%ABGoogleDrive/">GDIndex部署参考</a></li></ol></blockquote><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p><strong>新功能</strong></p><ul><li>新设计： spencer.css。</li><li>根据文件类型呈现的文件图标。</li><li>使用“Font Awesome icons” 图标代替材料设计图标（以获得更好的设计一致性）。</li><li>使用github-markdown-css进行README.md渲染</li><li>添加Cookie以更好地进行目录导航。</li><li>支持文件预览：</li><li>图片：.png，.jpg，.gif</li><li>纯文本：.txt</li><li>文档：.md，.mdown，.markdown</li><li>代码：.js，.py，.c，.json。</li><li>PDF：延迟加载，加载进度和内置的PDF查看器</li><li>音乐/音频： .mp3，.aac，.wav，.oga</li><li>视频： .mp4，.flv，.webm，.m3u8</li></ul><p>…</p><ul><li>代码语法以GitHub样式突出显示。（使用PrismJS。）</li><li>图像预览支持中型缩放效果。</li><li>使用Google Firebase实时数据库缓存和刷新令牌。（对于那些负担不起Cloudflare Workers KV存储的人。 😢）</li><li>在Turbolinks®的帮助下进行延迟加载。（从folder转到时有些问题file preview，但不会降低用户体验。）<br>…</li></ul><p>在这表面下:</p><ul><li>一直以来都是CSS动画。</li><li>使用wrangler和webpack打包源代码。</li><li>转换所有CDN以使用jsDelivr加载。</li><li>没有外部JS脚本，所有脚本都已通过webpack加载！（除了某些库。）</li></ul><p>…<br>所有其他功能</p><p>请参阅：<a href="https://github.com/heymind/OneDrive-Index-Cloudflare-Worker#-%E6%96%B0%E7%89%B9%E6%80%A7-v11">新功能| OneDrive-Index-Cloudflare-Worker</a>。</p><h1 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h1><h2 id="导入此项目"><a href="#导入此项目" class="headerlink" title="导入此项目"></a>导入此项目</h2><blockquote><p><strong>请注意!</strong><br>请不要Fork此项目<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/stick_4.png" alt="">,<br>在这个过程中你将会获取到数串token,fork的仓库无法转为私有仓库,这将会对你的数据造成威胁.</p></blockquote><p>点击右上角的 <code>+</code> 号选择Import项目</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14065738.jpg" alt=""></p><p>原先仓库地址填写<a href="https://github.com/spencerwooo/onedrive-cf-index">https://github.com/spencerwooo/onedrive-cf-index</a>,新仓库名称随意,仓库类型必须改为Private私人,最后导入</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14065831.jpg" alt=""></p><p>导入成功,进入repo:</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14065940.jpg" alt=""></p><h2 id="获取Token"><a href="#获取Token" class="headerlink" title="获取Token"></a>获取Token</h2><p>进入<a href="https://heymind.github.io/tools/microsoft-graph-api-auth">https://heymind.github.io/tools/microsoft-graph-api-auth</a> 开始准备你所需要的东西：</p><p>进入<a href="https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade">https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade</a>，注册一个新app【使用微软账号】</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14070907.jpg" alt=""></p><p>几番跳转后，来到这样的界面：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14071032.jpg" alt=""></p><blockquote><p>注意，我们强烈建议用英文界面，中文界面可能存在翻译错误产生误导</p></blockquote><p>点击OneIndex，进入应用详情</p><p>点击 <code>Redirect URIs</code> 修改跳转链接:</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14071305.jpg" alt=""></p><p>将此处改为 <code>https://heymind.github.io/tools/microsoft-graph-api-auth</code></p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14071416.jpg" alt=""></p><p>设置API：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14091941.jpg" alt=""></p><p>至少选择 <code>offline_access, Files.Read, Files.Read.All .</code></p><p>返回，获取 <code>Application (client) ID</code></p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14071558.jpg" alt=""></p><p>在这里填上复制的client id，并点击AUTHORIZE验证</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14071904.jpg" alt=""></p><p>你会发现跳转一段时间后又回到了拉取界面,不过多了一个提示框,上面写着已经获取到Code</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14072357.jpg" alt=""></p><p>接着我们获取Secrets,点击 <code>Certificates &amp; secrets</code>,进入该选项卡:</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14080315.jpg" alt=""></p><p>新增一个:</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14080233.jpg" alt=""></p><p>名字随意,期限为永久:</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14080315.jpg" alt=""></p><p>复制生成的密钥,请注意此处密钥仅<strong>出现一次</strong>,以后就不会再出现了</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14080438.jpg" alt=""></p><p>将获得密钥粘贴进第五步:</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14080508.jpg" alt=""></p><p>点击GetToken,将跳转至如下界面:</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14080438.jpg" alt=""></p><blockquote><p>此处若失败，请重试第四步</p></blockquote><p>将获得字段的refresh_token写入，重新制得token：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14082011.jpg" alt=""></p><p>取得token：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14081337.jpg" alt=""></p><p>妥善保管，接下来我们会用到。</p><p>OneDriveToken完毕，接下来进入FireBase教程：</p><blockquote><p>作为数据库存储，原本采用的是cloudFlareKV存储，但考虑到大部分用户没有这个钱去买KV，于是采用了第三方存储。</p></blockquote><p>进入<a href="https://firebase.google.com/">https://firebase.google.com/</a></p><p>开始创建项目：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14082334.jpg" alt=""></p><p>项目名字随意，下一步</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14082421.jpg" alt=""></p><p>一直下一步，稍后将进入管理界面</p><p>选择Database，将其设置为发布模式，禁用写入权限，在数据一栏中添加key，名字为<code>value</code>,值为 <code>https://项目名.firebaseio.com/auth.json</code> ，如我的：<br><code>https://oneindex-chenyfan.firebaseio.com/auth.json</code></p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14082523.jpg" alt=""></p><p>点击右上角的小齿轮-项目设置-服务账号-旧版凭据-数据库账号-显示密钥，复制密钥。</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14082614.jpg" alt=""></p><p>FireBase教学完毕。</p><h2 id="配置CloudFlare"><a href="#配置CloudFlare" class="headerlink" title="配置CloudFlare"></a>配置CloudFlare</h2><p>登录你的CloudFlare，点击右上角，账户设置：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14083511.jpg" alt=""></p><p>选择API令牌选项卡，生成新的API：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14083707.jpg" alt=""></p><p>选择自定义令牌：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14083741.jpg" alt=""></p><p>配置至少如下，可以选择增加</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14083836.jpg" alt=""></p><p>点击获取API令牌</p><p>接着还要获取账户ID和区域ID</p><p>进入任意一域名，右侧拦里头会有俩ID，复制：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14083918.jpg" alt=""></p><p>到这里，你获取了以下所有密钥：</p><ul><li>Azure-refresh_token</li><li>Azure-client_id</li><li>Azure-client_secret</li><li>GoogleFireBase-firebase_url</li><li>GoogleFireBase-firebase_token</li><li>CloudFlare-APIToken</li><li>CloudFlare-ZoneID</li><li>CloudFlare-AccountID</li></ul><p>八个Token，切勿丢失<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/%E5%92%BD%E6%B0%94.png" alt=""> 累死我了</p><h2 id="配置OneDrive"><a href="#配置OneDrive" class="headerlink" title="配置OneDrive"></a>配置OneDrive</h2><p>用微软账户登录OneDrive，新建文件夹，名字为“Public”</p><h2 id="本地wrangler部署"><a href="#本地wrangler部署" class="headerlink" title="本地wrangler部署"></a>本地wrangler部署</h2><blockquote><p>由于此篇教程具体将GithubAction实现无服务器部署，本块内容一笔带过，请直接看到GithubAction部署一块</p></blockquote><p>本地安装依赖环境</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn global add @cloudflare/wrangler</span><br><span class="line">yarn install</span><br></pre></td></tr></table></figure><p>用wrangler登录CloudFlare</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wrangler config</span><br></pre></td></tr></table></figure><p><code>wrangler.toml</code>  修改</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name: The draft worker&#x27;s name, your worker will be published at &lt;name&gt;.&lt;worker_subdomain&gt;.workers.dev.</span><br><span class="line">account_id: Your Cloudflare Account ID.</span><br><span class="line">zone_id: Your Cloudflare Zone ID.</span><br></pre></td></tr></table></figure><p><code>src/config/default.js</code> 修改:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">client_id: Your client_id from above.</span><br><span class="line">base: Your base path from above.</span><br><span class="line">firebase_url: Your firebase_url from above.</span><br></pre></td></tr></table></figure><p>添加环境变量:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wrangler secret put REFRESH_TOKEN</span><br><span class="line">wrangler secret put CLIENT_SECRET</span><br><span class="line">wrangler secret put FIREBASE_TOKEN</span><br></pre></td></tr></table></figure><p>部署命令:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wrangler publish</span><br></pre></td></tr></table></figure><h2 id="GithubAction部署"><a href="#GithubAction部署" class="headerlink" title="GithubAction部署"></a>GithubAction部署</h2><h3 id="GithubAction部署-1"><a href="#GithubAction部署-1" class="headerlink" title="GithubAction部署"></a>GithubAction部署</h3><p>进入你导入的仓库，点击 <code>wrangler.toml</code> </p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14084906.jpg" alt=""></p><ul><li><code>name</code> ==&gt; 默认生成为&lt;#name&gt;.&lt;#User&gt;.workers.dev，随意</li><li><code>account_id</code> ==&gt; CloudFlare-AccountID</li><li><code>zone_id</code> ==&gt; CloudFlare-ZoneID</li></ul><p>进入<code>/src/config/default.js</code></p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14085133.jpg" alt=""></p><ul><li>refresh_token ==&gt; Azure-refresh_token</li><li>client_id ==&gt; Azure-client_id</li><li>client_secret ==&gt; Azure-client_secret</li><li>redirect_uri ==&gt; ‘<a href="https://heymind.github.io/tools/microsoft-graph-api-auth">https://heymind.github.io/tools/microsoft-graph-api-auth</a>‘</li><li>firebase_url ==&gt; GoogleFireBase-firebase_url</li></ul><h4 id="修改样式"><a href="#修改样式" class="headerlink" title="修改样式"></a>修改样式</h4><p><code>src/render/htmlWrapper.js</code> : 修改标题</p><p><code>src/folderView.js</code> : 修改介绍</p><h4 id="设置密钥"><a href="#设置密钥" class="headerlink" title="设置密钥"></a>设置密钥</h4><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14092907.jpg" alt=""></p><p>密钥名：<code>CF_API_TOKEN</code></p><p>内容: ==&gt; CloudFlare-APIToken</p><h4 id="激活Action："><a href="#激活Action：" class="headerlink" title="激活Action："></a>激活Action：</h4><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14085647.jpg" alt=""></p><h3 id="设置CloudFlare变量"><a href="#设置CloudFlare变量" class="headerlink" title="设置CloudFlare变量"></a>设置CloudFlare变量</h3><p>进入新创建的Worker：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14090207.jpg" alt=""></p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14090302.jpg" alt=""></p><ul><li>CLIENT_SECRET ==&gt; Azure-client_secret</li><li>FIREBASE_TOKEN ==&gt; GoogleFireBase-firebase_token</li><li>REFRESH_TOKEN ==&gt; Azure-refresh_token</li></ul><p>部署，发布，绑定域名【可选】：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14090933.jpg" alt=""></p><p>成品：</p><p><img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/2020-08-14091129.jpg" alt=""></p><p>Demo:<a href="https://onedrive.cyfan.top">https://onedrive.cyfan.top</a> <img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/huaji.gif" alt=""></p><h1 id="后言"><a href="#后言" class="headerlink" title="后言"></a>后言</h1><p>其实默认才5GB，还不如GoogleDrive香，但是据说白嫖E5开发者还不错。</p><p>OK就到这了，还不懂的欢迎评论区，或者去官方github地址发issues。<img src="https://rmt.dogedoge.com/fetch/hi-c-oss/storage/%E6%AC%A2%E5%91%BC.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 撸羊毛 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CloudFlare </tag>
            
            <tag> Workers </tag>
            
            <tag> 目录列表 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly添加全局吸底Aplayer教程</title>
      <link href="/posts/507c070f/"/>
      <url>/posts/507c070f/</url>
      
        <content type="html"><![CDATA[<div class="note info flat"><p>以下文章只是教程</p><p>如果部署之后，并没有出现 aplayer , 请确认是否跟足步骤操作或者更换音乐源，多试试。</p><p>如果遇到使用問題，请仔细查看插件文档，或者到插件那裏反饋。</p></div><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>如果你想使用 aplayer，很多人都會推薦安裝 <a href="https://github.com/MoePlayer/hexo-tag-aplayer">hexo-tag-aplayer</a> 這款插件。這款插件通過 Hexo 獨有的標籤外掛，我們可以很方便的寫入一些參數，插件就會幫我們生成對應的 html。如果你只是使用一些簡單的功能，其實無需使用到這個插件，只需以 html 格式書寫就行，不用插件去轉換。</p><p>例如：</p><p>如果使用插件，在 markdown 中要這樣寫</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% meting &quot;000PeZCQ1i4XVs&quot; &quot;tencent&quot; &quot;artist&quot; &quot;theme:#3F51B5&quot; &quot;mutex:true&quot; &quot;preload:auto&quot; %&#125;</span><br></pre></td></tr></table></figure><p>其會被插件渲染為</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;aplayer-uxAIfEUs&quot;</span> <span class="attr">class</span>=<span class="string">&quot;aplayer aplayer-tag-marker meting-tag-marker&quot;</span> <span class="attr">data-id</span>=<span class="string">&quot;000PeZCQ1i4XVs&quot;</span> <span class="attr">data-server</span>=<span class="string">&quot;tencent&quot;</span> <span class="attr">data-type</span>=<span class="string">&quot;artist&quot;</span> <span class="attr">data-mode</span>=<span class="string">&quot;circulation&quot;</span> <span class="attr">data-autoplay</span>=<span class="string">&quot;false&quot;</span> <span class="attr">data-mutex</span>=<span class="string">&quot;true&quot;</span> <span class="attr">data-listmaxheight</span>=<span class="string">&quot;340px&quot;</span> <span class="attr">data-preload</span>=<span class="string">&quot;auto&quot;</span> <span class="attr">data-theme</span>=<span class="string">&quot;#3F51B5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果我們不想使用插件，就需要在markdown中用html的格式書寫，同時把主題配置文件中的<code>aplayerInject</code>開啟</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;aplayer&quot;</span> <span class="attr">data-id</span>=<span class="string">&quot;000PeZCQ1i4XVs&quot;</span> <span class="attr">data-server</span>=<span class="string">&quot;tencent&quot;</span> <span class="attr">data-type</span>=<span class="string">&quot;artist&quot;</span> <span class="attr">data-mutex</span>=<span class="string">&quot;true&quot;</span> <span class="attr">data-preload</span>=<span class="string">&quot;auto&quot;</span> <span class="attr">data-theme</span>=<span class="string">&quot;#3F51B5&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>這樣我們就可以不用使用多一個插件，當然這種東西見仁見智，選自己喜歡的就行。</p><p>回到正題，這篇文章將教大家如何在Butterfly上使用全局吸底 Aplayer</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-aplayer-xidi.gif" alt="aplayer"></p><h2 id="關閉-asset-inject"><a href="#關閉-asset-inject" class="headerlink" title="關閉 asset_inject"></a>關閉 <code>asset_inject</code></h2><div class="note info flat"><p>此步驟適用於安裝了 <code>hexo-tag-aplayer</code> 插件的人</p></div><p>由於需要全局都插入 aplayer 和 meting 資源，為了防止插入重複的資源，需要把 asset_inject 設為 <code>false</code></p><p>在 Hexo 的配置文件中</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">aplayer:</span></span><br><span class="line">  <span class="attr">meting:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">asset_inject:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="開啟主題的-aplayerInject"><a href="#開啟主題的-aplayerInject" class="headerlink" title="開啟主題的 aplayerInject"></a>開啟主題的 <code>aplayerInject</code></h2><p>在主題的配置文件中，<code>enable</code> 設為 <code>true</code> 和 <code>per_page</code> 設為 <code>true</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Inject the css and script (aplayer/meting)</span></span><br><span class="line"><span class="attr">aplayerInject:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="插入-Aplayer-html"><a href="#插入-Aplayer-html" class="headerlink" title="插入 Aplayer html"></a>插入 Aplayer html</h2><p>為了適配 hexo-tag-aplayer，主題內置的 Meting js 仍為 1.2 版本，並非最新的 2.x 版本。</p><p>Aplayer html 例子：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;aplayer no-destroy&quot;</span> <span class="attr">data-id</span>=<span class="string">&quot;60198&quot;</span> <span class="attr">data-server</span>=<span class="string">&quot;netease&quot;</span> <span class="attr">data-type</span>=<span class="string">&quot;playlist&quot;</span> <span class="attr">data-fixed</span>=<span class="string">&quot;true&quot;</span> <span class="attr">data-autoplay</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span> <span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>參數解釋</p><div class="table-container"><table><thead><tr><th>option</th><th>default</th><th>description</th></tr></thead><tbody><tr><td>data-id</td><td><strong>require</strong></td><td>song id / playlist id / album id / search keyword</td></tr><tr><td>data-server</td><td><strong>require</strong></td><td>music platform: <code>netease</code>, <code>tencent</code>, <code>kugou</code>, <code>xiami</code>, <code>baidu</code></td></tr><tr><td>data-type</td><td><strong>require</strong></td><td><code>song</code>, <code>playlist</code>, <code>album</code>, <code>search</code>, <code>artist</code></td></tr><tr><td>data-fixed</td><td><code>false</code></td><td>enable fixed mode</td></tr><tr><td>data-mini</td><td><code>false</code></td><td>enable mini mode</td></tr><tr><td>data-autoplay</td><td><code>false</code></td><td>audio autoplay</td></tr><tr><td>data-theme</td><td><code>#2980b9</code></td><td>main color</td></tr><tr><td>data-loop</td><td><code>all</code></td><td>player loop play, values: ‘all’, ‘one’, ‘none’</td></tr><tr><td>data-order</td><td><code>list</code></td><td>player play order, values: ‘list’, ‘random’</td></tr><tr><td>data-preload</td><td><code>auto</code></td><td>values: ‘none’, ‘metadata’, ‘auto’</td></tr><tr><td>data-volume</td><td><code>0.7</code></td><td>default volume, notice that player will remember user setting, default volume will not work after user set volume themselves</td></tr><tr><td>data-mutex</td><td><code>true</code></td><td>prevent to play multiple player at the same time, pause other players when this player start play</td></tr><tr><td>data-lrctype</td><td><code>0</code></td><td>lyric type</td></tr><tr><td>data-listfolded</td><td><code>false</code></td><td>indicate whether list should folded at first</td></tr><tr><td>data-listmaxheight</td><td><code>340px</code></td><td>list max height</td></tr><tr><td>data-storagename</td><td><code>metingjs</code></td><td>localStorage key that store player setting</td></tr></tbody></table></div><div class="note info flat"><p><code>require</code> 代表着這些參數是必須要使用的，其它的參數則可以根據自己需要配置。</p><p>配置全局吸底，<code>data-fixed</code> 和 <code>data-mini</code> 也必須配置，配置為 <code>true</code></p><p>如果使用 Pjax，則在 class 裏需添加 <code>no-destroy</code>，這樣防止切換頁面時 Aplayer 被銷毀</p></div><p>把  <code>aplayer代碼</code>  插入到主題配置文件的  <code>inject.bottom</code> 去</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;div</span> <span class="string">class=&quot;aplayer</span> <span class="literal">no</span><span class="string">-destroy&quot;</span> <span class="string">data-id=&quot;60198&quot;</span> <span class="string">data-server=&quot;netease&quot;</span> <span class="string">data-type=&quot;playlist&quot;</span> <span class="string">data-fixed=&quot;true&quot;</span> <span class="string">data-autoplay=&quot;true&quot;&gt;</span> <span class="string">&lt;/div&gt;</span></span><br></pre></td></tr></table></figure><p>運行 Hexo 就可以看到網頁左下角出現了 Aplayer</p><p>最後，如果你想切換頁面時，音樂不會中斷。請把主題配置文件的 <code>pjax</code> 設為 <code>true</code></p>]]></content>
      
      
      <categories>
          
          <category> 進階教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
            <tag> 主題 </tag>
            
            <tag> butterfly </tag>
            
            <tag> Aplayer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>打造一个可国内访问的Blogger（Blogspot）方法</title>
      <link href="/posts/620f3e8d/"/>
      <url>/posts/620f3e8d/</url>
      
        <content type="html"><![CDATA[<p>Blog‍‌‍‌​‌‌‌‌​‌​‍‌​‍‌‍‍​‌‌‍‌​‌‍​‍‌​​‍‌‌‌​‌‍‌‌​‍‍‍​‍‍‌​​‍‌‍‌​‍‌‍‍​‌‌‍‌​‌‍​‍‌​​‍​‍‍‍​‌‍‍‌ger,一个干爽、免费的博客发布平台，作为主流的发布，提供免费的托管，免去了Typecho&amp;Wordpress高昂的服务器费用，避免了Hexo&amp;Jekyll静态博客无后台的缺陷，与CSDN、简书相比，可以绑定域名，界面干净，无广告【当然可以自己放自己的广告】。</p><p>实际上，当今写博客的软件数不胜数，主要分为一下三类：</p><ul><li>服务器部署：典型代表：Wordpress\Typecho</li><li>无服务器托管：典型代表：Hexo\Jekyll\Gidea\Hugo\Hola等等</li><li>集成型网站：Blogger、简书、CSDN、cnblog、wodemo等等</li></ul><p>上面所有软件，优缺点都有，具体看个人选择</p><p>当然，个人认为Typecho适合做个人博客，Hexo可以作为要求不高的人。集成性网站最主要的是只要安安心心写文章，不用管后端乱七八糟的代码。当然，最有问题的是大多数都不支持绑定域名，而且经常往网站上塞广告，自定义范围也不够。</p><p>接下来，我们扯扯集成博客中的一股清流：Blogger</p><blockquote><p>Blogger.com是由Pyra Labs公司创立，是目前全球用户数量最多的个人网志服务提供商。Pyra Labs和Blogger.com均被Google公司收购，成为其旗下的一项服务内容。<br>Blogger提供免费主机Blogspot.com存放博客，用户不必写任何代码或者安装服务器软件或脚本，通过所见即所得界面轻松地创建、发布、维护和修改自己的网志。<br>Blogger允许有经验的用户自行设计博客界面，其模板支持使用HTML和CSS进行编辑</p></blockquote><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.1/2020-07-29%20084428.jpg" alt=""></p><p>实际上，由于Blogger托管于谷歌，写作域名 <code>www.blogger.com</code> 和托管域名 <code>*.blogspot.com</code> 均被MainLand所Ban。但是接下来来，我会讲讲如何打造一个能在国内大陆访问的Blogger</p><h1 id="1-注册Blogger"><a href="#1-注册Blogger" class="headerlink" title="1. 注册Blogger"></a>1. 注册Blogger</h1><blockquote><p>众所周知，请善用技术上网。</p></blockquote><p>用谷歌账号登录 (<a href="https://www.blogger.com">https://www.blogger.com</a>) ，没有？不是⑧不是吧不是扒，都0202年了，还不会去注册一个谷歌账号？</p><p>进入控制台，新建一个博客：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.1/2020-07-29%20084652.jpg" alt=""></p><p>绑定域名,这一步随意,因为我们还要绑定一个自定义域名.</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.1/2020-07-29%20084847.jpg" alt=""></p><p>点击确定,一个博客就搭建好了!快吧?</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.1/2020-07-29%20085021.jpg" alt=""></p><p>这时候,我们<strong>善用技术上网</strong>访问之前的域名,我这里是: <code>cyfblogger.blogspot.com</code>，打开：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.1/2020-07-29%20085021.jpg" alt=""></p><p>搞定！搞完之后才知道，Blogger真正做到了什么叫1分钟创建一个博客，但这还不够，中国访客实际上还是打不开这个网站<a href="大多被污染到莫名其妙的ip去了,例如Facebook和Twitter">1</a>。所以，接下来，我们要让这个网站能在中国访问。</p><p>目前我们有一下思路:</p><ul><li>选择一个未被官方屏蔽的Blogger节点,此方法几年前还是可用的,最近不大灵光了,被屏蔽的差不多了</li><li>使用服务器反向代理Blogger,不推荐,有这个闲工夫你还不如直接用Typecho呢</li><li>CloudFlareCDN反向代理,这似乎是唯一一个解决的办法.</li></ul><h1 id="2-绑定自定义域名"><a href="#2-绑定自定义域名" class="headerlink" title="2.绑定自定义域名"></a>2.绑定自定义域名</h1><p>由于 <code>*.blogspot.com</code> 泛域名被屏蔽,所以你必须要有一个自己的域名.</p><p>不推荐免费域名，因为免费域名无法自选CF节点，当然你也可以换别的方式。</p><p>这里推荐一个买域名的好网站：<code>https://namebeta.com/</code> namebeta并不是购买域名的地方,但是它可以帮你货比三家,让你跳出更优惠的方案,并且自带各种温馨提示,包括能不能备案,有没有被注册等等,比较适合刚入门想买域名的小白.</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.1/2020-07-29%20090113.jpg" alt=""></p><p>购买绑定NS不在谈论范围内,有域名的看下去</p><p>以下演示方便在CloudFlare官网里进行,采用免费域名演示,实际用笨牛CNAME解析为好.</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.1/2020-07-29%20091514.jpg" alt=""></p><p>点击【设置】-【正在发布】-【自定义域名】</p><p>接着会报错：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.1/2020-07-29%20092548.jpg" alt=""></p><p>提示没验证，没关系，去CloudFlare加上CNAME，注意验证过程中切记把橙色云朵点灰<a href="实际上下面那条记录是为了验证你有没有主域名控制权。">2</a>：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.1/2020-07-29%20092736.jpg" alt=""></p><p>回去，点击确定，勾选HTTPS可用性。</p><p>谷歌SSL验证和办法真的慢，没办法，喝杯茶，写点作业，过了10min，显示颁发成功：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.1/2020-07-29%20093118.jpg" alt=""></p><p>回到CloudFlare，把访客访问的那条记录点亮橙色云朵，作为验证的记录不点亮.</p><p>国内访问试试？</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.1/2020-07-29%20094026.jpg" alt=""></p><p>这时候我们发现，虽然国内能直连了，但是背景图加载不出来，整个网页加载缓慢。控制台以下，我们就会发现，Blogspot请求了国外谷歌边缘节点的内容，包括背景图片和部分js。</p><p>所以，我们还要对博客主题进行加工。</p><h1 id="3-更改主题"><a href="#3-更改主题" class="headerlink" title="3.更改主题"></a>3.更改主题</h1><blockquote><p>演示方便，用Contempo Light主题<br>实际上用其它主题也差不多的，注意替换掉外链即可</p></blockquote><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.1/2020-07-29%20094333.jpg" alt=""></p><p>点击备份，下载主题:</p><p>用Notepad++打开，方便处理</p><h2 id="屏蔽加载"><a href="#屏蔽加载" class="headerlink" title="屏蔽加载"></a>屏蔽加载</h2><p>将<code>&lt;head&gt;</code>替换为<code>&amp;lt;!--&lt;head&gt;--&amp;gt;&amp;lt;head&amp;gt;</code></p><p>将<code>&lt;/head&gt;</code>替换为<code>&amp;lt;/head&amp;gt;&amp;lt;!--&lt;/head&gt;--&amp;gt;</code></p><p>将<code>&lt;/body&gt;</code>替换为<code>&amp;lt;!--&lt;/body&gt;--&amp;gt;&amp;lt;/body&amp;gt;</code></p><h2 id="替换背景"><a href="#替换背景" class="headerlink" title="替换背景"></a>替换背景</h2><p>在49行左右，有这么一段代码：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Variable</span> <span class="attr">name</span>=<span class="string">&quot;body.background&quot;</span> <span class="attr">description</span>=<span class="string">&quot;Background&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">color</span>=<span class="string">&quot;$(body.background.color)&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">&quot;background&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">default</span>=<span class="string">&quot;$(color) none repeat scroll top left&quot;</span>  <span class="attr">value</span>=<span class="string">&quot;$(color) url(https://themes.googleusercontent.com/image?id=L1lcAxxz0CLgsDzixEprHJ2F38TyEjCyE3RSAjynQDks0lT1BDc1OxXKaTEdLc89HPvdB11X9FDw) no-repeat scroll top center /* Credit: Michael Elkan (http://www.offset.com/photos/394244) */;&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>将其中的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://themes.googleusercontent.com/image?id=L1lcAxxz0CLgsDzixEprHJ2F38TyEjCyE3RSAjynQDks0lT1BDc1OxXKaTEdLc89HPvdB11X9FDw </span><br></pre></td></tr></table></figure><p>替换为背景外链.</p><h2 id="必要的JS替换"><a href="#必要的JS替换" class="headerlink" title="必要的JS替换"></a>必要的JS替换</h2><p>打开F12,我们会发现,有一个资源阻塞了请求:</p><p><code>https://resources.blogblog.com/blogblog/data/res/2629068285-indie_compiled.js</code></p><p>但这个是必须的,我们要保留,搜索 <code>&lt;b:template-script async=&#39;true&#39; name=&#39;indie&#39; version=&#39;1.0.0&#39;/&gt;</code> 并删除,将其替换成:<br><code>&lt;script async=&#39;async&#39; src=&#39;https://cdn.jsdelivr.net/gh/chenyfan/chenyfan.github.io/1468123664-indie_compiled.js&#39;&gt;&lt;/script&gt;</code></p><blockquote><p>当然你也可以用自己的链接.</p></blockquote><h2 id="解决缩略图问题"><a href="#解决缩略图问题" class="headerlink" title="解决缩略图问题"></a>解决缩略图问题</h2><p>【感谢阿虚同学的博客解决此方法】</p><p>将 此JS 代码放置于 &lt;/body&gt; 标签前：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">b:if</span> <span class="attr">cond</span>=<span class="string">&#x27;data:blog.pageType in &#123;&quot;index&quot;,&quot;searchQuery&quot;,&quot;searchLabel&quot;,&quot;archive&quot;&#125;&#x27;</span>&gt;</span> <span class="comment">&lt;!--如果当前页是首页，搜索页，标签页，那么代码继续执行--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">defer</span>=<span class="string">&#x27;defer&#x27;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//&lt;![CDATA[</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> postThumbnails = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;post-thumbnail&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> postContents = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;post-text&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;postContents.<span class="property">length</span>;i++)</span></span><br><span class="line"><span class="language-javascript">        &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> postContent = postContents[i].<span class="property">innerText</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> imgReg = <span class="regexp">/&lt;img.*?(?:&gt;|\/&gt;)/gi</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> srcReg = <span class="regexp">/src=[\&#x27;\&quot;]?([^\&#x27;\&quot;]*)[\&#x27;\&quot;]?/i</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> imgTags = postContent.<span class="title function_">match</span>(imgReg);</span></span><br><span class="line"><span class="language-javascript">            imgSrcs = imgTags[<span class="number">0</span>].<span class="title function_">match</span>(srcReg);</span></span><br><span class="line"><span class="language-javascript">            imgSrc = imgSrcs[<span class="number">1</span>];</span></span><br><span class="line"><span class="language-javascript">            postThumbnails[i].<span class="title function_">setAttribute</span>(<span class="string">&#x27;src&#x27;</span>, imgSrc);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//]]&gt;</span></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">b:if</span>&gt;</span></span><br></pre></td></tr></table></figure><p>修改模板，搜索data:post.featuredImage，在缩略图处改成下代码：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">b:if</span> <span class="attr">cond</span>=<span class="string">&#x27;data:post.featuredImage&#x27;</span>&gt;</span>  <span class="comment">&lt;!--判断文章内是否有图片，有则代码继续执行--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;snippet-thumbnail&#x27;</span>&gt;</span>  <span class="comment">&lt;!--创建一个 div 容器，缩略图放置在这里--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&#x27;post-thumbnail&#x27;</span> <span class="attr">sizes</span>=<span class="string">&#x27;(max-width: 800px) 20vw, 128px&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;https://ae01.alicdn.com/kf/HTB1Gb7LUmzqK1RjSZFL5jcn2XXac.gif&#x27;</span>/&gt;</span>  <span class="comment">&lt;!--预先放置一个加载图片，增强用户体验--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">class</span>=<span class="string">&#x27;post-text&#x27;</span> <span class="attr">style</span>=<span class="string">&#x27;display:none;&#x27;</span>&gt;</span><span class="tag">&lt;<span class="name">data:post.body.escaped</span>/&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span> <span class="comment">&lt;!--这里放置文章全文，图片从中提取，样式设置为不显示--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">b:if</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="头像、icon设置"><a href="#头像、icon设置" class="headerlink" title="头像、icon设置"></a>头像、icon设置</h2><p>搜索 <code>profile-img</code> 约3899行：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&#x27;profile-img&#x27;</span> <span class="attr">expr:alt</span>=<span class="string">&#x27;data:messages.myPhoto&#x27;</span> <span class="attr">expr:height</span>=<span class="string">&#x27;data:authorPhoto.height&#x27;</span> <span class="attr">expr:src</span>=<span class="string">&#x27;data:authorPhoto.image&#x27;</span> <span class="attr">expr:width</span>=<span class="string">&#x27;data:authorPhoto.width&#x27;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>将其直接改成</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&#x27;profile-img&#x27;</span> <span class="attr">src</span>=<span class="string">&quot;你的头像外链地址&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="字体问题"><a href="#字体问题" class="headerlink" title="字体问题"></a>字体问题</h2><p>我测试时没有发现字体相关问题，请求字体的网址gstatic.com在国内可以访问，虽然部分地区莫名其妙解析到澳大利亚facebook，但大多数都正确解析时国内谷翔。</p><h2 id="评论问题"><a href="#评论问题" class="headerlink" title="评论问题"></a>评论问题</h2><p>默认的Google评论肯定时不行的，留着还拖慢加载，推荐用DiqusJS或Valine.</p><p>修改主题，搜索 <code>&lt;b:includable id=&#39;comments&#39; var=&#39;post&#39;&gt;</code> 约3453行至 <code>&lt;/b:includable&gt;</code> 3511行,全部删除,将以下代码填写回原处</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;b:includable id=&#x27;comments&#x27; var=&#x27;post&#x27;&gt;</span><br><span class="line">                      &lt;div id=&#x27;disqus_thread&#x27;/&gt;</span><br><span class="line">                      </span><br><span class="line">&lt;/b:includable&gt;</span><br></pre></td></tr></table></figure><p>在末端 <code>&amp;lt;!--&lt;/body&gt;--&amp;gt;&amp;lt;/body&amp;gt;</code> 前添加:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">var dsqjs = new DisqusJS(&#123;</span><br><span class="line">    shortname: &#x27;&#x27;,</span><br><span class="line">    siteName: &#x27;&#x27;,</span><br><span class="line">    identifier: &#x27;&#x27;,</span><br><span class="line">    url: &#x27;&#x27;,</span><br><span class="line">    title: &#x27;&#x27;,</span><br><span class="line">    api: &#x27;&#x27;,</span><br><span class="line">    apikey: &#x27;&#x27;,</span><br><span class="line">    admin: &#x27;&#x27;,</span><br><span class="line">    adminLabel: &#x27;&#x27;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>以上代码具体配置前往  [<a href="https://github.com/SukkaW/DisqusJS#%E4%BD%BF%E7%94%A8">https://github.com/SukkaW/DisqusJS#%E4%BD%BF%E7%94%A8</a> ] 配置</p><p>完</p><p>Demo&amp;&amp;以后的日记本:[<a href="https://moe.cyfan.top">https://moe.cyfan.top</a> ]</p><hr><p>推荐自选CDN加速.</p><p>注意以后写文章图片必须是外链,可以试试sm.ms</p>]]></content>
      
      
      <categories>
          
          <category> 好方法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Blogger </tag>
            
            <tag> Blogspot </tag>
            
            <tag> 谷歌 </tag>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>白嫖！10GB免流海外BackBlaze对象存储【可套CDN】</title>
      <link href="/posts/ce240368/"/>
      <url>/posts/ce240368/</url>
      
        <content type="html"><![CDATA[<p>腾讯云的COS就是个暗坑，进去的时候大肆宣扬用户前六个月免费，但实际上免费仅针对于存储于国内的bucket，而存储于国外的阶梯定价又极不合理，我的COS在一个月走了流量1.6GB。按照官方定价</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/2020-07-09%20094557.jpg" alt=""></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/2020-07-09%20094840.jpg" alt=""></p><p>大概就是0.7左右。</p><p>但是，腾讯云从来就是不满1GB按1GB计算的jier，我瞟了一下账单：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/2020-07-09%20095520.jpg" alt=""></p><p>不是吧啊Sir，一个月一块多，那我为什么要用你的东西啊<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/%E5%90%90.png" alt="">！</p><p>很难让人理解，我CDN设置为一个月的超长缓存，但腾讯还是给我计价1GB，和回源没什么区别。</p><p>后来F12看了一下，腾讯悄悄地在header里添加max-cache为43200s，12个小时强制清除缓存。Asir，赚钱不带这么玩吧。<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/%E4%B8%AD%E6%9E%AA.png" alt=""></p><p>最让我憋屈的是，<code>cyfan.top</code> 是没有备案的，使用国内的bucket就不给绑定域名，害的我只能用香港，但是香港的绑定域名是不给SSL的，偏要套一层CDN才行。可***腾讯云默认CDN是亚马逊的，速度渣的很，用来用去还是用回CloudFlare。可是，既然有CloudFlare，那我为什么不用免费的Github服务啊！<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/%E5%93%AD%E6%B3%A3.png" alt=""></p><p>这就是逼着我要换一个图床啊么<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/qgbf.png" alt="">。</p><p>后来twitter上有人发推推荐 <code>backblaze</code> 的海外存储，使用了一下，发现完全满足需求。<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/stick_27.png" alt=""></p><h1 id="Backblaze"><a href="#Backblaze" class="headerlink" title="Backblaze"></a>Backblaze</h1><p>2015年9月，Backblaze推出了新产品B2 Cloud Storage。作为基础架构即服务（IaaS），它的目标是软件集成（尽管也提供Web前端和API）。它直接与类似服务Amazon S3，Microsoft Azure和Google Cloud竞争。在2018年4月，Backblaze宣布了云计算合作伙伴关系，它将直接将Backblaze的数据中心与其合作伙伴Packet和ServerCentral连接起来，为存储在B2 Cloud Storage中的数据提供高性能的云计算，而无需支付任何费用。</p><p>B2 Cloud Storage非常客气，有以下优点：</p><ul><li>用户永久免费<strong>10GB</strong>直链存储</li><li>每天<strong>1GB</strong>下行流量</li><li>无限量的上传流量</li><li>每天下载请求<strong>2500</strong>次免费</li><li>每天上传请求<strong>2500</strong>次免费</li><li>基于CloudFlareCDN</li></ul><p>而且超出免费额度的价钱也十分合理【不过我不会往里头冲一分钱的！】 <img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/2020-07-09%20100931.jpg" alt="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/2020-07-09%20100931.jpg"></p><p>然而我偶然得知，Backblaze加入了CloudFlare的 <a href="https://www.cloudflare.com/bandwidth-alliance/">带宽联盟（ Bandwidth Alliance）</a> Backblaze与CloudFlare之间的流量直接免费，也就是每天<strong>无限量</strong>下行流量，配上CloudFlare超长缓存，每天下载请求无限次免费。<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/%E5%BE%97%E6%84%8F.png" alt=""></p><p>而且这样与我用COS的速度是差不多的，那我何必用付费的COS呢？</p><h1 id="注册："><a href="#注册：" class="headerlink" title="注册："></a>注册：</h1><p>去<a href="https://www.backblaze.com/zh_CN/cloud-storage.html">B2 云存储</a>注册，可以用Google快捷登录：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/2020-07-09%20101845.jpg" alt=""></p><p>注册之后可能会要求你绑定手机号，乖乖的绑定自己的中国手机号吧【可能会产生短信费用，大概0.1￥】，不要想什么歪门邪道<br>，毕竟很多公开的手机号是不能用的，而且GoogleVoice也被拒绝了。</p><p>新建一个桶，设置为公开：</p><p>上传一个文件，点击右边的信息按钮，我们要在这里获取一些信息：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/2020-07-09%20102255.jpg" alt=""></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/2020-07-09%20102940.jpg" alt=""></p><p>看到那个友好链接吗，这就是CloudFlare加速的链接，但这个不是我们想要的链接，我们要自定义域名，毕竟默认的加速相当蛋疼。</p><h1 id="自定义域名"><a href="#自定义域名" class="headerlink" title="自定义域名"></a>自定义域名</h1><p>这一步需要你有个域名，开个子域给图床：</p><p>由于我是bnxb接入的CloudFlare，所以我首先要去 <code>cdn.bnxb.com</code> ，将 <code>assets.cyfan.top</code> 指向 <code>f000.backblazeb2.com</code> 【每个人都可能不一样，自己看情况】，并开启CDN，然后在DNSPOD里CNAME负载均衡一下，这里就不放图了。<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/%E6%9C%9F%E5%BE%85.png" alt=""></p><h1 id="缩短链接"><a href="#缩短链接" class="headerlink" title="缩短链接"></a>缩短链接</h1><p>默认即使绑定域名后，链接大概是这样滴：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://assets.cyfan.top/file/CYF-PicBed/pic/postpic/2020-07-09%20102255.jpg</span><br></pre></td></tr></table></figure><p>可以看到,中间多了 <code>/file/CYF-PicBed/</code> ,这并不是我所需要的,所以我们要把它变成这样:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://img.cyfan.top/pic/postpic/2020-07-09%20102255.jpg</span><br></pre></td></tr></table></figure><p>你要知道，我有一大堆图片都是直接以 <code>https://img.cyfan.top</code> 存在底下的，NotePad++可以批量改，但是我在外链也放了很多啊.所以只能改域名。<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/%E5%90%90%E8%A1%80%E5%80%92%E5%9C%B0.png" alt=""></p><p>前往CloudFlare,设置页面规则,进行301转发:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/2020-07-09%20103634.jpg" alt=""></p><p>其中 <code>$1</code> 是CloudFlare的匹配符号，此规则意思是将所有的 <code>https://img.cyfan.top/*</code> 跳转向 <code>https://assets.cyfan.top/file/CYF-PicBed/*</code> </p><p>去 <code>cdn.bnxb.com</code> ，将 <code>img.cyfan.top</code> 指向 任意一ip,比如 <code>1.0.0.1</code> 并开启CDN，然后在DNSPOD里CNAME。</p><p>此后,所有访问图片都会在里头跳转一下,外面基本看不出来有什么差别.</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/2020-07-09%20104238.jpg" alt=""></p><h1 id="开启CORS-加长缓存时间"><a href="#开启CORS-加长缓存时间" class="headerlink" title="开启CORS|加长缓存时间"></a>开启CORS|加长缓存时间</h1><p>就这样结束了么？没有，你会发现访问的链接里所有的资源都是MISS，这是因为Backblaze默认不缓存<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/stick_65.png" alt="">。</p><p>所以，自己设置呗！</p><p>点击桶，进入桶设定：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/2020-07-09%20104802.jpg" alt=""></p><p>里头写上:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;cache-control&quot;:&quot;max-age=43200000&quot;&#125;</span><br></pre></td></tr></table></figure><p>这个意思是强制缓存 <code>43200000</code> ,大约是50天.然而这里注意一下，时间太长有个问题，你修改一张图片，外面可以能要50天才能更改，这样只能通过手动清除缓存做到了。</p><p>点击CORS设置,选择:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">与所有HTTPS来源共享此存储桶中的所有内容。</span><br></pre></td></tr></table></figure><p>即可.</p><h1 id="实测"><a href="#实测" class="headerlink" title="实测"></a>实测</h1><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/2020-07-09%20105402.jpg" alt=""></p><p>免费额度基本用不完.</p><p>可惜PicGo没有支持Backblaze，我只能通过网页端上传<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/%E8%A3%85%E5%A4%A7%E6%AC%BE.png" alt="">。</p><p>然而有一件事情非常蛋疼，你丫的根目录上传的时候是不会创建文件夹的，一次上传会把文件夹里的图片全部上传到根目录。所以，我只能手动创建文件夹，这个痛苦我真的是，<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/tx.png" alt="">。</p><p>嗯，用了一个晚上，感觉还是挺香的，鹅厂的COS收费确实不合理，也要学学外面人家收费啊！</p><hr><p>溜了溜了，作业还没写完呢<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/邪魅一笑.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 爱分享 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 图床 </tag>
            
            <tag> COS </tag>
            
            <tag> 对象存储 </tag>
            
            <tag> 免流 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>怎么才能让GoogleAdsense不拖慢速度</title>
      <link href="/posts/3854592e/"/>
      <url>/posts/3854592e/</url>
      
        <content type="html"><![CDATA[<p>GoogleAdsense嘛，著名的赚钱大师，<span class="heimu">虽然只给我40美分，但毕竟我没有做很好的优化嘛，这也不怪谷歌</span>。由于以前用的是 <code>.ga</code> 的免费域名,在上一年将近4个月荒凉,基本日PV在没有和1之间徘徊.后来过年的时候买了一个 <code>.top</code> 总算撑起一层牌面,但是由于 <code>COVID19</code> ,嗯,所以每次提交2星期就给我来这么一出:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200706143949.jpg" alt=""></p><p>嗯,<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/%E5%8F%A3%E5%90%90%E8%8A%B3%E8%A8%80.jpg" alt=""></p><p>后来呢,六月初提交了一次,结果显示,到第13天,百度统计才接收到来自台湾的Google流量,一天之后审核完毕.</p><p>真的懒啊， <img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/stick_60.png" alt=""></p><p>然而呢，GoogleAdsense也是著名的拖慢加载速度的JS。一年前的GoogleAdsense的js获取是链接美国，谷歌嘛，连不上也是正常的，现在基本解析都是上海和北京的谷翔，速度还行，但是加载广告的速度依旧难以忍受【实际也就6s的速度】。</p><p>欸，博客快满一周年了，当时建站的时候根本不管速度如何，能加载就成，不像现在，为了几百毫秒的事情纠结。<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/%E5%B0%8F%E7%9C%BC%E7%9D%9B.png" alt=""></p><h1 id="GoogleAdsense在后台偷偷加载的事情："><a href="#GoogleAdsense在后台偷偷加载的事情：" class="headerlink" title="GoogleAdsense在后台偷偷加载的事情："></a>GoogleAdsense在后台偷偷加载的事情：</h1><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200706154324.png" alt=""></p><p>可以看到，一个1.1kb的网页（上面的文字是通过js自动生成的），谷歌广告加载，需要将近10s加载完毕，加载大小将近1.5MB。</p><p>最夸张的是，我是通过海外代理访问的，如果放在大陆打开，这甚至好几次加载失败。</p><p>虽然谷歌拥有所谓的【异步加载】，可仍然会严重拖慢速度,并且，当用户没有打算看广告时，广告仍然会加载：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200706154831.gif" alt=""></p><p>简单统计了一下，我打开网页用了1s，剩下9s我的浏览器上方一直在转【表示加载】，这种情况非常的讽刺，因为谷歌在PageSpeedLight中口口声声说需要降低js的渲染速度和外部链接加载。</p><p>实际上呢，刚刚的广告，谷歌向服务器发送了57次请求，其中26次js加载，总渲染达到3.87秒，接着是图片，总共将近9个，总大小1.4MB。</p><p>这种地步，已经让我无法忍耐了，可以想象，在打开博客，最开始跳出来的不是博文的内容，而是毫不相关的广告，这种情况，访客好感度能好才怪呢。<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/%E5%86%85%E4%BC%A4.png" alt=""></p><p>那么，怎么解决？</p><h1 id="万物皆可懒加载！"><a href="#万物皆可懒加载！" class="headerlink" title="万物皆可懒加载！"></a>万物皆可懒加载！</h1><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200706155515.gif" alt=""></p><p>访客在上方浏览时，广告不加载，直到划到最底下，广告才开始加载，这样大大提升好感【虽然总加载速度和时间还是这个样，但是在访客看来就很舒服】</p><p>应该给广告挑个好位置，那么在哪里最好呢？就我个人而言，我最希望看完博文和评论之后，在移动鼠标到下一篇的间隙稍微看看别的东西。就比如说那种3.3￥/月的主机广告我就忍不住想点一下【当然，发布者是不能点击自己的广告的】。那么，我就可以把广告代码扔在Valine评论框以下即可。</p><p>我们可以顺手拿一个谷歌广告实例开刀,我的博客广告单元是这样的;</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">&quot;https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ins</span> <span class="attr">class</span>=<span class="string">&quot;adsbygoogle&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display:block&quot;</span> <span class="attr">data-ad-client</span>=<span class="string">&quot;ca-pub-1878991317600808&quot;</span> <span class="attr">data-ad-slot</span>=<span class="string">&quot;6517667779&quot;</span> <span class="attr">data-ad-format</span>=<span class="string">&quot;auto&quot;</span> <span class="attr">data-full-width-responsive</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">     (adsbygoogle = <span class="variable language_">window</span>.<span class="property">adsbygoogle</span> || []).<span class="title function_">push</span>(&#123;&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>可以看到 <code>https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js</code> 即核心js,那么我们只要把这个js压住懒加载,直到划到底下才显示即可</p><p>那么问题来了,怎么压?</p><p>答: <code>window.addEventListener</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">function downloadJSAtOnload() &#123;</span><br><span class="line">var element = document.createElement(&quot;script&quot;);</span><br><span class="line">element.src = &quot;https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;;</span><br><span class="line">document.body.appendChild(element);</span><br><span class="line">&#125;</span><br><span class="line">if (window.addEventListener)</span><br><span class="line">window.addEventListener(&quot;load&quot;, downloadJSAtOnload, false);</span><br><span class="line">else if (window.attachEvent)</span><br><span class="line">window.attachEvent(&quot;onload&quot;, downloadJSAtOnload);</span><br><span class="line">else window.onload = downloadJSAtOnload;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>所以,简单的就这么做:</p><p>修改  <code>Valine.ejs</code> ，末端填上</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">downloadJSAtOnload</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> element = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">element.<span class="property">src</span> = <span class="string">&quot;https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(element);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">addEventListener</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;load&quot;</span>, downloadJSAtOnload, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">attachEvent</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">window</span>.<span class="title function_">attachEvent</span>(<span class="string">&quot;onload&quot;</span>, downloadJSAtOnload);</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">else</span> <span class="variable language_">window</span>.<span class="property">onload</span> = downloadJSAtOnload;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ADs-in-Blog-Under-Valine --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ins</span> <span class="attr">class</span>=<span class="string">&quot;adsbygoogle&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">style</span>=<span class="string">&quot;display:block&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">data-ad-client</span>=<span class="string">&quot;ca-pub-1878991317600808&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">data-ad-slot</span>=<span class="string">&quot;6517667779&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">data-ad-format</span>=<span class="string">&quot;auto&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">data-full-width-responsive</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">     (adsbygoogle = <span class="variable language_">window</span>.<span class="property">adsbygoogle</span> || []).<span class="title function_">push</span>(&#123;&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200706163849.gif" alt=""></p><p>就比如现在这样【诶呀，顺手捞一把嘛】</p> <script type="text/javascript">function downloadJSAtOnload() {var element = document.createElement("script");element.src = "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js";document.body.appendChild(element);}if (window.addEventListener)window.addEventListener("load", downloadJSAtOnload, false);else if (window.attachEvent)window.attachEvent("onload", downloadJSAtOnload);else window.onload = downloadJSAtOnload;</script><!-- ADs-in-Blog-Under-Valine --><p><ins class="adsbygoogle"     style="display:block"     data-ad-client="ca-pub-1878991317600808"     data-ad-slot="6517667779"     data-ad-format="auto"     data-full-width-responsive="true"></ins></p><script>     (adsbygoogle = window.adsbygoogle || []).push({});</script><hr><blockquote><p>好了,我相信很多营销号【如果有】，绝对会把我上面的文章直接抄走。嗯，我非常讨厌营销号，对的，我在这里提前鄙视你们。以下是我关于这件事情的很多想法，如果你就是想简单优化，这就足够了，如果你有兴趣了解，你可以继续：</p></blockquote><h1 id="关于更多的优化"><a href="#关于更多的优化" class="headerlink" title="关于更多的优化"></a>关于更多的优化</h1><p>谷歌论坛上有人提到过，懒加载谷歌广告是否合规，标题是这样的：<strong>Lazy Load Adsense fine with the policies?</strong></p><p><a href="https://support.google.com/adsense/thread/31438569?hl=en">原文</a>如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Many have already been asked, but unfortunately they have not received an answer. :-(</span><br><span class="line"></span><br><span class="line">I like to optimize site speed in the browser, not AMP.</span><br><span class="line">My questions are:</span><br><span class="line"></span><br><span class="line">- Is lazy load for ads below the fold usefull?</span><br><span class="line">- Is it fine with the policies? </span><br><span class="line"></span><br><span class="line">I&#x27;ve seen some pieces of code to implement it (https://css-tricks.com/lazy-loading-responsive-adsense-ads/, https://betterstudio.com/blog/lazy-load-google-adsense-wordpress/, https://gulshankumar.net/setup-lazy-loading-google-adsense-ad-units/). Are such examples allowed code to implement AdSense lazy loading?</span><br><span class="line"></span><br><span class="line">Thanks!</span><br></pre></td></tr></table></figure><p>噫,好,又是<del>生肉</del>.</p><p>简单的说,这位用户的担忧确实很值得思考,确实,AMP对于我来说就是个鸡肋，尤其是想我一样面向中国大陆访客，<strong>AMP需要你能访问国外谷歌</strong>。担忧的理由也写的很清楚，一是能不能起作用，二是违不违反政策。</p><p>可惜，所谓的QuickResponse依旧很答非所问，印证了用户的 <strong>Many have already been asked, but unfortunately they have not received an answer</strong></p><p>嗯， <strong>it makes sense NOT to have lazy loading on them</strong> 、 <strong>There is no “yes” or “no” answer to this in the policies</strong> ，用户问有没有违反，可你只能回答【没有确切答案？】、【不需要懒加载？】</p><p>这谷歌客服<span class="heimu">一事无成</span>，像极了我的人生</p><p>不过说回来，有一件事情确实意思：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">As such, it could be argued that behaviour draws attention to those elements. </span><br><span class="line">Drawing attention to ads is a policy violation.</span><br><span class="line"></span><br><span class="line">所以，这可以说这种行为吸引了人们对这些要素变化的关注。</span><br><span class="line">请注意这种吸引用户关注行为是违反政策。</span><br></pre></td></tr></table></figure><p>所以，这就解释了我为何不用 <code>onscroll</code> 和 <code>IntersectionObserver API</code> ,<br>而采用不那么灵敏的 <code>window.addEventListener</code> 。</p><p>实际上，在刚刚的论坛问答里，提到了很多的lazyload方法，以 [<a href="https://css-tricks.com/lazy-loading-responsive-adsense-ads/">https://css-tricks.com/lazy-loading-responsive-adsense-ads/</a>] 这篇文章为例子:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200706163646.gif" alt=""></p><p>这种方法在谷歌广告商增加一个遮罩层,加载网页时先加载遮罩,广告不加载;当滚动完成时,遮罩层消失,加载广告.可惜，此方法已失效，加载的时候谷歌检测到有遮罩层就会拒绝加载。</p><p>无论怎么说，懒加载广告，速度<del>咻</del>一下上去了，口袋里零花钱也多了。钱速双收，何为不乐乎？</p><p>最后，我瞟了一眼，看到了广告：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200706164523.jpg" alt=""></p><p>阿里支付宝什么时候沦落到要打广告了？</p>]]></content>
      
      
      <categories>
          
          <category> 好方法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Google </tag>
            
            <tag> Adsense </tag>
            
            <tag> LazyLoad </tag>
            
            <tag> 赚钱 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>利用Travis-CI实现在线更新Hexo</title>
      <link href="/posts/e626cb30/"/>
      <url>/posts/e626cb30/</url>
      
        <content type="html"><![CDATA[<p>Hexo作为静态博客，好处相当明显，开销少，并且对于那种DDosS和CC套上CDN毅然不动。当然，最蛋疼的莫过于更新了，每次在自己电脑上辛辛苦苦码好字，一个push，hexo绿色光芒在命令提示符上闪烁着光芒，突然发现把仓库名字 <code>ChenYFan</code> 打成 <code>CehnYFan</code> <span class="heimu">真实事件</span> ，异或着是用手机查看自己的博客，突然发现：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200629135012.jpg" alt=""></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/stick_7.png" alt=""></p><p>由于hexo基于nodejs+git，手机无法更新；同时如果换了台电脑，hexo就要重装。这种事情hexo用户应该体会得到，我也就不多说了。<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/%E4%B8%AD%E5%88%80.png" alt=""></p><p>那么，hexo用户如何进行在线更新呢？</p><p>正常来讲，<strong>服务器法</strong> 最直接，但也是最没用的。用服务器就意味着丧失了hexo的最优点-节省开支。当然，Hexo+Nginx+HexoAdmin确实可以实现很棒的书写环境，但是与其这么麻烦你还不如直接用Typecho&amp;Wordpress呢。<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/%E4%B8%8D%E9%AB%98%E5%85%B4.png" alt=""></p><p>曾经在 <a href="https://hexo.io">Hexo官方</a> 上看过 <a href="https://hexo.io/zh-cn/docs/github-pages">利用Travis-ci自动部署GithubPages</a> 不过我一看到这么多步骤直接 <del><strong>萎缩</strong></del> <img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/%E6%8A%95%E9%99%8D.png" alt=""> </p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200629140241.jpg" alt=""></p><p>后来,促使我改变主意的,是我得知中考之后放假三天接着上课[高中],我***,然后突然想起来博客不方便更新,接着手一抖,把博客的Repo删掉了.</p><p>…</p><p>既然删了，那么就这么干吧。</p><p>其实后来发现这并不困难，只是我刚开始想多了而已。</p><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><blockquote><p>Travis CI是在软件开发领域中的一个在线的，分布式的持续集成服务，用来构建及测试在GitHub托管的代码。这个软件的代码同时也是开源的，可以在GitHub上下载到，</p></blockquote><p>实际上你会发现，当你把博客Push到Github上时，你的计算机会在NodeJS环境下生成静态文件，然后push到Github。这些步骤其实完全可以用Travis CI做到。</p><p>最好在 <code>source</code> 下新建一个 <code>CNAME</code> 文件,并将绑定的域名写进去,不然直接在 <code>gh-page</code> 分支里弄Travis-ci会覆盖掉的.</p><h1 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h1><h2 id="本地搭建环境"><a href="#本地搭建环境" class="headerlink" title="本地搭建环境"></a>本地搭建环境</h2><p>这一步必不可少，额具体方法网上一搜一大堆，这里就不说了。请注意，最好事先选好主题和插件，配置完成后自己测试一下。完毕后进入下一步。这里不在演示了【毕竟搭建环境与此博文几乎无关】</p><h2 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h2><p>默认情况下，直接在hexo博客根目录上链接repo上传，不会把 <code>node_modules/</code> 上传上去，因为 <code>.gitignore</code> 中包含这么一行：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200629140732.jpg" alt=""></p><p>但是当时以为我拓展是不能上传的，于是手一滑，删掉那一行，上传上去了。</p><p>结果后来发现这就是个错误的选择。</p><ol><li><p><code>node_modules/</code> 中，文件比较小</p></li><li><p><code>node_modules/</code> 中，文件比较多</p></li></ol><p>所以：</p><ol><li><code>node_modules/</code> 中，文件比较碎</li></ol><p>嗯，<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/stick_38.png" alt=""></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200629141017.jpg" alt=""></p><p>我 <code>git add .</code> 了一下,它运算了半小时, <code>git commit</code> 又花了半小时,幸好<code>git push</code> 是打包上去的,不然我估计又要花半个小时.</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200629141259.jpg" alt=""></p><p>结果戏剧性的是,当我去看travis-ci部署记录时,我发现:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200629141542.jpg" alt=""></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/tx.png" alt=""></p><blockquote><p>所以,还没用Travis-ci的同学,请不要手贱删掉 <code>.gitignore</code> 中的 <code>node_modules/</code></p></blockquote><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><blockquote><p>这里暂时不说私有怎么部署,这里讲的是PublicRepo.</p></blockquote><h3 id="1-注册travis-ci-org"><a href="#1-注册travis-ci-org" class="headerlink" title="1.注册travis-ci.org"></a>1.注册travis-ci.org</h3><p>前往 [<a href="https://travis-ci.org">https://travis-ci.org</a>] 用Github账号注册 <strong>注意了啊,注意了啊,</strong> 是 <code>.org</code> 而不是 <code>.com</code> ! 鬼知道我在这上面浪费了多少时间! <code>travis-ci.org</code> 是免费给公开repo部署的,<code>travis-ci.com</code> 是收费的,但是 <code>travis-ci.com</code> 却是可以绑定并免费部署公开Repo的.最有问题的是这两个网站其中一个绑定repo后,另一个就不能绑定了!! 害得我以为是缓存搞出来的事,搞了半天没解决,一看地址栏人都傻了.<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/tx.png" alt=""></p><h3 id="2-绑定travis"><a href="#2-绑定travis" class="headerlink" title="2.绑定travis"></a>2.绑定travis</h3><p> 前往 [<a href="https://github.com/marketplace/travis-ci">https://github.com/marketplace/travis-ci</a>] 绑定travis-ci到你的github后 继续前往 <a href="https://github.com/settings/installations">GitHub 的 Applications settings</a> ,点击 <code>Travis CI</code>配置你的repo能被TravisCI访问 </p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200629142607.jpg" alt=""></p><h3 id="3-新建Token"><a href="#3-新建Token" class="headerlink" title="3.新建Token"></a>3.新建Token</h3><p>前往 GitHub <a href="https://github.com/settings/tokens">新建 Personal Access Token</a> </p><p>新建一个Token:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200629142812.jpg" alt=""></p><p>然而请注意,官方文档里说只需勾选 <code>repo</code> 全部权限即可,但是据我测试,<strong>只勾选则会导致401验证错误</strong>.似乎还要勾选 <code>read:public_key</code> 和 <code>read:user</code> ,当然如果你足够懒,你也可以全勾上, <strong>但请不要把Token泄露出去</strong>,否则你的Github就不太好使了.</p><p>点击生成Token：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200629143305.jpg" alt=""></p><p>记得复制下来保存！不然下次你就看不到你的Token了！</p><h3 id="4-修改Repo"><a href="#4-修改Repo" class="headerlink" title="4.修改Repo"></a>4.修改Repo</h3><p>进入Repo的 <strong>Master</strong> 分支，新建一个 <code>.travis.yml</code> ，里面塞上：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sudo:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attr">node_js:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">10</span> <span class="comment"># use nodejs v10 LTS</span></span><br><span class="line"><span class="attr">cache:</span> <span class="string">npm</span></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">master</span> <span class="comment"># build master branch only</span></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">generate</span> <span class="comment"># generate static files</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">provider:</span> <span class="string">pages</span></span><br><span class="line">  <span class="attr">skip-cleanup:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">github-token:</span> <span class="string">$GH_TOKEN</span></span><br><span class="line">  <span class="attr">keep-history:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">on:</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">master</span></span><br><span class="line">  <span class="attr">local-dir:</span> <span class="string">public</span></span><br></pre></td></tr></table></figure><p>对,改都不要改,就这么塞进去.</p><h3 id="5-Token导入Travis-ci"><a href="#5-Token导入Travis-ci" class="headerlink" title="5.Token导入Travis-ci"></a>5.Token导入Travis-ci</h3><p>Token很重要,你必须要告诉Travis-ci,因为它要获取对你的repo的写入权,但你也不能明文写在Repo里面,因为别人看得到.</p><p>所以,在 [### 4.修改Repo] 中,<code>github-token:</code> 后面跟着的不是明文,而是变量  <code>$GH_TOKEN</code>.</p><p>进入 [<a href="https://travis-ci.org/github/{用户名}/{仓库名}/settings">https://travis-ci.org/github/{用户名}/{仓库名}/settings</a>] 中,看到 <strong>Environment Variables</strong> ,Name选择 <code>GH_TOKEN</code> ,Value把[### 3.新建Token] 中的Token粘贴到里面去.BRANCH直接默认.</p><p><strong>特别注意!,将后面DISPLAY VALUE IN BUILD LOG弄成灰色,不然你的Token将会公开!</strong>,如果你不慎公开Token,请前往GithubPersonalToken删除并重新生成一个Token!</p><p>最终应该是这样子的:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200629145235.jpg" alt=""></p><p>在日志里面,搜索Token,应该是这样子的:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ export GH_TOKEN=[secure]</span><br></pre></td></tr></table></figure><h3 id="6-打开触发器"><a href="#6-打开触发器" class="headerlink" title="6.打开触发器"></a>6.打开触发器</h3><p>前往 <a href="https://travis-ci.org/account/repositories">https://travis-ci.org/account/repositories</a>,打开目标Repo后面的按钮:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200629145630.jpg" alt=""></p><h3 id="7-触发Travis-ci"><a href="#7-触发Travis-ci" class="headerlink" title="7.触发Travis-ci"></a>7.触发Travis-ci</h3><p>修改文件或新建Readme,让Travis-ci触发并开始工作.</p><p>比如说我更新 <code>留言板.md</code> ,Github上一更新,Travis-ci自动开始工作:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200629150414.jpg" alt=""></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200629150525.jpg" alt=""></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200629150600.jpg" alt="麻烦无视左上角的亮度调节"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200629152935.jpg" alt=""></p><p>本次日志地址 <a href="https://api.travis-ci.org/v3/job/703061869/log.txt">https://api.travis-ci.org/v3/job/703061869/log.txt</a></p><h3 id="8-以后"><a href="#8-以后" class="headerlink" title="8.以后"></a>8.以后</h3><p>更新博客直接在Github上更改，或者写好之后直接上传，或者pull到本地写好后push到Github，此后操作用户无需本地使用Hexo，也不用调整Travis-ci，安心写博客吧！</p><h1 id="草稿问题"><a href="#草稿问题" class="headerlink" title="草稿问题"></a>草稿问题</h1><p>其实这个比较简单，在修改时新建一个branch，名字叫 <code>drafts</code> ,由于 <code>.travis.yml</code> 规定只捕获 <code>master</code> ,草稿分支不会触发，修改的时候全部在drafts上修改，修改好了直接PullRequest，完事！</p><p><strong>这么干以后,一定要注意,以后所有修改无论大小,都必须先在  <code>drafts</code> 里修改,然后发起PR,然后合并.不然直接在 <code>master</code> 里修改有可能会导致无法合并! </strong></p><h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>总之，这样就可以安心用手机或者在学校更新Blog了！</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/stick_54.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 好方法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Travis-CI </tag>
            
            <tag> 在线更新 </tag>
            
            <tag> 奇淫巧计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>通过CloudFlareAPI获取用户侧信息</title>
      <link href="/posts/a7d0d7f8/"/>
      <url>/posts/a7d0d7f8/</url>
      
        <content type="html"><![CDATA[<p>噫，中考结束了，心中一块大石头总算碎了。虽然说考上提前批中考考不考无所谓，但是回去一次模拟考直接把我考傻了，太烂了<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/%E8%82%BF%E5%8C%85.png" alt="">,以前初一不学习的时候都没有这么烂。啊么学习两星期，中考一考，今年理科超级简单，欸，这样理科分数拉不开了，啧啧啧，理科生的末日。</p><p>因为人大多数时间在学校，不太方便用自带hexopush到Github，一是博客文件同步不方便，二是如果有个小错误就很抓狂，所以呢，以前的打算是部署到vps，通过hexo+nginx实现访问，不过可能是人比较傻，一直没搞好，而且这种免费小鸡说炸就炸，不保险，还是跟着<a href="https://hexo.io/zh-cn/docs/github-pages">hexo官方文档</a> 用Travis-ci+Github实现在线自动部署,以后更新也方便点<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/%E5%9D%90%E7%AD%89.png" alt=""></p><p>好了好了，不说了，今天简单讲一下如何用CloudFlare自带的API获取用户信息。</p><h1 id="cdn-cgi-trace"><a href="#cdn-cgi-trace" class="headerlink" title="/cdn-cgi/trace"></a>/cdn-cgi/trace</h1><p>刚开始建立博客的时候，也是想过显示用户ip地址的，但网上的教程大多都是用搜狐新浪的js，而且很早就过期了。所以也就搁着迟迟没有解决。</p><p>后来偶然间知道CloudFlare有个比较神奇的技术，在部署在CloudFlare上的网站，域名后面加上<code>/cdn-cgi/trace</code>就可以获得用户侧信息，例如<code>https://blog.cyfan.top/cdn-cgi/trace</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">fl=23f2**</span><br><span class="line">h=blog.cyfan.top</span><br><span class="line">ip=39.182.***.***</span><br><span class="line">ts=15933078**.***</span><br><span class="line">visit_scheme=https</span><br><span class="line">uag=Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36</span><br><span class="line">colo=HKG</span><br><span class="line">http=http/2</span><br><span class="line">loc=CN</span><br><span class="line">tls=TLSv1.3</span><br><span class="line">sni=plaintext</span><br><span class="line">warp=off</span><br></pre></td></tr></table></figure><p>[对于部分隐私替换掉，请见谅]</p><p>差不多都全了，<code>ip</code>、<code>uag</code>、<code>colo</code>、<code>loc</code>、<code>tls</code>这些数据都是我们所需要的，那么，怎么把这些数据迁移到网页上呢？</p><h1 id="答案是：JavaScript"><a href="#答案是：JavaScript" class="headerlink" title="答案是：JavaScript"></a>答案是：JavaScript</h1><p>首先要引入Jquery，如果你的网页上已经有Jquery，那么就不必再次引入：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://npm.elemecdn.com/jquery@3.2.1/dist/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>接着加入JS[需在Jquery以下,否则会报错]:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">getCDNinfo = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line"><span class="attr">url</span>: <span class="string">&quot;https://cdn.cyfan.top/cdn-cgi/trace&quot;</span>,</span><br><span class="line"><span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">data, status</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> areas = <span class="string">&quot;Antananarivo, Madagascar - (TNR);Cape Town, South Africa - (CPT);Casablanca, Morocco - (CMN);Dar Es Salaam, Tanzania - (DAR);Djibouti City, Djibouti - (JIB);Durban, South Africa - (DUR);Johannesburg, South Africa - (JNB);Kigali, Rwanda - (KGL);Lagos, Nigeria - (LOS);Luanda, Angola - (LAD);Maputo, MZ - (MPM);Mombasa, Kenya - (MBA);Port Louis, Mauritius - (MRU);Réunion, France - (RUN);Bangalore, India - (BLR);Bangkok, Thailand - (BKK);Bandar Seri Begawan, Brunei - (BWN);Cebu, Philippines - (CEB);Chengdu, China - (CTU);Chennai, India - (MAA);Chittagong, Bangladesh - (CGP);Chongqing, China - (CKG);Colombo, Sri Lanka - (CMB);Dhaka, Bangladesh - (DAC);Dongguan, China - (SZX);Foshan, China - (FUO);Fuzhou, China - (FOC);Guangzhou, China - (CAN);Hangzhou, China - (HGH);Hanoi, Vietnam - (HAN);Hengyang, China - (HNY);Ho Chi Minh City, Vietnam - (SGN);Hong Kong - (HKG);Hyderabad, India - (HYD);Islamabad, Pakistan - (ISB);Jakarta, Indonesia - (CGK);Jinan, China - (TNA);Karachi, Pakistan - (KHI);Kathmandu, Nepal - (KTM);Kolkata, India - (CCU);Kuala Lumpur, Malaysia - (KUL);Lahore, Pakistan - (LHE);Langfang, China - (NAY);Luoyang, China - (LYA);Macau - (MFM);Malé, Maldives - (MLE);Manila, Philippines - (MNL);Mumbai, India - (BOM);Nagpur, India - (NAG);Nanning, China - (NNG);New Delhi, India - (DEL);Osaka, Japan - (KIX);Phnom Penh, Cambodia - (PNH);Qingdao, China - (TAO);Seoul, South Korea - (ICN);Shanghai, China - (SHA);Shenyang, China - (SHE);Shijiazhuang, China - (SJW);Singapore, Singapore - (SIN);Suzhou, China - (SZV);Taipei - (TPE);Thimphu, Bhutan - (PBH);Tianjin, China - (TSN);Tokyo, Japan - (NRT);Ulaanbaatar, Mongolia - (ULN);Vientiane, Laos - (VTE);Wuhan, China - (WUH);Wuxi, China - (WUX);Xi&#x27;an, China - (XIY);Yerevan, Armenia - (EVN);Zhengzhou, China - (CGO);Zuzhou, China - (CSX);Amsterdam, Netherlands - (AMS);Athens, Greece - (ATH);Barcelona, Spain - (BCN);Belgrade, Serbia - (BEG);Berlin, Germany - (TXL);Brussels, Belgium - (BRU);Bucharest, Romania - (OTP);Budapest, Hungary - (BUD);Chișinău, Moldova - (KIV);Copenhagen, Denmark - (CPH);Cork, Ireland -  (ORK);Dublin, Ireland - (DUB);Düsseldorf, Germany - (DUS);Edinburgh, United Kingdom - (EDI);Frankfurt, Germany - (FRA);Geneva, Switzerland - (GVA);Gothenburg, Sweden - (GOT);Hamburg, Germany - (HAM);Helsinki, Finland - (HEL);Istanbul, Turkey - (IST);Kyiv, Ukraine - (KBP);Lisbon, Portugal - (LIS);London, United Kingdom - (LHR);Luxembourg City, Luxembourg - (LUX);Madrid, Spain - (MAD);Manchester, United Kingdom - (MAN);Marseille, France - (MRS);Milan, Italy - (MXP);Moscow, Russia - (DME);Munich, Germany - (MUC);Nicosia, Cyprus - (LCA);Oslo, Norway - (OSL);Paris, France - (CDG);Prague, Czech Republic - (PRG);Reykjavík, Iceland - (KEF);Riga, Latvia - (RIX);Rome, Italy - (FCO);Saint Petersburg, Russia - (LED);Sofia, Bulgaria - (SOF);Stockholm, Sweden - (ARN);Tallinn, Estonia - (TLL);Thessaloniki, Greece - (SKG);Vienna, Austria - (VIE);Vilnius, Lithuania - (VNO);Warsaw, Poland - (WAW);Zagreb, Croatia - (ZAG);Zürich, Switzerland - (ZRH);Arica, Chile - (ARI);Asunción, Paraguay - (ASU);Bogotá, Colombia - (BOG);Buenos Aires, Argentina - (EZE);Curitiba, Brazil - (CWB);Fortaleza, Brazil - (FOR);Guatemala City, Guatemala - (GUA);Lima, Peru - (LIM);Medellín, Colombia - (MDE);Panama City, Panama - (PTY);Porto Alegre, Brazil - (POA);Quito, Ecuador - (UIO);Rio de Janeiro, Brazil - (GIG);São Paulo, Brazil - (GRU);Santiago, Chile - (SCL);Willemstad, Curaçao - (CUR);St. George&#x27;s, Grenada - (GND);Amman, Jordan - (AMM);Baghdad, Iraq - (BGW);Baku, Azerbaijan - (GYD);Beirut, Lebanon - (BEY);Doha, Qatar - (DOH);Dubai, United Arab Emirates - (DXB);Kuwait City, Kuwait - (KWI);Manama, Bahrain - (BAH);Muscat, Oman - (MCT);Ramallah - (ZDM);Riyadh, Saudi Arabia - (RUH);Tel Aviv, Israel - (TLV);Ashburn, VA, United States - (IAD);Atlanta, GA, United States - (ATL);Boston, MA, United States - (BOS);Buffalo, NY, United States - (BUF);Calgary, AB, Canada - (YYC);Charlotte, NC, United States - (CLT);Chicago, IL, United States - (ORD);Columbus, OH, United States - (CMH);Dallas, TX, United States - (DFW);Denver, CO, United States - (DEN);Detroit, MI, United States - (DTW);Honolulu, HI, United States - (HNL);Houston, TX, United States - (IAH);Indianapolis, IN, United States - (IND);Jacksonville, FL, United States - (JAX);Kansas City, MO, United States - (MCI);Las Vegas, NV, United States - (LAS);Los Angeles, CA, United States - (LAX);McAllen, TX, United States - (MFE);Memphis, TN, United States - (MEM);Mexico City, Mexico - (MEX);Miami, FL, United States - (MIA);Minneapolis, MN, United States - (MSP);Montgomery, AL, United States - (MGM);Montréal, QC, Canada - (YUL);Nashville, TN, United States - (BNA);Newark, NJ, United States - (EWR);Norfolk, VA, United States - (ORF);Omaha, NE, United States - (OMA);Philadelphia, United States - (PHL);Phoenix, AZ, United States - (PHX);Pittsburgh, PA, United States - (PIT);Port-Au-Prince, Haiti - (PAP);Portland, OR, United States - (PDX);Queretaro, MX, Mexico - (QRO);Richmond, Virginia - (RIC);Sacramento, CA, United States - (SMF);Salt Lake City, UT, United States - (SLC);San Diego, CA, United States - (SAN);San Jose, CA, United States - (SJC);Saskatoon, SK, Canada - (YXE);Seattle, WA, United States - (SEA);St. Louis, MO, United States - (STL);Tampa, FL, United States - (TPA);Toronto, ON, Canada - (YYZ);Vancouver, BC, Canada - (YVR);Tallahassee, FL, United States - (TLH);Winnipeg, MB, Canada - (YWG);Adelaide, SA, Australia - (ADL);Auckland, New Zealand - (AKL);Brisbane, QLD, Australia - (BNE);Melbourne, VIC, Australia - (MEL);Noumea, New caledonia - (NOU);Perth, WA, Australia - (PER);Sydney, NSW, Australia - (SYD)&quot;</span>.<span class="title function_">split</span>(<span class="string">&quot;;&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> area = data.<span class="title function_">split</span>(<span class="string">&quot;colo=&quot;</span>)[<span class="number">1</span>].<span class="title function_">split</span>(<span class="string">&quot;\n&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; areas.<span class="property">length</span>; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (areas[i].<span class="title function_">indexOf</span>(area) != -<span class="number">1</span>) &#123;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;cdn&quot;</span>).<span class="property">innerHTML</span> = areas[i];</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;ip&quot;</span>).<span class="property">innerHTML</span> = data.<span class="title function_">split</span>(<span class="string">&quot;ip=&quot;</span>)[<span class="number">1</span>].<span class="title function_">split</span>(<span class="string">&quot;\n&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;httpos&quot;</span>).<span class="property">innerHTML</span> = data.<span class="title function_">split</span>(<span class="string">&quot;visit_scheme=&quot;</span>)[<span class="number">1</span>].<span class="title function_">split</span>(<span class="string">&quot;\n&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;uag&quot;</span>).<span class="property">innerHTML</span> = data.<span class="title function_">split</span>(<span class="string">&quot;uag=&quot;</span>)[<span class="number">1</span>].<span class="title function_">split</span>(<span class="string">&quot;\n&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;http&quot;</span>).<span class="property">innerHTML</span> = data.<span class="title function_">split</span>(<span class="string">&quot;http=&quot;</span>)[<span class="number">1</span>].<span class="title function_">split</span>(<span class="string">&quot;\n&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;loc&quot;</span>).<span class="property">innerHTML</span> = data.<span class="title function_">split</span>(<span class="string">&quot;loc=&quot;</span>)[<span class="number">1</span>].<span class="title function_">split</span>(<span class="string">&quot;\n&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;tls&quot;</span>).<span class="property">innerHTML</span> = data.<span class="title function_">split</span>(<span class="string">&quot;tls=&quot;</span>)[<span class="number">1</span>].<span class="title function_">split</span>(<span class="string">&quot;\n&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;warp&quot;</span>).<span class="property">innerHTML</span> = data.<span class="title function_">split</span>(<span class="string">&quot;warp=&quot;</span>)[<span class="number">1</span>].<span class="title function_">split</span>(<span class="string">&quot;\n&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="title function_">getCDNinfo</span>();</span><br><span class="line">    <span class="comment">//页面加载完毕就获取CDN信息</span></span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>这个脚本会获取大部分用户信息并解析所链接节点位置,默认链接到<code>cdn.cyfan.top</code>，已通过<code>CORS</code>,接着在网页需要添加的地方增加html代码:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">当前CDN节点: <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;cdn&quot;</span>&gt;</span>【未知】<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">你的ip: <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;ip&quot;</span>&gt;</span>【未知】<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">你当前以: <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;httpos&quot;</span>&gt;</span>【未知】<span class="tag">&lt;/<span class="name">span</span>&gt;</span>形式访问我们的网站<span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">你的User-Agent: <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;uag&quot;</span>&gt;</span>【未知】<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">你以: <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;http&quot;</span>&gt;</span>【未知】<span class="tag">&lt;/<span class="name">span</span>&gt;</span>形式访问本网站<span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">你的所在国家/地区: <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;loc&quot;</span>&gt;</span>【未知】<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">你以: <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;tls&quot;</span>&gt;</span>【未知】<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">你是否以Warp访问我们: <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;warp&quot;</span>&gt;</span>【未知】<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>[可以根据需要增减]，一般情况下简单获取写成这样：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;</span><br><span class="line">当前CDN节点: &lt;span id=&quot;cdn&quot;&gt;【未知】&lt;/span&gt; |</span><br><span class="line">你的ip: &lt;span id=&quot;ip&quot;&gt;【未知】&lt;/span&gt; |</span><br><span class="line">你的所在国家/地区: &lt;span id=&quot;loc&quot;&gt;【未知】 &lt;/span&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure><p>结果应该类似这样:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200628094419.png" alt=""></p><p>划到页底即可看到。</p><h1 id="End"><a href="#End" class="headerlink" title="End"></a>End</h1><p>OHHH，又水了一篇，下次讲讲如何部署博客到Travis-ci上。溜了溜了 <img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/yhuaji.png" alt="">。</p>]]></content>
      
      
      <categories>
          
          <category> 屌代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CloudFlare </tag>
            
            <tag> API </tag>
            
            <tag> IP </tag>
            
            <tag> 用户信息 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自定義代碼配色</title>
      <link href="/posts/b37b5fe3/"/>
      <url>/posts/b37b5fe3/</url>
      
        <content type="html"><![CDATA[<p>在<a href="http://butterfly.js.org/posts/4aa8abbe/#代碼高亮主題">Butterfly-安裝文檔-三-主題配置</a>中已經介紹瞭如何使用自定義代碼配色。</p><p>這篇文章是使用自定義代碼配色的實例教程。</p><h2 id="Highlight"><a href="#Highlight" class="headerlink" title="Highlight"></a>Highlight</h2><p>以使用<code>Kimbie dark</code>主題配色為例子</p><h3 id="配置hljs為true"><a href="#配置hljs為true" class="headerlink" title="配置hljs為true"></a>配置<code>hljs</code>為<code>true</code></h3><p>修改Hexo根目錄下的<code>_config.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line"> <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"> <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line"> <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line"> <span class="attr">tab_replace:</span></span><br><span class="line"> <span class="attr">hljs:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="配置highlight-theme為false"><a href="#配置highlight-theme為false" class="headerlink" title="配置highlight_theme為false"></a>配置<code>highlight_theme</code>為<code>false</code></h3><p>修改<code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_theme:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h3 id="下載和修改CSS文件"><a href="#下載和修改CSS文件" class="headerlink" title="下載和修改CSS文件"></a>下載和修改CSS文件</h3><p>在<a href="https://github.com/highlightjs/highlight.js/blob/master/src/styles/kimbie.dark.css">Github</a>上找到這個CSS</p><p>在Hexo的根目錄<code>source</code>文件夾下創立一個<code>self</code>文件夾，在<code>self</code>文件夾創建一個<code>Kimbiedark.css</code>文件</p><p>把Github上<code>Kimbie dark</code>的CSS代碼複製到<code>Kimbiedark.css</code>去。（你也可以直接從Github上下載這個CSS）</p><p><strong>Kimbiedark.css</strong>代碼如下</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    Name:     Kimbie (dark)</span></span><br><span class="line"><span class="comment">    Author:   Jan T. Sott</span></span><br><span class="line"><span class="comment">    License:  Creative Commons Attribution-ShareAlike 4.0 Unported License</span></span><br><span class="line"><span class="comment">    URL:      https://github.com/idleberg/Kimbie-highlight.js</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Comment */</span></span><br><span class="line"><span class="selector-class">.hljs-comment</span>,</span><br><span class="line"><span class="selector-class">.hljs-quote</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#d6baad</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Red */</span></span><br><span class="line"><span class="selector-class">.hljs-variable</span>,</span><br><span class="line"><span class="selector-class">.hljs-template-variable</span>,</span><br><span class="line"><span class="selector-class">.hljs-tag</span>,</span><br><span class="line"><span class="selector-class">.hljs-name</span>,</span><br><span class="line"><span class="selector-class">.hljs-selector-id</span>,</span><br><span class="line"><span class="selector-class">.hljs-selector-class</span>,</span><br><span class="line"><span class="selector-class">.hljs-regexp</span>,</span><br><span class="line"><span class="selector-class">.hljs-meta</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#dc3958</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Orange */</span></span><br><span class="line"><span class="selector-class">.hljs-number</span>,</span><br><span class="line"><span class="selector-class">.hljs-built_in</span>,</span><br><span class="line"><span class="selector-class">.hljs-builtin-name</span>,</span><br><span class="line"><span class="selector-class">.hljs-literal</span>,</span><br><span class="line"><span class="selector-class">.hljs-type</span>,</span><br><span class="line"><span class="selector-class">.hljs-params</span>,</span><br><span class="line"><span class="selector-class">.hljs-deletion</span>,</span><br><span class="line"><span class="selector-class">.hljs-link</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f79a32</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Yellow */</span></span><br><span class="line"><span class="selector-class">.hljs-title</span>,</span><br><span class="line"><span class="selector-class">.hljs-section</span>,</span><br><span class="line"><span class="selector-class">.hljs-attribute</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f06431</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Green */</span></span><br><span class="line"><span class="selector-class">.hljs-string</span>,</span><br><span class="line"><span class="selector-class">.hljs-symbol</span>,</span><br><span class="line"><span class="selector-class">.hljs-bullet</span>,</span><br><span class="line"><span class="selector-class">.hljs-addition</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#889b4a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Purple */</span></span><br><span class="line"><span class="selector-class">.hljs-keyword</span>,</span><br><span class="line"><span class="selector-class">.hljs-selector-tag</span>,</span><br><span class="line"><span class="selector-class">.hljs-function</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#98676a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hljs</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">overflow-x</span>: auto;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#221a0f</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#d3af86</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.5em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hljs-emphasis</span> &#123;</span><br><span class="line">  <span class="attribute">font-style</span>: italic;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hljs-strong</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改這個CSS文件為</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    Name:     Kimbie (dark)</span></span><br><span class="line"><span class="comment">    Author:   Jan T. Sott</span></span><br><span class="line"><span class="comment">    License:  Creative Commons Attribution-ShareAlike 4.0 Unported License</span></span><br><span class="line"><span class="comment">    URL:      https://github.com/idleberg/Kimbie-highlight.js</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 新添加的內容</span></span><br><span class="line"><span class="comment">  ------------------------------------- </span></span><br><span class="line"><span class="comment">  --hl-color                  代碼框字體顔色 【必須】 (把下面.hljs的 color複製到這裏來)</span></span><br><span class="line"><span class="comment">  --hl-bg                     代碼框背景色 【必須】 (把下面.hljs的 background複製到這裏來)</span></span><br><span class="line"><span class="comment">  --hltools-bg: #321a0f       代碼框頂部工具欄背景色 【可選】(如果你關掉了 copy、lang 和 shrink,可不用配置這個）</span></span><br><span class="line"><span class="comment">  --hltools-color: #fff       代碼框頂部工具欄字體顔色 【可選】(如果你關掉了 copy、lang 和 shrink,可不用配置這個）</span></span><br><span class="line"><span class="comment">  --hlnumber-bg: #221a0f      代碼框行數背景色 【可選】(如果已經關掉 line_number,可以不用配置這個)</span></span><br><span class="line"><span class="comment">  --hlnumber-color: #fff      代碼框行數字體顔色 【可選】 (如果已經關掉 line_number,可以不用配置這個)</span></span><br><span class="line"><span class="comment">  --hlscrollbar-bg: #d3af86   代碼框滾動條顔色 【可選】（默認為主題主顔色）</span></span><br><span class="line"><span class="comment">  --hlexpand-bg: #d3af86      代碼框底部展開背景色 【可選】(如果已經關掉 highlight_height_limit,可以不用配置這個)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attr">--hl-color</span>: <span class="number">#d3af86</span>;</span><br><span class="line">  <span class="attr">--hl-bg</span>: <span class="number">#221a0f</span>;</span><br><span class="line">  <span class="attr">--hltools-bg</span>: <span class="number">#321a0f</span>;</span><br><span class="line">  <span class="attr">--hltools-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attr">--hlnumber-bg</span>: <span class="number">#221a0f</span>;</span><br><span class="line">  <span class="attr">--hlnumber-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attr">--hlscrollbar-bg</span>: <span class="number">#d3af86</span>;</span><br><span class="line">  <span class="attr">--hlexpand-bg</span>: <span class="number">#d3af86</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Comment */</span></span><br><span class="line"><span class="selector-class">.hljs-comment</span>,</span><br><span class="line"><span class="selector-class">.hljs-quote</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#d6baad</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Red */</span></span><br><span class="line"><span class="selector-class">.hljs-variable</span>,</span><br><span class="line"><span class="selector-class">.hljs-template-variable</span>,</span><br><span class="line"><span class="selector-class">.hljs-tag</span>,</span><br><span class="line"><span class="selector-class">.hljs-name</span>,</span><br><span class="line"><span class="selector-class">.hljs-selector-id</span>,</span><br><span class="line"><span class="selector-class">.hljs-selector-class</span>,</span><br><span class="line"><span class="selector-class">.hljs-regexp</span>,</span><br><span class="line"><span class="selector-class">.hljs-meta</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#dc3958</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Orange */</span></span><br><span class="line"><span class="selector-class">.hljs-number</span>,</span><br><span class="line"><span class="selector-class">.hljs-built_in</span>,</span><br><span class="line"><span class="selector-class">.hljs-builtin-name</span>,</span><br><span class="line"><span class="selector-class">.hljs-literal</span>,</span><br><span class="line"><span class="selector-class">.hljs-type</span>,</span><br><span class="line"><span class="selector-class">.hljs-params</span>,</span><br><span class="line"><span class="selector-class">.hljs-deletion</span>,</span><br><span class="line"><span class="selector-class">.hljs-link</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f79a32</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Yellow */</span></span><br><span class="line"><span class="selector-class">.hljs-title</span>,</span><br><span class="line"><span class="selector-class">.hljs-section</span>,</span><br><span class="line"><span class="selector-class">.hljs-attribute</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f06431</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Green */</span></span><br><span class="line"><span class="selector-class">.hljs-string</span>,</span><br><span class="line"><span class="selector-class">.hljs-symbol</span>,</span><br><span class="line"><span class="selector-class">.hljs-bullet</span>,</span><br><span class="line"><span class="selector-class">.hljs-addition</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#889b4a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Purple */</span></span><br><span class="line"><span class="selector-class">.hljs-keyword</span>,</span><br><span class="line"><span class="selector-class">.hljs-selector-tag</span>,</span><br><span class="line"><span class="selector-class">.hljs-function</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#98676a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 更改的內容 把.hljs改為 #article-container figure.highlight .hljs *、</span></span><br><span class="line"><span class="comment">/* ------------------------------------- */</span></span><br><span class="line"><span class="selector-id">#article-container</span> <span class="selector-tag">figure</span><span class="selector-class">.highlight</span> <span class="selector-class">.hljs</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">overflow-x</span>: auto;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#221a0f</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#d3af86</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.5em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hljs-emphasis</span> &#123;</span><br><span class="line">  <span class="attribute">font-style</span>: italic;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hljs-strong</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="引入文件"><a href="#引入文件" class="headerlink" title="引入文件"></a>引入文件</h3><p>修改<code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/self/Kimbiedark.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><h3 id="運行Hexo"><a href="#運行Hexo" class="headerlink" title="運行Hexo"></a>運行Hexo</h3><p>運行Hexo後，應該可以看到修改的效果</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-highlight-self-css.png" alt=""></p><h2 id="Prismjs"><a href="#Prismjs" class="headerlink" title="Prismjs"></a>Prismjs</h2><p>以使用<code>prism-duotone-light</code>主題配色為例子</p><h3 id="配置highlight-theme為false-1"><a href="#配置highlight-theme為false-1" class="headerlink" title="配置highlight_theme為false"></a>配置<code>highlight_theme</code>為<code>false</code></h3><p>修改<code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_theme:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h3 id="下載和修改CSS文件-1"><a href="#下載和修改CSS文件-1" class="headerlink" title="下載和修改CSS文件"></a>下載和修改CSS文件</h3><p>在<a href="https://github.com/PrismJS/prism-themes/blob/master/themes/prism-duotone-light.css">Github</a>上找到這個CSS</p><p>在 Hexo 的根目錄<code>source</code>文件夾下創立一個<code>self</code>文件夾，在<code>self</code>文件夾創建一個<code>duotone.css</code>文件</p><p>把Github上<code>prism-duotone-light</code>的 CSS 代碼複製到<code>`duotone.css</code>去。（你也可以直接從Github上下載這個CSS）</p><p><strong>prism-duotone-light</strong>代碼如下</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Name:   Duotone Light</span></span><br><span class="line"><span class="comment">Author: Simurai, adapted from DuoTone themes for Atom (http://simurai.com/projects/2016/01/01/duotone-themes)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Conversion: Bram de Haan (http://atelierbram.github.io/Base2Tone-prism/output/prism/prism-base2tone-morning-light.css)</span></span><br><span class="line"><span class="comment">Generated with Base16 Builder (https://github.com/base16-builder/base16-builder)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span>,</span><br><span class="line">pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> &#123;</span><br><span class="line"><span class="attribute">font-family</span>: Consolas, Menlo, Monaco, <span class="string">&quot;Andale Mono WT&quot;</span>, <span class="string">&quot;Andale Mono&quot;</span>, <span class="string">&quot;Lucida Console&quot;</span>, <span class="string">&quot;Lucida Sans Typewriter&quot;</span>, <span class="string">&quot;DejaVu Sans Mono&quot;</span>, <span class="string">&quot;Bitstream Vera Sans Mono&quot;</span>, <span class="string">&quot;Liberation Mono&quot;</span>, <span class="string">&quot;Nimbus Mono L&quot;</span>, <span class="string">&quot;Courier New&quot;</span>, Courier, monospace;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">1.375</span>;</span><br><span class="line"><span class="attribute">direction</span>: ltr;</span><br><span class="line"><span class="attribute">text-align</span>: left;</span><br><span class="line"><span class="attribute">white-space</span>: pre;</span><br><span class="line"><span class="attribute">word-spacing</span>: normal;</span><br><span class="line"><span class="attribute">word-break</span>: normal;</span><br><span class="line"></span><br><span class="line">-moz-<span class="attribute">tab-size</span>: <span class="number">4</span>;</span><br><span class="line">-o-<span class="attribute">tab-size</span>: <span class="number">4</span>;</span><br><span class="line"><span class="attribute">tab-size</span>: <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">-webkit-<span class="attribute">hyphens</span>: none;</span><br><span class="line">-moz-<span class="attribute">hyphens</span>: none;</span><br><span class="line">-ms-<span class="attribute">hyphens</span>: none;</span><br><span class="line"><span class="attribute">hyphens</span>: none;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">#faf8f5</span>;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#728fcb</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pre &gt; <span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> &#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">1em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span>::-moz-selection, pre[class*=<span class="string">&quot;language-&quot;</span>] ::-moz-selection,</span><br><span class="line">code[class*=<span class="string">&quot;language-&quot;</span>]::-moz-selection, code[class*=<span class="string">&quot;language-&quot;</span>] ::-moz-selection &#123;</span><br><span class="line"><span class="attribute">text-shadow</span>: none;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">#faf8f5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span><span class="selector-pseudo">::selection</span>, pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> <span class="selector-pseudo">::selection</span>,</span><br><span class="line"><span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span><span class="selector-pseudo">::selection</span>, <span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> <span class="selector-pseudo">::selection</span> &#123;</span><br><span class="line"><span class="attribute">text-shadow</span>: none;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">#faf8f5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Code blocks */</span></span><br><span class="line">pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> &#123;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">1em</span>;</span><br><span class="line"><span class="attribute">margin</span>: .<span class="number">5em</span> <span class="number">0</span>;</span><br><span class="line"><span class="attribute">overflow</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Inline code */</span></span><br><span class="line"><span class="selector-pseudo">:not</span>(pre) &gt; <span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> &#123;</span><br><span class="line"><span class="attribute">padding</span>: .<span class="number">1em</span>;</span><br><span class="line"><span class="attribute">border-radius</span>: .<span class="number">3em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.comment</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.prolog</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.doctype</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.cdata</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#b6ad9a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.punctuation</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#b6ad9a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.namespace</span> &#123;</span><br><span class="line"><span class="attribute">opacity</span>: .<span class="number">7</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.tag</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.operator</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.number</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#063289</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.property</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.function</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#b29762</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.tag-id</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.selector</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.atrule-id</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#2d2006</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">code</span><span class="selector-class">.language-javascript</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.attr-name</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#896724</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">code</span><span class="selector-class">.language-css</span>,</span><br><span class="line"><span class="selector-tag">code</span><span class="selector-class">.language-scss</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.boolean</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.string</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.entity</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.url</span>,</span><br><span class="line"><span class="selector-class">.language-css</span> <span class="selector-class">.token</span><span class="selector-class">.string</span>,</span><br><span class="line"><span class="selector-class">.language-scss</span> <span class="selector-class">.token</span><span class="selector-class">.string</span>,</span><br><span class="line"><span class="selector-class">.style</span> <span class="selector-class">.token</span><span class="selector-class">.string</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.attr-value</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.keyword</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.control</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.directive</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.unit</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.statement</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.regex</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.atrule</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#728fcb</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.placeholder</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.variable</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#93abdc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.deleted</span> &#123;</span><br><span class="line"><span class="attribute">text-decoration</span>: line-through;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.inserted</span> &#123;</span><br><span class="line"><span class="attribute">border-bottom</span>: <span class="number">1px</span> dotted <span class="number">#2d2006</span>;</span><br><span class="line"><span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.italic</span> &#123;</span><br><span class="line"><span class="attribute">font-style</span>: italic;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.important</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.bold</span> &#123;</span><br><span class="line"><span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.important</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#896724</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.entity</span> &#123;</span><br><span class="line"><span class="attribute">cursor</span>: help;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pre &gt; <span class="selector-tag">code</span><span class="selector-class">.highlight</span> &#123;</span><br><span class="line"><span class="attribute">outline</span>: .<span class="number">4em</span> solid <span class="number">#896724</span>;</span><br><span class="line"><span class="attribute">outline-offset</span>: .<span class="number">4em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* overrides color-values for the Line Numbers plugin</span></span><br><span class="line"><span class="comment"> * http://prismjs.com/plugins/line-numbers/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="selector-class">.line-numbers</span> <span class="selector-class">.line-numbers-rows</span> &#123;</span><br><span class="line"><span class="attribute">border-right-color</span>: <span class="number">#ece8de</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.line-numbers-rows</span> &gt; <span class="selector-tag">span</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#cdc4b1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* overrides color-values for the Line Highlight plugin</span></span><br><span class="line"><span class="comment"> * http://prismjs.com/plugins/line-highlight/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="selector-class">.line-highlight</span> &#123;</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0.2</span>);</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(left, <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0.2</span>) <span class="number">70%</span>, <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0</span>));</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to right, <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0.2</span>) <span class="number">70%</span>, <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改這個CSS文件為</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 新添加的內容</span></span><br><span class="line"><span class="comment">  ------------------------------------- </span></span><br><span class="line"><span class="comment">  --hl-color                  代碼框字體顔色 【必須】 (把下面 pre[class*=&quot;language-&quot;]的 color 複製到這裏來)</span></span><br><span class="line"><span class="comment">  --hl-bg                     代碼框背景色 【必須】 (把下面 pre[class*=&quot;language-&quot;]的 background複製到這裏來)</span></span><br><span class="line"><span class="comment">  --hltools-bg: #321a0f       代碼框頂部工具欄背景色 【可選】(如果你關掉了 copy、lang 和 shrink,可不用配置這個）</span></span><br><span class="line"><span class="comment">  --hltools-color: #fff       代碼框頂部工具欄字體顔色 【可選】(如果你關掉了 copy、lang 和 shrink,可不用配置這個）</span></span><br><span class="line"><span class="comment">  --hlnumber-bg: #221a0f      代碼框行數背景色 【可選】(如果已經關掉 line_number,可以不用配置這個)</span></span><br><span class="line"><span class="comment">  --hlnumber-color: #fff      代碼框行數字體顔色 【可選】 (如果已經關掉 line_number,可以不用配置這個)</span></span><br><span class="line"><span class="comment">  --hlscrollbar-bg: #d3af86   代碼框滾動條顔色 【可選】（默認為主題主顔色）</span></span><br><span class="line"><span class="comment">  --hlexpand-bg: #d3af86      代碼框底部展開背景色 【可選】(如果已經關掉 highlight_height_limit,可以不用配置這個)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attr">--hl-color</span>: <span class="number">#728fcb</span>;</span><br><span class="line">  <span class="attr">--hl-bg</span>: <span class="number">#faf8f5</span>;</span><br><span class="line">  <span class="attr">--hltools-bg</span>: xxxxxxx;</span><br><span class="line">  <span class="attr">--hltools-color</span>: xxxxxxx;</span><br><span class="line">  <span class="attr">--hlnumber-bg</span>: xxxxxxx;</span><br><span class="line">  <span class="attr">--hlnumber-color</span>: xxxxxxxx;</span><br><span class="line">  <span class="attr">--hlscrollbar-bg</span>: xxxxx;</span><br><span class="line">  <span class="attr">--hlexpand-bg</span>: xxxxxxx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ------------------------------------- */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 這些可以刪除（可留着，如果有衝突，請刪除） */</span></span><br><span class="line"><span class="comment">/* ------------------------------------- */</span></span><br><span class="line"><span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span>,</span><br><span class="line">pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> &#123;</span><br><span class="line"><span class="attribute">font-family</span>: Consolas, Menlo, Monaco, <span class="string">&quot;Andale Mono WT&quot;</span>, <span class="string">&quot;Andale Mono&quot;</span>, <span class="string">&quot;Lucida Console&quot;</span>, <span class="string">&quot;Lucida Sans Typewriter&quot;</span>, <span class="string">&quot;DejaVu Sans Mono&quot;</span>, <span class="string">&quot;Bitstream Vera Sans Mono&quot;</span>, <span class="string">&quot;Liberation Mono&quot;</span>, <span class="string">&quot;Nimbus Mono L&quot;</span>, <span class="string">&quot;Courier New&quot;</span>, Courier, monospace;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">1.375</span>;</span><br><span class="line"><span class="attribute">direction</span>: ltr;</span><br><span class="line"><span class="attribute">text-align</span>: left;</span><br><span class="line"><span class="attribute">white-space</span>: pre;</span><br><span class="line"><span class="attribute">word-spacing</span>: normal;</span><br><span class="line"><span class="attribute">word-break</span>: normal;</span><br><span class="line"></span><br><span class="line">-moz-<span class="attribute">tab-size</span>: <span class="number">4</span>;</span><br><span class="line">-o-<span class="attribute">tab-size</span>: <span class="number">4</span>;</span><br><span class="line"><span class="attribute">tab-size</span>: <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">-webkit-<span class="attribute">hyphens</span>: none;</span><br><span class="line">-moz-<span class="attribute">hyphens</span>: none;</span><br><span class="line">-ms-<span class="attribute">hyphens</span>: none;</span><br><span class="line"><span class="attribute">hyphens</span>: none;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">#faf8f5</span>;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#728fcb</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pre &gt; <span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> &#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">1em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span>::-moz-selection, pre[class*=<span class="string">&quot;language-&quot;</span>] ::-moz-selection,</span><br><span class="line">code[class*=<span class="string">&quot;language-&quot;</span>]::-moz-selection, code[class*=<span class="string">&quot;language-&quot;</span>] ::-moz-selection &#123;</span><br><span class="line"><span class="attribute">text-shadow</span>: none;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">#faf8f5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span><span class="selector-pseudo">::selection</span>, pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> <span class="selector-pseudo">::selection</span>,</span><br><span class="line"><span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span><span class="selector-pseudo">::selection</span>, <span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> <span class="selector-pseudo">::selection</span> &#123;</span><br><span class="line"><span class="attribute">text-shadow</span>: none;</span><br><span class="line"><span class="attribute">background</span>: <span class="number">#faf8f5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Code blocks */</span></span><br><span class="line">pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> &#123;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">1em</span>;</span><br><span class="line"><span class="attribute">margin</span>: .<span class="number">5em</span> <span class="number">0</span>;</span><br><span class="line"><span class="attribute">overflow</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Inline code */</span></span><br><span class="line"><span class="selector-pseudo">:not</span>(pre) &gt; <span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> &#123;</span><br><span class="line"><span class="attribute">padding</span>: .<span class="number">1em</span>;</span><br><span class="line"><span class="attribute">border-radius</span>: .<span class="number">3em</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* ------------------------------------- */</span></span><br><span class="line"><span class="comment">/* 到這裏為止，可以刪除 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.comment</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.prolog</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.doctype</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.cdata</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#b6ad9a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.punctuation</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#b6ad9a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.namespace</span> &#123;</span><br><span class="line"><span class="attribute">opacity</span>: .<span class="number">7</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.tag</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.operator</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.number</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#063289</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.property</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.function</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#b29762</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.tag-id</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.selector</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.atrule-id</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#2d2006</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">code</span><span class="selector-class">.language-javascript</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.attr-name</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#896724</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">code</span><span class="selector-class">.language-css</span>,</span><br><span class="line"><span class="selector-tag">code</span><span class="selector-class">.language-scss</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.boolean</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.string</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.entity</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.url</span>,</span><br><span class="line"><span class="selector-class">.language-css</span> <span class="selector-class">.token</span><span class="selector-class">.string</span>,</span><br><span class="line"><span class="selector-class">.language-scss</span> <span class="selector-class">.token</span><span class="selector-class">.string</span>,</span><br><span class="line"><span class="selector-class">.style</span> <span class="selector-class">.token</span><span class="selector-class">.string</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.attr-value</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.keyword</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.control</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.directive</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.unit</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.statement</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.regex</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.atrule</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#728fcb</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.placeholder</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.variable</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#93abdc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.deleted</span> &#123;</span><br><span class="line"><span class="attribute">text-decoration</span>: line-through;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.inserted</span> &#123;</span><br><span class="line"><span class="attribute">border-bottom</span>: <span class="number">1px</span> dotted <span class="number">#2d2006</span>;</span><br><span class="line"><span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.italic</span> &#123;</span><br><span class="line"><span class="attribute">font-style</span>: italic;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.important</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.bold</span> &#123;</span><br><span class="line"><span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.important</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#896724</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.entity</span> &#123;</span><br><span class="line"><span class="attribute">cursor</span>: help;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pre &gt; <span class="selector-tag">code</span><span class="selector-class">.highlight</span> &#123;</span><br><span class="line"><span class="attribute">outline</span>: .<span class="number">4em</span> solid <span class="number">#896724</span>;</span><br><span class="line"><span class="attribute">outline-offset</span>: .<span class="number">4em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* overrides color-values for the Line Numbers plugin</span></span><br><span class="line"><span class="comment"> * http://prismjs.com/plugins/line-numbers/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="selector-class">.line-numbers</span> <span class="selector-class">.line-numbers-rows</span> &#123;</span><br><span class="line"><span class="attribute">border-right-color</span>: <span class="number">#ece8de</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.line-numbers-rows</span> &gt; <span class="selector-tag">span</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#cdc4b1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* overrides color-values for the Line Highlight plugin</span></span><br><span class="line"><span class="comment"> * http://prismjs.com/plugins/line-highlight/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="selector-class">.line-highlight</span> &#123;</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0.2</span>);</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(left, <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0.2</span>) <span class="number">70%</span>, <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0</span>));</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to right, <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0.2</span>) <span class="number">70%</span>, <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="引入文件-1"><a href="#引入文件-1" class="headerlink" title="引入文件"></a>引入文件</h3><p>修改<code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/self/duotone.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><h3 id="運行Hexo-1"><a href="#運行Hexo-1" class="headerlink" title="運行Hexo"></a>運行Hexo</h3><p>運行Hexo後，應該可以看到修改的效果</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-custom-code-color-prismjs.png" alt="image-20200831000324474"></p>]]></content>
      
      
      <categories>
          
          <category> 進階教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
            <tag> 主題 </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>这一个半月，我干了什么</title>
      <link href="/posts/cc675020/"/>
      <url>/posts/cc675020/</url>
      
        <content type="html"><![CDATA[<p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/wjlkdhxs.jpg" alt=""></p><p>啊，期中考试终于考完了，现在心里想的都是司马脸，<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/huaji.gif" alt=""></p><p>距离上一次更新已经将近1个半月了，赶在5月小尾巴发一篇博文。当然，这个月维护还是做到了，只不过太忙没更新而已。</p><p>过来扯扯这个月发生了什么。</p><h1 id="计算机方面"><a href="#计算机方面" class="headerlink" title="计算机方面"></a>计算机方面</h1><h2 id="网站方面"><a href="#网站方面" class="headerlink" title="网站方面"></a>网站方面</h2><h3 id="VPS"><a href="#VPS" class="headerlink" title="VPS"></a>VPS</h3><p>入手了一台德国VPS，还得感谢这位老兄：</p><p><a href="https://blog.qwqdanchun.cn/archives/1001">簞純-EUserv 德国永久免费VPS申请</a></p><p>试了一下，性能略差，连IPV4都没有，就当是学习吧，现在就是拿来玩玩的，毕竟我大多数情况下基本是ServerLess。</p><p>以后打算全站迁移到一台VPS上，当然习惯用Hexo了，毕竟Hexo-Admin还是很给力的。</p><h3 id="图床："><a href="#图床：" class="headerlink" title="图床："></a>图床：</h3><p>我当场裂开。</p><p>之前全放在Github上，但是，但是这会导致多线程并发是Worker抛出异常，速度还很慢。而且很大，Github那么恐怖的大小：<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/206.jpg" alt=""></p><p>三个星期前开始迁移，刚开始采用了GoogleDrive+<br>GDIndex，上学去的时候，加载速度还不错，结果一到学校，自己打开，爆一大堆404.</p><p>Workers自然也出大问题<br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-205.png" alt=""></p><p>后来了解到，谷歌网盘在每每输出一个文件，都会来一次销魂的杀毒，一张10kb的图片，杀毒将近10s，Worker超时30s直接返回404！！！？？？，我当时心里就开始表演天皇meta的showtime了。<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/喷血.png" alt=""></p><p>所以后来又采用腾讯云免费SCF额度+OneDrive那可怜的5GB制作图床，好歹也能正常加载，但是OMp的工作原理和GI不一样，GoogleDrive在国内那是不可访问的，所以最终还是采用了反向代理，但是OneDrive是可以滴，所以OMp采用的是301跳转。燃鹅，直连速度和延迟相当的感人，在多线程并发时经常超时。<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/tx.png" alt=""></p><p>当时整个人都裂开了。</p><p>所以，最终解决办法就是，氪金！！！！！！</p><p>腾讯云COS（相当于阿里云OSS）+CDN，当然因为没备案所以放在Hongkong，但是腾讯云有个暗坑，COS绑定自定义域名<del>md</del>居然不给直接开SSL，非得要套层CDN才行，这不是明摆着坑钱么。计算下来，每天平均支出0.03￥.</p><p>肉疼。<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/s.png" alt=""></p><p>好在腾讯COS也有客户端，上传文件至少没那么麻烦。</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/207.jpg" alt=""></p><p>不过话说回来，最近香港局势确实很不稳定，我现在根本无法直连Hongkong的COSBucket，CDN套就套吧，只不过神奇地绕道美国都是什么奇葩玩意，害得我只能A到日本，出口居然是Amazon。</p><h3 id="评论系统"><a href="#评论系统" class="headerlink" title="评论系统"></a>评论系统</h3><p>又是一个当场炸裂的东西。</p><p>Gitalk本身链接api.github.com就是一个相当蛋疼的事情。</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/205.jpg" alt=""></p><p>我也尝试着做过类似于DiqusJS的反向代理的尝试，可是到最后一步Github回调地址又给我强制跳到api.github.com，我当时人都傻了。最后实在头疼，换成了Valine。当然找了个魔改版本，看起来还不错。<del>【这一次再也不会造成30天无访问自动归档这种奇异的事情了】</del></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/208.jpg" alt=""></p><p>两个魔改后的JS地址</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://npm.elemecdn.com/chenyfan-oss@1.0.0/js/av-min.js</span><br><span class="line">https://npm.elemecdn.com/chenyfan-oss@1.0.0/js/valine.min.js</span><br></pre></td></tr></table></figure><h2 id="编程方面"><a href="#编程方面" class="headerlink" title="编程方面"></a>编程方面</h2><p>艹，VB轮到我这一届居然不考，<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/qgbf.png" alt="">，害得我只能硬啃C++。考试还行，就那附加题做不出来，一道高精乘法，居然忘记了<code>strlen()</code>这个函数，当时想撞墙的心态都有了。</p><h1 id="学习方面"><a href="#学习方面" class="headerlink" title="学习方面"></a>学习方面</h1><p>考完了，我完了。</p><p>数学150分扣46分是什么鬼？？？？？？？语文五道选择题错三道又是什么鬼？？？？？？？？</p><p><span class="heimu">还好物理只扣10分，化学一分没扣，计算机也只是附加题最后一道不会写而已</span></p><p>欸欸欸欸欸欸欸，感觉我要垫底。</p><h1 id="后言"><a href="#后言" class="headerlink" title="后言"></a>后言</h1><p>好好学习，天天向上！</p><p>好了好了，继续潜水<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/无奈.png" alt=""></p><p>滑稽</p>]]></content>
      
      
      <categories>
          
          <category> 随心记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日常 </tag>
            
            <tag> 总结 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly 打賞</title>
      <link href="/posts/6ad51b4/"/>
      <url>/posts/6ad51b4/</url>
      
        <content type="html"><![CDATA[<div class="note orange icon-padding flat"><i class="note-icon fas fa-mug-hot"></i><p>非常感謝以下網友的打賞</p><p>更新於 2022 - 08 - 29</p></div><div class="tabs" id="coffee"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#coffee-1"><i class="fab fa-weixin"></i>微信</button></li><li class="tab"><button type="button" data-href="#coffee-2"><i class="fab fa-alipay"></i>支付寶</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="coffee-1"><div class="table-container"><table><thead><tr><th>名字</th><th>金額</th></tr></thead><tbody><tr><td>B*X</td><td>2.33</td></tr><tr><td>A*.</td><td>0.01</td></tr><tr><td>*虎</td><td>3</td></tr><tr><td>*、</td><td>5</td></tr><tr><td>*林</td><td>3.75</td></tr><tr><td>*雪</td><td>10</td></tr><tr><td>O*r</td><td>15</td></tr><tr><td>*泥</td><td>0.01</td></tr><tr><td>*嗎</td><td>5</td></tr><tr><td>*鋒</td><td>10</td></tr><tr><td>*強</td><td>5</td></tr><tr><td>K*n</td><td>6.66</td></tr><tr><td>*1</td><td>2.22</td></tr><tr><td>圖*_</td><td>5</td></tr><tr><td>B*e</td><td>6.66</td></tr><tr><td>n*l</td><td>6.66</td></tr><tr><td>*仔</td><td>5</td></tr><tr><td>M*5</td><td>2</td></tr><tr><td>w*r</td><td>18.88</td></tr><tr><td>*龍</td><td>1.6</td></tr><tr><td>*一</td><td>5</td></tr><tr><td>*晨</td><td>6.66</td></tr><tr><td>*隨</td><td>8.88</td></tr><tr><td>*忘</td><td>10</td></tr><tr><td>*想</td><td>6.66</td></tr><tr><td>*喜</td><td>2.5</td></tr><tr><td>*喜</td><td>2.5</td></tr><tr><td>*傑</td><td>8.88</td></tr><tr><td>*雨</td><td>10</td></tr><tr><td>T*r</td><td>10</td></tr><tr><td>T*n</td><td>2.88</td></tr><tr><td>s*n</td><td>2</td></tr><tr><td>*o</td><td>9.99</td></tr><tr><td>m*o</td><td>2.5</td></tr><tr><td>張*i</td><td>0.3</td></tr><tr><td>*斌</td><td>2.88</td></tr><tr><td>q*n</td><td>20</td></tr><tr><td>*唯</td><td>8.88</td></tr><tr><td>H*n</td><td>5</td></tr><tr><td>I*U</td><td>3.65</td></tr><tr><td>*白</td><td>6</td></tr><tr><td>*豬</td><td>6.66</td></tr><tr><td>h*i</td><td>10</td></tr><tr><td>B*g</td><td>5</td></tr><tr><td>J*R</td><td>3</td></tr><tr><td>*夜</td><td>6.66</td></tr><tr><td>等*.</td><td>12.5</td></tr><tr><td>n*l</td><td>1.68</td></tr><tr><td>M*.</td><td>38</td></tr><tr><td>R*n</td><td>1.68</td></tr><tr><td>W*u</td><td>4.91</td></tr><tr><td>k*n</td><td>58.8</td></tr><tr><td>*嘔</td><td>88.8</td></tr><tr><td>*沙</td><td>5</td></tr><tr><td>*x</td><td>1</td></tr><tr><td>*生</td><td>0.01</td></tr><tr><td>D*n</td><td>6.66</td></tr><tr><td>*。</td><td>0.01</td></tr><tr><td>*探</td><td>5.20</td></tr><tr><td>*宇</td><td>5</td></tr><tr><td>M*o</td><td>10</td></tr><tr><td>*碎</td><td>6.66</td></tr><tr><td>*鱼</td><td>8.88</td></tr><tr><td>C*.</td><td>6.60</td></tr><tr><td>*夕</td><td>6.66</td></tr><tr><td>R*r</td><td>6.66</td></tr><tr><td>*</td><td>5</td></tr><tr><td>*心</td><td>1</td></tr></tbody></table></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="coffee-2"><div class="table-container"><table><thead><tr><th>名字</th><th>金額</th></tr></thead><tbody><tr><td>iMIGw0</td><td>10</td></tr><tr><td>百事可樂</td><td>10</td></tr><tr><td>KT</td><td>5</td></tr><tr><td>JVxie</td><td>8.88</td></tr><tr><td>Coolkk</td><td>10</td></tr><tr><td>Sirius</td><td>10</td></tr><tr><td>惴繞</td><td>1.11</td></tr><tr><td>Jiang慢慢</td><td>8.88</td></tr><tr><td>tjj</td><td>28.88</td></tr><tr><td>無風引漩</td><td>10</td></tr><tr><td>忘我楊</td><td>50</td></tr><tr><td>小虎</td><td>10</td></tr><tr><td>無殤雨露</td><td>10</td></tr><tr><td>Rhythm~</td><td>10</td></tr><tr><td>小樣</td><td>36</td></tr><tr><td>SunnyWS</td><td>20</td></tr><tr><td>ZFour</td><td>8.88</td></tr><tr><td>JeM_緘默</td><td>0.14</td></tr><tr><td>小張</td><td>5</td></tr><tr><td>書生</td><td>6.88</td></tr><tr><td>王青陽</td><td>5</td></tr><tr><td>趙碧寒</td><td>10</td></tr><tr><td>對好的就這樣</td><td>6</td></tr><tr><td>雨辰</td><td>5</td></tr><tr><td>北風</td><td>9.9</td></tr><tr><td>LeDao</td><td>10</td></tr></tbody></table></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
      
      
      <categories>
          
          <category> Thx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> butterfly </tag>
            
            <tag> 打賞 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly 安裝文檔(七) 更新日誌</title>
      <link href="/posts/198a4240/"/>
      <url>/posts/198a4240/</url>
      
        <content type="html"><![CDATA[<div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>📖  本教程更新於 2022 年 08 月 18 日，教程的內容針對最新<strong>穩定版</strong>而更新（如果你是舊版，教程會有些出入，請留意）</p><p>🦋  Butterfly 已經更新到 <a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/4.4.0">4.4.0</a></p></div><div class="note green icon-padding flat"><i class="note-icon fas fa-rocket"></i><p> 📚  文檔目錄</p><p><a href="/posts/21cfbf15/" title="🚀 快速開始">🚀 快速開始</a> - <a href="/posts/dc584b87/" title="📑 主題頁面">📑 主題頁面</a> - <a href="/posts/4aa8abbe/" title="🛠 主題配置-1">🛠 主題配置-1</a> - <a href="/posts/ceeb73f/" title="⚔️ 主題配置-2">⚔️ 主題配置-2</a> - <a href="/posts/98d20436/" title="❓ 主題問答">❓ 主題問答</a> - <a href="/posts/4073eda/" title="⚡️ 進階教程">⚡️ 進階教程</a> - <a href="/posts/198a4240/" title="✨ 更新日誌">✨ 更新日誌</a> - <a href="/posts/6ad51b4/" title="🤞 打賞">🤞 打賞</a></p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-magic"></i><p>你可以通過右下角的 <strong>簡</strong> 按鈕切換為簡體顯示 </p></div><hr><details class="toggle" ><summary class="toggle-button" style="">4.4.0 (2022/08/18)</summary><div class="toggle-content"><h2 id="4-4-0-2022-08-18"><a href="#4-4-0-2022-08-18" class="headerlink" title="4.4.0 (2022/08/18)"></a>4.4.0 (2022/08/18)</h2><h3 id="Breaking-Change"><a href="#Breaking-Change" class="headerlink" title="Breaking Change"></a>Breaking Change</h3><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li><p>在綫聊天新增 facebook 洽談外掛程式 messenger</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+messenger:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  pageID:</span></span><br><span class="line"><span class="addition">+  lang: zh_TW # Language en_US/zh_CN/zh_TW and so on</span></span><br></pre></td></tr></table></figure></li><li><p>添加 artalk 評論功能</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+artalk:</span></span><br><span class="line"><span class="addition">+  server:</span></span><br><span class="line"><span class="addition">+  site:</span></span><br><span class="line"><span class="addition">+  visitor: false</span></span><br><span class="line"><span class="addition">+  option:</span></span><br></pre></td></tr></table></figure></li><li><p>首頁打字效果增加參數配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">subtitle:</span><br><span class="line">...</span><br><span class="line"><span class="addition">+  # Effect Speed Options (打字效果速度參數)</span></span><br><span class="line"><span class="addition">+  startDelay: 300 # time before typing starts in milliseconds</span></span><br><span class="line"><span class="addition">+  typeSpeed: 150 # type speed in milliseconds</span></span><br><span class="line"><span class="addition">+  backSpeed: 50 # backspacing speed in milliseconds</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure></li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復開啟 archor 後， facebook 評論加載不正確的 bug</li><li>修復 facebook 評論數無法加載的 bug</li><li>修復子目錄 hover 沒有圓角的 bug #965</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">4.3.1 (2022/06/27)</summary><div class="toggle-content"><h2 id="4-3-1-2022-06-27"><a href="#4-3-1-2022-06-27" class="headerlink" title="4.3.1 (2022/06/27)"></a>4.3.1 (2022/06/27)</h2><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>當設置 comments 為 false 時，如果設置了顯示評論提供的閲讀數，閲讀數無法顯示的 bug</li><li>findArchivesTitle bug</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">4.3.0 (2022/06/24)</summary><div class="toggle-content"><h2 id="4-3-0-2022-06-24"><a href="#4-3-0-2022-06-24" class="headerlink" title="4.3.0 (2022/06/24)"></a>4.3.0 (2022/06/24)</h2><h3 id="Breaking-Change"><a href="#Breaking-Change" class="headerlink" title="Breaking Change"></a>Breaking Change</h3><ol><li><p>archives 隱藏aside 設置更改</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">aside:</span><br><span class="line"><span class="deletion">-  archive: true</span></span><br><span class="line"><span class="addition">+  display:</span></span><br><span class="line"><span class="addition">+    archive: true</span></span><br></pre></td></tr></table></figure></li><li><p>適配 disqusjs 3.0</p></li></ol><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li><p>子歸檔頁面顯示的文章數量不再顯示總文章數量，而是對應的子歸檔文章數量</p></li><li><p>為一些數據加載增加 loading 顯示</p></li><li><p>tag 和 category 頁面可設置隱藏 aside</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">aside:</span><br><span class="line"><span class="addition">+  display:</span></span><br><span class="line"><span class="addition">+    tag: true</span></span><br><span class="line"><span class="addition">+    category: true</span></span><br></pre></td></tr></table></figure></li><li><p>點擊歸檔日期跳轉到頁面，標題顯示日期而不是‘歸檔’二字</p></li><li><p>適配 katex 升級， 移除 katex copy-tex.css</p></li><li><p>CDN 可一鍵配置 cdnjs</p></li><li><p>CDN 可一鍵配置為 unpkg</p></li><li><p>cdn可設置 version 和 custom format（自定義格式）</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CDN:</span><br><span class="line"><span class="addition">+  version: false</span></span><br><span class="line"><span class="addition">+  custom_format:</span></span><br></pre></td></tr></table></figure></li><li><p>添加Remark42評論系統支持</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# Remark42</span></span><br><span class="line"><span class="addition">+# https://remark42.com/docs/configuration/frontend/</span></span><br><span class="line"><span class="addition">+remark42:</span></span><br><span class="line"><span class="addition">+  host: # Your Host URL</span></span><br><span class="line"><span class="addition">+  siteId: # Your Site ID</span></span><br><span class="line">  option:</span><br></pre></td></tr></table></figure></li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>Algolia搜索沒有結果</li><li>評論系統開啟時 busuanzi 的 page_pv 不顯示</li><li>側邊欄歸檔卡片自定義排序異常</li></ol><h3 id="Improvement"><a href="#Improvement" class="headerlink" title="Improvement"></a>Improvement</h3><ol><li>修改 note 圖標 class 名字，避免第三方圖標覆蓋主題樣式</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">4.2.2 (2022/05/19)</summary><div class="toggle-content"><h2 id="4-2-2-2022-05-19"><a href="#4-2-2-2022-05-19" class="headerlink" title="4.2.2 (2022/05/19)"></a>4.2.2 (2022/05/19)</h2><p>fix: 修復首頁文章 valine 評論數只顯示第一篇的 bug<br>fix: 修復子目錄下，第三方插件本地資源無法加載的 bug<br>fix: 評論系統開啟時 busuanzi 的 page_pv 不顯示的 bug<br>fix: 修復 pjax 下，使用 mermaid 跳轉會重新加載的 bug<br>improvement: 優化twikoo評論，無評論數容器時不調用API獲取 #897</p></div></details><details class="toggle" ><summary class="toggle-button" style="">4.2.1 (2022/05/11)</summary><div class="toggle-content"><h2 id="4-2-1-2022-05-11"><a href="#4-2-1-2022-05-11" class="headerlink" title="4.2.1 (2022/05/11)"></a>4.2.1 (2022/05/11)</h2><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>CDN 配置為 local 時 mathjax 字體缺失的 bug</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">4.2.0 (2022/05/02)</summary><div class="toggle-content"><h2 id="4-2-0-2022-05-02"><a href="#4-2-0-2022-05-02" class="headerlink" title="4.2.0 (2022/05/02)"></a>4.2.0 (2022/05/02)</h2><h3 id="Breaking-Change"><a href="#Breaking-Change" class="headerlink" title="Breaking Change"></a>Breaking Change</h3><ol><li><p>waline 適配 V2</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CDN:</span><br><span class="line"><span class="deletion">-    waline: </span></span><br><span class="line"><span class="addition">+    waline_js:</span></span><br><span class="line"><span class="addition">+    waline_css:</span></span><br></pre></td></tr></table></figure></li><li><p>waline 的 visitor 改為 pageview</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">waline:</span><br><span class="line"><span class="deletion">-  visitor: false</span></span><br><span class="line"><span class="addition">+  pageview: false</span></span><br></pre></td></tr></table></figure></li><li><p>cdn 可一鍵設置 本地文件/可單獨配置主題文件，第三方文件的 cdn</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CDN:</span><br><span class="line"><span class="addition">+  # The CDN provider of internal scripts (主題內部 js 的 cdn 配置)</span></span><br><span class="line"><span class="addition">+  # option: local/jsdelivr</span></span><br><span class="line"><span class="addition">+  # Dev version cannot choose jsdelivr (dev版的主題不能設置為 jsdelivr)</span></span><br><span class="line"><span class="addition">+  internal_provider: local</span></span><br><span class="line"><span class="addition">+  # The CDN provider of third party scripts (第三方 js 的 cdn 配置)</span></span><br><span class="line"><span class="addition">+  # option: local/jsdelivr</span></span><br><span class="line"><span class="addition">+  # when set it to local, you need to install hexo-butterfly-extjs</span></span><br><span class="line"><span class="addition">+  third_party_provider: jsdelivr</span></span><br><span class="line"><span class="addition">+  option:</span></span><br></pre></td></tr></table></figure></li><li><p>移除 utterances，giscus， addtoany， busuanzi 的 cdn 配置</p></li></ol><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li><p>algolia 搜索增加文章內容顯示和高亮</p></li><li><p>搜索內容顯示區域變大</p></li><li><p>本地搜索增加 preload,cdn 配置 #859</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">local_search:</span><br><span class="line">  enable: false</span><br><span class="line"><span class="addition">+  preload: false</span></span><br><span class="line"><span class="addition">+  CDN:</span></span><br></pre></td></tr></table></figure></li><li><p>更新 social-share cdn 版本</p></li><li><p>歸檔頁面的側邊欄支持隱藏</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">aside:</span><br><span class="line"><span class="addition">+  archives: true</span></span><br></pre></td></tr></table></figure></li><li><p>可配置文章版權模塊的作者超鏈接</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">post_copyright:</span><br><span class="line"><span class="addition">+  author_href:</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>mathjax 顯示不完全的 bug</li><li>標題中帶有 HTML 關鍵字時，會破壞相關推薦的渲染  #836</li></ol><h3 id="Improvement"><a href="#Improvement" class="headerlink" title="Improvement"></a>Improvement</h3><ol><li>搜索標題統一顯示為 ‘搜索’</li><li>algolia 搜索的 logo 改為 instantsearch 調用</li><li>algolia 第一次進入時不會自動搜索 #867</li><li>搜索內容增加 … 縮略辨識</li><li>調整分享按鈕導致的間距問題</li><li>html/css 優化</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">4.1.0 (2022/02/13)</summary><div class="toggle-content"><h2 id="4-1-0-2022-02-13"><a href="#4-1-0-2022-02-13" class="headerlink" title="4.1.0 (2022/02/13)"></a>4.1.0 (2022/02/13)</h2><h3 id="Breaking-Change"><a href="#Breaking-Change" class="headerlink" title="Breaking Change"></a>Breaking Change</h3><ol><li><p>升級 fontawesome 到 v6 #689</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CDN:</span><br><span class="line"><span class="deletion">-  fontawesome:</span></span><br><span class="line"><span class="addition">+  fontawesomeV6:</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li>snackbar 增加圓角</li><li>增加 flink 標籤外掛</li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復點擊 toc 外圍,控制枱報錯的 bug</li><li>Facebook Comments 無法使用 #787</li><li>chat_btn 聊天按鈕翻譯缺失 #791</li><li>local search 的 content 設為 false, 搜索無法運行的 bug #764</li><li>Mermaid 圖表渲染後元素高度過大 #773</li><li>文章頁分享按鈕另開一行時， 導航頁寬度沒有 100% 的 bug #765</li></ol><h3 id="Improvement"><a href="#Improvement" class="headerlink" title="Improvement"></a>Improvement</h3><ol><li>語義化 toggle 標籤外掛</li><li>darkmode 下 toc 背景顏色更改</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">4.0.1 (2022/01/16)</summary><div class="toggle-content"><h2 id="4-0-1-2022-01-16"><a href="#4-0-1-2022-01-16" class="headerlink" title="4.0.1 (2022/01/16)"></a>4.0.1 (2022/01/16)</h2><p>improvement: 優化 pjax 下，右下角按鈕的動畫</p><p>fix: 修復頁面設置 aside 為 true 時，js 報錯的 bug</p><p>fix: 修復部分頁面右下角按鈕位置遮擋的 bug</p><p>fix: 修復壓縮 html 代碼,友情鏈接頁面壓縮會報錯的 bug</p><p>fix: 修復safari上滑動側邊菜單欄會收起的 bug</p></div></details><details class="toggle" ><summary class="toggle-button" style="">4.0.0 (2022/01/15)</summary><div class="toggle-content"><h2 id="4-0-0-2022-01-15"><a href="#4-0-0-2022-01-15" class="headerlink" title="4.0.0 (2022/01/15)"></a>4.0.0 (2022/01/15)</h2><h3 id="Breaking-Change"><a href="#Breaking-Change" class="headerlink" title="Breaking Change"></a>Breaking Change</h3><ol><li><p>精簡各評論的配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">disqusjs:</span><br><span class="line"><span class="deletion">-  apikey:</span></span><br><span class="line"><span class="deletion">-  api:</span></span><br><span class="line"><span class="deletion">-  nocomment: # display when a blog post or an article has no comment attached</span></span><br><span class="line"><span class="deletion">-  admin:</span></span><br><span class="line"><span class="deletion">-  adminLabel:</span></span><br><span class="line"><span class="addition">+  option:</span></span><br><span class="line"></span><br><span class="line">gitalk:</span><br><span class="line"><span class="deletion">-  language: en # en, zh-CN, zh-TW, es-ES, fr, ru</span></span><br><span class="line"><span class="deletion">-  perPage: 10 # Pagination size, with maximum 100.</span></span><br><span class="line"><span class="deletion">-  distractionFreeMode: false # Facebook-like distraction free mode.</span></span><br><span class="line"><span class="deletion">-  pagerDirection: last # Comment sorting direction, available values are last and first.</span></span><br><span class="line"><span class="deletion">-  createIssueManually: false # Gitalk will create a corresponding github issue for your every single page automatically</span></span><br><span class="line"></span><br><span class="line">valine:</span><br><span class="line"><span class="deletion">-  pageSize: 10 # comment list page size</span></span><br><span class="line"><span class="deletion">-  lang: en # i18n: zh-CN/zh-TW/en/ja</span></span><br><span class="line"><span class="deletion">-  placeholder: Please leave your footprints # valine comment input placeholder (like: Please leave your footprints)</span></span><br><span class="line"><span class="deletion">-  guest_info: nick,mail,link # valine comment header info (nick/mail/link)</span></span><br><span class="line"><span class="deletion">-  recordIP: false # Record reviewer IP</span></span><br><span class="line"><span class="deletion">-  bg: # valine background</span></span><br><span class="line"><span class="deletion">-  emojiCDN: # emoji CDN</span></span><br><span class="line"><span class="deletion">-  enableQQ: false # enable the Nickname box to automatically get QQ Nickname and QQ Avatar</span></span><br><span class="line"><span class="deletion">-  requiredFields: nick,mail # required fields (nick/mail)</span></span><br><span class="line"></span><br><span class="line">waline:</span><br><span class="line"><span class="deletion">-  avatar: monsterid # gravatar style https://zh-tw.gravatar.com/site/implement/images/#default-image</span></span><br><span class="line"><span class="deletion">-  avatarCDN: # Gravatar CDN baseURL</span></span><br></pre></td></tr></table></figure></li><li><p>頁面支持 toc #636</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">toc:</span><br><span class="line"><span class="deletion">-  enable: true</span></span><br><span class="line"><span class="addition">+  post: true</span></span><br><span class="line"><span class="addition">+  page: false</span></span><br></pre></td></tr></table></figure></li><li><p>刪除 hide_sidebar_menu_child 配置，改為直接在 menu 配置 #640</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-# Hide the child menu items in mobile sidebar</span></span><br><span class="line"><span class="deletion">-hide_sidebar_menu_child: false</span></span><br></pre></td></tr></table></figure></li><li><p>完全移除 jquery</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CDN:</span><br><span class="line"><span class="deletion">-  jquery: https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js</span></span><br></pre></td></tr></table></figure></li><li><p>移除騰訊分析</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-# Tencent Analytics ID</span></span><br><span class="line"><span class="deletion">-# https://mta.qq.com</span></span><br><span class="line"><span class="deletion">-tencent_analytics:</span></span><br></pre></td></tr></table></figure></li><li><p>photofigcaption 和 fancybox 的 figcaption 優先顯示 圖片的title屬性，然後是 alt 屬性 #683</p></li><li><p>支持新的評論名寫法，主題會處理評論名字大小寫，舊的會兼容</p></li><li><p>移除博天api，注意順序改變</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># source: 1  調用一言網的一句話（簡體） https://hitokoto.cn/</span><br><span class="line"># source: 2  調用一句網（簡體） http://yijuzhan.com/</span><br><span class="line"># source: 3  調用今日詩詞（簡體） https://www.jinrishici.com/</span><br></pre></td></tr></table></figure></li><li><p>移除 html 的 font-size 改為瀏覽器默認大小</p></li></ol><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li><p>更新 fancybox 到 4</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CDN:</span><br><span class="line"><span class="deletion">-  fancybox_css: https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css</span></span><br><span class="line"><span class="deletion">-  fancybox: https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js</span></span><br><span class="line"><span class="addition">+  fancybox_css_v4:</span></span><br><span class="line"><span class="addition">+  fancybox_v4:</span></span><br></pre></td></tr></table></figure></li><li><p>右下角按鈕自定義順序 #680</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+rightside_item_order:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  hide: # readmode,translate,darkmode,hideAside</span></span><br><span class="line"><span class="addition">+  show: # toc,chat,comment</span></span><br></pre></td></tr></table></figure></li><li><p>網站資料顯示，當標籤和分類為0時，數量顯示為 0，而不是隱藏</p></li><li><p>代碼框設置高度限制，展開後按鈕不會消失，可點擊再次摺疊 #637</p></li><li><p>圖片選擇性禁用 lightbox #636</p></li><li><p>Twikoo 評論圖片添加 lightbox</p></li><li><p>升級 facebook comment js 到 version 11</p></li><li><p>為文章單獨設置 TOC simple_style 顯示 #631</p></li><li><p>page 頁頂部圖增加黑色遮罩 #671</p></li><li><p>首頁 pagination更新 UI</p></li><li><p>主題 css 使用的 rem 改為 em 或 px</p></li><li><p>移除 右下角字體調整按鈕</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-# Change font size</span></span><br><span class="line"><span class="deletion">-change_font_size: false</span></span><br></pre></td></tr></table></figure></li><li><p>新增標籤外掛 timeline #644</p></li><li><p>清除 配置文件 的CDN，默認CDN 不再顯示在 config</p></li><li><p>替換 Justified Gallery 為 flickr-justified-gallery</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CDN:</span><br><span class="line"><span class="deletion">-  justifiedGallery_js: https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js</span></span><br><span class="line"><span class="deletion">-  justifiedGallery_css: https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css</span></span><br><span class="line"><span class="addition">+  flickr_justified_gallery_js:</span></span><br><span class="line"><span class="addition">+  flickr_justified_gallery_css:</span></span><br></pre></td></tr></table></figure></li><li><p>切換夜間模式後，mermaid 也會切換夜間主題</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mermaid:</span><br><span class="line">  enable: true</span><br><span class="line">  # built-in themes: default/forest/dark/neutral</span><br><span class="line"><span class="deletion">-  theme: default</span></span><br><span class="line"><span class="addition">+  theme: </span></span><br><span class="line"><span class="addition">+    light: default</span></span><br><span class="line"><span class="addition">+    dark: dark</span></span><br></pre></td></tr></table></figure></li><li><p>壓縮html代碼後，mermaid 顯示正常</p></li><li><p>mermaid 可以在 隱藏屬性的標籤外掛 裏使用</p></li><li><p>本地搜索可處理 json #684</p></li><li><p>右下角按鈕 UI 微調</p></li><li><p>更改文章美化後,列表的顯示效果 #693 #686</p></li><li><p>algolia 升級至 v4</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CDN:</span><br><span class="line"><span class="deletion">-  algolia_search: https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js</span></span><br><span class="line"><span class="deletion">-  algolia_search_css: https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css</span></span><br><span class="line"><span class="addition">+  algolia_search_v4:</span></span><br><span class="line"><span class="addition">+  instantsearch_v4:</span></span><br></pre></td></tr></table></figure></li><li><p>本地搜索增加數據庫加載中和搜索中 loading 顯示</p></li><li><p>anchor 不再限制 post 頁開啟，可以在任何頁面開啟</p></li><li><p>文章標題支持點擊跳轉到此標題開始閲讀 #653</p></li><li><p>toc 可以設置全部展開 #709</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">toc:</span><br><span class="line"><span class="addition">+  expand: false</span></span><br></pre></td></tr></table></figure></li><li><p>增加 新的評論系統 giscus</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# Giscus</span></span><br><span class="line"><span class="addition">+# https://giscus.app/</span></span><br><span class="line"><span class="addition">+giscus:</span></span><br><span class="line"><span class="addition">+  repo:</span></span><br><span class="line"><span class="addition">+  repo_id:</span></span><br><span class="line"><span class="addition">+  category_id:</span></span><br><span class="line"><span class="addition">+  theme:</span></span><br><span class="line"><span class="addition">+    light: light</span></span><br><span class="line"><span class="addition">+    dark: dark</span></span><br><span class="line"><span class="addition">+  option:</span></span><br><span class="line"></span><br><span class="line">CDN:</span><br><span class="line"><span class="addition">+  giscus:</span></span><br></pre></td></tr></table></figure></li><li><p>友情鏈接列表增加 fetch url 獲取</p></li><li><p>toc 間隔調整, 直接子元素增加豎線辨識 closed #723</p></li><li><p>可配置scrollbar顏色</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">theme_color:</span><br><span class="line"><span class="addition">+  scrollbar_color: &quot;#49b1f5&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>美化 firefox 瀏覽器滾動條</p></li><li><p>CDN 增加 blueimp_md5 配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CDN:</span><br><span class="line"><span class="addition">+  blueimp_md5:</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復 開啟 lazyload 時， fancybox 的縮略圖顯示 lazyload 加載圖片的 bug</li><li>修復 字體過大/過小而導致 部分 ui 偏移的 bug </li><li>修復 自建頁面圖片沒有 blur 效果</li><li>修復窗口大小改變時，導航欄的 ui 可能會錯亂的 bug</li><li>修復 pjax下 ，twikoo 評論獲取是上一篇評論的 bug #678</li><li>修復 rightside 遮擋內容，導致內容無法點擊的 bug</li><li>修復 mermaid 在某些頁面（有元素 id 為 mermaid 時） 會無法加載的 bug</li><li>修復 搜索框不會自動 focus 的 bug</li><li>修復沒有配置 comments 的 use 時，會報錯的 bug</li><li>修復 toc 在小設備上顯示出屏幕外的 bug</li><li>修復在打賞按鈕周圍也會觸發打賞彈窗的 bug</li><li>修復 Waline 最近評論的時間只顯示 “剛剛” 的問題 (以docker的方式執行) #730</li><li>修復 utterances 的 issue_term 設為 url，og:title時，評論顯示錯誤的 bug</li><li>修復評論配置為 Livere 和 Facebook Comments 時，最新評論模塊仍然顯示的 bug</li></ol><h3 id="Improvement"><a href="#Improvement" class="headerlink" title="Improvement"></a>Improvement</h3><ol><li>subtitle 代碼優化，當 source 設為 false，同時 sub 也沒有配置，將會讀取 hexo 配置文件的 subtitle, 無須使用轉義字符</li><li>禁止 ios 點擊搜索框，頁面放大的問題</li><li>sidebar menu 點擊展開不再限制只能點擊按鈕 #640</li><li>修改沒有頂部圖下，文章頁的標題大小</li><li>優化 404 頁面 UI</li><li>lazyload 默認佔位圖改為透明圖片</li><li>優化 css</li><li>優化 lazyload blur 出現特效</li><li>手機端更改閲讀模式退出按鈕到右下角</li><li>ui 微調</li><li>禁止一些瀏覽器會出現點擊左下角按鈕出現放大網頁的行為</li><li>鼠標移到最新評論內容，增加 title 顯示</li><li>移除 button 的 hover 效果</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.8.4 (2021/09/18)</summary><div class="toggle-content"><h2 id="3-8-4-2021-09-18"><a href="#3-8-4-2021-09-18" class="headerlink" title="3.8.4 (2021/09/18)"></a>3.8.4 (2021/09/18)</h2><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復開啟 photofigcaption 後，導致 inlineImg 標籤外掛顯示錯亂的 bug close #667</li><li>修復使用本地搜索時，搜索插件配置為不搜索文章內容會無法使用搜索的 bug close #666</li><li>修復可能導致相關文章鏈接出錯的 bug close #549</li></ol><h3 id="Improvement"><a href="#Improvement" class="headerlink" title="Improvement"></a>Improvement</h3><ol><li>調整代碼框滾動條顏色 close #651</li><li>當圖片沒有 figcaption 時，不會添加 figcaption 代碼</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.8.3 (2021/07/30)</summary><div class="toggle-content"><h2 id="3-8-3-2021-07-30"><a href="#3-8-3-2021-07-30" class="headerlink" title="3.8.3 (2021/07/30)"></a>3.8.3 (2021/07/30)</h2><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復 Waline 評論系統 設置 avatarCDN 無效的 bug</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.8.2 (2021/07/20)</summary><div class="toggle-content"><h2 id="3-8-2-2021-07-20"><a href="#3-8-2-2021-07-20" class="headerlink" title="3.8.2 (2021/07/20)"></a>3.8.2 (2021/07/20)</h2><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復 footer 在部分瀏覽器沒有顯示在底部的 bug #616</li></ol><h3 id="Improvement"><a href="#Improvement" class="headerlink" title="Improvement"></a>Improvement</h3><ol><li>修改配置文件註釋 #613</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.8.1 (2021/07/10)</summary><div class="toggle-content"><h2 id="3-8-1-2021-07-10"><a href="#3-8-1-2021-07-10" class="headerlink" title="3.8.1 (2021/07/10)"></a>3.8.1 (2021/07/10)</h2><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復 inline mathjax 有滾動條的 bug</li><li>修復友情鏈接的頭像帶有 Medium Zoom 燈箱的 bug #607 </li><li>修復友情鏈接的頭像帶有 FancyBox 燈箱的 bug #607 </li></ol><h3 id="Dependencies"><a href="#Dependencies" class="headerlink" title="Dependencies"></a>Dependencies</h3><ol><li>update hexo-renderer-pug</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.8.0 (2021/07/04)</summary><div class="toggle-content"><h2 id="3-8-0-2021-07-04"><a href="#3-8-0-2021-07-04" class="headerlink" title="3.8.0 (2021/07/04)"></a>3.8.0 (2021/07/04)</h2><h3 id="Breaking-Change"><a href="#Breaking-Change" class="headerlink" title="Breaking Change"></a>Breaking Change</h3><ol><li><p>archives 的 標題 在 menu 配置中獲取</p></li><li><p>移除最新評論的評論服務商選擇，默認為配置的第一個評論服務商</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">newest_comments:</span><br><span class="line">  enable: false</span><br><span class="line">  sort_order: # Don&#x27;t modify the setting unless you know how it works</span><br><span class="line">  limit: 6</span><br><span class="line">  storage: 10 # unit: mins, save data to localStorage</span><br><span class="line">  avatar: true</span><br><span class="line"><span class="deletion">-  # You can only choose one, or neither</span></span><br><span class="line"><span class="deletion">-  valine: false</span></span><br><span class="line"><span class="deletion">-  github_issues:</span></span><br><span class="line"><span class="deletion">-    enable: false</span></span><br><span class="line"><span class="deletion">-    repo:</span></span><br><span class="line"><span class="deletion">-  disqus:</span></span><br><span class="line"><span class="deletion">-    enable: false</span></span><br><span class="line"><span class="deletion">-    forum:</span></span><br><span class="line"><span class="deletion">-    api_key:</span></span><br><span class="line"><span class="deletion">-  twikoo: false</span></span><br><span class="line"><span class="deletion">-  waline: false</span></span><br></pre></td></tr></table></figure></li><li><p>widget 寫法更改/可添加非 sticky 區域 widget</p></li></ol><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li><p>修改最新評論 icon</p></li><li><p>waline 顔色適配主題色</p></li><li><p>增加 waline avatarCDN 配置（最新評論也會更新）</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">waline:</span><br><span class="line">...</span><br><span class="line"><span class="addition">+avatarCDN： # Gravatar CDN baseURL</span></span><br></pre></td></tr></table></figure></li><li><p>升級 facebook comment js 到 v10</p></li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復友情鏈接和aside 頭像在 lazyload blur下的顯示 bug</li><li>修復設置 highlight_shrink: true 後，部分代碼框依舊展開的 bug #602</li><li>修復 mathjax 在列表下，導致 列表沒有樣式的 bug  #586</li><li>修復文章頁 mathjax 因字體小導致顯示重疊的 bug #587</li><li>修復當內容過少時，footer 沒有底部靠攏的 bug</li></ol><h3 id="Improvement"><a href="#Improvement" class="headerlink" title="Improvement"></a>Improvement</h3><ol><li>UI 優化</li><li>waline 字體大小，頭像特效調整</li><li>pjax 優化</li><li>減少卡頓，apple 裝置首頁背景 background-attachment 設為 scroll</li><li>404 頁面不再顯示 rightside</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.7.8 (2021/06/05)</summary><div class="toggle-content"><h2 id="3-7-8-2021-06-05"><a href="#3-7-8-2021-06-05" class="headerlink" title="3.7.8 (2021/06/05)"></a>3.7.8 (2021/06/05)</h2><h3 id="Breaking-Change"><a href="#Breaking-Change" class="headerlink" title="Breaking Change"></a>Breaking Change</h3><ol><li>移除 waline 的 emojiCDN 和 emojiMaps 配置</li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復 升級到 waline 1.x 而出現的 bug</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.7.7 (2021/05/11)</summary><div class="toggle-content"><h2 id="3-7-7-2021-05-11"><a href="#3-7-7-2021-05-11" class="headerlink" title="3.7.7 (2021/05/11)"></a>3.7.7 (2021/05/11)</h2><h3 id="Improvement"><a href="#Improvement" class="headerlink" title="Improvement"></a>Improvement</h3><ol><li>適配新版 waline 夜間模式</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.7.6 (2021/05/09)</summary><div class="toggle-content"><h2 id="3-7-6-2021-05-09"><a href="#3-7-6-2021-05-09" class="headerlink" title="3.7.6 (2021/05/09)"></a>3.7.6 (2021/05/09)</h2><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復標題/博客名有 ‘ 時，pjax 會報錯的 bug</li></ol><h3 id="Improvement"><a href="#Improvement" class="headerlink" title="Improvement"></a>Improvement</h3><ol><li>css 調整</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.7.5 (2021/05/05)</summary><div class="toggle-content"><h2 id="3-7-5-2021-05-05"><a href="#3-7-5-2021-05-05" class="headerlink" title="3.7.5 (2021/05/05)"></a>3.7.5 (2021/05/05)</h2><h3 id="Breaking-Change"><a href="#Breaking-Change" class="headerlink" title="Breaking Change"></a>Breaking Change</h3><ol><li><p>site_verification 優化，需自行配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-# Google Webmaster tools verification setting</span></span><br><span class="line"><span class="deletion">-# See: https://www.google.com/webmasters/</span></span><br><span class="line"><span class="deletion">-google_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-# Bing Webmaster tools verification setting</span></span><br><span class="line"><span class="deletion">-# See: https://www.bing.com/webmaster/</span></span><br><span class="line"><span class="deletion">-bing_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-# Baidu Webmaster tools verification setting</span></span><br><span class="line"><span class="deletion">-# See: https://ziyuan.baidu.com/site/</span></span><br><span class="line"><span class="deletion">-baidu_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-# 360 Webmaster tools verification setting</span></span><br><span class="line"><span class="deletion">-# see http://zhanzhang.so.com/</span></span><br><span class="line"><span class="deletion">-qihu_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-# Yandex Webmaster tools verification setting</span></span><br><span class="line"><span class="deletion">-# see https://webmaster.yandex.com/</span></span><br><span class="line"><span class="deletion">-yandex_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+site_verification:</span></span><br></pre></td></tr></table></figure></li><li><p>lazyload 優化 (增加高斯模糊過度特效，增加配置 lazyload 範圍，佔位圖應用到全站)</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">lazyload:</span><br><span class="line">  enable: false</span><br><span class="line"><span class="deletion">-  post: /img/loading.gif</span></span><br><span class="line"><span class="addition">+  field: site # site/post</span></span><br><span class="line"><span class="addition">+  placeholder: /img/loading.gif</span></span><br><span class="line"><span class="addition">+  blur: false</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li>增加 tags 標簽外掛 - label</li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復開啟anchor後，文章頁跳轉回主頁，主頁網址的hash添加上文章頁最後一個標題的 bug</li><li>修復開啟anchor後,瀏覽器上一頁/下一頁 跳轉會 404 的bug (文章頁的url hash 在pjax下變成 undefined)</li><li>修復 lazyload 報 undefined 的 bug close #532</li></ol><h3 id="Improvement"><a href="#Improvement" class="headerlink" title="Improvement"></a>Improvement</h3><ol><li>優化 pjax 下 404 頁面</li><li>優化 button tags 標簽外掛</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.7.1 (2021/03/30)</summary><div class="toggle-content"><h2 id="3-7-1-2021-03-30"><a href="#3-7-1-2021-03-30" class="headerlink" title="3.7.1 (2021/03/30)"></a>3.7.1 (2021/03/30)</h2><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復 github-issues 最新評論 獲取的url格式 bug</li><li>修復當標題有符號’時，disqus 和 disqusjs 無法加載的 bug</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.7.0 (2021/03/18)</summary><div class="toggle-content"><h2 id="3-7-0-2021-03-18"><a href="#3-7-0-2021-03-18" class="headerlink" title="3.7.0 (2021/03/18)"></a>3.7.0 (2021/03/18)</h2><h3 id="Breaking-Change"><a href="#Breaking-Change" class="headerlink" title="Breaking Change"></a>Breaking Change</h3><ol><li><p>更改子目錄的寫法，與父目錄一致</p></li><li><p>移除 artitalk （如需要，請安裝 hexo-butterfly-artitalk)</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-# Artitalk</span></span><br><span class="line"><span class="deletion">-# see https://artitalk.js.org/</span></span><br><span class="line"><span class="deletion">-artitalk:</span></span><br><span class="line"><span class="deletion">-  appId:</span></span><br><span class="line"><span class="deletion">-  appKey:</span></span><br><span class="line"><span class="deletion">-  option:</span></span><br><span class="line"></span><br><span class="line">CDN:</span><br><span class="line"><span class="deletion">-artitalk: https://cdn.jsdelivr.net/npm/artitalk</span></span><br></pre></td></tr></table></figure></li><li><p>katex_copytex 的js 和 css cdn 更換</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-katex_copytex: https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js</span></span><br><span class="line"><span class="deletion">-katex_copytex_css: https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+katex_copytex: https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.min.js</span></span><br><span class="line"><span class="addition">+katex_copytex_css: https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.css</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li><p>新增設置代碼高度限制，顯示展開按鈕</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+highlight_height_limit: false # unit: px</span></span><br></pre></td></tr></table></figure></li><li><p>prismjs 也可以配置 code_word_wrap</p></li><li><p>增加 kbd 樣式 #507</p></li><li><p>添加waline,valine 和twikoo 提供的文章閲讀數配置 #502</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">valine:</span><br><span class="line"><span class="addition">+  visitor: false</span></span><br><span class="line">waline:</span><br><span class="line"><span class="addition">+  visitor: false</span></span><br><span class="line">twikoo:</span><br><span class="line"><span class="addition">+  visitor: false</span></span><br></pre></td></tr></table></figure></li><li><p>增加 HexoPlusPlus_Talk（需要安裝 hexo-butterfly-hpptalk)</p></li><li><p>增加 tags 標簽外掛 inlineImg</p></li><li><p>gitalk 增加 option 配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gitalk:</span><br><span class="line">  createIssueManually: false # Gitalk will create a corresponding github issue for your every single page automatically</span><br><span class="line"><span class="addition">+  option:</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復prismjs 在 ios safari 下自動換行的bug</li><li>修復默認代碼大小不會隨着字體放大/放小而改變的bug</li><li>修復prismjs 無法識別的語言 顯示 null 而不是顯示 code 的 bug</li><li>在完全沒有配置的情況下，運行時控制枱報null 的問題</li></ol><h3 id="Improvement"><a href="#Improvement" class="headerlink" title="Improvement"></a>Improvement</h3><ol><li>主頁分頁會定位到文章區域 #519</li><li>css 優化，簡化自定義代碼色的 css 配置</li><li>搜索 hover 效果與其它目錄一致</li><li>百度統計適配 pjax #516</li><li>當文章頁cover 和 cover 的 default_img都沒有配置時，會去讀取default_top_img的參數</li><li>一句API 改為 https</li><li>pug代碼優化</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.6.2 (2021/02/03)</summary><div class="toggle-content"><h2 id="3-6-2-2021-02-03"><a href="#3-6-2-2021-02-03" class="headerlink" title="3.6.2 (2021/02/03)"></a>3.6.2 (2021/02/03)</h2><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>mathjax 和 katex 沒有加載js的bug</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.6.1 (2021/02/01)</summary><div class="toggle-content"><h2 id="3-6-1-2021-02-01"><a href="#3-6-1-2021-02-01" class="headerlink" title="3.6.1 (2021/02/01)"></a>3.6.1 (2021/02/01)</h2><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>非ios設備下，手機頁面下文章頁有toc的界面出現滾動條</li><li>非ios設備下，在layout標簽內的元素，如是position: fixed，其相對定位會更改 #482 #483</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.6.0 (2021/01/30)</summary><div class="toggle-content"><h2 id="3-6-0-2021-01-30"><a href="#3-6-0-2021-01-30" class="headerlink" title="3.6.0 (2021/01/30)"></a>3.6.0 (2021/01/30)</h2><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li><p>增加首頁評論數顯示</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">comments:</span><br><span class="line">  ...</span><br><span class="line">  count: false # Display comment count in post&#x27;s top_img</span><br><span class="line"><span class="addition">+  card_post_count: false # Display comment count in Home Page</span></span><br></pre></td></tr></table></figure></li><li><p>最新評論更新</p><ol><li><code>&lt;a&gt;</code> 標簽將會顯示 <code>[鏈接]</code></li><li><code>&lt;img&gt;</code>標簽將會顯示 <code>[圖片]</code></li><li><code>&lt;pre&gt;&lt;code&gt;</code> 標簽將顯示 <code>[代碼]</code></li><li>github-issues 獲取到的 url 改為對應文章地址，而不是issues地址</li><li>時間 time 增加 datetime屬性</li><li>waline 獲取到頭像會先匹配 waline數據庫是否有qq頭像屬性</li><li>部分評論顯示的時間改為更新時間</li></ol></li><li><p>aside ‘查看更多’按鈕 改為 圖標顯示在右上角</p></li><li><p>可配置最新評論的緩存時間</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">newest_comments:</span><br><span class="line">  enable: false</span><br><span class="line">  sort_order: # Don&#x27;t modify the setting unless you know how it works</span><br><span class="line">  limit: 6</span><br><span class="line"><span class="addition">+  storage: 10 # unit: mins, save data to localStorage</span></span><br></pre></td></tr></table></figure></li><li><p>增加 post_pagination 配置(可關閉/配置分頁展示邏輯)</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# post_pagination (分頁)</span></span><br><span class="line"><span class="addition">+# value: 1 || 2 || false</span></span><br><span class="line"><span class="addition">+# 1: The &#x27;next post&#x27; will link to old post</span></span><br><span class="line"><span class="addition">+# 2: The &#x27;next post&#x27; will link to new post</span></span><br><span class="line"><span class="addition">+# false: disable pagination</span></span><br><span class="line"><span class="addition">+post_pagination: 1</span></span><br></pre></td></tr></table></figure></li><li><p>文章版權右上角改為 版權icon</p></li><li><p>增加配置 disable_top_img，禁用所有的top_img</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# Disable all banner image</span></span><br><span class="line"><span class="addition">+disable_top_img: false</span></span><br></pre></td></tr></table></figure></li><li><p>增加 文章編輯</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# Post edit</span></span><br><span class="line"><span class="addition">+# Easily browse and edit blog source code online.</span></span><br><span class="line"><span class="addition">+post_edit:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  # url: https://github.com/user-name/repo-name/edit/branch-name/subdirectory-name/</span></span><br><span class="line"><span class="addition">+  # For example: https://github.com/jerryc127/butterfly.js.org/edit/main/source/</span></span><br><span class="line"><span class="addition">+  url:</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復 文章頁面上滑子菜單圖標文字無法顯示的 bug #481</li><li>修復在 chrome上，進入頁面時，頁面元素會出現模糊到清晰 的 bug #479</li><li>修復夜間模式下，閲讀模式代碼塊背景顔色的顯示bug</li><li>修復打賞按鈕字數過多導致Hover異常的bug #473</li><li>修復評論裏  行內元素（表情/圖片）變成塊級元素（換行）的bug</li><li>修復點擊toc後，滾動完toc的highlight在點擊的上一個元素</li><li>修復子目錄下，打賞圖片跳轉鏈接會錯誤的bug</li><li>修復文字點擊關閉random無效的bug</li><li>修復手持設備橫向翻轉時，menu 沒有進行判斷,而導致樣式錯亂的bug</li><li>修復pjax下不會跳轉404頁面的bug</li><li>修復twikoo 評論數獲取會因為地域問題報錯的bug</li><li>修復 background-image 遇到鏈接有括號時會無法顯示的bug</li></ol><h3 id="Improvement"><a href="#Improvement" class="headerlink" title="Improvement"></a>Improvement</h3><ol><li>meta description  限制在150字以內 #480</li><li>pug優化和結構調整</li><li>pug 判斷優化</li><li>友情鏈接界面增加title顯示（top_img設為false時）</li><li>升級facebook comment sdk版本</li><li>優化toc顯示，當向上滾動時，導航欄不會遮擋 toc #472</li><li>pangu 改為全站渲染</li><li>最新評論js優化</li><li>調整 Readmode 標題邊距</li><li>卡片 hover box-shadow 微調</li><li>404頁面卡片增加hover</li><li>刪除部分多餘的代碼</li></ol><h3 id="Remove"><a href="#Remove" class="headerlink" title="Remove"></a>Remove</h3><ol><li><p>移除百度推送（百度已棄用）和百度轉碼</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-# Disable Baidu transformation on mobile devices (禁止百度轉碼)</span></span><br><span class="line"><span class="deletion">-disable_baidu_transformation: true</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-# Baidu Push (百度推送)</span></span><br><span class="line"><span class="deletion">-baidu_push: false</span></span><br></pre></td></tr></table></figure></li><li><p>移除 fragment_cache 配置（默認開啟）</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-# Caches the contents in a fragment, speed up the generation (開啟hexo自帶的緩存,加快生成速度)</span></span><br><span class="line"><span class="deletion">-fragment_cache: true</span></span><br></pre></td></tr></table></figure></li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.5.1 (2020/12/31)</summary><div class="toggle-content"><h2 id="3-5-1-2020-12-31"><a href="#3-5-1-2020-12-31" class="headerlink" title="3.5.1 (2020/12/31)"></a>3.5.1 (2020/12/31)</h2><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li>twikoo增加 region 配置</li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復twikoo 廣州地域下，最新評論無法讀取的bugs</li><li>修復waline背景設置無效的bugs</li><li>修復twikoo 廣州地域下，page 頁進入post頁，twikoo評論報錯的bugs</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.5.0 (2020/12/30)</summary><div class="toggle-content"><h2 id="3-5-0-2020-12-30"><a href="#3-5-0-2020-12-30" class="headerlink" title="3.5.0 (2020/12/30)"></a>3.5.0 (2020/12/30)</h2><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li><p>aside 個人資料widget可關閉button</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">aside:</span><br><span class="line"> ...</span><br><span class="line">  card_author:</span><br><span class="line">    enable: true</span><br><span class="line">    description:</span><br><span class="line">    button:</span><br><span class="line"><span class="addition">+      enable: true</span></span><br><span class="line">      icon: fab fa-github</span><br><span class="line">      text: 主題 GitHub</span><br><span class="line">      link: https://github.com/jerryc127/hexo-theme-butterfly</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>新增 Cloudflare Analytics</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# Cloudflare Analytics</span></span><br><span class="line"><span class="addition">+# https://www.cloudflare.com/zh-tw/web-analytics/</span></span><br><span class="line"><span class="addition">+cloudflare_analytics:</span></span><br></pre></td></tr></table></figure></li><li><p>新增 Microsoft Clarity</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# Microsoft Clarity</span></span><br><span class="line"><span class="addition">+# https://clarity.microsoft.com/</span></span><br><span class="line"><span class="addition">+microsoft_clarity:</span></span><br></pre></td></tr></table></figure></li><li><p>readmode 優化</p></li><li><p>aside 增加自定義 widget</p></li><li><p>aside widget 增加排序（只對page頁和sticky內的有效）</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">aside:</span><br><span class="line"> ...</span><br><span class="line">  card_recent_post:</span><br><span class="line"><span class="addition">+    sort_order: # Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  card_categories:</span><br><span class="line"><span class="addition">+    sort_order: # Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  card_tags:</span><br><span class="line"><span class="addition">+    sort_order: # Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  card_archives:</span><br><span class="line"><span class="addition">+    sort_order: # Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  card_webinfo:</span><br><span class="line"><span class="addition">+    sort_order: # Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line"></span><br><span class="line">newest_comments:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="addition">+  sort_order: # Don&#x27;t modify the setting unless you know how it works</span></span><br></pre></td></tr></table></figure></li><li><p>twikoo 增加 option 配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Twikoo</span><br><span class="line"># https://github.com/imaegoo/twikoo</span><br><span class="line"><span class="deletion">-twikoo:</span></span><br><span class="line"><span class="addition">+twikoo:</span></span><br><span class="line"><span class="addition">+  envId:</span></span><br><span class="line"><span class="addition">+  option:</span></span><br></pre></td></tr></table></figure></li><li><p>增加waline評論</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# waline - A simple comment system with backend support fork from Valine</span></span><br><span class="line"><span class="addition">+# https://waline.js.org/</span></span><br><span class="line"><span class="addition">+waline:</span></span><br><span class="line"><span class="addition">+  serverURL: # Waline server address url</span></span><br><span class="line"><span class="addition">+  avatar: monsterid # gravatar style https://zh-tw.gravatar.com/site/implement/images/#default-image</span></span><br><span class="line"><span class="addition">+  emojiCDN: # emoji CDN</span></span><br><span class="line"><span class="addition">+  bg: /img/comment_bg.png # waline background</span></span><br><span class="line"><span class="addition">+  option:</span></span><br></pre></td></tr></table></figure></li><li><p>增加waline評論數顯示</p></li><li><p>增加waline最新評論模塊</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">newest_comments:</span><br><span class="line">  enable: true</span><br><span class="line">...</span><br><span class="line"><span class="addition">+  waline: false</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="Improvement"><a href="#Improvement" class="headerlink" title="Improvement"></a>Improvement</h3><ol><li><p>最新評論url 增加描點</p></li><li><p>html結構優化</p></li><li><p>修改newest_comments的leancloud為valine，並刪除其配置，改為讀取valine配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># Aside widget - Newest Comments</span><br><span class="line">newest_comments:</span><br><span class="line">  ...</span><br><span class="line"><span class="deletion">-  leancloud:</span></span><br><span class="line"><span class="deletion">-    enable: false</span></span><br><span class="line"><span class="deletion">-    appId: # leancloud application app id</span></span><br><span class="line"><span class="deletion">-    appKey: # leancloud application app key</span></span><br><span class="line"><span class="deletion">-    serverURL: # This configuration is suitable for domestic custom domain name users, overseas version will be automatically detected (no need to manually fill in)</span></span><br><span class="line"><span class="deletion">-    default_avatar: # mp/identicon/monsterid/wavatar/retro/robohash/blank</span></span><br><span class="line"><span class="addition">+ valine: false</span></span><br></pre></td></tr></table></figure></li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.4.2 (2020/12/27)</summary><div class="toggle-content"><h2 id="3-4-2-2020-12-27"><a href="#3-4-2-2020-12-27" class="headerlink" title="3.4.2 (2020/12/27)"></a>3.4.2 (2020/12/27)</h2><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復開啟 gitalk 評論數後與 toc 衝突的 bug #462</li><li>修復 jquery 在一些介面仍然載入問題</li><li>修復 medium zoom 報錯的 bug</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.4.1 (2020/12/15)</summary><div class="toggle-content"><h2 id="3-4-1-2020-12-15"><a href="#3-4-1-2020-12-15" class="headerlink" title="3.4.1 (2020/12/15)"></a>3.4.1 (2020/12/15)</h2><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復tabs 標簽外掛設為-1時，按鈕點擊沒反應的bugs</li></ol></div></details> <details class="toggle" ><summary class="toggle-button" style="">3.4.0 (2020/12/13)</summary><div class="toggle-content"><h2 id="3-4-0-2020-12-13"><a href="#3-4-0-2020-12-13" class="headerlink" title="3.4.0 (2020/12/13)"></a>3.4.0 (2020/12/13)</h2><h3 id="Breaking-Change"><a href="#Breaking-Change" class="headerlink" title="Breaking Change"></a>Breaking Change</h3><ol><li>去除 jQuery</li></ol><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li><p>可配置是否添加css前綴</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# Add the vendor prefixes to ensure compatibility</span></span><br><span class="line"><span class="addition">+css_prefix: true</span></span><br></pre></td></tr></table></figure></li><li><p>點擊文字特效增加隨機配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ClickShowText:</span><br><span class="line">  enable: false</span><br><span class="line">  text:</span><br><span class="line">    - I</span><br><span class="line">    - LOVEeeeeeeeeeeeee</span><br><span class="line">    - YOU</span><br><span class="line">  fontSize: 15px</span><br><span class="line"><span class="addition">+  random: true</span></span><br><span class="line">  mobile: false</span><br></pre></td></tr></table></figure></li><li><p>右下角增加字體調整按鈕</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# Change font size</span></span><br><span class="line"><span class="addition">+change_font_size: true</span></span><br></pre></td></tr></table></figure></li><li><p>增加twikoo 最新評論</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">newest_comments:</span><br><span class="line">  enable: true</span><br><span class="line">....</span><br><span class="line"><span class="addition">+  twikoo: true</span></span><br></pre></td></tr></table></figure></li><li><p>增加twikoo評論數顯示</p></li><li><p>增加toc簡潔模式</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">toc:</span><br><span class="line">  enable: true</span><br><span class="line">  number: true</span><br><span class="line"><span class="addition">+  style_simple: false</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復子目錄下，配置justifiedGallery CDN（相對鏈接）後，連接會無法訪問的bugs</li><li>修復沒有滾動條時，右下角按鈕顯示問題  #439</li><li>修復 pangu 配置post 後，仍在全站生效的bugs</li><li>修復resize 時，toc 的位置問題</li></ol><h3 id="Improvement"><a href="#Improvement" class="headerlink" title="Improvement"></a>Improvement</h3><ol><li>最新評論頭像增加lazyload</li><li>最新評論優化，當沒有評論時顯示’沒有評論‘</li><li>toc點擊時改用document.getElementById獲取，預防有些字符導致無法跳轉 #426</li><li>若瀏覽器支持。scroll將採用原生瀏覽器支持的滾動方法</li><li>搜索優化</li><li>html格式優化</li><li>當屏幕沒有滾動條時，rightside會直接顯示</li><li>手機端toc邊距微調</li><li>fontawesome和google字體增加異步加載</li><li>夜間模式下，廣告降低亮度</li><li>當設置aside mobile為false時，toc仍然能顯示</li></ol><h3 id="Remove"><a href="#Remove" class="headerlink" title="Remove"></a>Remove</h3><ol><li>刪除ICP配置， 如需要，請使用custom_text配置</li><li>刪除不必要的語言文件</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.3.0 (2020/10/28)</summary><div class="toggle-content"><h2 id="3-3-0-2020-10-28"><a href="#3-3-0-2020-10-28" class="headerlink" title="3.3.0 (2020/10/28)"></a>3.3.0 (2020/10/28)</h2><h3 id="Breaking-Change"><a href="#Breaking-Change" class="headerlink" title="Breaking Change"></a>Breaking Change</h3><ol><li>只支持 hexo 5.0.0 及以上版本</li><li>不再支持 butterfly.yml 寫法</li></ol><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li><p>Valine 增加 option 設置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">valine:</span><br><span class="line"><span class="addition">+  option:</span></span><br></pre></td></tr></table></figure></li><li><p>toc改為aside顯示,去掉sidebar</p><ol><li><p>手機toc ui 修改</p></li><li><p>去掉 toc auto_open 配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">toc:</span><br><span class="line">  enable: true</span><br><span class="line">  number: true</span><br><span class="line"><span class="deletion">-  auto_open: true # auto open the sidebar</span></span><br></pre></td></tr></table></figure></li><li><p>優化手機toc 的特效和按鈕出現的時機</p></li><li><p>aside狀態存<em>localStorage</em></p></li></ol></li><li><p>文章標題改為居中</p></li><li><p>aside 可配置隱藏/增加按鈕可展開或收縮aside</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">aside:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="addition">+  hide: false</span></span><br><span class="line"><span class="addition">+  button: true</span></span><br><span class="line">  mobile: true # display on mobile</span><br></pre></td></tr></table></figure></li><li><p>增加Twikoo評論</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+twikoo:</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="Improvements"><a href="#Improvements" class="headerlink" title="Improvements"></a>Improvements</h3><ol><li>完善note標籤在readmode上的顯示</li><li>精簡css 和 js</li><li>pjax 優化</li><li>文章頁標題改為h1(seo)</li><li>canonical 改為hexo提供的函數生成</li><li>ICP SEO優化 <a href="https://github.com/jerryc127/hexo-theme-butterfly/pull/393">#393</a></li><li>調大sidebar的寬度</li><li>html結構調整，mobile-sidebar改為sidebar/search調整</li><li>滾動到評論按鈕只要用評論的頁面就出現</li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復網站壓縮後，mermaid 會無法生成顯示的Bugs</li><li>修復當文章頁top_img設為false時，閲讀模式下文章內容不顯示的bugs</li><li>修復valine背景圖片再次出現時，由左到右移動的bugs</li><li>修復disqusjs沒有設置api時，沒有反代的bugs</li></ol><h3 id="Remove"><a href="#Remove" class="headerlink" title="Remove"></a>Remove</h3><ol><li>刪除搜索不必要的配置</li><li>移除豆瓣配置,如需配置，請使用 hexo-butterfly-douban</li><li>刪除多餘的css和pug</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.2.0 (2020/09/28)</summary><div class="toggle-content"><h2 id="3-2-0-2020-09-28"><a href="#3-2-0-2020-09-28" class="headerlink" title="3.2.0 (2020/09/28)"></a>3.2.0 (2020/09/28)</h2><h3 id="Breaking-Change"><a href="#Breaking-Change" class="headerlink" title="Breaking Change"></a>Breaking Change</h3><ol><li><p>更改canvas_ribbon_piao 為 canvas_fluttering_ribbon</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-canvas_ribbon_piao:</span></span><br><span class="line"><span class="addition">+canvas_fluttering_ribbon:</span></span><br><span class="line">  enable: false</span><br><span class="line">  mobile: false</span><br></pre></td></tr></table></figure></li><li><p>刪除特效js,改為cdn引入</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">CDN:</span><br><span class="line">  # background effect</span><br><span class="line"><span class="deletion">-  canvas_ribbon: /js/third-party/canvas-ribbon.js</span></span><br><span class="line"><span class="deletion">-  canvas_ribbon_piao: /js/third-party/piao.js</span></span><br><span class="line"><span class="deletion">-  canvas_nest: /js/third-party/canvas-nest.js</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+  canvas_ribbon: https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js</span></span><br><span class="line"><span class="addition">+  canvas_fluttering_ribbon: https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js</span></span><br><span class="line"><span class="addition">+  canvas_nest: https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js</span></span><br><span class="line"></span><br><span class="line">  # effect</span><br><span class="line"><span class="deletion">-  activate_power_mode: /js/third-party/activate-power-mode.js</span></span><br><span class="line"><span class="deletion">-  fireworks: /js/third-party/fireworks.js</span></span><br><span class="line"><span class="deletion">-  click_heart: /js/third-party/click_heart.js</span></span><br><span class="line"><span class="deletion">-  ClickShowText: /js/third-party/ClickShowText.js</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+  activate_power_mode: https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js</span></span><br><span class="line"><span class="addition">+  fireworks: https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js</span></span><br><span class="line"><span class="addition">+  click_heart: https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js</span></span><br><span class="line"><span class="addition">+  ClickShowText: https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li><p>可設置首頁文章不顯示內容/description</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Display the article introduction on homepage</span><br><span class="line"># 1: description</span><br><span class="line"># 2: both (if the description exists, it will show description, or show the auto_excerpt)</span><br><span class="line"># 3: auto_excerpt (default)</span><br><span class="line"><span class="addition">+# false: do not show the article introduction</span></span><br><span class="line"><span class="comment">index_post_content:</span></span><br><span class="line">  method: 3</span><br><span class="line">  length: 500 # if you set method to 2 or 3, the length need to config</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>主頁文章時間和文章頁文章時間可以配置顯示日期還是相對時間</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">post_meta:</span><br><span class="line">  page: # Home Page</span><br><span class="line"><span class="addition">+    date_format: relative # date/relative 顯示日期還是相對日期</span></span><br><span class="line">  post:</span><br><span class="line"><span class="addition">+    date_format: relative # date/relative 顯示日期還是相對日期</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><ol><li><p>top_img 可配置 （留空（默認色）/顏色（HEX值/RGB值/顔色單詞/漸變色)/圖片鏈接/ false（不顯示top_img））</p></li><li><p>footer可配置背景 [留空/false(默認色)/顏色（HEX值/RGB值/顔色單詞/漸變色)/圖片鏈接/true(跟top_img一樣)]</p></li><li><p>網站背景可配置 （顏色（HEX值/RGB值/顔色單詞/漸變色)/漸變色/圖片鏈接）</p></li><li><p>增加 tag_per_img 配置（可為各個tag 單獨配置top_img）</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+tag_per_img:</span></span><br></pre></td></tr></table></figure></li><li><p>增加 category_per_img 配置（可為各個category單獨配置top_img）</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+category_per_img:</span></span><br></pre></td></tr></table></figure></li><li><p>note 標籤優化(可自定義icon圖標/可覆蓋配置中的style)</p></li><li><p>夜間模式下，背景顔色/top-img/footer-bg 設置為顔色時，不再強制顯示黑色，而是改為遮罩降低亮度</p></li><li><p>增加部分特效 Mobile設置（activate_power_mode/fireworks/click_heart/ClickShowText)</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">activate_power_mode:</span><br><span class="line">  ...</span><br><span class="line"><span class="addition">+  mobile: false</span></span><br><span class="line"></span><br><span class="line">fireworks:</span><br><span class="line">   ...</span><br><span class="line"><span class="addition">+  mobile: true</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-click_heart: false</span></span><br><span class="line"><span class="addition">+click_heart:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  mobile: false</span></span><br><span class="line"></span><br><span class="line">ClickShowText:</span><br><span class="line">  enable: false</span><br><span class="line">  ...</span><br><span class="line"><span class="addition">+  mobile: false</span></span><br></pre></td></tr></table></figure></li><li><p>添加 artitalk 説説插件</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# Artitalk</span></span><br><span class="line"><span class="addition">+# see https://artitalk.js.org/</span></span><br><span class="line"><span class="addition">+artitalk:</span></span><br><span class="line"><span class="addition">+  appId:</span></span><br><span class="line"><span class="addition">+  appKey:</span></span><br><span class="line"><span class="addition">+  option:</span></span><br><span class="line"></span><br><span class="line">CDN:</span><br><span class="line"><span class="addition">+  artitalk: https://cdn.jsdelivr.net/npm/artitalk</span></span><br></pre></td></tr></table></figure></li><li><p>網頁進入動畫效果可關閉</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# Enter transitions (開啟網頁進入效果)</span></span><br><span class="line"><span class="addition">+enter_transitions: true</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="Improvements"><a href="#Improvements" class="headerlink" title="Improvements"></a>Improvements</h3><ol><li>preloader 在 pjax 下 每個頁面都會加載</li><li>修改判斷，避免用户設置2個lightbox 而導致報錯（只能設置一個）</li><li>精確時間顯示 （剛剛/幾分鐘前/幾小時前/幾天前/幾個月前）</li><li>刪除不必要的語言文件和css</li><li>Open_Graph 改為 hexo 內置 生成</li><li>當隱藏部分沒配置時，左下角設置按鈕會消失 #353</li><li>aside 分類 收縮/展開 增加slide效果</li><li>darkmode 字體顔色加深</li><li>優化nav的進入，應該修復一些用户在本地測試中無法顯示nav的bugs</li><li>最新評論 leancloud呼叫由js sdk 改為 rest api 呼叫。應用可以不與valine同一個</li><li>最新評論增加錯誤輸出</li><li>tags 設定彩色顯示後，字型大小將根據tag的文章數量而變化 close #365</li><li>調整tags頁和categories頁在寬度小於768時的字體大小</li><li>主題文件分類調正</li><li>當點擊評論框時，valine背景圖片隱藏</li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復當hexo的_config沒有設置description時，會導致pjax在頁面與文章間切換會無效 #381</li><li>修復鼠標點擊文字特效，文字過長導致頁面有滾動條的bugs</li><li>修復本地搜索文章鏈接無法跳轉bugs</li></ol><h3 id="Remove"><a href="#Remove" class="headerlink" title="Remove"></a>Remove</h3><ol><li><p>移除anime js， 集成在fireworks的js裏</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CDN:</span><br><span class="line"><span class="deletion">-  anime: https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js</span></span><br></pre></td></tr></table></figure></li><li><p>刪除不必要的語言檔案</p></li></ol><h3 id="chore"><a href="#chore" class="headerlink" title="chore"></a>chore</h3><ol><li>update hexo-renderer-stylus to 2.0.1</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.1.1 (2020/09/06)</summary><div class="toggle-content"><h2 id="3-1-1-2020-09-06"><a href="#3-1-1-2020-09-06" class="headerlink" title="3.1.1 (2020/09/06)"></a>3.1.1 (2020/09/06)</h2><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復關閉last push date 後， 報 ‘hour’ 找不到的bugs</li><li>修復開啟 prismjs 後， 在低版本的 safari 會出現 js 報錯的 Bugs</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.1.0 (2020/08/31)</summary><div class="toggle-content"><h2 id="3-1-0-2020-08-31"><a href="#3-1-0-2020-08-31" class="headerlink" title="3.1.0 (2020/08/31)"></a>3.1.0 (2020/08/31)</h2><h3 id="Breaking-Change"><a href="#Breaking-Change" class="headerlink" title="Breaking Change"></a>Breaking Change</h3><ol><li>只支持 hexo 4.2.0 以上版本</li><li>butterfly.yml 採用deepMerge, 與_config文件進行合併而不是替換</li></ol><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li><p>適配 hexo 5.0.0 的 prismjs, 代碼主題和各項功能</p></li><li><p>適配hexo 5.1.0 prismjs caption</p></li><li><p>可隱藏 Mobile sidebar 子菜單</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# Hide the child menu items in mobile sidebar</span></span><br><span class="line"><span class="addition">+hide_sidebar_menu_child: false</span></span><br></pre></td></tr></table></figure></li><li><p>當寬度小於1024時，點擊toc滾動，增加滾動效果</p></li><li><p>可配置font-size/更改配置中 code-font 為 code-font-family</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">font:</span><br><span class="line"><span class="addition">+  global-font-size:</span></span><br><span class="line"><span class="addition">+  code-font-size:</span></span><br><span class="line">   font-family:</span><br><span class="line"><span class="deletion">-   code-font:</span></span><br><span class="line"><span class="addition">+   code-font-family:</span></span><br></pre></td></tr></table></figure></li><li><p>部分css由’px’改為’em’，適應font-size值改變而改變</p></li><li><p>pjax增加exclude配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-pjax: false</span></span><br><span class="line"><span class="addition">+pjax:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  exclude:</span></span><br></pre></td></tr></table></figure></li><li><p>新增 cnzz_analytics</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># Analysis</span><br><span class="line"># --------------------------------------</span><br><span class="line"></span><br><span class="line"># Baidu Analytics</span><br><span class="line"># https://tongji.baidu.com/web/welcome/login</span><br><span class="line">baidu_analytics:</span><br><span class="line"></span><br><span class="line"># Google Analytics</span><br><span class="line"># https://analytics.google.com/analytics/web/</span><br><span class="line">google_analytics:</span><br><span class="line"></span><br><span class="line"># Tencent Analytics</span><br><span class="line"># https://mta.qq.com/</span><br><span class="line">tencent_analytics: #500727214</span><br><span class="line"></span><br><span class="line"><span class="addition">+# CNZZ Analytics</span></span><br><span class="line"><span class="addition">+# https://www.umeng.com/</span></span><br><span class="line"><span class="addition">+cnzz_analytics:</span></span><br></pre></td></tr></table></figure></li><li><p>騰訊分析改為騰訊移動分析，並適配pjax</p></li><li><p>aside增加position sticky</p></li><li><p>更改addtoany item的寫法</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">addtoany:</span><br><span class="line">  enable: false</span><br><span class="line"><span class="deletion">-  item:</span></span><br><span class="line"><span class="deletion">-    - facebook</span></span><br><span class="line"><span class="deletion">-    - twitter</span></span><br><span class="line"><span class="deletion">-    - wechat</span></span><br><span class="line"><span class="deletion">-    - sina_weibo</span></span><br><span class="line"><span class="deletion">-    - facebook_messenger</span></span><br><span class="line"><span class="deletion">-    - email</span></span><br><span class="line"><span class="deletion">-    - copy_link</span></span><br><span class="line"><span class="addition">+item: facebook,twitter,wechat,sina_weibo,facebook_messenger,email,copy_link</span></span><br></pre></td></tr></table></figure></li><li><p>增加最後更新時間顯示/增加post count 配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">aside:</span><br><span class="line"><span class="deletion">-  card_webinfo: true</span></span><br><span class="line"><span class="addition">+  card_webinfo:</span></span><br><span class="line"><span class="addition">+    enable: true</span></span><br><span class="line"><span class="addition">+    post_count: true</span></span><br><span class="line"><span class="addition">+    last_push_date: true</span></span><br></pre></td></tr></table></figure></li><li><p>增加 aside 最新評論部件</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+newest_comments:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  limit: 6</span></span><br><span class="line"><span class="addition">+  avatar: true</span></span><br><span class="line"><span class="addition">+  leancloud:</span></span><br><span class="line"><span class="addition">+    enable: false</span></span><br><span class="line"><span class="addition">++    appId: # leancloud application app id</span></span><br><span class="line"><span class="addition">+    appKey: # leancloud application app key</span></span><br><span class="line"><span class="addition">+    serverURL: # This configuration is suitable for domestic custom domain name users, overseas version will be automatically detected (no need to manually fill in)</span></span><br><span class="line"><span class="addition">+    default_avatar: mp # mp/identicon/monsterid/wavatar/retro/robohash/blank</span></span><br><span class="line"><span class="addition">+  github_issues:</span></span><br><span class="line"><span class="addition">+    enable: false</span></span><br><span class="line"><span class="addition">+    repo:</span></span><br><span class="line"><span class="addition">+  disqus:</span></span><br><span class="line"><span class="addition">+    enable: false</span></span><br><span class="line"><span class="addition">+    forum:</span></span><br><span class="line"><span class="addition">+    api_key:</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="Improvements"><a href="#Improvements" class="headerlink" title="Improvements"></a>Improvements</h3><ol><li>archives和card-post 改為flex佈局</li><li>點擊滾動，如果滾動是向上時，將會偏移60px， 避免導航欄遮擋 close #317</li><li>改cookies為<em>localStorage</em>存儲</li><li>設置中的theme_color可單獨配置幾個，而不需要全部開啟 close #314</li><li>調整webinfo 寬度小時的顯示</li><li>aside 內容邊距調整</li><li>Pjax下，刷新頁面時，會滾動到上次瀏覽的位置</li><li>修復mathjax溢出屏幕的Bugs # 321</li><li>部分css調整和html優化</li><li>刪除pwa中的theme-color配置，默認生成meta theme-color #340</li><li>補全card-categories和card-archives的 ‘查看更多‘鏈接 #337</li><li>代碼名字全大寫</li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復canvas_nest 配置沒有生效的Bugs</li><li>修復rightsize-bottom配置無效的bug</li><li>修復夜間模式下代碼塊有背景的bugs（沒開啟渲染的情況下）</li><li>修復 prismjs 在 tags-toggle 外掛標簽裏，代碼塊顯示一行的bugs</li><li>修復當關閉代碼渲染後，標簽外掛裏的代碼塊會被壓縮到一行的bugs</li><li>修復在modern樣式下，note 標簽外掛沒有使用tags名時，沒有背景色和夜間模式文字顯示不清楚的bugs</li><li>修復主頁文章cover在深色模式下，邊角有小白邊的bugs #278</li><li>修復note標簽外掛下，代碼塊顯示背景色的bugs close #339</li><li>修復toc 滾動百分比不準的Bugs</li><li>修復comments沒設置時，報Unexpected token ‘)’的bugs #344</li><li>修復網站子目錄下，相關文章cover無法顯示的bugs #334</li></ol><h3 id="Remove"><a href="#Remove" class="headerlink" title="Remove"></a>Remove</h3><ol><li>去除字體放大、縮小按鈕</li><li>移除 代碼default主題</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.0.1 (2020/08/11)</summary><div class="toggle-content"><h2 id="3-0-1-2020-08-11"><a href="#3-0-1-2020-08-11" class="headerlink" title="3.0.1 (2020/08/11)"></a>3.0.1 (2020/08/11)</h2><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復導航側邊欄沒有進入特效的Bugs</li><li>修復Hexo 5.0.0 以下版本， toc遇到中文不會滾動的bugs</li><li>修復pjax下，同時開啟Open_Graph_meta和Livere，Livere評論後台顯示的來源頁面與實際不同 的bugs</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.0.0 (2020/08/05)</summary><div class="toggle-content"><h2 id="3-0-0-2020-08-05"><a href="#3-0-0-2020-08-05" class="headerlink" title="3.0.0 (2020/08/05)"></a>3.0.0 (2020/08/05)</h2><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復文章頁沒有lazyload的bugs</li><li>修復文章頁沒有lazyload的bugs</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.0.0-RC2 (2020/08/01)</summary><div class="toggle-content"><h2 id="3-0-0-RC2-2020-08-01"><a href="#3-0-0-RC2-2020-08-01" class="headerlink" title="3.0.0-RC2 (2020/08/01)"></a>3.0.0-RC2 (2020/08/01)</h2><h3 id="Breaking-Change"><a href="#Breaking-Change" class="headerlink" title="Breaking Change"></a>Breaking Change</h3><ol><li><p>支持雙評論系統配置/評論配置整理/評論增加lazyload</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+comments:</span></span><br><span class="line"><span class="addition">+  # Up to two comments system, the first will be shown as default</span></span><br><span class="line"><span class="addition">+  # Choose: Disqus/Disqusjs/Livere/Gitalk/Valine/Utterances/Facebook Comments</span></span><br><span class="line"><span class="addition">+  use:</span></span><br><span class="line"><span class="addition">+  # - Valine</span></span><br><span class="line"><span class="addition">+  # - Disqus</span></span><br><span class="line"><span class="addition">+  text: true # Display the comment name next to the button</span></span><br><span class="line"><span class="addition">+  # lazyload: The comment system will be load when comment element enters the browser&#x27;s viewport.</span></span><br><span class="line"><span class="addition">+  # If you set it to false, the comment count will be invalid</span></span><br><span class="line"><span class="addition">+  lazyload: false</span></span><br><span class="line"><span class="addition">+  count: false # Display comment count in top_img</span></span><br><span class="line"></span><br><span class="line">disqus:</span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"><span class="deletion">-  count: false # dispaly comment count in top_img</span></span><br><span class="line"></span><br><span class="line">disqusjs:</span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"><span class="deletion">-  count: false # dispaly comment count in top_img</span></span><br><span class="line"></span><br><span class="line">livere:</span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"></span><br><span class="line">gitalk:</span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"><span class="deletion">-  count: false # dispaly comment count in top_img</span></span><br><span class="line"></span><br><span class="line">valine:</span><br><span class="line"><span class="deletion">-  enable: false # if you want use valine,please set this value is true</span></span><br><span class="line"><span class="deletion">-  count: false # dispaly comment count in top_img</span></span><br><span class="line"></span><br><span class="line">utterances:</span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"></span><br><span class="line">facebook_comments:</span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"><span class="deletion">-  count: false</span></span><br></pre></td></tr></table></figure></li><li><p>footer配置整理，修改部分用語  #279</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-since: 2020</span></span><br><span class="line"><span class="deletion">-footer_custom_text:</span></span><br><span class="line"><span class="deletion">-footer_copyright: true</span></span><br><span class="line"><span class="deletion">-ICP:</span></span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"><span class="deletion">-  url:</span></span><br><span class="line"><span class="deletion">-  text:</span></span><br><span class="line"><span class="deletion">-  icon: /img/icp.png</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+footer:</span></span><br><span class="line"><span class="addition">+  owner:</span></span><br><span class="line"><span class="addition">+    enable: true</span></span><br><span class="line"><span class="addition">+    since: 2020</span></span><br><span class="line"><span class="addition">+  custom_text: </span></span><br><span class="line"><span class="addition">+  copyright: true # Copyright of theme and framework</span></span><br><span class="line"><span class="addition">+  ICP: # Chinese ICP License</span></span><br><span class="line"><span class="addition">+    enable: false</span></span><br><span class="line"><span class="addition">+    url:</span></span><br><span class="line"><span class="addition">+    text:</span></span><br><span class="line"><span class="addition">+    icon: /img/icp.png</span></span><br></pre></td></tr></table></figure></li><li><p>移除‘添加書籤’功能，可執行配置按鈕</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">aside:</span><br><span class="line">  card_author:</span><br><span class="line">    enable: true</span><br><span class="line">    description:</span><br><span class="line"><span class="addition">+    button:</span></span><br><span class="line"><span class="addition">+      icon: fab fa-github</span></span><br><span class="line"><span class="addition">+      text: Follow Me</span></span><br><span class="line"><span class="addition">+      link: https://github.com/xxxxxx</span></span><br></pre></td></tr></table></figure></li><li><p>copy的copyright增加字數限制配置，可配置多少字以上才添加版權信息</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">copy:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="deletion">-  copyright: false</span></span><br><span class="line"><span class="addition">+  copyright:</span></span><br><span class="line"><span class="addition">+    enable: false</span></span><br><span class="line"><span class="addition">+    limit_count: 50</span></span><br></pre></td></tr></table></figure></li><li><p>aside recent post可設置按發表時間或者更新時間排序</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">aside:</span><br><span class="line">  card_recent_post:</span><br><span class="line">    enable: true</span><br><span class="line">    limit: 5 # if set 0 will show all</span><br><span class="line"><span class="addition">+    sort: date # date or updated</span></span><br></pre></td></tr></table></figure></li><li><p>更換typed.js/meting CDN</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-typed: https://cdn.jsdelivr.net/npm/typed.js</span></span><br><span class="line"><span class="deletion">-meting_js: https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+typed: https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js</span></span><br><span class="line"><span class="addition">+meting_js: https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li><p>增加文章過期提醒</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# Displays outdated notice for a post (文章過期提醒)</span></span><br><span class="line"><span class="addition">+noticeOutdate:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  style: flat # style: simple/flat</span></span><br><span class="line"><span class="addition">+  limit_day: 500 # When will it be shown</span></span><br><span class="line"><span class="addition">+  position: top # position: top/bottom</span></span><br><span class="line"><span class="addition">+  message_prev: It has been</span></span><br><span class="line"><span class="addition">+  message_next: days since the last update, the content of the article may be outdated.</span></span><br></pre></td></tr></table></figure></li><li><p>增加mac light 代碼框配色</p></li><li><p>文章copyright 可單獨配置</p></li><li><p>card-category 中category名稱和數字限制一行顯示</p></li><li><p>簡繁轉換優化，placeholder也會被轉換</p></li><li><p>引入css變數，減少css體積</p></li><li><p>新增 Pjax #234</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# Pjax [Beta]</span></span><br><span class="line"><span class="addition">+# It may contain bugs and unstable, give feedback when you find the bugs.</span></span><br><span class="line"><span class="addition">+# https://github.com/MoOx/pjax</span></span><br><span class="line"><span class="addition">+pjax: false</span></span><br></pre></td></tr></table></figure></li><li><p>添加第三方chat服務 crisp</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# crisp</span></span><br><span class="line"><span class="addition">+# https://crisp.chat/en/</span></span><br><span class="line"><span class="addition">+crisp:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  website_id:</span></span><br></pre></td></tr></table></figure></li><li><p>谷歌廣告增加自動廣告配置，減少不必要的js加載</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">google_adsense:</span><br><span class="line">  enable: false</span><br><span class="line"><span class="addition">+  auto_ads: true</span></span><br><span class="line">  js: https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js</span><br><span class="line">  client:</span><br><span class="line">  enable_page_level_ads: true</span><br></pre></td></tr></table></figure></li><li><p>當post_asset_folder為true時，post的top_img和cover可直接引用同名文件夾下的圖片，只需要寫圖片名字和後綴就行 #270</p></li><li><p>增加Yandex Webmaster tools verification配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# Yandex Webmaster tools verification setting</span></span><br><span class="line"><span class="addition">+# see https://webmaster.yandex.com/</span></span><br><span class="line"><span class="addition">+yandex_site_verification:</span></span><br></pre></td></tr></table></figure></li><li><p>post-meta可以配置是否顯示文字</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">post_meta:</span><br><span class="line">  page: # Home Page</span><br><span class="line">    date_type: created # created or updated or both 主頁文章日期是創建日或者更新日或都顯示</span><br><span class="line">    categories: true # true or false 主頁是否顯示分類</span><br><span class="line">    tags: false # true or false 主頁是否顯示標籤</span><br><span class="line"><span class="addition">+    label: true # true or false 顯示描述性文字</span></span><br><span class="line">  post:</span><br><span class="line">    date_type: both # created or updated or both 文章頁日期是創建日或者更新日或都顯示</span><br><span class="line">    categories: true # true or false 文章頁是否顯示分類</span><br><span class="line">    tags: true # true or false 文章頁是否顯示標籤</span><br><span class="line"><span class="addition">+    label: true # true or false 顯示描述性文字</span></span><br></pre></td></tr></table></figure></li><li><p>手機端post-meta調整顯示/支持顯示分類</p></li><li><p>代碼框滾動條顔色隨代碼主題變化</p></li><li><p>頭像/打賞圖片 增加lazyload</p></li><li><p>提升highlight-tool的加載速度</p></li><li><p>disqus/disqusjs/facebook comments 可隨夜間模式按鈕切換而轉換主題</p></li><li><p>mathjax升級到3 #216</p></li><li><p>pangu.js 只會渲染 body-wrap 區域</p></li><li><p>放大字體和縮小字體 限制在 10px~20px</p></li><li><p>更新谷歌分析代碼（gtag）</p></li><li><p>移除blueimp_md5 js</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-blueimp_md5: https://cdn.jsdelivr.net/npm/blueimp-md5/js/md5.min.js</span></span><br></pre></td></tr></table></figure></li><li><p>夜間模式和閲讀模式微調</p></li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復右下角按鈕被button標籤外掛遮擋的bugs</li><li>修復開啟photofigcaption後，圖庫會出現界面錯亂的Bugs</li><li>修復tabs外掛標簽與aplayer插件衝突而異常的bugs</li><li>aplayer的間距調整</li><li>修復文章front-matter的highlight_shrink和toc為空時，會出現js報錯的bugs</li><li>修復BUTTON標籤嵌套使用在其他標籤時，生成多了br標籤而導致樣式不同的bugs</li><li>修復部分設備遇到mobile-sidebar無法滾動的bugs</li><li>修復文章頁部分元素內文字溢出的Bugs</li><li>調整當card-category有收縮按鈕時的顯示佈局</li><li>修復配置PWA參數時，如果網站是子目錄時，會出現加載不到文件的bugs</li><li>修復hexo douban插件 點擊上/下一頁出現圖片變為null的bugs</li><li>適配hexo 5.0.0 修復toc點擊不會跳轉的bugs</li><li>適配hexo 5.0.0 修復toc不會隨著文章而滾動的bugs</li><li>修復Valine 的requiredFields設置為空 無效的bugs</li><li>調整手機界面下ol ul li的邊距 #267</li><li>修復facebook comments 在手機下寬度不是100%的bugs</li><li>修復share.js 分享的文章圖片都顯示同一張的bugs</li><li>去除note標籤外掛設為modern時，a標籤的下劃線</li><li>修正一些不正確的html結構</li><li>修復fancybox的alt會顯示undefined的bugs</li><li>修復footer藍色背景下，icp 文字hover 文字變藍看不清的Bug</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">3.0.0-RC1 (2020/06/16)</summary><div class="toggle-content"><h2 id="3-0-0-RC1-2020-06-16"><a href="#3-0-0-RC1-2020-06-16" class="headerlink" title="3.0.0-RC1 (2020/06/16)"></a>3.0.0-RC1 (2020/06/16)</h2><h3 id="Breaking-Change"><a href="#Breaking-Change" class="headerlink" title="Breaking Change"></a>Breaking Change</h3><ol><li><p>從3.0開始，不再對IE瀏覽器進行適配</p></li><li><p>強制使用fontawesome v5（會對一些自定義icon產生影響，請替換為V5圖標）</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-# fontawesome圖標</span></span><br><span class="line"><span class="deletion">-# 默認使用的是 fontawesome v4版本的圖標</span></span><br><span class="line"><span class="deletion">-fontawesome_v5:</span></span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"></span><br><span class="line">CDN:</span><br><span class="line"><span class="deletion">-  # fontawesome</span></span><br><span class="line"><span class="deletion">-  fontawesome_v4: https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css</span></span><br><span class="line"><span class="deletion">-  fontawesome_v5: https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css</span></span><br><span class="line"><span class="addition">+fontawesome: https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css</span></span><br></pre></td></tr></table></figure></li><li><p>_config.yml 內容修改</p><ol><li><p>精簡baidu_push/instantpage/click_heart/readmode/footer_copyright/medium_zoom/fancybox配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-baidu_push:</span></span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-instantpage:</span></span><br><span class="line"><span class="deletion">-  enable: true</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-click_heart:</span></span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-readmode:</span></span><br><span class="line"><span class="deletion">-  enable: true</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-footer_copyright:</span></span><br><span class="line"><span class="deletion">-  enable: true</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-medium_zoom:</span></span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-fancybox:</span></span><br><span class="line"><span class="deletion">-  enable: true</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+baidu_push: false</span></span><br><span class="line"><span class="addition">+instantpage: true</span></span><br><span class="line"><span class="addition">+click_heart: false</span></span><br><span class="line"><span class="addition">+readmode: true</span></span><br><span class="line"><span class="addition">+footer_copyright: true</span></span><br><span class="line"><span class="addition">+medium_zoom: false</span></span><br><span class="line"><span class="addition">+fancybox: true</span></span><br></pre></td></tr></table></figure></li><li><p>修改runtimeshow 的start_date 為publish_date</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">runtimeshow:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="deletion">-  start_date: 6/7/2018 00:00:00</span></span><br><span class="line"><span class="addition">+  publish_date: 6/7/2018 00:00:00</span></span><br></pre></td></tr></table></figure></li><li><p>laibili 改名為 LiveRe</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-laibili:</span></span><br><span class="line"><span class="addition">+livere:</span></span><br><span class="line">  enable: false</span><br><span class="line">  uid:</span><br></pre></td></tr></table></figure></li><li><p>改hr為hr_icon 可設置取消icon</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 水平分隔綫</span><br><span class="line"><span class="deletion">-hr:</span></span><br><span class="line"><span class="addition">+hr_icon:</span></span><br><span class="line">  enable: true</span><br><span class="line">  icon: #fontawesome上圖標的Unicode</span><br><span class="line">  icon-top:</span><br></pre></td></tr></table></figure></li><li><p>更改loading_bg為error_img，post-loading移到lazyload去</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-lodding_bg:</span></span><br><span class="line"><span class="addition">+error_img:</span></span><br><span class="line">  flink: /img/friend_404.gif #404後圖片</span><br><span class="line">  post_page: /img/404.jpg #404後圖片</span><br><span class="line"><span class="deletion">-  post: /img/loading.gif #加載動畫</span></span><br><span class="line"></span><br><span class="line">lazyload:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="addition">+  post: /img/loading.gif #加載動畫</span></span><br></pre></td></tr></table></figure></li><li><p>pangu 的field配置只能配置site/post</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pangu:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="deletion">-  field: page # page/post</span></span><br><span class="line"><span class="addition">+  field: site # site/post</span></span><br></pre></td></tr></table></figure></li><li><p>整合auto_open_sidebar到toc去</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">toc:</span><br><span class="line">  enable: true</span><br><span class="line">  number: true</span><br><span class="line"><span class="addition">+  auto_open: true # auto open the sidebar</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-# auto open the sidebar in &#x27;post&#x27;</span></span><br><span class="line"><span class="deletion">-auto_open_sidebar:</span></span><br><span class="line"><span class="deletion">-  enable: true</span></span><br></pre></td></tr></table></figure></li><li><p>font去除enable配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 全局字體</span><br><span class="line">font:</span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"><span class="deletion">-  font-family: Lato, Helvetica Neue For Number, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, PingFang SC, Hiragino Sans GB, MicrMicrosoft YaHei&quot;, Helvetica Neue, Helvetica, Arial, sans-serif</span></span><br><span class="line"><span class="deletion">-  code-font: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace, Helvetica Neue For Number</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+  font-family:</span></span><br><span class="line"><span class="addition">+  code-font:</span></span><br></pre></td></tr></table></figure></li><li><p>刪除部分配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">valine:</span><br><span class="line"><span class="deletion">-  notify: false # valine mail notify (true/false) Deprecated in v1.4.0+</span></span><br><span class="line"><span class="deletion">-  verify: false # valine verify code (true/false) Deprecated in v1.4.0+</span></span><br><span class="line"></span><br><span class="line">translate:</span><br><span class="line"><span class="deletion">-  #博客網址</span></span><br><span class="line"><span class="deletion">-  cookieDomain: &#x27;https://xxx/&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>刪除twitter_meta配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-# twitter分享自動帶上樣式</span></span><br><span class="line"><span class="deletion">-# -https://i.loli.net/2019/09/08/qm3RfvUCKbct1Wz.png</span></span><br><span class="line"><span class="deletion">-twitter_meta: true</span></span><br></pre></td></tr></table></figure></li></ol></li></ol><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li><p>table寬度佔滿顯示</p></li><li><p>增加系統Darkmode切換監控，當系統切換Darkmode時，主題會立刻切換</p></li><li><p>card_description 支持html書寫</p></li><li><p>Dark Mode和Light Mode 切換按鈕icon更換</p></li><li><p>適配hexo自帶標簽 Pullquote</p></li><li><p>百度推送鏈接增加dns-prefetch</p></li><li><p>canonical 設為默認生成 不再提供配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-# 避免重複網址分散seo</span></span><br><span class="line"><span class="deletion">-canonical: true</span></span><br></pre></td></tr></table></figure></li><li><p>instantpage js 加載增加defer</p></li><li><p>fireworks 增加z-index配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fireworks:</span><br><span class="line">  enable: false</span><br><span class="line"><span class="addition">+  zIndex: 9999 # -1 or 9999</span></span><br></pre></td></tr></table></figure></li><li><p>新的Tag Plugins - button</p></li><li><p>新的Tag Plugins - tabs</p></li><li><p>可配置justifiedGallery CDN</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CDN:</span><br><span class="line"><span class="addition">+  # justifiedGallery</span></span><br><span class="line"><span class="addition">+  justifiedGallery_js: https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js</span></span><br><span class="line"><span class="addition">+  justifiedGallery_css: https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css</span></span><br></pre></td></tr></table></figure></li><li><p>新設計404頁面</p></li><li><p>aplayer js /css 可配置，在文章front-matter中設置aplayer. 防止aplayer在每個頁面都插入代碼</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CDN:</span><br><span class="line"><span class="addition">+  # aplayer</span></span><br><span class="line"><span class="addition">+  aplayer_css: https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css</span></span><br><span class="line"><span class="addition">+  aplayer_js: https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js</span></span><br><span class="line"><span class="addition">+  meting_js: https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js</span></span><br></pre></td></tr></table></figure></li><li><p>增加在綫聊天 Chat Services (chatra/tidio/daovoice/gitter), 可配置主題chat按鈕替換原在綫聊天按鈕</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# Chat Button [recommend]</span></span><br><span class="line"><span class="addition">+# It will create a button in the bottom right corner of website, and hide the origin button</span></span><br><span class="line"><span class="addition">+chat_btn: false</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+# The origin chat button is displayed when scrolling up, and the button is hidden when scrolling down</span></span><br><span class="line"><span class="addition">+chat_hide_show: false</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+# chatra</span></span><br><span class="line"><span class="addition">+# https://chatra.io/</span></span><br><span class="line"><span class="addition">+chatra:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  id:</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+# tidio</span></span><br><span class="line"><span class="addition">+# https://www.tidio.com/</span></span><br><span class="line"><span class="addition">+tidio:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  public_key:</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+# daovoice</span></span><br><span class="line"><span class="addition">+# http://daovoice.io/</span></span><br><span class="line"><span class="addition">+daovoice:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  app_id:</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+# gitter</span></span><br><span class="line"><span class="addition">+# https://gitter.im/</span></span><br><span class="line"><span class="addition">+gitter:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  room:</span></span><br></pre></td></tr></table></figure></li><li><p>可配置rightside按鈕與底部的距</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# 右下角按鈕距離底部的距離(默認單位為px)</span></span><br><span class="line"><span class="addition">+rightside-bottom:</span></span><br></pre></td></tr></table></figure></li><li><p>更換lazyload服務商</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CDN:</span><br><span class="line"><span class="deletion">-lazyload: https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js</span></span><br><span class="line"><span class="addition">+lazyload: https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js</span></span><br></pre></td></tr></table></figure></li><li><p>card-categories增加收縮/展開按鈕</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">aside:</span><br><span class="line">  card_categories:</span><br><span class="line">    enable: true</span><br><span class="line">    limit: 8 # if set 0 will show all</span><br><span class="line"><span class="addition">+    expand: none # none/true/false</span></span><br></pre></td></tr></table></figure></li><li><p>更改auto_excerpt為index_post_content，並擁有三種方法可選</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-# 自動節選</span></span><br><span class="line"><span class="deletion">-auto_excerpt:</span></span><br><span class="line"><span class="deletion">-  enable: true</span></span><br><span class="line"><span class="deletion">-  length: 150</span></span><br><span class="line"> </span><br><span class="line"><span class="addition">+# Display the article introduction on homepage</span></span><br><span class="line"><span class="addition">+# 1: description</span></span><br><span class="line"><span class="addition">+# 2: both (if the description exists, it will show description. or show the auto_excerpt)</span></span><br><span class="line"><span class="addition">+# 3: auto_excerpt (default)</span></span><br><span class="line"><span class="addition">+index_post_content:</span></span><br><span class="line"><span class="addition">+  method: 3</span></span><br><span class="line"><span class="addition">+  length: 500 # if you set method to 2 or 3, the length need to config</span></span><br></pre></td></tr></table></figure></li><li><p>可在post裏單獨設置 auto_open: false關掉sidebar自動打開 #232</p></li><li><p>友情鏈接界面代碼優化/增加分類描述/分類名字和描述可以不寫/友情鏈接yml寫法更改（舊的寫法依舊有效，沒影響）</p></li><li><p>文章/頁面font-matter 可設置highlight_shrink (true or false)</p></li><li><p>代碼框優化</p><ol><li>調整部分代碼顔色</li><li>增加一款代碼主題 mac </li><li>代碼框主題支持自定義</li></ol></li><li><p>閲讀模式下去掉代碼高亮</p></li><li><p>disqusjs更新js/css版本，增加nocomment配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">disqusjs:</span><br><span class="line">  enable: false</span><br><span class="line">  shortname:</span><br><span class="line">  siteName:</span><br><span class="line">  apikey:</span><br><span class="line"><span class="deletion">-  api: https://disqus.skk.moe/disqus/ #一般情況下無需修改 API 地址</span></span><br><span class="line"><span class="addition">+  api:</span></span><br><span class="line"><span class="addition">+  nocomment: # display when a blog post or an article has no comment attached</span></span><br><span class="line">  admin:</span><br><span class="line">  adminLabel:</span><br><span class="line">  count: false # dispaly comment count in top_img</span><br><span class="line"></span><br><span class="line">CDN:</span><br><span class="line"><span class="deletion">-  disqusjs: https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqus.js</span></span><br><span class="line"><span class="deletion">-  disqusjs_css: https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqusjs.css</span></span><br><span class="line"><span class="addition">+  disqusjs: https://cdn.jsdelivr.net/npm/disqusjs@1/dist/disqus.js</span></span><br><span class="line"><span class="addition">+  disqusjs_css: https://cdn.jsdelivr.net/npm/disqusjs@1/dist/disqusjs.css</span></span><br></pre></td></tr></table></figure></li><li><p>打賞增加鏈接配置 /打賞寫法更改（舊寫法依然有用）#240</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 打賞按鈕</span><br><span class="line">reward:</span><br><span class="line">  enable: true</span><br><span class="line">  QR_code:</span><br><span class="line"><span class="deletion">-    - itemlist:</span></span><br><span class="line"><span class="deletion">-        img: /img/wechat.jpg</span></span><br><span class="line"><span class="deletion">-        text: 微信</span></span><br><span class="line"><span class="deletion">-    - itemlist:</span></span><br><span class="line"><span class="deletion">-        img: /img/alipay.jpg</span></span><br><span class="line"><span class="deletion">-        text: 支付寶</span></span><br><span class="line"><span class="addition">+    - img: /img/wechat.jpg</span></span><br><span class="line"><span class="addition">+      link:</span></span><br><span class="line"><span class="addition">+      text: 微信</span></span><br><span class="line"><span class="addition">+    - img: /img/alipay.jpg</span></span><br><span class="line"><span class="addition">+      link:</span></span><br><span class="line"><span class="addition">+      text: 支付寶</span></span><br></pre></td></tr></table></figure></li><li><p>移除JS-COOKIES </p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CDN:</span><br><span class="line"><span class="deletion">-  js_cookies: https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js</span></span><br></pre></td></tr></table></figure></li><li><p>可為文章配置是否顯示TOC,即使配置中已把toc設為false</p></li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修正側邊欄目錄收縮、展開圖標不對齊的bugs</li><li>修改部分用語(zh-CN/zh-TW/en)</li><li>修復card-categories和card-archives 邊緣點擊沒有跳轉的bugs</li><li>修復網站是子目錄時，社交網站為相對地址時，地址生成錯誤的bugs</li><li>修復最後一篇文章的Pagination沒有佔據全寬度的Bug</li><li>修復推薦文章佈局在microsoft edge(舊版)顯示的Bug</li><li>修復閲讀模式下 黑色代碼框下字體顯示不清楚 #223</li><li>修復當blog_title_font不是設置google字體時，加載了preconnect  //fonts.googleapis.com 的bugs</li><li>修復設置copy為false時，會導致代碼複製也無法複製的bugs</li><li>閲讀模式調整</li><li>修復部分壓縮軟件壓縮html報錯的bugs</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">2.3.5(2020/05/01)</summary><div class="toggle-content"><h2 id="2-3-5-2020-05-01"><a href="#2-3-5-2020-05-01" class="headerlink" title="2.3.5 (2020/05/01)"></a>2.3.5 (2020/05/01)</h2><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li><p>beautify 可配置生效於全站還是post頁 #218</p> <figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">beautify:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="addition">+  field: post # site/post</span></span><br><span class="line">  title-prefix-icon: &#x27;\f0c1&#x27;</span><br><span class="line">  title-prefix-icon-color: &#x27;#F47466&#x27;</span><br></pre></td></tr></table></figure></li><li><p>更換lazyload js</p> <figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-lazyload:</span></span><br><span class="line"><span class="deletion">-  enable: true</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+lazyload: true</span></span><br><span class="line"></span><br><span class="line">CDN:</span><br><span class="line"></span><br><span class="line"><span class="deletion">-  lazyload: https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js</span></span><br><span class="line"><span class="addition">+  lazyload: https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>增加文章anchor配置</p> <figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ # anchor</span></span><br><span class="line"><span class="addition">+ # when you scroll in post , the url will update according to header id.</span></span><br><span class="line"><span class="addition">+ anchor: false</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復當menu沒設置圖標時，會報Cannot read property ‘trim’ of undefined 的bug</li><li>修復meta description 自動生成文章前200文字時部分沒有轉義的bug</li><li>修復開啟lazyload後，使用 無法顯示照片的bug</li><li>修復tags頁標籤只顯示8個的bug</li><li>修復當博客root不是’/‘時,引用本地圖片會顯示不出的bug</li><li>修復替換url hash 導致頁面跳動的bug</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">2.3.0(2020/04/26)</summary><div class="toggle-content"><h2 id="2-3-0-2020-04-26"><a href="#2-3-0-2020-04-26" class="headerlink" title="2.3.0(2020/04/26)"></a>2.3.0(2020/04/26)</h2><h3 id="Breaking-Change"><a href="#Breaking-Change" class="headerlink" title="Breaking Change"></a>Breaking Change</h3><ol><li><p>增加Facebook Comments</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# Facebook Comments Plugin</span></span><br><span class="line"><span class="addition">+# https://developers.facebook.com/docs/plugins/comments/</span></span><br><span class="line"><span class="addition">+facebook_comments:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  app_id:</span></span><br><span class="line"><span class="addition">+  user_id: # optional</span></span><br><span class="line"><span class="addition">+  pageSize: 10 # The number of comments to show</span></span><br><span class="line"><span class="addition">+  order_by: social # social/time/reverse_time</span></span><br><span class="line"><span class="addition">+  lang: en_US # Language en_US/zh_CN/zh_TW and so on</span></span><br><span class="line"><span class="addition">+  count: false</span></span><br></pre></td></tr></table></figure></li></ol><ol><li><p>增加頁面加載動畫Preloader #193</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# 加載動畫 Loading Animation</span></span><br><span class="line"><span class="addition">+preloader: false</span></span><br></pre></td></tr></table></figure></li></ol><ol><li><p>aside card-tags可配置是否顯示顏色/aside subtitle可配置，優先顯示配置內容、沒有的顯示頁面subtitle #191 /aside widget 增加部分參數可配置/aside widget的Categories，Tags，post,Archives可配置limit/整合公告欄配置到aside去</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">aside:</span><br><span class="line">  enable: true</span><br><span class="line">  mobile: true # 手機頁面( 顯示寬度 &lt; 768px )是否顯示aside內容</span><br><span class="line">  position: right # left or right</span><br><span class="line"><span class="deletion">-  card_author: true</span></span><br><span class="line"><span class="deletion">-  card_announcement: true</span></span><br><span class="line"><span class="deletion">-  card_recent_post: true</span></span><br><span class="line"><span class="deletion">-  card_categories: true</span></span><br><span class="line"><span class="deletion">-  card_tags: true</span></span><br><span class="line"><span class="deletion">-  card_archives: true</span></span><br><span class="line"><span class="addition">+  card_author:</span></span><br><span class="line"><span class="addition">+    enable: true</span></span><br><span class="line"><span class="addition">+    description:</span></span><br><span class="line"><span class="addition">+  card_announcement:</span></span><br><span class="line"><span class="addition">+    enable: true</span></span><br><span class="line"><span class="addition">+    content: This is my Blog</span></span><br><span class="line"><span class="addition">+  card_recent_post:</span></span><br><span class="line"><span class="addition">+    enable: true</span></span><br><span class="line"><span class="addition">+    limit: 5 # if set 0 will show all</span></span><br><span class="line"><span class="addition">+  card_categories:</span></span><br><span class="line"><span class="addition">+    enable: true</span></span><br><span class="line"><span class="addition">+    limit: 8 # if set 0 will show all</span></span><br><span class="line"><span class="addition">+  card_tags:</span></span><br><span class="line"><span class="addition">+    enable: true</span></span><br><span class="line"><span class="addition">+    limit: 40 # if set 0 will show all</span></span><br><span class="line"><span class="addition">+    color: false</span></span><br><span class="line"><span class="addition">+  card_archives:</span></span><br><span class="line"><span class="addition">+    enable: true</span></span><br><span class="line"><span class="addition">+    type: monthly # yearly or monthly</span></span><br><span class="line"><span class="addition">+    format: MMMM YYYY # eg: YYYY年MM月</span></span><br><span class="line"><span class="addition">+    order: -1 # Sort of order. 1, asc for ascending; -1, desc for descending</span></span><br><span class="line"><span class="addition">+    limit: 8 # if set 0 will show all</span></span><br><span class="line">  card_webinfo: true</span><br><span class="line">  </span><br><span class="line"><span class="deletion">-# 網站公告</span></span><br><span class="line"><span class="deletion">-announcement:</span></span><br><span class="line"><span class="deletion">-  content: 感謝訪問本站，若喜歡請收藏 ^_^</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><ol><li><p>改CDN_USE為inject,可插入代碼到head或者bottom</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-# CDN</span></span><br><span class="line"><span class="deletion">-# 網站必須</span></span><br><span class="line"><span class="deletion">-# 可根據需要自行添加js/css</span></span><br><span class="line"><span class="deletion">-CDN_USE:</span></span><br><span class="line"><span class="deletion">-  css:</span></span><br><span class="line"><span class="deletion">-    - /css/index.css</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-  js:</span></span><br><span class="line"><span class="deletion">-    - https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js #/js/third-party/jquery.min.js</span></span><br><span class="line"><span class="deletion">-    - /js/utils.js</span></span><br><span class="line"><span class="deletion">-    - /js/main.js</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+# inject</span></span><br><span class="line"><span class="addition">+# 插入代碼到頭部&lt;/head&gt;之前 和 尾部&lt;/body&gt;之前</span></span><br><span class="line"><span class="addition">+inject:</span></span><br><span class="line"><span class="addition">+  head:</span></span><br><span class="line"><span class="addition">+  # - &lt;link rel=&quot;stylesheet&quot; href=&quot;xxxxx&quot;&gt;</span></span><br><span class="line"><span class="addition">+  bottom:</span></span><br><span class="line"><span class="addition">+  # - &lt;script src=&quot;xxxx&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"></span><br><span class="line"># CDN</span><br><span class="line"># 非必要不要修改</span><br><span class="line">CDN:</span><br><span class="line"><span class="addition">+  # main</span></span><br><span class="line"><span class="addition">+  main_css: /css/index.css</span></span><br><span class="line"><span class="addition">+  jquery: https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js</span></span><br><span class="line"><span class="addition">+  main: /js/main.js</span></span><br><span class="line"><span class="addition">+  utils: /js/utils.js</span></span><br></pre></td></tr></table></figure></li></ol><ol><li><p>適配valine 1.4.5以上版本</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">valine:</span><br><span class="line">  enable: false # if you want use valine,please set this value is true</span><br><span class="line">  appId: # leancloud application app id</span><br><span class="line">  appKey: # leancloud application app key</span><br><span class="line">  notify: false # valine mail notify (true/false) Deprecated in v1.4.0+</span><br><span class="line">  verify: false # valine verify code (true/false) Deprecated in v1.4.0+</span><br><span class="line">  pageSize: 10 # comment list page size</span><br><span class="line">  avatar: monsterid # gravatar style https://valine.js.org/#/avatar</span><br><span class="line">  lang: en # i18n: zh-CN/zh-TW/en/ja</span><br><span class="line">  placeholder: Please leave your footprints # valine comment input placeholder(like: Please leave your footprints )</span><br><span class="line">  guest_info: nick,mail,link #valine comment header info</span><br><span class="line">  recordIP: false # Record reviewer IP</span><br><span class="line">  serverURLs: # This configuration is suitable for domestic custom domain name users, overseas version will be automatically detected (no need to manually fill in)</span><br><span class="line"><span class="addition">+  emojiCDN: # emoji CDN</span></span><br><span class="line"><span class="addition">+  enableQQ: false # enable the Nickname box to automatically get QQ Nickname and QQ Avatar</span></span><br><span class="line"><span class="addition">+  requiredFields: nick,mail # required fields nick/mail/link</span></span><br><span class="line">  bg: /img/comment_bg.png # valine background</span><br><span class="line">  count: false # dispaly comment count in top_img</span><br></pre></td></tr></table></figure></li><li><p>移除對文章隱藏的支持</p></li></ol><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li>增加標籤外掛 tag-toggle</li><li>適配hexo-generator-indexed插件</li><li>Dark mode和Read mode配色微調</li><li>增加頁面keywords設置 #191</li><li>algolia-search highlight文字加深</li><li>調整子目錄的排版(向左對齊)</li><li>調整aside和mobile sidebar 網頁資訊佈局，當缺少一個時，寬度依舊平分</li><li>sidebar menu 增加頭像轉圈hover</li><li>當沒有設置Description時，會自動讀取文章前200個文字作為meta Description</li><li>meta增加article:published_time和article:modified_time</li><li>subtitle修改為網頁加載完後再加載，防止API迴應過慢而阻礙網頁顯示</li><li>移除subtitle金山詞霸每日一句，增加搏天API的隨機語錄</li><li>本地搜索支持顯示文章內容和高亮keyword</li><li>Read mode下可以切換Dark mode和Light mode</li><li>高分辨率下的界面適配 #163</li><li>修復Dark Mode下，note標籤的顯示bug</li><li>添加 dns_prefetch</li></ol><h3 id="Fixed"><a href="#Fixed" class="headerlink" title="Fixed"></a>Fixed</h3><ol><li>修復 articleSort 設置文章封面邏輯不一致的問題 #194</li><li>修正zh-TW部分用語</li><li>修復hide-block 配置顏色顯示出錯的bug</li><li>修復只能點擊子目錄文字才能跳轉的bug</li><li>修復搜索結果在手機端無法滾動的bug</li><li>修復aside categories 查看更多跳轉到tags頁面的bug #188</li><li>修復當flink.yml內容為空時，報錯的bug</li><li>修復Dark mode下 aside 查看更多文字顏色太淺的bug</li><li>修復POST-META關閉閲讀分鐘和訪問量後,評論量前有分割線的bug</li><li>修復canvas_ribbon透明度變為1再變回預設值bug</li><li>修復當default_cover沒設置時，會出現無圖片的bug</li><li>修復文章頁替換url hash值而導致歷史記錄過多的問題</li><li>修復DarkMode下，note標籤的顯示bug</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">2.2.5(2020/03/28)</summary><div class="toggle-content"><h2 id="2-2-5-2020-03-28"><a href="#2-2-5-2020-03-28" class="headerlink" title="2.2.5(2020/03/28)"></a>2.2.5(2020/03/28)</h2><h3 id="Breaking-Change"><a href="#Breaking-Change" class="headerlink" title="Breaking Change"></a>Breaking Change</h3><ol><li><p>增加自動廣告位置</p> <figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ad:</span></span><br><span class="line"><span class="addition">+ index:</span></span><br><span class="line"><span class="addition">+ aside:</span></span><br><span class="line"><span class="addition">+ post:</span></span><br></pre></td></tr></table></figure></li><li><p>增加圖片Figcaption顯示</p> <figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ photofigcaption: false</span></span><br></pre></td></tr></table></figure></li><li><p>增加全站總字數顯示，可配置是否關閉wordcout閲讀時間/字數統計/全站總字數</p> <figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wordcount:</span><br><span class="line">  enable: false</span><br><span class="line"><span class="addition">+  post_wordcount: true</span></span><br><span class="line"><span class="addition">+  min2read: true</span></span><br><span class="line"><span class="addition">+  total_wordcount: true</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li>文章頁上滑出現的頂欄顯示目錄</li><li>全站post-meta增加提示文本(Tooltip Text)</li><li>調整文章頁post-meta和主頁post-meta的間距</li><li>文章頁，當設置只顯示一個日期時，增加文字顯示</li></ol><h3 id="Fixed"><a href="#Fixed" class="headerlink" title="Fixed"></a>Fixed</h3><ol><li>修復lazyload中，img標籤的class在src後面時，導致替換出錯的bug</li><li>修復複製版權信息url為undefined的bug</li><li>修復aside 的 “查看更多” 不居中的bug</li><li>修復highlight_shrink設為false時,js報錯的bug</li><li>修復highlight_shrink設為true,點擊無反應，沒有打開代碼框的bug</li><li>Darkmode下，出現切換按鈕icon沒有改變的bug</li><li>修復簡繁轉換無效的bug</li><li>修復首頁文章日期顯示錯誤的bug</li><li>修復因註釋掉豆瓣設置導致報Cannot read property ‘meta’ of undefined的bug</li><li>修復Gitalk報Error: Cannot read property ‘repository’ of undefined 的bug</li><li>修復評論utterances 在display_mode設置為dark時，仍顯示light主題的bug</li><li>修復display_mode設置dark沒有效果的bug</li><li>評論增加夜間模式、文章頁判斷,減少不必要的js加載</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">2.2.0 (2020/03/17)</summary><div class="toggle-content"><h2 id="2-2-0-2020-03-17"><a href="#2-2-0-2020-03-17" class="headerlink" title="2.2.0 (2020/03/17)"></a>2.2.0 (2020/03/17)</h2><h3 id="Breaking-Change"><a href="#Breaking-Change" class="headerlink" title="Breaking Change"></a>Breaking Change</h3><ol><li>不再支持hexo 4.0.0以下版本</li><li><p>添加hexo fragment_cache,加快生成速度</p> <figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ fragment_cache: true</span></span><br></pre></td></tr></table></figure></li><li><p>完善V5圖標顯示，不再需要同時加載V4和v5圖標</p> <figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ fontawesome_v5:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"></span><br><span class="line">CDN_USE:</span><br><span class="line">  css:</span><br><span class="line">    - /css/index.css</span><br><span class="line"><span class="deletion">-   - https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css</span></span><br><span class="line"><span class="deletion">-   - https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css #fontawesomeV5_css</span></span><br><span class="line"></span><br><span class="line">CDN:</span><br><span class="line"><span class="addition">+  # fontawesome</span></span><br><span class="line"><span class="addition">+  fontawesome_v4: https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css</span></span><br><span class="line"><span class="addition">+  fontawesome_v5: https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css</span></span><br></pre></td></tr></table></figure></li><li><p>去除cheerio依賴</p></li><li><p>整合豆瓣配置，增加配置遊戲，圖書頁面top_img,可設置是否設置meta,解決部分瀏覽器無法顯示圖片問題</p> <figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- # 如果你有使用hexo-douban去生成movie界面，可配置這個</span></span><br><span class="line"><span class="deletion">- movies_img: https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/movie.jpg</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+ douban:</span></span><br><span class="line"><span class="addition">+   meta: false</span></span><br><span class="line"><span class="addition">+   movies_img:</span></span><br><span class="line"><span class="addition">+   books_img:</span></span><br><span class="line"><span class="addition">+   games_img:</span></span><br></pre></td></tr></table></figure></li><li><p>友情鏈接除列表外可自定義內容</p></li><li><p>可設置主頁標題距離頂部距離</p> <figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 主頁設置</span><br><span class="line"># 默認top_img全屏，site_info在中間</span><br><span class="line"># 使用默認, 都無需填寫(建議默認)</span><br><span class="line"><span class="addition">+index_site_info_top: # 主頁標題距離頂部距離  例如 300px/300em/300rem/10%</span></span><br><span class="line"><span class="comment">index_top_img_height: # 主頁top_img高度 例如 300px/300em/300rem  不能使用百分比</span></span><br></pre></td></tr></table></figure></li><li><p>側邊欄可隱藏,可設置手機頁面是否隱藏</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-aside_mobile: true</span></span><br><span class="line"></span><br><span class="line">aside:</span><br><span class="line"><span class="addition">+  enable: true</span></span><br><span class="line"><span class="addition">+  mobile: true # 手機頁面( 顯示寬度 &lt; 768px )是否顯示aside內容</span></span><br><span class="line">  position: right # left or right</span><br><span class="line">  card_author: true</span><br></pre></td></tr></table></figure></li><li><p>增加disqusjs和utterances 兩個評論</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+disqusjs:</span></span><br><span class="line"><span class="addition">+  enable: false #開啟改為 true</span></span><br><span class="line"><span class="addition">+  shortname:</span></span><br><span class="line"><span class="addition">+  siteName:</span></span><br><span class="line"><span class="addition">+  apikey:</span></span><br><span class="line"><span class="addition">+  api: https://disqus.skk.moe/disqus/ #一般情況下無需修改 API 地址</span></span><br><span class="line"><span class="addition">+  admin:</span></span><br><span class="line"><span class="addition">+  adminLabel:</span></span><br><span class="line"><span class="addition">+  count: true # top_img顯示評論數</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+ utterances:</span></span><br><span class="line"><span class="addition">+   enable: false</span></span><br><span class="line"><span class="addition">+   repo: jerryc127/jerryc127.github.io # 可選 pathname/url/title/og:title</span></span><br><span class="line"><span class="addition">+   issue_term: pathname # 可選 github-light/github-dark/github-dark-orange/icy-dark/dark-blue/photon-dark</span></span><br><span class="line"><span class="addition">+  light_theme: github-light</span></span><br><span class="line"><span class="addition">+  dark_theme: photon-dark</span></span><br></pre></td></tr></table></figure></li><li><p>首頁subtitle可關閉打字效果，可設置打字效果顯示一次或loop</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">subtitle:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="addition">+  # 打字效果</span></span><br><span class="line"><span class="addition">+  effect: true</span></span><br><span class="line"><span class="addition">+  # 循環或者只打字一次</span></span><br><span class="line"><span class="addition">+  loop: false</span></span><br><span class="line">  # source調用第三方服務</span><br><span class="line">  # source: false 關閉調用</span><br><span class="line">  # source: 1  調用金山詞霸的每日一句(簡體)</span><br><span class="line">  # source: 2  調用一言網的一句話(簡體) #https://hitokoto.cn/</span><br><span class="line">  # source: 3  調用一句網(簡體) http://yijuzhan.com/</span><br><span class="line">  # source: 4  調用今日詩詞(簡體) https://www.jinrishici.com/</span><br><span class="line">  # subtitle 會先顯示 source , 再顯示 sub 的內容</span><br><span class="line">  source: 2</span><br><span class="line">  # (如果有英文逗號&#x27; , &#x27;，請使用轉義字符 &amp;#44;)</span><br><span class="line">  # 如果關閉打字效果，subtitle只會顯示sub的第一行文字</span><br><span class="line">  sub:</span><br><span class="line">    - 今日事&amp;#44;今日畢</span><br><span class="line">    - Never put off till tomorrow what you can do today</span><br></pre></td></tr></table></figure></li><li><p>增加valine和gitalk的配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">gitalk:</span><br><span class="line">  enable: false</span><br><span class="line">  client_id:</span><br><span class="line">  client_secret:</span><br><span class="line">  repo:</span><br><span class="line">  owner:</span><br><span class="line">  admin:</span><br><span class="line">  language: zh-CN # en , zh-CN , zh-TW</span><br><span class="line"><span class="addition">+  perPage: 10 # Pagination size, with maximum 100.</span></span><br><span class="line"><span class="addition">+  distractionFreeMode: false # Facebook-like distraction free mode.</span></span><br><span class="line"><span class="addition">+  pagerDirection: last # Comment sorting direction, available values are last and first.</span></span><br><span class="line"><span class="addition">+  createIssueManually: false # Gitalk will create a corresponding github issue for your every single page automatically</span></span><br><span class="line">  count: true # top_img顯示評論數</span><br><span class="line"></span><br><span class="line">valine:</span><br><span class="line">  enable: false # if you want use valine,please set this value is true</span><br><span class="line">  appId:  # leancloud application app id</span><br><span class="line">  appKey:  # leancloud application app key</span><br><span class="line">  notify: false # valine mail notify (true/false) https://github.com/xCss/Valine/wiki</span><br><span class="line">  verify: false # valine verify code (true/false)</span><br><span class="line">  pageSize: 10 # comment list page size</span><br><span class="line">  avatar: monsterid # gravatar style https://valine.js.org/#/avatar</span><br><span class="line">  lang: en # i18n: zh-cn/en</span><br><span class="line">  placeholder: 記得留下你的暱稱和郵箱....可以快速收到回覆 # valine comment input placeholder(like: Please leave your footprints )</span><br><span class="line">  guest_info: nick,mail,link #valine comment header info</span><br><span class="line"><span class="addition">+  recordIP: false # Record reviewer IP</span></span><br><span class="line"><span class="addition">+  serverURLs: # This configuration is suitable for domestic custom domain name users, overseas version will be automatically detected (no need to manually fill in)</span></span><br><span class="line">  bg: /img/comment_bg.png # valine background</span><br><span class="line">  count: true # top_img顯示評論數</span><br></pre></td></tr></table></figure></li><li><p>darkmode配置整理</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- # 夜間模式</span></span><br><span class="line"><span class="deletion">- darkmode:</span></span><br><span class="line"><span class="deletion">-  enable: true</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-# 自動切換 dark mode和 light mode</span></span><br><span class="line"><span class="deletion">-# autoChangeMode: 1  跟隨系統而變化，不支持的瀏覽器/系統將按照時間晚上6點到早上6點之間切換為 dark mode</span></span><br><span class="line"><span class="deletion">-# autoChangeMode: 2  只按照時間晚上6點到早上6點之間切換為 dark mode</span></span><br><span class="line"><span class="deletion">-# autoChangeMode: false 取消自動切換</span></span><br><span class="line"><span class="deletion">-autoChangeMode: false</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+ darkmode:</span></span><br><span class="line"><span class="addition">+  enable: true</span></span><br><span class="line"><span class="addition">+  # dark mode和 light mode切換按鈕</span></span><br><span class="line"><span class="addition">+  button: true</span></span><br><span class="line"><span class="addition">+  # 自動切換 dark mode和 light mode</span></span><br><span class="line"><span class="addition">+  # autoChangeMode: 1  跟隨系統而變化，不支持的瀏覽器/系統將按照時間晚上6點到早上6點之間切換為 dark mode</span></span><br><span class="line"><span class="addition">+  # autoChangeMode: 2  只按照時間晚上6點到早上6點之間切換為 dark mode</span></span><br><span class="line"><span class="addition">+  # autoChangeMode: false 取消自動切換</span></span><br><span class="line"><span class="addition">+  autoChangeMode: false</span></span><br></pre></td></tr></table></figure></li><li><p>增加404頁面</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# A simple 404 page</span></span><br><span class="line"><span class="addition">+error_404:</span></span><br><span class="line"><span class="addition">+  enable: true</span></span><br><span class="line"><span class="addition">+  subtitle: &quot;頁面沒有找到&quot;</span></span><br><span class="line"><span class="addition">+  background:</span></span><br></pre></td></tr></table></figure></li><li><p>post_beautify改為beautify，頁面美化不再只限於post頁，page頁也一樣</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-post_beautify:</span></span><br><span class="line"><span class="addition">+beautify:</span></span><br><span class="line">  enable: true</span><br><span class="line">  title-prefix-icon: &#x27;\f0c1&#x27;</span><br><span class="line">  title-prefix-icon-color: &quot;#F47466&quot;</span><br></pre></td></tr></table></figure></li><li><p>可設置是否顯示cover，可設置各位置的cover顯示</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-# the default cover of the post</span></span><br><span class="line"><span class="deletion">-default_cover: https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-index_post_cover: both</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+cover:</span></span><br><span class="line"><span class="addition">+  # 是否顯示文章封面</span></span><br><span class="line"><span class="addition">+  index_enable: true</span></span><br><span class="line"><span class="addition">+  aside_enable: true</span></span><br><span class="line"><span class="addition">+  archives_enable: true</span></span><br><span class="line"><span class="addition">+  # 封面顯示的位置</span></span><br><span class="line"><span class="addition">+  # 三個值可配置 left , right , both</span></span><br><span class="line"><span class="addition">+  position: both</span></span><br><span class="line"><span class="addition">+  # 當沒有設置cover時，默認的封面顯示</span></span><br><span class="line"><span class="addition">+  default_cover:</span></span><br></pre></td></tr></table></figure></li><li><p>增加mermaid,可畫流程圖、狀態圖、時序圖、甘特圖等等</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# https://github.com/knsv/mermaid</span></span><br><span class="line"><span class="addition">+mermaid:</span></span><br><span class="line"><span class="addition">+  enable: true</span></span><br><span class="line"><span class="addition">+  # built-in themes: default/forest/dark/neutral</span></span><br><span class="line"><span class="addition">+  theme: default</span></span><br></pre></td></tr></table></figure></li><li><p>增加pangu配置，中英文之間添加空格</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+# https://github.com/vinta/pangu.js</span></span><br><span class="line"><span class="addition">+# 中英文之間添加空格</span></span><br><span class="line"><span class="addition">+pangu:</span></span><br><span class="line"><span class="addition">+  enable: true</span></span><br><span class="line"><span class="addition">+  field: page # page/post</span></span><br></pre></td></tr></table></figure></li><li><p>整合部分配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-avatar_effect: false</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+avatar:</span></span><br><span class="line"><span class="addition">+  img: /img/avatar.png</span></span><br><span class="line"><span class="addition">+  effect: true # 頭像會一直轉圈</span></span><br></pre></td></tr></table></figure></li><li><p>post-copyright增加decode網址 (可以顯示中文)</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">post_copyright:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="addition">+  decode: false</span></span><br><span class="line">  license: CC BY-NC-SA 4.0</span><br><span class="line">  license_url: https://creativecommons.org/licenses/by-nc-sa/4.0/</span><br></pre></td></tr></table></figure></li><li><p>增加部分顏色配置</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">theme_color:</span><br><span class="line">  enable: true</span><br><span class="line">  main: &quot;#49B1F5&quot;</span><br><span class="line">  paginator: &quot;#00c4b6&quot;</span><br><span class="line">  button_hover: &quot;#FF7242&quot;</span><br><span class="line">  text_selection: &quot;#00c4b6&quot;</span><br><span class="line">  link_color: &quot;#99a9bf&quot;</span><br><span class="line">  meta_color: &#x27;#858585&#x27;</span><br><span class="line">  hr_color: &quot;#A4D8FA&quot;</span><br><span class="line"><span class="deletion">-  read-mode-bg_color: &#x27;#FAF9DE&#x27;</span></span><br><span class="line"><span class="deletion">-  inline-code-color: &#x27;#F47466&#x27;</span></span><br><span class="line"><span class="addition">+  code_foreground: &quot;#F47466&quot;</span></span><br><span class="line"><span class="addition">+  code_background: &quot;rgba(27, 31, 35, .05)&quot;</span></span><br><span class="line"><span class="addition">+  toc_color: &quot;#00c4b6&quot;</span></span><br><span class="line"><span class="addition">+  blockquote_padding_color: &quot;#49b1f5&quot;</span></span><br><span class="line"><span class="addition">+  blockquote_background_color: &quot;#49b1f5&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>主頁文章增加tags和更新日期顯示，可以配置post_meta</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">post_meta:</span><br><span class="line"><span class="deletion">-  date_type: both # or created or updated 文章日期是創建日或者更新日或都顯示</span></span><br><span class="line"><span class="deletion">-  categories: true # or false 是否顯示分類</span></span><br><span class="line"><span class="deletion">-  tags: true # or false 是否顯示標籤</span></span><br><span class="line"><span class="addition">+  page:</span></span><br><span class="line"><span class="addition">+    date_type: both # created or updated or both 主頁文章日期是創建日或者更新日或都顯示</span></span><br><span class="line"><span class="addition">+    categories: true # true or false 主頁是否顯示分類</span></span><br><span class="line"><span class="addition">+    tags: true # true or false 主頁是否顯示標籤</span></span><br><span class="line"><span class="addition">+  post:</span></span><br><span class="line"><span class="addition">+    date_type: both # created or updated or both 文章頁日期是創建日或者更新日或都顯示</span></span><br><span class="line"><span class="addition">+    categories: true # true or false 文章頁是否顯示分類</span></span><br><span class="line"><span class="addition">+    tags: true # true or false 文章頁是否顯示標籤</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li>適配IE</li><li>增加一個Tag Plugins: 圖庫集</li><li>增加一個Tag Plugins: tag-hide 功能 inline/block</li><li>去除page頁開頭顯示與標題一樣的內容</li><li>aside 公告欄設置，支持html代碼</li><li>手機界面sidebar顯示進度條和加深對應的標題</li><li>主頁subtitle 的 hitokoto 顯示內容出處</li><li>footer 的hexo鏈接改為https</li><li>修改手機下，menus和toc的打開效果</li><li>手機頁面下，搜索界面全屏顯示</li><li>SEO優化，標題欄改為h1顯示</li><li>閲讀模式優化，可根據light mode 和darkmode調整背景</li><li>當屏蔽js時，header會出現(之前用js控制，會隱藏)</li></ol><h3 id="Fixed"><a href="#Fixed" class="headerlink" title="Fixed"></a>Fixed</h3><ol><li>修復Tencent Analytics的script加載為https #105</li><li>修復相關文章，日期顯示錯誤bug</li><li>修復gitalk報錯問題</li><li>修復當valine background 是絕對地址時無法顯示的bug</li><li>修復medium-zoom 無法使用的bug</li><li>修復在safari下，點擊或移動到首頁文章cover，圓角變成正方形的bug #114</li><li>修復在部分瀏覽器下，aside,友情鏈接頭像轉動變形的bug</li><li>修復在寬度限制下，表格內容溢出屏幕外而出現滾動條的bug #138</li><li>修復gitalk js 在一些沒有設置評論的page里加載的bug</li><li>修復tag plugins 的gist 在不同主題下的背景顏色問題(黑色主題下，文字不易觀看)</li><li>修復highlight figcaption 顯示不全的bug</li><li>修復disqus評論數無法獲取的bug</li><li>修復子目錄在觸摸屏下點擊,偶爾不出現的bug</li><li>修復a標籤太長(連續英文字母)不會換行的bug</li><li>修復toc滾動時，閲讀進度條也跟着滾動的bug</li><li>修復aside的圖片，可點擊顯示大圖bug</li><li>修復activate-power-mode設置參數無效bug</li><li>修復語言上的錯誤 #156</li><li>修復主頁在safari桌面端，首頁滾動卡頓的bug</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">2.1.0 (2019/12/20)</summary><div class="toggle-content"><h2 id="2-1-0-2019-12-20"><a href="#2-1-0-2019-12-20" class="headerlink" title="2.1.0 (2019/12/20)"></a>2.1.0 (2019/12/20)</h2><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li>可設置隱藏文章</li><li>適配 Hexo 的 Tag Plugins Code Block With marked lines 顯示</li><li>可配置首頁 cover 顯示的位置</li><li>更改深色模式下的配色</li><li>activate_power_mode 增加關閉顏色和抖動</li><li>增加谷歌廣告，騰訊分析</li><li>相關文章增加時間顯示，調整佈局，垂直居中</li><li>文章頁面，top_img 增加評論數顯示</li><li>可以取消點擊圖片觀看大圖</li><li>mathjax 和 kathex 可設置每頁都加載還是按需加載</li><li>深色模式下，滾動條顏色的適配</li><li>優化 gitalk 在 dark mode 下的顯示</li><li>文章頁，文章標題過長時，只顯示三行內容</li><li>深色模式下，背景圖片加上蒙板</li><li>優化深色/閲讀模式下，canvas 的顯示</li><li>優化打賞的特效和移動到二維碼不會立刻消失</li><li>優化 sub-menu 樣式</li><li>修改 aside 的 tags 顏色，在深色模式下不會出現觀看困難</li><li>升級 normalize.css 到最新版</li><li>優化手機上 toc 和 menu 的打開動畫</li><li>優化代碼框打開關閉的特效</li><li>精簡 js,部分操作改為 css 控制</li><li>優化主題的一些動畫，不會過於生硬</li></ol><h3 id="Fixed"><a href="#Fixed" class="headerlink" title="Fixed"></a>Fixed</h3><ol><li>修復當圖片被 a 標籤包圍時，點擊圖標沒有跳轉到對應網頁而是出現大圖觀看模式的 bug</li><li>修復當網址有 subdirectory 時，menu、打賞二維碼和 lodding_bg 鏈接路徑錯誤的 bug</li><li>修復當網址有 subdirectory 時,</li><li>修復 katex 的 CSS 無法讀取 bug</li><li>修復搜索按鈕在文章頁不顯示的 bug</li><li>修復 gitalk css 引用失敗的 bug</li><li>修復 點擊特效 煙花 無效的 bug</li><li>修復 gitalk 報 path.startsWith is not a function 的 bug</li><li>修復 閲讀模式下，背景沒有變純色的 bug</li><li>修復閲讀模式下，header 偶爾出現沒有靠攏頂部的 bug</li><li>修復 Hexo Tag Plugins Block Quote 裏的鏈接顯示出外面的 Bug</li><li>修復 aside 歸檔日期過長導致錯位的 bug</li><li>修復 toc 為空時，toc 按鈕仍存在的 bug</li><li>修復關閉懶加載後，頭像無法顯示的 bug</li><li>修復深色模式下，切換 readmode 偶爾會無效的 bug</li><li>修復在一些手機設備上，toc 和 menu 的按鈕顯示不對齊的 bug #72</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">2.0.0 (2019/11/03)</summary><div class="toggle-content"><h2 id="2-0-0-2019-11-03"><a href="#2-0-0-2019-11-03" class="headerlink" title="2.0.0 (2019/11/03)"></a>2.0.0 (2019/11/03)</h2><h3 id="Breaking-change"><a href="#Breaking-change" class="headerlink" title="Breaking change"></a>Breaking change</h3><ol><li>手機端界面卡片化，同時，手機端也可以顯示側邊欄的內容</li><li>修復當menu過多時，header界面出現錯亂的bug。當menu過多時，會變為sidebar模式</li><li>增加medium-zoom大圖查看模式</li><li>增加鼠標點擊特效：文字和愛心 兩個點擊特效</li><li>主頁subtitle可以調用第三方api(金山詞霸每日一句、一言網的一句話、一句網、今日詩詞)</li><li>添加 snackbar 彈窗</li><li>修改nightshift為darkmode，darkmode可隨系統設置而自動切換，可設置隨時間而切換darkmode</li><li>修復hexo自帶的標籤外掛(Tag Plugins)顯示bug(Block Quote、Code Block With caption、Gist、Youtube、Vimeo)</li><li>主題所需要的css和js可根據需要配置CDN</li><li>更改darkmode的加載方式，網站設置dark mode後，現在進入網頁不會在’閃’一下</li><li>背景特效和背景圖片在手機界面也會顯示</li><li>增加justified-gallery圖片顯示(Tag Plugins)</li></ol><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li>文章頁面，字數統計、閲讀時長和閲讀量前面添加icon</li><li>更改懶加載js</li><li>升級typed.js/instantpage.js到最新版</li><li>搜索和右下角按鈕添加退出特效</li></ol><h3 id="Fixed"><a href="#Fixed" class="headerlink" title="Fixed"></a>Fixed</h3><ol><li>修復在 Hexo 4.0.0下，一些按鈕點擊會跳出一個空白頁的bug</li><li>修復在 Hexo 4.0.0下，分頁按鈕出現代碼的bug</li><li>修復當沒有設置評論時，右下角依舊出現’直達評論’按鈕的bug</li><li>優化sidebar的打開速度</li><li>修復文章頁標題左右邊距不平等的bug</li><li>修復keywords讀取的bug</li><li>修復當post/page 內容為空時，footer位置錯亂的bug</li><li>修復在手機safari，toc sidebar底部內容被遮擋的bug</li><li>完善Dark mode,一些界面的配色</li><li>修復 card-archives 查看更多 跳轉bug</li></ol><h3 id="Remove"><a href="#Remove" class="headerlink" title="Remove"></a>Remove</h3><ol><li>移除Gitment</li><li>移除Gallery</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">1.2.0 (2019/09/24)</summary><div class="toggle-content"><h2 id="1-2-0-2019-09-24"><a href="#1-2-0-2019-09-24" class="headerlink" title="1.2.0 (2019/09/24)"></a>1.2.0 (2019/09/24)</h2><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li>更改手機頁面的menu和toc的顯示方式和顯示特效(ipad也能看TOC)</li><li>可設置禁止複製網站內容</li><li>可設置複製時，內容自動加上版權信息</li><li>可修改tag的top_img</li><li>可修改category的top_img</li><li>可修改valine的背景</li><li>archives頁UI優化</li><li>ICP增加icon #37</li><li>可設置主頁top_img的高度</li><li>可設置主頁site-info的位置</li><li>category頁和tag頁的UI可以設置與主頁UI一樣 #31</li><li>主頁subtitle可設置多個句子(不再限制2個) #37</li><li>設置menu時，頭尾添加空格不受影響</li><li>調整post頁的佈局</li><li>書籤添加icon</li><li>公告icon效果</li><li>首頁歸檔模塊，可設置數量限制，會顯示’查看更多’按鈕</li><li>右下角按鈕調整。</li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>修復文章cover隨機圖片生成，同一篇文章，不同地方的cover顯示不一樣的bug</li><li>修復gitalk語言設置無效的bug #35</li><li>修復post頁面，當沒有設置word count時，閲讀量前有’|”</li><li>修復sub-menu在safari的顯示問題</li><li>修復tags頁評論居中問題</li><li>修復header a hover 白色問題</li><li>修復夜間模式下footer的顏色bug</li><li>修復英文語言下，書籤英文顯示不完整的問題</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">1.1.5 (2019/09/08)</summary><div class="toggle-content"><h2 id="1-1-5-2019-09-08"><a href="#1-1-5-2019-09-08" class="headerlink" title="1.1.5 (2019/09/08)"></a>1.1.5 (2019/09/08)</h2><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li>Feature: 可設置內聯代碼塊樣式 #26</li><li>Feature: 可設置夜間模式作為默認樣式</li><li>Feature: 可設置是否顯示code language名稱</li><li>Feature: 可設置是否展開或關閉代碼框</li><li>Feature: 可設置背景圖片/顏色</li><li>Feature: 可設置是否顯示footer背景</li><li>Feature: 增加 canvas-nest.js</li><li>Feature: 頭像可設置效果(轉圈圈)</li><li>Feature: menu可設置分組</li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>Fix: 優化打賞和搜索打開特效</li><li>Fix: 優化sidebar的打開特效，避免與文章頁特效不同步</li><li>Fix: 適配<strong>hexo-blog-encrypt</strong>，現在可以顯示toc</li><li>Fix: 修復設置不顯示評論時，直達評論按鈕沒有消失的bug</li><li>Fix: 修復post頁底欄，當沒有顯示評論，不顯示TOC，評論和toc都不顯示 這三種狀態下按鈕的bug</li><li>Fix: 修復代碼框左右滑動時，代碼名字跟着滑動的bug</li><li>Fix: 其他page頁標題的字體顯示</li><li>Fix: 修復當設置開啟canvas_ribbons，進入網站會先顯示canvas_ribbons的bug</li><li>Fix: 完善夜間模式下，字體顯示問題</li><li>Fix: 修復代碼框 複製 和 代碼名 z-index bug #25</li><li>Fix: 完善閲讀模式</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">1.1.0 (2019/08/29)</summary><div class="toggle-content"><h2 id="1-1-0-2019-08-29"><a href="#1-1-0-2019-08-29" class="headerlink" title="1.1.0 (2019/08/29)"></a>1.1.0 (2019/08/29)</h2><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li>Feature: 手機menu界面重新設計</li><li>Feature: 文章頁增加美化(原 melody主題功能),並增加更改標題前綴圖標和顏色</li><li>Feature: PC端增加直達評論按鈕</li><li>Feature: 可以對單獨文章設置是否顯示版權信息</li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>Fix: 修復閲讀模式下，調整字體大小對代碼無效的bug</li><li>Fix: 調整Valine字體顯示問題</li><li>Fix: 修正夜間模式下Valine的適配問題</li><li>Fix: 修復Valine設置notify和verify無效的bug (thx @VincentTV )</li><li>Fix: 修復使用hexo-asset-image,開啟懶加載後，圖片會出現無法加載問題</li><li>Fix:修復 ‘返回頂部’箭頭無法點擊的bug</li></ol><h3 id="Remove"><a href="#Remove" class="headerlink" title="Remove"></a>Remove</h3><ol><li>Remove: 去掉主題”閲讀更多”按鈕</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">1.0.8 (2019/08/11)</summary><div class="toggle-content"><h2 id="1-0-8-2019-08-11"><a href="#1-0-8-2019-08-11" class="headerlink" title="1.0.8 (2019/08/11)"></a>1.0.8 (2019/08/11)</h2><ol><li>Feature: 可關閉圖片懶加載</li><li>Feature: 增加頁面排版，可選擇把右邊欄放在左邊</li><li>Feature: 增加 Note (Bootstrap Callout) (移植於next主題)</li><li>Feature: 手機上能夠查看TOC</li><li>Feature: 增加直達評論按鈕</li><li>Fix: 修復post頁在寬度1024px下的顯示bug</li><li>Fix: 修復代碼框部分語言沒有顯示正確的代碼語言</li><li>Fix: 修復設置裏把Disqus註釋掉無法運行的bug</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">1.0.7 (2019/07/29)</summary><div class="toggle-content"><h2 id="1-0-7-2019-07-29"><a href="#1-0-7-2019-07-29" class="headerlink" title="1.0.7 (2019/07/29)"></a>1.0.7 (2019/07/29)</h2><h3 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h3><ol><li>Feature: add the option to change the site name font-family</li><li>Feature: add the option to close instant-page</li><li>Feature: the sidebar can auto scroll when the toc out of the screen</li></ol><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><ol><li>Fix: random cover of previous post and next post</li><li>Fix: Display null when the subtitle not set</li><li>Fix: display related post’s headline when it is not related posts</li><li>Fix: the bugs of image display</li><li>Fix: When the picture is loaded, the picture appears black frame</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">1.0.6 (2019/07/06)</summary><div class="toggle-content"><h2 id="1-0-6-2019-07-06"><a href="#1-0-6-2019-07-06" class="headerlink" title="1.0.6 (2019/07/06)"></a>1.0.6 (2019/07/06)</h2><ol><li>Feature: random cover #10</li><li>Fix: valine lang not work</li><li>Fix: archives page site name not change when the language change</li><li>Fix: related posts url error</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">1.0.5 (2019/06/28)</summary><div class="toggle-content"><h2 id="1-0-5-2019-06-28"><a href="#1-0-5-2019-06-28" class="headerlink" title="1.0.5 (2019/06/28)"></a>1.0.5 (2019/06/28)</h2><ol><li>fix bugs of gitalk #9</li><li>fix bugs of valine</li><li>new look of the mobile menu</li></ol></div></details><details class="toggle" ><summary class="toggle-button" style="">1.0.0 (2019.06/17)</summary><div class="toggle-content"><h2 id="1-0-0-2019-06-17"><a href="#1-0-0-2019-06-17" class="headerlink" title="1.0.0 (2019.06/17)"></a>1.0.0 (2019.06/17)</h2><p>first release</p></div></details>]]></content>
      
      
      <categories>
          
          <category> Docs文檔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
            <tag> 主題 </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly 安裝文檔(六) 進階教程</title>
      <link href="/posts/4073eda/"/>
      <url>/posts/4073eda/</url>
      
        <content type="html"><![CDATA[<div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>📖  本教程更新於 2022 年 08 月 18 日，教程的內容針對最新<strong>穩定版</strong>而更新（如果你是舊版，教程會有些出入，請留意）</p><p>🦋  Butterfly 已經更新到 <a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/4.4.0">4.4.0</a></p></div><div class="note green icon-padding flat"><i class="note-icon fas fa-rocket"></i><p> 📚  文檔目錄</p><p><a href="/posts/21cfbf15/" title="🚀 快速開始">🚀 快速開始</a> - <a href="/posts/dc584b87/" title="📑 主題頁面">📑 主題頁面</a> - <a href="/posts/4aa8abbe/" title="🛠 主題配置-1">🛠 主題配置-1</a> - <a href="/posts/ceeb73f/" title="⚔️ 主題配置-2">⚔️ 主題配置-2</a> - <a href="/posts/98d20436/" title="❓ 主題問答">❓ 主題問答</a> - <a href="/posts/4073eda/" title="⚡️ 進階教程">⚡️ 進階教程</a> - <a href="/posts/198a4240/" title="✨ 更新日誌">✨ 更新日誌</a> - <a href="/posts/6ad51b4/" title="🤞 打賞">🤞 打賞</a></p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-magic"></i><p>你可以通過右下角的 <strong>簡</strong> 按鈕切換為簡體顯示 </p></div><hr><h2 id="建議"><a href="#建議" class="headerlink" title="建議"></a>建議</h2><ol><li>不要把個人需要的文件/圖片放在主題<code>source</code>文件夾裏，因為在升級主題的過程中，可能會把文件覆蓋刪除了。<br>在Hexo根目錄的<code>source</code>文件夾裏，創建一個文件夾來放置個人文件/圖片。<br>引用文件直接為<code>/文件夾名稱/文件名</code></li></ol><h2 id="音樂"><a href="#音樂" class="headerlink" title="音樂"></a>音樂</h2><p>音樂界面使用了插件 <code>hexo-tag-aplayer</code><br>使用方法請參考插件<a href="https://github.com/MoePlayer/hexo-tag-aplayer/blob/master/docs/README-zh_cn.md">文檔</a></p><p>音樂頁面只是普通的page頁，按普通頁面操作生成就行。</p><blockquote><p>以下內容可供<strong>選擇</strong>配置</p><p>注意： 仍需要安裝插件<a href="https://github.com/MoePlayer/hexo-tag-aplayer">hexo-tag-aplayer</a></p></blockquote><p>插件會在每一個文件都插入 js 和 css，為了避免這一情況，3.0 版本內置了 aplayer 需要的 css 和 js。</p><p>首先在Hexo根目錄<code>_config</code>裏配置<code>asset_inject</code>為<code>false</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">aplayer:</span></span><br><span class="line">  <span class="attr">asset_inject:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>然後在你需要使用aplayer的頁面Front-matter添加</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aplayer: true</span><br></pre></td></tr></table></figure><p>這樣只會在需要aplayer的頁面插入js和css。</p><p>如何添加全局 Aplayer 播放，請參考 <a href="/posts/507c070f/">這篇文章</a></p><h2 id="電影"><a href="#電影" class="headerlink" title="電影"></a>電影</h2><p>電影界面使用了插件 <code>hexo-butterfly-douban</code><br>使用方法請參考插件的<a href="https://github.com/jerryc127/butterfly-plugins/tree/main/hexo-butterfly-douban">文檔</a>。</p><p><strong>注意：</strong> </p><ol><li>hexo-butterfly-douban 會主動生成頁面，所以不需要自己創建。</li><li>如遇到無法抓取問題，顯示 <code>INFO  0 movies have been loaded in xxx ms, because you are offline or your network is bad</code><br>請過段時間再試試，這我也無能為力。</li></ol><h2 id="説説"><a href="#説説" class="headerlink" title="説説"></a>説説</h2><h3 id="Artitalk"><a href="#Artitalk" class="headerlink" title="Artitalk"></a>Artitalk</h3><p>安裝插件 <a href="https://www.npmjs.com/package/hexo-butterfly-artitalk">hexo-butterfly-artitalk</a></p><p>具體配置查看<a href="https://github.com/jerryc127/butterfly-plugins/tree/main/hexo-butterfly-artitalk">插件文檔</a></p><h3 id="HexoPlusPlus-Talk"><a href="#HexoPlusPlus-Talk" class="headerlink" title="HexoPlusPlus Talk"></a>HexoPlusPlus Talk</h3><p>安裝插件 <a href="https://www.npmjs.com/package/hexo-butterfly-hpptalk">hexo-butterfly-hpptalk</a></p><p>具體配置查看<a href="https://github.com/jerryc127/butterfly-plugins/tree/main/hexo-butterfly-hpptalk">插件文檔</a></p><h2 id="自定義代碼配色"><a href="#自定義代碼配色" class="headerlink" title="自定義代碼配色"></a>自定義代碼配色</h2><a class="btn-beautify block blue" href="/posts/b37b5fe3/"   title="點擊前往"><i class="fas fa-code"></i><span>點擊前往</span></a><h2 id="自定義側邊欄"><a href="#自定義側邊欄" class="headerlink" title="自定義側邊欄"></a>自定義側邊欄</h2><a class="btn-beautify block green" href="/posts/ea33ab97/"   title="點擊前往"><i class="fas fa-lightbulb"></i><span>點擊前往</span></a><h2 id="添加全局吸底Aplayer教程"><a href="#添加全局吸底Aplayer教程" class="headerlink" title="添加全局吸底Aplayer教程"></a>添加全局吸底Aplayer教程</h2><a class="btn-beautify block pink" href="/posts/507c070f/"   title="點擊前往"><i class="fas fa-music"></i><span>點擊前往</span></a><h2 id="Icon"><a href="#Icon" class="headerlink" title="Icon"></a>Icon</h2><p>Butterfly主題內置了<a href="https://fontawesome.com/">Font Awesome V5 </a>圖標，目前已更新到 5.13.0，總共有1,588個免費圖標。由於是國外的圖標網站，對於國內的一些網站Icon並不支持。如有需要，你可以引入其它的圖標服務商。</p><h3 id="iconfont"><a href="#iconfont" class="headerlink" title="iconfont"></a>iconfont</h3><p>國內最出名的莫過於<a href="https://www.iconfont.cn/">iconfont</a>,功能很強大且圖標內容很豐富的矢量圖標庫。很多<code>Font Awesome</code>不支持的圖標都可以在這裏找到。同時，<a href="https://www.iconfont.cn/">iconfont</a>支持選擇需要的圖標生成css鏈接，減少不必要的CSS加載。</p><h4 id="註冊賬號"><a href="#註冊賬號" class="headerlink" title="註冊賬號"></a>註冊賬號</h4><p>打開<a href="https://www.iconfont.cn/">iconfont</a>的網站，點擊導航欄的<code>人像</code>圖標，會跳出註冊界面，按要求註冊賬號。</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-iconfont.png" alt="Snipaste_2020-05-28_21-12-01"></p><h4 id="添加圖標入庫"><a href="#添加圖標入庫" class="headerlink" title="添加圖標入庫"></a>添加圖標入庫</h4><p>選擇自己需要的圖標，把鼠標移到圖標上，會顯示三個按鈕（依次是添加入庫、收藏和下載），而我們需要的是把圖標添加入庫</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-iconfont-add.png" alt="image-20200528205401440"></p><p>添加入庫後，你可以看到網站右上角<code>購物車</code>圖標顯示了<code>1</code>字，代表圖標已經添加入庫，點擊<code>購物車</code>圖標，會彈出側邊欄顯示詳情。</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-iconfont-check.png" alt="image-20200528205925258"></p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-iconfont-detail.png" alt="image-20200528210120442"></p><p>已選擇的圖標會顯示在上面，你可以重複上面的操作，把需要的圖標添加入庫，然後點擊<code>添加到項目</code>。</p><p>接下來會要求選擇項目名稱，沒有的自己創建一個。</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-iconfont-create.png" alt="image-20200528211624459"></p><h4 id="生成CSS鏈接"><a href="#生成CSS鏈接" class="headerlink" title="生成CSS鏈接"></a>生成CSS鏈接</h4><p>在添加到項目之後，會跳到項目的詳情界面。點擊<code>Font class</code>，然後再點擊<code>暫無代碼，點擊生成</code>文字。網站會自動生成CSS鏈接，我們只需要複製鏈接就行。</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-iconfont-link.png" alt="image-20200528212301786"></p><h4 id="添加鏈接進主題配置文件"><a href="#添加鏈接進主題配置文件" class="headerlink" title="添加鏈接進主題配置文件"></a>添加鏈接進主題配置文件</h4><p>打開<code>主題配置文件</code>，找到<code>inject</code>配置，按要求把鏈接填入</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-iconfont-setting.png" alt="image-20200528212440743"></p><p>在我們需要使用的地方填入icon，例如<code>Menu</code>，圖片使用格式為<code>iconfont icon名字</code></p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-iconfont-setting-menu.png" alt="image-20200528213151304"></p><p>運行Butterfly之後，你就可以看到menu的圖標生效了</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-iconfont-show.png" alt="image-20200528213346338"></p><h4 id="其他添加方法"><a href="#其他添加方法" class="headerlink" title="其他添加方法"></a>其他添加方法</h4><p>除了通過引入CSS鏈接使用圖標，iconfont也支持通過其它方法使用圖標，具體可查看<a href="https://www.iconfont.cn/help/detail?helptype=code">iconfont官方使用文檔</a></p><h3 id="其它圖標提供商"><a href="#其它圖標提供商" class="headerlink" title="其它圖標提供商"></a>其它圖標提供商</h3><p>除了<a href="https://www.iconfont.cn/">iconfont</a>，還有<a href="https://github.com/Remix-Design/RemixIcon">RemixIcon</a>、<a href="https://www.flaticon.com/categories/seo-and-web">Flaticon</a>等等提供商，很多圖標可以選擇，具體使用方法請參考各自的文檔。</p><h2 id="圖片壓縮"><a href="#圖片壓縮" class="headerlink" title="圖片壓縮"></a>圖片壓縮</h2><p>Butterfly主題需要使用到很多圖片。如果圖片太大，會嚴重拖慢網站的加載速度。</p><p>圖片壓縮能夠有效的緩解這個問題。</p><p>除了通過<code>gulp-imagemin</code>來壓縮圖片，還可以通過在綫壓縮網站和軟件來進行壓縮。以下兩款是我自己正在使用的工具。網上有很多這樣的工具，挑選一款適合自己的就行。</p><ul><li><p><a href="https://tinypng.com/">tinypng</a></p><p>一個在綫壓縮的網站。壓縮後的圖片也保留了很高的質量，在知乎上很多人推薦，不過免費版有限制。</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-tinypng.png" alt="image-20200526173511503"></p></li><li><p><a href="https://saerasoft.com/caesium/">caesium</a></p><p>開源軟件，支持Windows和macOS。可以批量壓縮軟件，無限制。</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-caesium.png" alt="image-20200526173316278"></p></li><li><p><a href="https://github.com/marketplace/imgbot">imgbot</a></p><p>imgbot 是一款 Github 插件。</p><p>安裝後，你上傳圖片到 Github 去，imgbot 會自動壓縮圖片並推送 PR，我們只需要合併 PR 就行</p><p>你可以配置 imgbot 的偵測方法、壓縮方法（有損/無損），具體可以查看插件的文檔</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-enhance-imgbot.png" alt="image-20200830231742951"></p></li></ul><h2 id="插件推薦"><a href="#插件推薦" class="headerlink" title="插件推薦"></a>插件推薦</h2><ul><li><p><a href="https://github.com/rozbo/hexo-abbrlink">hexo-abbrlink</a></p><p>可以把鏈接permalink轉為數字的插件，配置容易，生成時自動轉為數字。</p></li><li><p><a href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed</a> </p><p>生成RSS文件的插件</p></li><li><p><a href="https://github.com/hexojs/hexo-filter-nofollow">hexo-filter-nofollow</a></p><p>為網站使用到的所有外鏈添加<code>rel=&quot;noopener external nofollow noreferrer&quot;</code>, 可以有效地加強網站SEO和防止權重流失</p></li><li><p><a href="https://github.com/hexojs/hexo-generator-sitemap">hexo-generator-sitemap</a></p><p>生成sitemap的插件</p></li><li><p><a href="https://github.com/coneycode/hexo-generator-baidu-sitemap">hexo-generator-baidu-sitemap</a></p><p>看名字就知道，是專門為百度生成sitemap的插件</p></li></ul><a class="btn-beautify block purple right larger" href="/posts/198a4240/"   title="✨ Butterfly 安裝文檔(七) 更新日誌"><i class="far fa-hand-point-right"></i><span>✨ Butterfly 安裝文檔(七) 更新日誌</span></a>]]></content>
      
      
      <categories>
          
          <category> Docs文檔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
            <tag> 主題 </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly 安裝文檔(五) 主題問答</title>
      <link href="/posts/98d20436/"/>
      <url>/posts/98d20436/</url>
      
        <content type="html"><![CDATA[<div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>📖  本教程更新於 2022 年 08 月 18 日，教程的內容針對最新<strong>穩定版</strong>而更新（如果你是舊版，教程會有些出入，請留意）</p><p>🦋  Butterfly 已經更新到 <a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/4.4.0">4.4.0</a></p></div><div class="note green icon-padding flat"><i class="note-icon fas fa-rocket"></i><p> 📚  文檔目錄</p><p><a href="/posts/21cfbf15/" title="🚀 快速開始">🚀 快速開始</a> - <a href="/posts/dc584b87/" title="📑 主題頁面">📑 主題頁面</a> - <a href="/posts/4aa8abbe/" title="🛠 主題配置-1">🛠 主題配置-1</a> - <a href="/posts/ceeb73f/" title="⚔️ 主題配置-2">⚔️ 主題配置-2</a> - <a href="/posts/98d20436/" title="❓ 主題問答">❓ 主題問答</a> - <a href="/posts/4073eda/" title="⚡️ 進階教程">⚡️ 進階教程</a> - <a href="/posts/198a4240/" title="✨ 更新日誌">✨ 更新日誌</a> - <a href="/posts/6ad51b4/" title="🤞 打賞">🤞 打賞</a></p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-magic"></i><p>你可以通過右下角的 <strong>簡</strong> 按鈕切換為簡體顯示 </p></div><hr><p>以下是一些網友在安裝的過程中出現的問題。在提問題之前，先看有沒有解決方法。</p><h3 id="運行後網頁顯示代碼"><a href="#運行後網頁顯示代碼" class="headerlink" title="運行後網頁顯示代碼"></a>運行後網頁顯示代碼</h3><p>頁面只顯示 <code>extends includes/layout.pug block content #recent-posts.recent-posts include includes/recent-posts.pug include includes/pagination.pug #aside_content.aside_content include includes/aside.pug</code></p><blockquote><p>請下載安裝：<code>npm install hexo-renderer-pug hexo-renderer-stylus --save</code> or <code>yarn add hexo-renderer-pug hexo-renderer-stylus</code></p></blockquote><h3 id="配置友情鏈接報錯"><a href="#配置友情鏈接報錯" class="headerlink" title="配置友情鏈接報錯"></a>配置友情鏈接報錯</h3><p>配置友情鏈接頁面時出現報錯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">ERROR D:\Desktop\orxing-blog\themes\Butterfly\layout\flink.pug:2</span><br><span class="line">    1| .flink</span><br><span class="line">  &gt; 2|   each i in site.data.link</span><br><span class="line">    3|     p.comment-word= i.class_name</span><br><span class="line">    4|     .post-cards</span><br><span class="line">    5|       ul.md-links</span><br><span class="line"></span><br><span class="line">Cannot read property &amp;#39;length&amp;#39; of undefined</span><br><span class="line">TypeError: D:\Desktop\orxing-blog\themes\Butterfly\layout\flink.pug:2</span><br><span class="line">    1| .flink</span><br><span class="line">  &gt; 2|   each i in site.data.link</span><br><span class="line">    3|     p.comment-word= i.class_name</span><br><span class="line">    4|     .post-cards</span><br><span class="line">    5|       ul.md-links</span><br><span class="line"></span><br><span class="line">Cannot read property &amp;#39;length&amp;#39; of undefined</span><br><span class="line">    at eval (eval at wrap (D:\Desktop\orxing-blog\node_modules\pug-runtime\wrap.js:6:10), &lt;anonymous&gt;:1890:32)</span><br><span class="line">    at eval (eval at wrap (D:\Desktop\orxing-blog\node_modules\pug-runtime\wrap.js:6:10), &lt;anonymous&gt;:2017:4)</span><br><span class="line">    at template (eval at wrap (D:\Desktop\orxing-blog\node_modules\pug-runtime\wrap.js:6:10), &lt;anonymous&gt;:10152:72)</span><br><span class="line">    at Theme._View.View._compiled (D:\Desktop\orxing-blog\node_modules\hexo\lib\theme\view.js:123:48)</span><br><span class="line">    at Theme._View.View.View.render (D:\Desktop\orxing-blog\node_modules\hexo\lib\theme\view.js:29:15)</span><br><span class="line">    at D:\Desktop\orxing-blog\node_modules\hexo\lib\hexo\index.js:349:21</span><br><span class="line">    at tryCatcher (D:\Desktop\orxing-blog\node_modules\bluebird\js\release\util.js:16:23)</span><br><span class="line">    at D:\Desktop\orxing-blog\node_modules\bluebird\js\release\method.js:15:34</span><br><span class="line">    at RouteStream._read (D:\Desktop\orxing-blog\node_modules\hexo\lib\hexo\router.js:123:3)</span><br><span class="line">    at RouteStream.Readable.read (_stream_readable.js:457:10)</span><br><span class="line">    at resume_ (_stream_readable.js:936:12)</span><br><span class="line">    at processTicksAndRejections (internal/process/task_queues.js:84:9)</span><br></pre></td></tr></table></figure><blockquote><p>請檢查 <code>link.yml</code>文檔內代碼的空格</p></blockquote><h3 id="升級最新版後運行報錯"><a href="#升級最新版後運行報錯" class="headerlink" title="升級最新版後運行報錯"></a>升級最新版後運行報錯</h3><p>升級最新版本hexo g後報錯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">INFO  Deleted database.</span><br><span class="line">INFO  Start processing</span><br><span class="line">FATAL Something&amp;#39;s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html</span><br><span class="line">TypeError: Cannot read property &amp;#39;enable&amp;#39; of undefined</span><br><span class="line">    at Hexo.&lt;anonymous&gt; (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/themes/Butterfly/scripts/post-lazyload.js:5:23)</span><br><span class="line">    at Hexo.tryCatcher (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/util.js:16:23)</span><br><span class="line">    at Hexo.&lt;anonymous&gt; (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/method.js:15:34)</span><br><span class="line">    at /Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/hexo/lib/extend/filter.js:60:50</span><br><span class="line">    at tryCatcher (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/util.js:16:23)</span><br><span class="line">    at Object.gotValue (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/reduce.js:155:18)</span><br><span class="line">    at Object.gotAccum (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/reduce.js:144:25)</span><br><span class="line">    at Object.tryCatcher (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/util.js:16:23)</span><br><span class="line">    at Promise._settlePromiseFromHandler (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/promise.js:517:31)</span><br><span class="line">    at Promise._settlePromise (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/promise.js:574:18)</span><br><span class="line">    at Promise._settlePromiseCtx (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/promise.js:611:10)</span><br><span class="line">    at _drainQueueStep (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/async.js:142:12)</span><br><span class="line">    at _drainQueue (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/async.js:131:9)</span><br><span class="line">    at Async._drainQueues (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/async.js:147:5)</span><br><span class="line">    at Immediate.Async.drainQueues [as _onImmediate] (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/async.js:17:14)</span><br><span class="line">    at processImmediate (internal/timers.js:439:21)</span><br></pre></td></tr></table></figure><blockquote><p>請參照最新版的_config.yml, 比對後，把缺的配置複製到主題配置文件中去</p></blockquote><h3 id="wordcount-is-not-a-function-totalcount-is-not-a-function"><a href="#wordcount-is-not-a-function-totalcount-is-not-a-function" class="headerlink" title="wordcount is not a function / totalcount is not a function"></a>wordcount is not a function / totalcount is not a function</h3><p>報錯<code>wordcount is not a function</code></p><blockquote><p>請檢查是否安裝了wordcount插件 <code>npm i --save hexo-wordcount</code></p></blockquote><h3 id="升級2-0-0後運行報錯"><a href="#升級2-0-0後運行報錯" class="headerlink" title="升級2.0.0後運行報錯"></a>升級2.0.0後運行報錯</h3><p>舊版本升級到2.0.0後報錯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">INFO Start processing</span><br><span class="line">FATAL Something’s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html</span><br><span class="line">Template render error: (unknown path)</span><br><span class="line">unexpected end of file</span><br><span class="line">at Object.prettifyError (F:\hexo\nodemodules\nunjucks\src\lib.js:36:11)</span><br><span class="line">at Template.render (F:\hexo\node_modules\nunjucks\src\environment.js:542:21)</span><br><span class="line">at Environment.renderString (F:\hexo\node_modules\nunjucks\src\environment.js:380:17)</span><br><span class="line">at Promise.fromCallback.cb (F:\hexo\node_modules\hexo\lib\extend\tag.js:123:48)</span><br><span class="line">at tryCatcher (F:\hexo\node_modules\bluebird\js\release\util.js:16:23)</span><br><span class="line">at Function.Promise.fromNode.Promise.fromCallback (F:\hexo\node_modules\bluebird\js\release\promise.js:185:30)</span><br><span class="line">at Tag.render (F:\hexo\node_modules\hexo\lib\extend\tag.js:123:18)</span><br><span class="line">at Object.onRenderEnd (F:\hexo\node_modules\hexo\lib\hexo\post.js:280:20)</span><br><span class="line">at Promise.then.then.result (F:\hexo\node_modules\hexo\lib\hexo\render.js:64:19)</span><br><span class="line">at tryCatcher (F:\hexo\node_modules\bluebird\js\release\util.js:16:23)</span><br><span class="line">at Promise.settlePromiseFromHandler (F:\hexo\nodemodules\bluebird\js\release\promise.js:517:31)</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>2.0.0版本以上刪掉了gallery，而引入新的gallery。所以如果有使用舊版，需刪掉或者更改寫法。</p></blockquote><h3 id="代碼渲染與實際不同"><a href="#代碼渲染與實際不同" class="headerlink" title="代碼渲染與實際不同"></a>代碼渲染與實際不同</h3><p>2.1.0 以下版本會出現的問題</p><p>代碼渲染與實際不同</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;aaa&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>渲染結果:</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/73515338-e6874d80-442f-11ea-9d07-725d37002985.png" alt=""></p><blockquote><p>cheerio版本錯誤，請安裝0.22.0版本</p><p>npm install cheerio@0.22.0 —save</p></blockquote><h3 id="搜索欄在底部"><a href="#搜索欄在底部" class="headerlink" title="搜索欄在底部"></a>搜索欄在底部</h3><p>hexo deploy後搜索欄在頁面底部</p><blockquote><p>生成前先hexo clean</p></blockquote><h3 id="本地可以正常運行，但是push上去後出錯-缺失-無效"><a href="#本地可以正常運行，但是push上去後出錯-缺失-無效" class="headerlink" title="本地可以正常運行，但是push上去後出錯/缺失/無效"></a>本地可以正常運行，但是push上去後出錯/缺失/無效</h3><blockquote><ol><li>清理瀏覽器緩存</li><li>如果1無效，請確認上傳時是否有運行 hexo clean</li></ol></blockquote><h3 id="已在Hexo的配置文件設置了語言，為什麼導航欄仍然是英文"><a href="#已在Hexo的配置文件設置了語言，為什麼導航欄仍然是英文" class="headerlink" title="已在Hexo的配置文件設置了語言，為什麼導航欄仍然是英文"></a>已在Hexo的配置文件設置了語言，為什麼導航欄仍然是英文</h3><blockquote><p>請在導航的配置裏，自己修改成想要的中文</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">首頁:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-home</span></span><br><span class="line"><span class="string">時間軸:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span></span><br><span class="line"><span class="string">標籤:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span></span><br><span class="line"><span class="string">分類:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-folder-open</span></span><br></pre></td></tr></table></figure><h3 id="運行報錯-Cannot-read-property-‘bind’-of-undefined-full-url-for-is-not-function"><a href="#運行報錯-Cannot-read-property-‘bind’-of-undefined-full-url-for-is-not-function" class="headerlink" title="運行報錯 Cannot read property ‘bind’ of undefined/full_url_for is not function"></a>運行報錯 Cannot read property ‘bind’ of undefined/full_url_for is not function</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TypeError: Cannot read property <span class="string">&#x27;bind&#x27;</span> of undefined</span><br></pre></td></tr></table></figure><blockquote><p>把Hexo升級到4.0以上版本</p></blockquote><h3 id="Cannot-read-property-‘appId’-of-undefined"><a href="#Cannot-read-property-‘appId’-of-undefined" class="headerlink" title="Cannot read property ‘appId’ of undefined"></a>Cannot read property ‘appId’ of undefined</h3><p>報錯</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">  &gt; <span class="number">1</span>| -</span><br><span class="line">    <span class="number">2</span>|   var algolia = <span class="string">&#x27;undefined&#x27;</span>;</span><br><span class="line">    <span class="number">3</span>|   var env = process.env;</span><br><span class="line">    <span class="number">4</span>|   <span class="keyword">if</span> (theme.algolia_search.enable) &#123;</span><br><span class="line"></span><br><span class="line">Cannot read property <span class="string">&#x27;appId&#x27;</span> of undefined</span><br><span class="line">    at eval (eval at wrap (F:\github\Blog\blog\node_modules\pug<span class="literal">-runtime</span>\wrap.js:<span class="number">6</span>:<span class="number">10</span>), &lt;anonymous&gt;:<span class="number">8</span>:<span class="number">49</span>)</span><br><span class="line">    at template (eval at wrap (F:\github\Blog\blog\node_modules\pug<span class="literal">-runtime</span>\wrap.js:<span class="number">6</span>:<span class="number">10</span>), &lt;anonymous&gt;:<span class="number">329</span>:<span class="number">53</span>)</span><br><span class="line">    at _View._compiledSync (F:\github\Blog\blog\node_modules\hexo\lib\theme\view.js:<span class="number">132</span>:<span class="number">24</span>)</span><br><span class="line">    at _View.renderSync (F:\github\Blog\blog\node_modules\hexo\lib\theme\view.js:<span class="number">59</span>:<span class="number">25</span>)</span><br><span class="line">    at F:\github\Blog\blog\node_modules\hexo\lib\plugins\helper\partial.js:<span class="number">31</span>:<span class="number">52</span></span><br><span class="line">    at Cache.apply (F:\github\Blog\blog\node_modules\hexo\node_modules\hexo<span class="literal">-util</span>\lib\cache.js:<span class="number">27</span>:<span class="number">46</span>)</span><br><span class="line">    at Object.fragmentCache (F:\github\Blog\blog\node_modules\hexo\lib\plugins\helper\fragment_cache.js:<span class="number">11</span>:<span class="number">34</span>)</span><br><span class="line">    at Object.partial (F:\github\Blog\blog\node_modules\hexo\lib\plugins\helper\partial.js:<span class="number">31</span>:<span class="number">17</span>)</span><br><span class="line">    at eval (eval at wrap (F:\github\Blog\blog\node_modules\pug<span class="literal">-runtime</span>\wrap.js:<span class="number">6</span>:<span class="number">10</span>), &lt;anonymous&gt;:<span class="number">149</span>:<span class="number">46</span>)</span><br><span class="line">    at template (eval at wrap (F:\github\Blog\blog\node_modules\pug<span class="literal">-runtime</span>\wrap.js:<span class="number">6</span>:<span class="number">10</span>), &lt;anonymous&gt;:<span class="number">5213</span>:<span class="number">93</span>)</span><br><span class="line">    at _View._compiled (F:\github\Blog\blog\node_modules\hexo\lib\theme\view.js:<span class="number">136</span>:<span class="number">50</span>)</span><br><span class="line">    at _View.render (F:\github\Blog\blog\node_modules\hexo\lib\theme\view.js:<span class="number">39</span>:<span class="number">17</span>)</span><br><span class="line">    at F:\github\Blog\blog\node_modules\hexo\lib\hexo\index.js:<span class="number">64</span>:<span class="number">21</span></span><br><span class="line">    at tryCatcher (F:\github\Blog\blog\node_modules\hexo\node_modules\bluebird\js\release\util.js:<span class="number">16</span>:<span class="number">23</span>)</span><br><span class="line">    at F:\github\Blog\blog\node_modules\hexo\node_modules\bluebird\js\release\method.js:<span class="number">15</span>:<span class="number">34</span></span><br><span class="line">    at RouteStream._read (F:\github\Blog\blog\node_modules\hexo\lib\hexo\router.js:<span class="number">30</span>:<span class="number">5</span>)</span><br><span class="line">    at RouteStream.Readable.read (_stream_readable.js:<span class="number">490</span>:<span class="number">10</span>)</span><br><span class="line">    at resume_ (_stream_readable.js:<span class="number">975</span>:<span class="number">12</span>)</span><br><span class="line">    at processTicksAndRejections (internal/<span class="keyword">process</span>/task_queues.js:<span class="number">80</span>:<span class="number">21</span>) &#123;</span><br><span class="line">  path: <span class="string">&#x27;F:\\github\\Blog\\blog\\themes\\Butterfly\\layout\\includes\\head.pug&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>algolia 插件安裝後還需要配置<br>查看插件文檔配置</p></blockquote><h3 id="頂部出現-Loading"><a href="#頂部出現-Loading" class="headerlink" title="頂部出現 Loading"></a>頂部出現 Loading</h3><blockquote><p>生成前先 hexo clean</p></blockquote><a class="btn-beautify block orange right larger" href="/posts/4073eda/"   title="⚡️ Butterfly 安裝文檔(六) 進階教程"><i class="far fa-hand-point-right"></i><span>⚡️ Butterfly 安裝文檔(六) 進階教程</span></a><h3 id="點擊中文目錄報錯的問題"><a href="#點擊中文目錄報錯的問題" class="headerlink" title="點擊中文目錄報錯的問題"></a>點擊中文目錄報錯的問題</h3><p>這種情況出現在主題為 <code>3.0.0</code>以下版本，升級主題就行</p>]]></content>
      
      
      <categories>
          
          <category> Docs文檔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
            <tag> 主題 </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly 安裝文檔(四) 主題配置-2</title>
      <link href="/posts/ceeb73f/"/>
      <url>/posts/ceeb73f/</url>
      
        <content type="html"><![CDATA[<div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>📖  本教程更新於 2022 年 08 月 18 日，教程的內容針對最新<strong>穩定版</strong>而更新（如果你是舊版，教程會有些出入，請留意）</p><p>🦋  Butterfly 已經更新到 <a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/4.4.0">4.4.0</a></p></div><div class="note green icon-padding flat"><i class="note-icon fas fa-rocket"></i><p> 📚  文檔目錄</p><p><a href="/posts/21cfbf15/" title="🚀 快速開始">🚀 快速開始</a> - <a href="/posts/dc584b87/" title="📑 主題頁面">📑 主題頁面</a> - <a href="/posts/4aa8abbe/" title="🛠 主題配置-1">🛠 主題配置-1</a> - <a href="/posts/ceeb73f/" title="⚔️ 主題配置-2">⚔️ 主題配置-2</a> - <a href="/posts/98d20436/" title="❓ 主題問答">❓ 主題問答</a> - <a href="/posts/4073eda/" title="⚡️ 進階教程">⚡️ 進階教程</a> - <a href="/posts/198a4240/" title="✨ 更新日誌">✨ 更新日誌</a> - <a href="/posts/6ad51b4/" title="🤞 打賞">🤞 打賞</a></p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-magic"></i><p>你可以通過右下角的 <strong>簡</strong> 按鈕切換為簡體顯示 </p></div><hr><h2 id="評論"><a href="#評論" class="headerlink" title="評論"></a>評論</h2><div class="tabs" id="comments"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#comments-1">通用設置</button></li><li class="tab"><button type="button" data-href="#comments-2">Disqus</button></li><li class="tab"><button type="button" data-href="#comments-3">Disqusjs</button></li><li class="tab"><button type="button" data-href="#comments-4">livere（來必力）</button></li><li class="tab"><button type="button" data-href="#comments-5">Gitalk</button></li><li class="tab"><button type="button" data-href="#comments-6">Valine</button></li><li class="tab"><button type="button" data-href="#comments-7">Waline</button></li><li class="tab"><button type="button" data-href="#comments-8">Utterances</button></li><li class="tab"><button type="button" data-href="#comments-9">Facebook Comments</button></li><li class="tab"><button type="button" data-href="#comments-10">Twikoo</button></li><li class="tab"><button type="button" data-href="#comments-11">Giscus</button></li><li class="tab"><button type="button" data-href="#comments-12">remark42</button></li><li class="tab"><button type="button" data-href="#comments-13">artalk</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="comments-1"><p>從3.0.0開始，開啟評論需要在<code>comments-use</code>中填寫你需要的評論。</p><p>支持雙評論顯示，只需要配置兩個評論（第一個為默認顯示）</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="comment"># Up to two comments system, the first will be shown as default</span></span><br><span class="line">  <span class="comment"># Choose: Disqus/Disqusjs/Livere/Gitalk/Valine/Waline/Utterances/Facebook Comments/Twikoo</span></span><br><span class="line">  <span class="attr">use:</span> <span class="string">Valine,Disqus</span></span><br><span class="line">  <span class="attr">text:</span> <span class="literal">true</span> <span class="comment"># Display the comment name next to the button</span></span><br><span class="line">  <span class="comment"># lazyload: The comment system will be load when comment element enters the browser&#x27;s viewport.</span></span><br><span class="line">  <span class="comment"># If you set it to true, the comment count will be invalid</span></span><br><span class="line">  <span class="attr">lazyload:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">true</span> <span class="comment"># Display comment count in top_img</span></span><br><span class="line">  <span class="attr">card_post_count:</span> <span class="literal">false</span> <span class="comment"># Display comment count in Home Page</span></span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>參數</th><th>解釋</th></tr></thead><tbody><tr><td>use</td><td>使用的評論（請注意，最多支持兩個，如果不需要請留空）<br><em>注意：雙評論不能是 Disqus 和 Disqusjs 一起，由於其共用同一個 ID，會出錯</em></td></tr><tr><td>text</td><td>是否顯示評論服務商的名字</td></tr><tr><td>lazyload</td><td>是否為評論開啟lazyload，開啟後，只有滾動到評論位置時才會加載評論所需要的資源（<em>開啟 lazyload 後，評論數將不顯示</em>）</td></tr><tr><td>count</td><td>是否在文章頂部顯示評論數 <br/> livere、Giscus 和 utterances 不支持評論數顯示</td></tr><tr><td>card_post_count</td><td>是否在首頁文章卡片顯示評論數<br/>gitalk、livere 、Giscus 和 utterances 不支持評論數顯示</td></tr></tbody></table></div><blockquote><p>單評論</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-single-comments.png" alt="image-20200731172506907"></p><blockquote><p>雙評論</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-double-comments.png" alt="image-20200731173006128"></p><blockquote><p>顯示text</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-double-comments.png" alt="image-20200731173006128"></p><blockquote><p>不顯示text</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-double-comments-not-text.png" alt="image-20200731173143712"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-2"><p>註冊 <a href="https://disqus.com/">disqus</a>，配置你自己的 disqus，然後在<code>Butterfly</code>裏開啟它。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">disqus:</span></span><br><span class="line">  <span class="attr">shortname:</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-disqus-new.png" alt="image-20201027211418161"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-3"><p>與Disqus一樣，但由於Disqus在中國大陸無法訪問， 使用Disqusjs可以在無法訪問Disqus時顯示評論。具體可參考<a href="https://github.com/SukkaW/DisqusJS">Disqusjs</a>。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">disqusjs:</span></span><br><span class="line">  <span class="attr">shortname:</span></span><br><span class="line">  <span class="attr">apikey:</span></span><br><span class="line">  <span class="attr">option:</span></span><br></pre></td></tr></table></figure><blockquote><p>當無法訪問 Disqus 時，會顯示</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-disqusjs-new.png" alt="image-20201027212543851"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-4"><p>註冊<a href="https://livere.com/">來必力</a>，配置你自己的來必力設置，然後在<code>Butterfly</code>裏開啟它。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">livere:</span></span><br><span class="line">  <span class="attr">uid:</span></span><br></pre></td></tr></table></figure><p>laibili 的 uid 你能在這裏找到:</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-laibili.jpg" alt=""></p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-laibili_2-new.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-5"><p>遵循 <a href="https://github.com/gitalk/gitalk">gitalk</a>的指示去獲取你的 github Oauth 應用的 client id 和 secret 值。以及查看它的相關配置説明。</p><p>然後修改 <code>主題配置文件</code>:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">gitalk:</span></span><br><span class="line">  <span class="attr">client_id:</span></span><br><span class="line">  <span class="attr">client_secret:</span></span><br><span class="line">  <span class="attr">repo:</span></span><br><span class="line">  <span class="attr">owner:</span></span><br><span class="line">  <span class="attr">admin:</span></span><br><span class="line">  <span class="attr">option:</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-gitalk-new.png" alt="image-20201027212704930"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-6"><p>遵循 <a href="https://github.com/xCss/Valine">Valine</a>的指示去配置你的 LeanCloud 應用。以及查看相應的配置説明。</p><p>然後修改 <code>主題配置文件</code>:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">appId:</span> <span class="comment"># leancloud application app id</span></span><br><span class="line">  <span class="attr">appKey:</span> <span class="comment"># leancloud application app key</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">monsterid</span> <span class="comment"># gravatar style https://valine.js.org/#/avatar</span></span><br><span class="line">  <span class="attr">serverURLs:</span> <span class="comment"># This configuration is suitable for domestic custom domain name users, overseas version will be automatically detected (no need to manually fill in)</span></span><br><span class="line">  <span class="attr">bg:</span> <span class="comment"># valine background</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">option:</span></span><br></pre></td></tr></table></figure><blockquote><p>開啟 visitor 後，文章頁的訪問人數將改為 Valine 提供，而不是 <strong>不蒜子</strong></p></blockquote><p>Valine於 v1.4.5 開始支持自定義表情，如果你需要自行配置，請在<code>emojiCDN</code>配置表情 CDN。</p><p>同時在Hexo 工作目錄下的<code>source/_data/</code>創建一個json文件<code>valine.json</code>,等同於 Valine 需要配置的<code>emojiMaps</code>，<code>valine.json</code>配置方式可參考如下</p><blockquote><p>valine.json</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span> </span><br><span class="line"><span class="attr">&quot;tv_doge&quot;</span><span class="punctuation">:</span> <span class="string">&quot;6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_親親&quot;</span><span class="punctuation">:</span> <span class="string">&quot;a8111ad55953ef5e3be3327ef94eb4a39d535d06.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_偷笑&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bb690d4107620f1c15cff29509db529a73aee261.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_再見&quot;</span><span class="punctuation">:</span> <span class="string">&quot;180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_冷漠&quot;</span><span class="punctuation">:</span> <span class="string">&quot;b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_發怒&quot;</span><span class="punctuation">:</span> <span class="string">&quot;34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_發財&quot;</span><span class="punctuation">:</span> <span class="string">&quot;34db290afd2963723c6eb3c4560667db7253a21a.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_可愛&quot;</span><span class="punctuation">:</span> <span class="string">&quot;9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_吐血&quot;</span><span class="punctuation">:</span> <span class="string">&quot;09dd16a7aa59b77baa1155d47484409624470c77.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_呆&quot;</span><span class="punctuation">:</span> <span class="string">&quot;fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_嘔吐&quot;</span><span class="punctuation">:</span> <span class="string">&quot;9f996894a39e282ccf5e66856af49483f81870f3.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_困&quot;</span><span class="punctuation">:</span> <span class="string">&quot;241ee304e44c0af029adceb294399391e4737ef2.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_壞笑&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1f0b87f731a671079842116e0991c91c2c88645a.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_大佬&quot;</span><span class="punctuation">:</span> <span class="string">&quot;093c1e2c490161aca397afc45573c877cdead616.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_大哭&quot;</span><span class="punctuation">:</span> <span class="string">&quot;23269aeb35f99daee28dda129676f6e9ea87934f.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_委屈&quot;</span><span class="punctuation">:</span> <span class="string">&quot;d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_害羞&quot;</span><span class="punctuation">:</span> <span class="string">&quot;a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_尷尬&quot;</span><span class="punctuation">:</span> <span class="string">&quot;7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_微笑&quot;</span><span class="punctuation">:</span> <span class="string">&quot;70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_思考&quot;</span><span class="punctuation">:</span> <span class="string">&quot;90cf159733e558137ed20aa04d09964436f618a1.png&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;tv_驚嚇&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0d15c7e2ee58e935adc6a7193ee042388adc22af.png&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span> </span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-valine.png" alt=""></p><blockquote><p>default_avatar</p></blockquote><div class="table-container"><table><thead><tr><th>參數</th><th>效果</th></tr></thead><tbody><tr><td>留空（默認）</td><td><img src="https://www.gravatar.com/avatar/00000000000000000000000000000000" alt=""></td></tr><tr><td>mp</td><td><img src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp" alt=""></td></tr><tr><td>identicon</td><td><img src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=identicon" alt=""></td></tr><tr><td>monsterid</td><td><img src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=monsterid" alt=""></td></tr><tr><td>wavatar</td><td><img src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=wavatar" alt=""></td></tr><tr><td>retro</td><td><img src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=retro" alt=""></td></tr><tr><td>robohash</td><td><img src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=robohash" alt=""></td></tr><tr><td>blank</td><td><img src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=blank&amp;f=y" alt=""></td></tr><tr><td>404</td><td><img src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&amp;f=y" alt=""></td></tr></tbody></table></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-7"><p>Waline - 一款從 Valine 衍生的帶後端評論系統。可以將 Waline 等價成 With backend Valine。</p><p>具體配置可參考 <a href="https://waline.js.org/">waline 文檔</a></p><p>然後修改 <code>主題配置文件</code>:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">waline:</span></span><br><span class="line">  <span class="attr">serverURL:</span> <span class="comment"># Waline server address url</span></span><br><span class="line">  <span class="attr">bg:</span> <span class="comment"># waline background</span></span><br><span class="line">  <span class="attr">pageview:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">option:</span></span><br></pre></td></tr></table></figure><blockquote><p>開啟 pageview 後，文章頁的訪問人數將改為 Waline 提供，而不是 <strong>不蒜子</strong></p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-valine.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-8"><p>與Gitalk一樣，基於 GitHub issues 的評論工具。相對於Gitalk,其相對需要權限較少。具體配置可參考<a href="https://utteranc.es/">Utterances</a>。</p><p>修改 <code>主題配置文件</code>:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">utterances:</span></span><br><span class="line">  <span class="attr">repo:</span></span><br><span class="line">  <span class="comment"># 可選 pathname/url/title/og:title</span></span><br><span class="line">  <span class="attr">issue_term:</span> <span class="string">pathname</span></span><br><span class="line">  <span class="comment"># 可選 github-light/github-dark/github-dark-orange/icy-dark/dark-blue/photon-dark</span></span><br><span class="line">  <span class="attr">light_theme:</span> <span class="string">github-light</span></span><br><span class="line">  <span class="attr">dark_theme:</span> <span class="string">photon-dark</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-Utterances.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-9"><p><code>Facebook Comments</code>是Facebook提供的評論插件，需要登陸Facebook才可評論。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Facebook Comments Plugin</span></span><br><span class="line"><span class="comment"># https://developers.facebook.com/docs/plugins/comments/</span></span><br><span class="line"><span class="attr">facebook_comments:</span></span><br><span class="line">  <span class="attr">app_id:</span> </span><br><span class="line">  <span class="attr">user_id:</span> <span class="comment"># optional</span></span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span> <span class="comment"># The number of comments to show</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">social</span> <span class="comment"># social/time/reverse_time</span></span><br><span class="line">  <span class="attr">lang:</span> <span class="string">en_US</span> <span class="comment"># Language en_US/zh_CN/zh_TW and so on</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-butterfly-docs-facebook-comments.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-10"><p><code>Twikoo</code> 是一個簡潔、安全、無後端的靜態網站評論系統，基於<a href="https://curl.qcloud.com/KnnJtUom">騰訊雲開發</a>。</p><p>具體如何配置評論，請查看 <a href="https://twikoo.js.org/quick-start.html#%E7%8E%AF%E5%A2%83%E5%88%9D%E5%A7%8B%E5%8C%96">Twikoo文檔</a></p><p>你只需要把獲取到的 <code>環境ID (envId)</code> 填寫到配置上去就行</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">twikoo:</span></span><br><span class="line">  <span class="attr">envId:</span></span><br><span class="line">  <span class="attr">region:</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">option:</span></span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>參數</th><th>解釋</th></tr></thead><tbody><tr><td>envId</td><td>環境 ID</td></tr><tr><td>region</td><td>環境地域，默認為 ap-shanghai，如果您的環境地域不是上海，需傳此參數</td></tr><tr><td>visitor</td><td>是否顯示文章閲讀數</td></tr><tr><td>option</td><td>可選配置</td></tr></tbody></table></div><blockquote><p>開啟 visitor 後，文章頁的訪問人數將改為 Twikoo 提供，而不是 <strong>不蒜子</strong></p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-twikoo-comments.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-11"><p>一個基於 <em>GitHub Discussions</em> 的評論</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Giscus</span></span><br><span class="line"><span class="comment"># https://giscus.app/</span></span><br><span class="line"><span class="attr">giscus:</span></span><br><span class="line">  <span class="attr">repo:</span></span><br><span class="line">  <span class="attr">repo_id:</span></span><br><span class="line">  <span class="attr">category_id:</span></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">light</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">dark</span></span><br><span class="line">  <span class="attr">option:</span></span><br></pre></td></tr></table></figure><p>具體配置的意思，請參考 Giscus 的<a href="https://giscus.app/zh-TW">文檔</a></p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN@m2/img/hexo-theme-butterfly-docs-giscus.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-12"><p>remark42 是一款只支持<strong>私有部署</strong>的評論</p><p>具體部署請查看 <a href="https://remark42.com/docs/getting-started/installation/">Installation | Remark42</a></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">remark42:</span></span><br><span class="line">  <span class="attr">host:</span> <span class="comment"># Your Host URL</span></span><br><span class="line">  <span class="attr">siteId:</span> <span class="comment"># Your Site ID</span></span><br><span class="line">  <span class="attr">option:</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@m2/img/hexo-butterfly-docs-remark42.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-13"><p>artalk 是一款只支持<strong>私有部署</strong>的評論</p><p>具體部署請查看 <a href="https://artalk.js.org/">Artalk | 自託管評論系統</a></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">artalk:</span></span><br><span class="line">  <span class="attr">server:</span></span><br><span class="line">  <span class="attr">site:</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">option:</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@m2/img/hexo-butterfly-docs-artalk.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="在綫聊天"><a href="#在綫聊天" class="headerlink" title="在綫聊天"></a>在綫聊天</h2><p>從3.0開始，Butterfly主題內置了多種在綫聊天工具。你可以選擇開啟一種，方便你與訪客的交流。</p><div class="tabs" id="online-chat"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#online-chat-1">通用設置</button></li><li class="tab"><button type="button" data-href="#online-chat-2">chatra</button></li><li class="tab"><button type="button" data-href="#online-chat-3">tidio</button></li><li class="tab"><button type="button" data-href="#online-chat-4">daovoice</button></li><li class="tab"><button type="button" data-href="#online-chat-5">Gitter</button></li><li class="tab"><button type="button" data-href="#online-chat-6">crisp</button></li><li class="tab"><button type="button" data-href="#online-chat-7">messenger</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="online-chat-1"><p>這些工具都提供了一個按鈕可以打開/關閉聊天窗口。<br>主題也提供了一個集合主題特色的按鈕來替換這些工具本身的按鈕，這個聊天按鈕將會出現在右下角裏。<br>你只需要把<code>chat_btn</code>打開就行。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Chat Button [recommend]</span></span><br><span class="line"><span class="comment"># It will create a button in the bottom right corner of website, and hide the origin button</span></span><br><span class="line"><span class="attr">chat_btn:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-button.png" alt=""></p><p>為了不影響訪客的體驗，主題提供一個<code>chat_hide_show</code>配置<br>設為<code>true</code>後，使用工具提供的按鈕時，只有向上滾動才會顯示聊天按鈕，向下滾動時會隱藏按鈕。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The origin chat button is displayed when scrolling up, and the button is hidden when scrolling down</span></span><br><span class="line"><span class="attr">chat_hide_show:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><div class="note info flat"><p>如果使用工具自帶的聊天按鈕，按鈕位置可能會遮擋右下角圖標，請配置<code>rightside-bottom</code>調正右下角圖標位置</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="online-chat-2"><p>配置chatra,需要知道<code>Public key</code></p><p>打開<a href="https://chatra.com/">chatra</a>並註冊賬號。<br>你可以在<code>Preferences</code>中找到<code>Public key</code></p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-chatra-id.png" alt=""></p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># chatra</span></span><br><span class="line"><span class="comment"># https://chatra.io/</span></span><br><span class="line"><span class="attr">chatra:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">id:</span> <span class="string">xxxxxxxx</span></span><br></pre></td></tr></table></figure><p><code>chatra</code>的樣式你可以<code>Chat Widget</code>自行配置</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-chatra-ui-settings.png" alt=""></p><blockquote><p>Demo</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-chatra-ui-demo.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="online-chat-3"><p>配置tidio,需要知道<code>Public key</code></p><p>打開<a href="https://www.tidio.com/">tidio</a>並註冊賬號。<br>你可以在<code>Preferences &gt; Developer</code>中找到<code>Public key</code></p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-tidio-id.png" alt=""></p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tidio</span></span><br><span class="line"><span class="comment"># https://www.tidio.com/</span></span><br><span class="line"><span class="attr">tidio:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">public_key:</span> <span class="string">XXXX</span></span><br></pre></td></tr></table></figure><p><code>tidio</code>的樣式你可以<code>Channels</code>自行配置</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-tidio-setting.png" alt=""></p><blockquote><p>Demo</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-tidio-demo.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="online-chat-4"><p>打開<a href="http://daovoice.io/">daovoice</a>和註冊帳號<br>找到你的<code>app id</code></p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-daovoice-appid.png" alt=""></p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># daovoice</span></span><br><span class="line"><span class="comment"># http://daovoice.io/</span></span><br><span class="line"><span class="attr">daovoice:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">app_id:</span> <span class="string">xxxxx</span></span><br></pre></td></tr></table></figure><p>可在<code>聊天設置</code>裏配置聊天按鈕等樣式</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-daovoice-ui.png" alt=""></p><blockquote><p>Demo</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-daovoice-demo.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="online-chat-5"><p>打開<a href="https://gitter.im/">Gitter</a>和註冊賬號<br>創建一個<code>community</code>或者<code>room</code>,複製名稱到設置去</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-gitter-setting.png" alt=""></p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># gitter</span></span><br><span class="line"><span class="comment"># https://gitter.im/</span></span><br><span class="line"><span class="attr">gitter:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">room:</span> </span><br></pre></td></tr></table></figure><blockquote><p>Demo</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-gitter-ui.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="online-chat-6"><p>打開<a href="https://crisp.chat/en/">crisp</a>並註冊帳號</p><p>找到需要的網站ID</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># crisp</span></span><br><span class="line"><span class="comment"># https://crisp.chat/en/</span></span><br><span class="line"><span class="attr">crisp:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">website_id:</span> <span class="string">xxxxxxxx</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-buttefly-docs-chat-crisp.png" alt="image-20200731183023863"></p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-crisp-demo.png" alt="image-20200731183444781"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="online-chat-7"><p>messenger 為 Facebook 旗下的聊天服務</p><p>具體操作請查看 <a href="https://developers.facebook.com/docs/messenger-platform/discovery/facebook-chat-plugin/">Facebook 洽談附加程式 - Messenger 平台</a></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">messenger:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">pageID:</span> <span class="string">xxxxx</span></span><br><span class="line">  <span class="attr">lang:</span> <span class="string">zh_TW</span> <span class="comment"># Language en_US/zh_CN/zh_TW and so on</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@m2/img/hexo-butterfly-docs-messege.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="分享"><a href="#分享" class="headerlink" title="分享"></a>分享</h2><blockquote><p>只能選擇一個分享服務商</p></blockquote><div class="tabs" id="分享"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分享-1">AddThis</button></li><li class="tab"><button type="button" data-href="#分享-2">Sharejs</button></li><li class="tab"><button type="button" data-href="#分享-3">Addtoany</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分享-1"><blockquote><p>訪問 <a href="https://www.addthis.com/">AddThis</a> 官網<br>找到你的 pub-id</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-addthis.jpg" alt=""></p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">addThis:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># or false</span></span><br><span class="line">  <span class="attr">pubid:</span> <span class="string">你的pub-id</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分享-2"><p>如果你不知道 <a href="https://github.com/overtrue/share.js/">sharejs</a>，看看它的説明。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sharejs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sites:</span> <span class="string">facebook,twitter,wechat,weibo,qq</span>  <span class="comment">#想要顯示的內容</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-sharejs.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分享-3"><p>可以到<a href="https://www.addtoany.com/">addtoany</a>查看使用説明</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">addtoany:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">item:</span> <span class="string">facebook,twitter,wechat,sina_weibo,facebook_messenger,email,copy_link</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-addtoany.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="搜索系統"><a href="#搜索系統" class="headerlink" title="搜索系統"></a>搜索系統</h2><div class="tabs" id="search"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#search-1"><i class="fab fa-algolia"></i>Algolia</button></li><li class="tab"><button type="button" data-href="#search-2"><i class="fas fa-search"></i>本地搜索</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="search-1"><blockquote><p>記得運行 hexo clean</p><p>如果你使用 <a href="https://github.com/LouisBarranqueiro/hexo-algoliasearch">hexo-algoliasearch</a>，請記得配置 fields 參數的 <code>title</code>, <code>permalink</code> 和 <code>content</code></p></blockquote><ol><li><p>你需要安裝 <a href="https://github.com/oncletom/hexo-algolia">hexo-algolia</a>或 <a href="https://github.com/LouisBarranqueiro/hexo-algoliasearch">hexo-algoliasearch</a>. 根據它們的説明文檔去做相應的配置。</p></li><li><p>修改 <code>主題配置文件</code></p></li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">algolia_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hits:</span></span><br><span class="line">    <span class="attr">per_page:</span> <span class="number">6</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="search-2"><blockquote><p>記得運行 hexo clean</p></blockquote><ol><li><p>你需要安裝 <a href="https://github.com/PaicHyperionDev/hexo-generator-search">hexo-generator-search</a>，根據它的文檔去做相應配置</p></li><li><p>修改 <code>主題配置文件</code></p></li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">preload:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">CDN:</span></span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>參數</th><th>解釋</th></tr></thead><tbody><tr><td>enable</td><td>是否開啟本地搜索</td></tr><tr><td>preload</td><td>預加載，開啟後，進入網頁後會自動加載搜索文件。關閉時，只有點擊搜索按鈕後，才會加載搜索文件</td></tr><tr><td>CDN</td><td>搜索文件的 CDN 地址（默認使用的本地鏈接）</td></tr></tbody></table></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="網站驗證"><a href="#網站驗證" class="headerlink" title="網站驗證"></a>網站驗證</h2><p>如果需要搜索引擎收錄網站，可能需要登錄對應搜索引擎的管理平台進行提交。<br>各自的驗證碼可從各自管理平台拿到</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">site_verification:</span></span><br><span class="line">  <span class="comment"># - name: google_site_verification</span></span><br><span class="line">  <span class="comment">#   content: xxxxxx</span></span><br><span class="line">  <span class="comment"># - name: baidu_site_verification</span></span><br><span class="line">  <span class="comment">#   content: xxxxxxx</span></span><br></pre></td></tr></table></figure><h2 id="分析統計"><a href="#分析統計" class="headerlink" title="分析統計"></a>分析統計</h2><div class="tabs" id="分析統計"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分析統計-1">百度統計</button></li><li class="tab"><button type="button" data-href="#分析統計-2">谷歌分析</button></li><li class="tab"><button type="button" data-href="#分析統計-3">CNZZ分析</button></li><li class="tab"><button type="button" data-href="#分析統計-4">Cloudflare分析</button></li><li class="tab"><button type="button" data-href="#分析統計-5">Microsoft Clarity</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分析統計-1"><ol><li><p>登錄百度統計的<a href="https://tongji.baidu.com/web/welcome/login">官方網站</a></p></li><li><p>找到你百度統計的統計代碼</p></li></ol><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-baidu-tongji.jpg" alt=""></p><ol><li>修改 <code>主題配置文件</code></li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidu_analytics:</span> <span class="string">你的代碼</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分析統計-2"><ol><li><p>登錄谷歌分析的<a href="https://www.google.com/analytics/">官方網站</a></p></li><li><p>找到你的谷歌分析的跟蹤 ID</p></li></ol><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-google-analytics.jpg" alt=""></p><ol><li>修改 <code>主題配置文件</code></li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">google_analytics:</span> <span class="string">你的代碼</span> <span class="comment"># 通常以`UA-`打頭</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分析統計-3"><ol><li>登錄CNZZ分析的<a href="https://www.umeng.com/">官方網站</a></li><li>找到 <code>站點設置 - 獲取代碼</code></li><li>找到你的 <code>web_id</code></li></ol><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-CNZZ-analysic.png" alt=""></p><ol><li>修改 <code>主題配置文件</code></li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cnzz_analytics:</span> </span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分析統計-4"><ol><li>登錄 Cloudflare 分析的<a href="https://www.cloudflare.com/zh-tw/web-analytics/">官方網站</a></li><li>找到 <code>JavaScript 程式碼片段</code></li><li>找到你的 <code>token</code></li></ol><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-cloudflare-analytics-id.png" alt="image-20201230195158742"></p><ol><li><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Cloudflare Analytics</span></span><br><span class="line"><span class="comment"># https://www.cloudflare.com/zh-tw/web-analytics/</span></span><br><span class="line"><span class="attr">cloudflare_analytics:</span></span><br></pre></td></tr></table></figure></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分析統計-5"><ol><li><p>登錄 Clarity 的<a href="https://clarity.microsoft.com/">官方網站</a></p></li><li><p>創建 <code>PROJECT</code></p></li><li><p>找到你的 <code>ID</code><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-clarity-id.png" alt="image-20201230195541443"></p></li><li><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Microsoft Clarity</span></span><br><span class="line"><span class="comment"># https://clarity.microsoft.com/</span></span><br><span class="line"><span class="attr">microsoft_clarity:</span></span><br></pre></td></tr></table></figure></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="廣告"><a href="#廣告" class="headerlink" title="廣告"></a>廣告</h2><div class="tabs" id="廣告"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#廣告-1">谷歌廣告</button></li><li class="tab"><button type="button" data-href="#廣告-2">手動廣告配置</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="廣告-1"><p>主題已集成谷歌廣告（自動廣告）</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">google_adsense:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">auto_ads:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">js:</span> <span class="string">https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js</span></span><br><span class="line">  <span class="attr">client:</span> <span class="comment"># 填入個人識別碼</span></span><br><span class="line">  <span class="attr">enable_page_level_ads:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-google-adsense1.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="廣告-2"><p>主題預留了三個位置可供插入廣告，分別為主頁文章(每三篇文章出現廣告)/aside公告之後/文章頁打賞之後。<br>把html代碼填寫到對應的位置</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ad:</span></span><br><span class="line">  <span class="attr">index:</span></span><br><span class="line">  <span class="attr">aside:</span></span><br><span class="line">  <span class="attr">post:</span></span><br></pre></td></tr></table></figure><p>例如:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">index:</span> <span class="string">&lt;ins</span> <span class="string">class=&quot;adsbygoogle&quot;</span> <span class="string">style=&quot;display:block&quot;</span> <span class="string">data-ad-format=&quot;fluid&quot;</span> <span class="string">data-ad-layout-key=&quot;xxxxxxxxxxxx&quot;</span> <span class="string">data-ad-client=&quot;ca-pub-xxxxxxxxxx&quot;</span> <span class="string">data-ad-slot=&quot;xxxxxxxxxx&quot;&gt;&lt;/ins&gt;&lt;script&gt;(adsbygoogle=window.adsbygoogle||[]).push(&#123;&#125;)&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-ad-post.png" alt=""><br><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-ad-index.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="Math-數學"><a href="#Math-數學" class="headerlink" title="Math 數學"></a>Math 數學</h2><div class="tabs" id="math"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#math-1">MathJax</button></li><li class="tab"><button type="button" data-href="#math-2">KaTeX</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="math-1"><div class="note warning flat"><p>不要在標題裏使用 mathjax 語法，toc 目錄不一定能正確顯示 mathjax，可能顯示 mathjax 代碼</p></div><blockquote><p>建議使用 KaTex 獲得更好的效果，下文有介紹！</p></blockquote><p>修改 <code>主題配置文件</code>:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mathjax:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># true 表示每一頁都加載mathjax.js</span></span><br><span class="line">  <span class="comment"># false 需要時加載，須在使用的Markdown Front-matter 加上 mathjax: true</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><blockquote><p>如果 <code>per_page</code> 設為 <code>true</code>,則每一頁都會加載 Mathjax 服務。設為 <code>false</code>，則需要在文章 <code>Front-matter</code> 添加 <code>mathjax: true</code>,對應的文章才會加載 Mathjax 服務。</p></blockquote><p>然後你需要修改一下默認的 <code>markdown</code> 渲染引擎來實現 MathJax 的效果。</p><p>查看: <a href="https://www.npmjs.com/package/hexo-renderer-kramed">hexo-renderer-kramed</a></p><p>以下操作在你 hexo 博客的目錄下 (<strong>不是 Butterfly 的目錄</strong>):</p><ol><li><p>安裝插件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-renderer-marked --save</span><br><span class="line">npm install hexo-renderer-kramed --save</span><br></pre></td></tr></table></figure></li><li><p>配置 hexo 根目錄的配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kramed:</span></span><br><span class="line">  <span class="attr">gfm:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">pedantic:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">sanitize:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tables:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">breaks:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">smartLists:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">smartypants:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ol><p>效果：</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-mathjax-2.jpg" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="math-2"><div class="note warning flat"><p>不要在標題裏使用 KaTeX 語法，toc 目錄不能正確顯示 KaTeX。</p></div><p>首先禁用<code>MathJax</code>（如果你配置過 MathJax 的話），然後修改你的<code>主題配置文件</code>以便加載<code>katex.min.css</code>:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">katex:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># true 表示每一頁都加載katex.js</span></span><br><span class="line">  <span class="comment"># false 需要時加載，須在使用的Markdown Front-matter 加上 katex: true</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">hide_scrollbar:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>你不需要添加 <code>katex.min.js</code> 來渲染數學方程。相應的你需要卸載你之前的 hexo 的 markdown 渲染器，然後安裝其它插件。</p><div class="tabs" id="katex-plugins"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#katex-plugins-1">hexo-renderer-markdown-it 【建議】</button></li><li class="tab"><button type="button" data-href="#katex-plugins-2">hexo-renderer-markdown-it-plus</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="katex-plugins-1"><p>卸載掉 marked 插件，安裝 <a href="https://github.com/hexojs/hexo-renderer-markdown-it">hexo-renderer-markdown-it</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm un hexo-renderer-marked --save <span class="comment"># 如果有安裝這個的話，卸載</span></span><br><span class="line">npm un hexo-renderer-kramed --save <span class="comment"># 如果有安裝這個的話，卸載</span></span><br><span class="line"></span><br><span class="line">npm i hexo-renderer-markdown-it --save <span class="comment"># 需要安裝這個渲染插件</span></span><br><span class="line">npm install @neilsustc/markdown-it-katex --save <span class="comment">#需要安裝這個katex插件</span></span><br></pre></td></tr></table></figure><p>在 hexo 的根目錄的 <code>_config.yml</code> 中配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">markdown:</span></span><br><span class="line">  <span class="attr">plugins:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">plugin:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">&#x27;@neilsustc/markdown-it-katex&#x27;</span></span><br><span class="line">      <span class="attr">options:</span></span><br><span class="line">        <span class="attr">strict:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>如需配置其它參數，請參考 <a href="https://katex.org/docs/options.html">katex 官網</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="katex-plugins-2"><blockquote><p>注意，此方法生成的 katex 沒有斜體</p></blockquote><p>卸載掉 marked 插件，然後安裝新的<code>hexo-renderer-markdown-it-plus</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 替換 `hexo-renderer-kramed` 或者 `hexo-renderer-marked` 等hexo的markdown渲染器</span></span><br><span class="line"><span class="comment"># 你可以在你的package.json裏找到hexo的markdwon渲染器，並將其卸載</span></span><br><span class="line">npm un hexo-renderer-marked --save</span><br><span class="line"></span><br><span class="line"><span class="comment"># or</span></span><br><span class="line"></span><br><span class="line">npm un hexo-renderer-kramed --save</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 然後安裝 `hexo-renderer-markdown-it-plus`</span></span><br><span class="line">npm i @upupming/hexo-renderer-markdown-it-plus --save</span><br></pre></td></tr></table></figure><p>注意到 <a href="https://github.com/CHENXCHEN/hexo-renderer-markdown-it-plus"><code>hexo-renderer-markdown-it-plus</code></a>已經無人持續維護, 所以我們使用 <a href="https://github.com/upupming/hexo-renderer-markdown-it-plus"><code>@upupming/hexo-renderer-markdown-it-plus</code></a>。 這份 fork 的代碼使用了 <a href="https://github.com/yzhang-gh/markdown-it-katex"><code>@neilsustc/markdown-it-katex</code></a>同時它也是 VSCode 的插件 <a href="https://github.com/yzhang-gh/vscode-markdown">Markdown All in One</a>所使用的, 所以我們可以獲得最新的 KaTex 功能例如 <code>\tag{}</code>。</p><p>你還可以通過 <a href="https://github.com/yzhang-gh/markdown-it-katex"><code>@neilsustc/markdown-it-katex</code></a>控制 KaTeX 的設置，所有可配置的選項參見 <a href="https://katex.org/docs/options.html。">https://katex.org/docs/options.html。</a> 比如你想要禁用掉 KaTeX 在命令行上輸出的宂長的警告信息，你可以在根目錄的 <code>_config.yml</code> 中使用下面的配置將 <code>strict</code> 設置為 false:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">markdown_it_plus:</span></span><br><span class="line">  <span class="attr">plugins:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">plugin:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">&#x27;@neilsustc/markdown-it-katex&#x27;</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">options:</span></span><br><span class="line">        <span class="attr">strict:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>當然，你還可以利用這個特性來定義一些自己常用的 <code>macros</code>。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>因為 KaTeX 更快更輕量，因此沒有 MathJax 的功能多（比如右鍵菜單）。為那些使用 MathJax 的用户，主題也內置了 katex 的 <a href="https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex">複製</a> 功能。</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-katex.gif" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="美化-特效"><a href="#美化-特效" class="headerlink" title="美化/特效"></a>美化/特效</h2><h3 id="自定義主題色"><a href="#自定義主題色" class="headerlink" title="自定義主題色"></a>自定義主題色</h3><p>可以修改大部分UI顏色</p><p>修改 <code>主題配置文件</code>，比如：</p><blockquote><p>顏色值必須被雙引號包裹，就像<code>&quot;#000&quot;</code>而不是<code>#000</code>。否則將會在構建的時候報錯！</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme_color:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">main:</span> <span class="string">&quot;#49B1F5&quot;</span></span><br><span class="line">  <span class="attr">paginator:</span> <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">  <span class="attr">button_hover:</span> <span class="string">&quot;#FF7242&quot;</span></span><br><span class="line">  <span class="attr">text_selection:</span> <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">  <span class="attr">link_color:</span> <span class="string">&quot;#99a9bf&quot;</span></span><br><span class="line">  <span class="attr">meta_color:</span> <span class="string">&quot;#858585&quot;</span></span><br><span class="line">  <span class="attr">hr_color:</span> <span class="string">&quot;#A4D8FA&quot;</span></span><br><span class="line">  <span class="attr">code_foreground:</span> <span class="string">&quot;#F47466&quot;</span></span><br><span class="line">  <span class="attr">code_background:</span> <span class="string">&quot;rgba(27, 31, 35, .05)&quot;</span></span><br><span class="line">  <span class="attr">toc_color:</span> <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">  <span class="attr">blockquote_padding_color:</span> <span class="string">&quot;#49b1f5&quot;</span></span><br><span class="line">  <span class="attr">blockquote_background_color:</span> <span class="string">&quot;#49b1f5&quot;</span></span><br><span class="line">  <span class="attr">scrollbar_color:</span> <span class="string">&quot;#49b1f5&quot;</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-color_1.png" alt=""><br><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-color_2.png" alt=""></p><h3 id="網站背景"><a href="#網站背景" class="headerlink" title="網站背景"></a>網站背景</h3><p>默認顯示白色，可設置圖片或者顏色</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 圖片格式 url(http://xxxxxx.com/xxx.jpg)</span></span><br><span class="line"><span class="comment"># 顏色（HEX值/RGB值/顔色單詞/漸變色)</span></span><br><span class="line"><span class="comment"># 留空 不顯示背景</span></span><br><span class="line"><span class="attr">background:</span></span><br></pre></td></tr></table></figure><p><em>留意:</em> 如果你的網站根目錄不是’/‘,使用本地圖片時，需加上你的根目錄。<br>例如：網站是 <code>https://yoursite.com/blog</code>,引用一張<code>img/xx.png</code>圖片，則設置background為 `url(/blog/img/xx.png)</p><blockquote><p>background:’#49B202’</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-set-body-background-color.png" alt=""></p><blockquote><p>background: url(<a href="https://i.loli.net/2019/09/09/5oDRkWVKctx2b6A.png">https://i.loli.net/2019/09/09/5oDRkWVKctx2b6A.png</a>)</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-set-body-background-img.png" alt=""></p><h3 id="footer-背景"><a href="#footer-背景" class="headerlink" title="footer 背景"></a>footer 背景</h3><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># footer是否顯示圖片背景(與top_img一致)</span></span><br><span class="line"><span class="attr">footer_bg:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>配置的值</th><th>效果</th></tr></thead><tbody><tr><td>留空/false</td><td>顯示默認的顔色</td></tr><tr><td>img鏈接</td><td>圖片的鏈接，顯示所配置的圖片</td></tr><tr><td>顔色(<br>HEX值 - #0000FF<br>RGB值 - rgb(0,0,255)<br>顔色單詞 - orange<br>漸變色 - linear-gradient( 135deg, #E2B0FF 10%, #9F44D3 100%)<br>）</td><td>對應的顔色</td></tr><tr><td>true</td><td>顯示跟 top_img 一樣</td></tr></tbody></table></div><blockquote><p>true</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-footer-img.png" alt=""></p><h3 id="打字效果"><a href="#打字效果" class="headerlink" title="打字效果"></a>打字效果</h3><p>打字效果<a href="https://github.com/disjukr/activate-power-mode">activate-power-mode</a></p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Typewriter Effect (打字效果)</span></span><br><span class="line"><span class="comment"># https://github.com/disjukr/activate-power-mode</span></span><br><span class="line"><span class="attr">activate_power_mode:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">colorful:</span> <span class="literal">true</span> <span class="comment"># open particle animation (冒光特效)</span></span><br><span class="line">  <span class="attr">shake:</span> <span class="literal">true</span> <span class="comment">#  open shake (抖動特效)</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-type-animation.gif" alt=""></p><h3 id="背景特效"><a href="#背景特效" class="headerlink" title="背景特效"></a>背景特效</h3><div class="tabs" id="背景特效"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#背景特效-1">靜止綵帶</button></li><li class="tab"><button type="button" data-href="#背景特效-2">動態綵帶</button></li><li class="tab"><button type="button" data-href="#背景特效-3">canvas-nest</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="背景特效-1"><p>好看的綵帶背景，可設置每次刷新更換綵帶，或者每次點擊更換綵帶<br>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">canvas_ribbon:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">size:</span> <span class="number">150</span></span><br><span class="line">  <span class="attr">alpha:</span> <span class="number">0.6</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span></span><br><span class="line">  <span class="attr">click_to_change:</span> <span class="literal">false</span>  <span class="comment">#設置是否每次點擊都更換綵帶</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span> <span class="comment"># false 手機端不顯示 true 手機端顯示</span></span><br></pre></td></tr></table></figure><p>相關配置可查看<a href="https://github.com/hustcc/ribbon.js">canvas_ribbon</a></p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-canvas-ribbon.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="背景特效-2"><p>好看的綵帶背景，會飄動<br>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">canvas_fluttering_ribbon:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span> <span class="comment"># false 手機端不顯示 true 手機端顯示</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-canvas-ribbon-piao.gif" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="背景特效-3"><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">canvas_nest:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&#x27;0,0,255&#x27;</span> <span class="comment">#color of lines, default: &#x27;0,0,0&#x27;; RGB values: (R,G,B).(<span class="doctag">note:</span> use &#x27;,&#x27; to separate.)</span></span><br><span class="line">  <span class="attr">opacity:</span> <span class="number">0.7</span> <span class="comment"># the opacity of line (0~1), default: 0.5.</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span> <span class="comment"># z-index property of the background, default: -1.</span></span><br><span class="line">  <span class="attr">count:</span> <span class="number">99</span> <span class="comment"># the number of lines, default: 99.</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span> <span class="comment"># false 手機端不顯示 true 手機端顯示</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-canvas_nest.gif" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="鼠標點擊效果"><a href="#鼠標點擊效果" class="headerlink" title="鼠標點擊效果"></a>鼠標點擊效果</h3><div class="tabs" id="鼠標點擊效果"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#鼠標點擊效果-1"><i class="fas fa-fire-alt"></i>煙花</button></li><li class="tab"><button type="button" data-href="#鼠標點擊效果-2"><i class="fas fa-heart"></i>愛心</button></li><li class="tab"><button type="button" data-href="#鼠標點擊效果-3"><i class="fab fa-amilia"></i>文字</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="鼠標點擊效果-1"><p><code>zIndex</code>建議只在<code>-1</code>和<code>9999</code>上選<br><code>-1</code> 代表煙火效果在底部<br><code>9999</code> 代表煙火效果在前面</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">fireworks:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">9999</span> <span class="comment"># -1 or 9999</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-firewall.gif" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="鼠標點擊效果-2"><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 點擊出現愛心</span></span><br><span class="line"><span class="attr">click_heart:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/click_love.gif" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="鼠標點擊效果-3"><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 點擊出現文字，文字可自行修改</span></span><br><span class="line"><span class="attr">ClickShowText:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">text:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">I</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">LOVE</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">YOU</span></span><br><span class="line">  <span class="attr">fontSize:</span> <span class="string">15px</span></span><br><span class="line">  <span class="attr">random:</span> <span class="literal">false</span> <span class="comment"># 文字隨機顯示</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/click_word.gif" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="頁面美化"><a href="#頁面美化" class="headerlink" title="頁面美化"></a>頁面美化</h3><p>會改變ol、ul、h1-h5的樣式</p><p><code>field</code>配置生效的區域</p><ul><li><code>post</code> 只在文章頁生效</li><li><code>site</code> 在全站生效</li></ul><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 美化頁面顯示</span></span><br><span class="line"><span class="attr">beautify:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">site</span> <span class="comment"># site/post</span></span><br><span class="line">  <span class="attr">title-prefix-icon:</span> <span class="string">&#x27;\f0c1&#x27;</span></span><br><span class="line">  <span class="attr">title-prefix-icon-color:</span> <span class="string">&quot;#F47466&quot;</span></span><br></pre></td></tr></table></figure><p><code>title-prefix-icon</code>填寫的是fontawesome的icon的Unicode數。<br><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-fontwesome-unicode.png" alt=""></p><blockquote><p>未開啟美化</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-post-beautify.png" alt=""></p><blockquote><p>開啟美化</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-post-beautif.png" alt=""></p><h3 id="自定義字體和字體大小"><a href="#自定義字體和字體大小" class="headerlink" title="自定義字體和字體大小"></a>自定義字體和字體大小</h3><h4 id="全局字體"><a href="#全局字體" class="headerlink" title="全局字體"></a>全局字體</h4><p>可自行設置字體的<code>font-family</code><br><strong>如不需要配置，請留空</strong></p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Global font settings</span></span><br><span class="line"><span class="comment"># Don&#x27;t modify the following settings unless you know how they work (非必要不要修改)</span></span><br><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">global-font-size:</span></span><br><span class="line">  <span class="attr">code-font-size:</span></span><br><span class="line">  <span class="attr">font-family:</span> <span class="string">-apple-system,</span> <span class="string">BlinkMacSystemFont,</span> <span class="string">&quot;Segoe UI&quot;</span><span class="string">,</span> <span class="string">&quot;Helvetica Neue&quot;</span><span class="string">,</span> <span class="string">Lato,</span> <span class="string">Roboto,</span> <span class="string">&quot;PingFang SC&quot;</span><span class="string">,</span> <span class="string">&quot;Microsoft JhengHei&quot;</span><span class="string">,</span> <span class="string">&quot;Microsoft YaHei&quot;</span><span class="string">,</span> <span class="string">sans-serif</span></span><br><span class="line">  <span class="attr">code-font-family:</span> <span class="string">consolas,</span> <span class="string">Menlo,</span> <span class="string">&quot;PingFang SC&quot;</span><span class="string">,</span> <span class="string">&quot;Microsoft JhengHei&quot;</span><span class="string">,</span> <span class="string">&quot;Microsoft YaHei&quot;</span><span class="string">,</span> <span class="string">sans-serif</span></span><br></pre></td></tr></table></figure><h4 id="Blog-標題字體"><a href="#Blog-標題字體" class="headerlink" title="Blog 標題字體"></a>Blog 標題字體</h4><p>可自行設置字體的<code>font-family</code><br><strong>如不需要配置，請留空。</strong><br><strong>如不需要使用網絡字體，只需要把font_link留空就行</strong></p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Font settings for the site title and site subtitle</span></span><br><span class="line"><span class="comment"># 左上角網站名字 主頁居中網站名字</span></span><br><span class="line"><span class="attr">blog_title_font:</span></span><br><span class="line">  <span class="attr">font_link:</span> <span class="string">https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap</span></span><br><span class="line">  <span class="attr">font-family:</span> <span class="string">Titillium</span> <span class="string">Web,</span> <span class="string">&#x27;PingFang SC&#x27;</span><span class="string">,</span> <span class="string">&#x27;Hiragino Sans GB&#x27;</span><span class="string">,</span> <span class="string">&#x27;Microsoft JhengHei&#x27;</span><span class="string">,</span> <span class="string">&#x27;Microsoft YaHei&#x27;</span><span class="string">,</span> <span class="string">sans-serif</span></span><br></pre></td></tr></table></figure><h3 id="網站副標題"><a href="#網站副標題" class="headerlink" title="網站副標題"></a>網站副標題</h3><p>可設置主頁中顯示的網站副標題或者喜歡的座右銘。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 主頁subtitle</span></span><br><span class="line"><span class="attr">subtitle:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Typewriter Effect (打字效果)</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">startDelay:</span> <span class="number">300</span> <span class="comment"># time before typing starts in milliseconds</span></span><br><span class="line">  <span class="attr">typeSpeed:</span> <span class="number">150</span> <span class="comment"># type speed in milliseconds</span></span><br><span class="line">  <span class="attr">backSpeed:</span> <span class="number">50</span> <span class="comment"># backspacing speed in milliseconds</span></span><br><span class="line">  <span class="comment"># loop (循環打字)</span></span><br><span class="line">  <span class="attr">loop:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># source 調用第三方服務</span></span><br><span class="line">  <span class="comment"># source: false 關閉調用</span></span><br><span class="line">  <span class="comment"># source: 1  調用一言網的一句話（簡體） https://hitokoto.cn/</span></span><br><span class="line">  <span class="comment"># source: 2  調用一句網（簡體） http://yijuzhan.com/</span></span><br><span class="line">  <span class="comment"># source: 3  調用今日詩詞（簡體） https://www.jinrishici.com/</span></span><br><span class="line">  <span class="comment"># subtitle 會先顯示 source , 再顯示 sub 的內容</span></span><br><span class="line">  <span class="attr">source:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># 如果關閉打字效果，subtitle 只會顯示 sub 的第一行文字</span></span><br><span class="line">  <span class="attr">sub:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">今日事&amp;#44;今日畢</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">Never</span> <span class="string">put</span> <span class="string">off</span> <span class="string">till</span> <span class="string">tomorrow</span> <span class="string">what</span> <span class="string">you</span> <span class="string">can</span> <span class="string">do</span> <span class="string">today</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-index-subtitle.gif" alt=""></p><h3 id="主頁top-img顯示大小"><a href="#主頁top-img顯示大小" class="headerlink" title="主頁top_img顯示大小"></a>主頁top_img顯示大小</h3><blockquote><p>適用於 版本號 &gt;= V1.2.0</p></blockquote><p>默認的顯示為全屏。site-info的區域會居中顯示</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 主頁設置</span></span><br><span class="line"><span class="comment"># 默認top_img全屏，site_info在中間</span></span><br><span class="line"><span class="comment"># 使用默認, 都無需填寫（建議默認）</span></span><br><span class="line"><span class="attr">index_site_info_top:</span> <span class="comment"># 主頁標題距離頂部距離  例如 300px/300em/300rem/10%</span></span><br><span class="line"><span class="attr">index_top_img_height:</span>  <span class="comment">#主頁top_img高度 例如 300px/300em/300rem  不能使用百分比</span></span><br></pre></td></tr></table></figure><p>注意：<code>index_top_img_height</code>的值不能使用百分比。<br>2個都不填的話，會使用默認值</p><p>舉例，當</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">index_top_img_height:</span> <span class="string">400px</span></span><br></pre></td></tr></table></figure><p>效果</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-index-top-img-setting.png" alt=""></p><h3 id="頁面加載動畫preloader"><a href="#頁面加載動畫preloader" class="headerlink" title="頁面加載動畫preloader"></a>頁面加載動畫preloader</h3><p>當進入網頁時，因為加載速度的問題，可能會導致top_img圖片出現斷層顯示，或者網頁加載不全而出現等待時間，開啟preloader後，會顯示加載動畫，等頁面加載完，加載動畫會消失。</p><p>配置<code>butterly.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 加載動畫 Loading Animation</span></span><br><span class="line"><span class="attr">preloader:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-preloader.gif" alt=""></p><h2 id="PWA"><a href="#PWA" class="headerlink" title="PWA"></a>PWA</h2><p>要為<code>Butterfly</code>配上 PWA 特性, 你需要如下幾個步驟:</p><ol><li><p>打開 hexo 工作目錄</p></li><li><p><code>npm install hexo-offline --save</code> 或者 <code>yarn add hexo-offline</code></p></li><li><p>在根目錄創建 <code>hexo-offline.config.cjs</code> 文件，並增加以下內容。</p></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// offline config passed to workbox-build.</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">globPatterns</span>: [<span class="string">&#x27;**/*.&#123;js,html,css,png,jpg,gif,svg,webp,eot,ttf,woff,woff2&#125;&#x27;</span>],</span><br><span class="line">  <span class="comment">// 靜態文件合集，如果你的站點使用了例如 webp 格式的文件，請將文件類型添加進去。</span></span><br><span class="line">  <span class="attr">globDirectory</span>: <span class="string">&#x27;public&#x27;</span>,</span><br><span class="line">  <span class="attr">swDest</span>: <span class="string">&#x27;public/service-worker.js&#x27;</span>,</span><br><span class="line">  <span class="attr">maximumFileSizeToCacheInBytes</span>: <span class="number">10485760</span>, <span class="comment">// 緩存的最大文件大小，以字節為單位。</span></span><br><span class="line">  <span class="attr">skipWaiting</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">clientsClaim</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">runtimeCaching</span>: [ <span class="comment">// 如果你需要加載 CDN 資源，請配置該選項，如果沒有，可以不配置。</span></span><br><span class="line">    <span class="comment">// CDNs - should be CacheFirst, since they should be used specific versions so should not change</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">urlPattern</span>: <span class="regexp">/^https:\/\/cdn\.example\.com\/.*/</span>, <span class="comment">// 可替換成你的 URL</span></span><br><span class="line">      <span class="attr">handler</span>: <span class="string">&#x27;CacheFirst&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>更多內容請查看 <a href="https://github.com/JLHwung/hexo-offline">hexo-offline</a>的官方文檔</p><ol><li>在<code>主題配置文件</code>中開啟 pwa 選項。</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pwa:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">manifest:</span> <span class="string">/img/pwa/manifest.json</span></span><br><span class="line">  <span class="attr">apple_touch_icon:</span> <span class="string">/img/pwa/apple-touch-icon.png</span></span><br><span class="line">  <span class="attr">favicon_32_32:</span> <span class="string">/img/pwa/32.png</span></span><br><span class="line">  <span class="attr">favicon_16_16:</span> <span class="string">/img/pwa/16.png</span></span><br><span class="line">  <span class="attr">mask_icon:</span> <span class="string">/img/pwa/safari-pinned-tab.svg</span></span><br></pre></td></tr></table></figure><ol><li>在創建<code>source/</code>目錄中創建<code>manifest.json</code>文件。</li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;short_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Junzhou&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;theme_color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#49b1f5&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;background_color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#49b1f5&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;display&quot;</span><span class="punctuation">:</span> <span class="string">&quot;standalone&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;scope&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;start_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;icons&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/pwaicons/36.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;sizes&quot;</span><span class="punctuation">:</span> <span class="string">&quot;36x36&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;image/png&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/pwaicons/48.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;sizes&quot;</span><span class="punctuation">:</span> <span class="string">&quot;48x48&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;image/png&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/pwaicons/72.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;sizes&quot;</span><span class="punctuation">:</span> <span class="string">&quot;72x72&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;image/png&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/pwaicons/96.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;sizes&quot;</span><span class="punctuation">:</span> <span class="string">&quot;96x96&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;image/png&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/pwaicons/144.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;sizes&quot;</span><span class="punctuation">:</span> <span class="string">&quot;144x144&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;image/png&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/pwaicons/192.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;sizes&quot;</span><span class="punctuation">:</span> <span class="string">&quot;192x192&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;image/png&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;src&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/pwaicons/512.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;sizes&quot;</span><span class="punctuation">:</span> <span class="string">&quot;512x512&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;image/png&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;splash_pages&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>你也可以通過 <a href="https://app-manifest.firebaseapp.com/">Web App Manifest</a>快速創建<code>manifest.json</code>。（Web App Manifest 要求至少包含一個 512*512 像素的圖標）</p><ol><li><p>可以通過<code>Chrome</code>插件<code>Lighthouse</code>檢查 PWA 配置是否生效以及配置是否正確。</p><ul><li>打開博客頁面</li><li>啟動<code>Lighthouse</code>插件 (<code>Lighthouse</code>插件要求至少包含一個 512*512 像素的圖標)</li></ul></li></ol><p>關於 PWA（漸進式增強 Web 應用）的更多內容請參閲 <a href="https://developers.google.com/web/tools/lighthouse/audits/address-bar">Google Tools for Web Developers</a></p><h2 id="字數統計"><a href="#字數統計" class="headerlink" title="字數統計"></a>字數統計</h2><p>要為<code>Butterfly</code>配上字數統計特性, 你需要如下幾個步驟:</p><ol><li><p>打開 hexo 工作目錄</p></li><li><p><code>npm install hexo-wordcount --save</code> or <code>yarn add hexo-wordcount</code></p></li><li><p>修改 <code>主題配置文件</code>:</p></li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">wordcount:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_wordcount:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">min2read:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_wordcount:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-word-count.png" alt=""><br><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-wordcount-totalcount.png" alt=""></p><h2 id="圖片大圖查看模式"><a href="#圖片大圖查看模式" class="headerlink" title="圖片大圖查看模式"></a>圖片大圖查看模式</h2><div class="note info flat"><p>只能開啟一個</p></div><div class="tabs" id="圖片大圖查看模式"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#圖片大圖查看模式-1">注意</button></li><li class="tab"><button type="button" data-href="#圖片大圖查看模式-2">fancybox</button></li><li class="tab"><button type="button" data-href="#圖片大圖查看模式-3">medium_zoom</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="圖片大圖查看模式-1"><p>如果你並不想為某張圖片添加大圖查看模式，你可以使用 html 格式引用圖片，併為圖片添加 <code>no-lightbox</code> class 名。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="圖片大圖查看模式-2"><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># fancybox http://fancyapps.com/fancybox/3/</span></span><br><span class="line"><span class="attr">fancybox:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/fancybox.gif" alt="fancybox.gif"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="圖片大圖查看模式-3"><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">medium_zoom:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/medium_zoom.gif" alt="medium_zoom.gif"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="Snackbar-彈窗"><a href="#Snackbar-彈窗" class="headerlink" title="Snackbar 彈窗"></a>Snackbar 彈窗</h2><p>Snackbar 彈窗,根據自己愛好開啟</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Snackbar 彈窗</span></span><br><span class="line"><span class="comment"># https://github.com/polonel/SnackBar</span></span><br><span class="line"><span class="comment"># position 彈窗位置</span></span><br><span class="line"><span class="comment"># 可選 top-left / top-center / top-right / bottom-left / bottom-center / bottom-right</span></span><br><span class="line"><span class="attr">snackbar:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">bottom-left</span></span><br><span class="line">  <span class="attr">bg_light:</span> <span class="string">&#x27;#49b1f5&#x27;</span> <span class="comment">#light mode時彈窗背景</span></span><br><span class="line">  <span class="attr">bg_dark:</span> <span class="string">&#x27;#2d3035&#x27;</span> <span class="comment">#dark mode時彈窗背景</span></span><br></pre></td></tr></table></figure><blockquote><p>未開啟Snackbar</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/snackbar_false.gif" alt="snackbar_false.gif"></p><blockquote><p>開啟Snackbar</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/snackbar_true.gif" alt="snackbar_true.gif"></p><h2 id="其它配置"><a href="#其它配置" class="headerlink" title="其它配置"></a>其它配置</h2><h3 id="CSS-前綴"><a href="#CSS-前綴" class="headerlink" title="CSS 前綴"></a>CSS 前綴</h3><p>有些 CSS 並不是所有瀏覽器都支持，需要增加對應的前綴才會生效。</p><p>開啟  <code>css_prefix</code> 後，會自動為一些 CSS 增加前綴。（會增加 20%的體積）</p><p>修改配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add the vendor prefixes to ensure compatibility</span></span><br><span class="line"><span class="attr">css_prefix:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="Open-Graph"><a href="#Open-Graph" class="headerlink" title="Open Graph"></a>Open Graph</h3><p>在 <code>head</code> 裏增加一些 meta 資料，例如縮略圖、標題、時間等等。當你分享網頁到一些平台時，平台會讀取 Open Graph 的內容，展示縮略圖，標題等等信息。</p><p>修改配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Open graph meta tags</span></span><br><span class="line"><span class="comment"># https://developers.facebook.com/docs/sharing/webmasters/</span></span><br><span class="line"><span class="attr">Open_Graph_meta:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="Instantpage"><a href="#Instantpage" class="headerlink" title="Instantpage"></a>Instantpage</h3><p>當鼠標懸停到鏈接上超過 65 毫秒時，Instantpage 會對該鏈接進行預加載，可以提升訪問速度。</p><p>修改配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># https://instant.page/</span></span><br><span class="line"><span class="comment"># prefetch (預加載)</span></span><br><span class="line"><span class="attr">instantpage:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="Pangu"><a href="#Pangu" class="headerlink" title="Pangu"></a>Pangu</h3><blockquote><p>如果你跟我一樣，每次看到網頁上的中文字和英文、數字、符號擠在一塊，就會坐立難安，忍不住想在它們之間加個空格。這個外掛正是你在網路世界走跳所需要的東西，它會自動替你在網頁中所有的中文字和半形的英文、數字、符號之間插入空白。</p></blockquote><p>修改配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># https://github.com/vinta/pangu.js</span></span><br><span class="line"><span class="comment"># Insert a space between Chinese character and English character (中英文之間添加空格)</span></span><br><span class="line"><span class="attr">pangu:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span> <span class="comment"># site/post</span></span><br></pre></td></tr></table></figure><p><code>field</code>只支持兩個參數，<code>post</code>(只在文章頁生效)和<code>site</code>(全站生效)</p><h2 id="Pjax"><a href="#Pjax" class="headerlink" title="Pjax"></a>Pjax</h2><p>當用户點擊鏈接，通過ajax更新頁面需要變化的部分，然後使用HTML5的pushState修改瀏覽器的URL地址。</p><p>這樣可以不用重複加載相同的資源（css/js）， 從而提升網頁的加載速度。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Pjax [Beta]</span></span><br><span class="line"><span class="comment"># It may contain bugs and unstable, give feedback when you find the bugs.</span></span><br><span class="line"><span class="comment"># https://github.com/MoOx/pjax</span></span><br><span class="line"><span class="attr">pjax:</span> </span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/music/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/no-pjax/</span></span><br></pre></td></tr></table></figure><div class="note info flat"><p>對於一些第三方插件，有些並不支持 pjax 。<br>你可以把<strong>網頁</strong>加入到 <code>exclude</code> 裏，這個網頁會被 pjax 排除在外。<br>點擊該網頁會重新加載網站</p><p>使用pjax後，一些自己DIY的js可能會無效，跳轉頁面時需要重新調用，請參考<a href="https://github.com/MoOx/pjax">Pjax文檔</a><br>使用pjax後，一些個別頁面加載的js/css，將會改為所有頁面都加載</p></div><div class="note warning flat"><p>Butterfly的Pjax目前仍有一些問題，請留意</p><ul><li>使用谷歌廣告可能會報錯（例如自動廣告）</li></ul><p>如果你在使用中發現問題，歡迎反饋Bugs</p></div><h2 id="Inject"><a href="#Inject" class="headerlink" title="Inject"></a>Inject</h2><blockquote><p>2.3.0以上支持</p></blockquote><p>如想添加額外的js/css/meta等等東西，可以在Inject裏添加，支持添加到head(<code>&lt;/body&gt;</code>標籤之前)和bottom(<code>&lt;/html&gt;</code>標籤之前)。</p><p>請注意：以標準的html格式添加內容</p><p>例如</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/self.css&quot;&gt;</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;xxxx&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p><em>留意:</em> 如果你的網站根目錄不是’/‘,使用本地圖片時，需加上你的根目錄。<br>例如：網站是 <code>https://yoursite.com/blog</code>,引用<code>css/xx.css</code>，則設置為<code>&lt;link rel=&quot;stylesheet&quot; href=&quot;/blog/css/xx.css&quot;&gt;</code></p><h2 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h2><p>配置文件中最後一部分CDN，裏面是主題所引用到的文件，可自行配置CDN。（非必要請勿修改，配置後請確認鏈接是否能訪問）</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">CDN:</span></span><br><span class="line">  <span class="comment"># The CDN provider of internal scripts (主題內部 js 的 cdn 配置)</span></span><br><span class="line">  <span class="comment"># option: local/jsdelivr/unpkg/cdnjs/custom</span></span><br><span class="line">  <span class="comment"># Dev version can only choose. ( dev版的主題只能設置為 local )</span></span><br><span class="line">  <span class="attr">internal_provider:</span> <span class="string">local</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># The CDN provider of third party scripts (第三方 js 的 cdn 配置)</span></span><br><span class="line">  <span class="comment"># option: local/jsdelivr/unpkg/cdnjs/custom</span></span><br><span class="line">  <span class="comment"># when set it to local, you need to install hexo-butterfly-extjs</span></span><br><span class="line">  <span class="attr">third_party_provider:</span> <span class="string">jsdelivr</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Add version number to CDN, true or false  </span></span><br><span class="line">  <span class="attr">version:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Custom format</span></span><br><span class="line">  <span class="comment"># For example: https://cdn.staticfile.org/$&#123;cdnjs_name&#125;/$&#123;version&#125;/$&#123;min_cdnjs_file&#125;</span></span><br><span class="line">  <span class="attr">custom_format:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">option:</span></span><br><span class="line">    <span class="comment"># main_css:</span></span><br><span class="line">    <span class="comment"># main:</span></span><br><span class="line">    <span class="comment"># utils:</span></span><br><span class="line">    <span class="comment"># translate:</span></span><br><span class="line">    <span class="comment"># local_search:</span></span><br><span class="line">    <span class="comment"># algolia_js:</span></span><br><span class="line">    <span class="comment"># algolia_search_v4:</span></span><br><span class="line">    <span class="comment"># instantsearch_v4:</span></span><br><span class="line">    <span class="comment"># pjax:</span></span><br><span class="line">    <span class="comment"># gitalk:</span></span><br><span class="line">    <span class="comment"># gitalk_css:</span></span><br><span class="line">    <span class="comment"># blueimp_md5:</span></span><br><span class="line">    <span class="comment"># valine:</span></span><br><span class="line">    <span class="comment"># disqusjs:</span></span><br><span class="line">    <span class="comment"># disqusjs_css:</span></span><br><span class="line">    <span class="comment"># twikoo:</span></span><br><span class="line">    <span class="comment"># waline_js:</span></span><br><span class="line">    <span class="comment"># waline_css:</span></span><br><span class="line">    <span class="comment"># sharejs:</span></span><br><span class="line">    <span class="comment"># sharejs_css:</span></span><br><span class="line">    <span class="comment"># mathjax:</span></span><br><span class="line">    <span class="comment"># katex:</span></span><br><span class="line">    <span class="comment"># katex_copytex:</span></span><br><span class="line">    <span class="comment"># mermaid:</span></span><br><span class="line">    <span class="comment"># canvas_ribbon:</span></span><br><span class="line">    <span class="comment"># canvas_fluttering_ribbon:</span></span><br><span class="line">    <span class="comment"># canvas_nest:</span></span><br><span class="line">    <span class="comment"># lazyload:</span></span><br><span class="line">    <span class="comment"># instantpage:</span></span><br><span class="line">    <span class="comment"># typed:</span></span><br><span class="line">    <span class="comment"># pangu:</span></span><br><span class="line">    <span class="comment"># fancybox_css_v4:</span></span><br><span class="line">    <span class="comment"># fancybox_v4:</span></span><br><span class="line">    <span class="comment"># medium_zoom:</span></span><br><span class="line">    <span class="comment"># snackbar_css:</span></span><br><span class="line">    <span class="comment"># snackbar:</span></span><br><span class="line">    <span class="comment"># activate_power_mode:</span></span><br><span class="line">    <span class="comment"># fireworks:</span></span><br><span class="line">    <span class="comment"># click_heart:</span></span><br><span class="line">    <span class="comment"># ClickShowText:</span></span><br><span class="line">    <span class="comment"># fontawesomeV6:</span></span><br><span class="line">    <span class="comment"># flickr_justified_gallery_js:</span></span><br><span class="line">    <span class="comment"># flickr_justified_gallery_css:</span></span><br><span class="line">    <span class="comment"># aplayer_css:</span></span><br><span class="line">    <span class="comment"># aplayer_js:</span></span><br><span class="line">    <span class="comment"># meting_js:</span></span><br><span class="line">    <span class="comment"># prismjs_js:</span></span><br><span class="line">    <span class="comment"># prismjs_lineNumber_js:</span></span><br><span class="line">    <span class="comment"># prismjs_autoloader:</span></span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>參數</th><th>解釋</th></tr></thead><tbody><tr><td>internal_provider</td><td>主題內部文件<br />可選 local/jsdelivr/unpkg/cdnjs/custom<br />lcoal 為本地加載，custom 為自定義格式，需配置 <code>custom_format</code><br /><strong>注意:</strong> 如果使用的是 Dev 版，只能設置為 local</td></tr><tr><td>third_party_provider</td><td>第三方文件<br />可選 local/jsdelivr/unpkg/cdnjs/custom<br />lcoal 為本地加載，custom 為自定義格式，需配置 <code>custom_format</code><br /><strong>注意:</strong>  如果你選擇 local 需要安裝 <code>hexo-butterfly-extjs</code>插件</td></tr><tr><td>version</td><td>true/false 為 cdn 加上指定版本號</td></tr><tr><td>custom_format</td><td>自定義格式</td></tr><tr><td>option</td><td>你可以在這裏更換部分文件,會覆蓋原有的配置</td></tr></tbody></table></div><h3 id="version"><a href="#version" class="headerlink" title="version"></a>version</h3><p>如需修改版本號，可修改<code>主題目錄</code>的 ‘plugins.yml’ 中對應插件的 version</p><p>請確保你修改的版本號，你所使用的 cdn 有<strong>收錄</strong></p><h3 id="custom-format"><a href="#custom-format" class="headerlink" title="custom_format"></a>custom_format</h3><p>提供以下參數</p><div class="table-container"><table><thead><tr><th>參數</th><th>解釋</th></tr></thead><tbody><tr><td>name</td><td>npm 上的包名</td></tr><tr><td>file</td><td>npm 上的文件路徑</td></tr><tr><td>min_file</td><td>npm 上的文件路徑（壓縮過的文件）</td></tr><tr><td>cdnjs_name</td><td>cdnjs 上的包名</td></tr><tr><td>cdnjs_file</td><td>cdnjs 上的文件路徑</td></tr><tr><td>min_cdnjs_file</td><td>cdnjs 上的文件路徑（壓縮過的文件）</td></tr><tr><td>version</td><td>插件版本號</td></tr></tbody></table></div><p>部分可用的第三方 CDN 列表</p><blockquote><p>請確保你選擇的 CDN 有收錄主題使用的第三方插件</p></blockquote><div class="table-container"><table><thead><tr><th>提供商</th><th>格式</th><th>備註</th></tr></thead><tbody><tr><td><a href="https://www.staticfile.org/">Staticfile（七牛雲）</a></td><td><a href="https://cdn.staticfile.org/${cdnjs_name}/${version}/${min_cdnjs_file}">https://cdn.staticfile.org/${cdnjs_name}/${version}/${min_cdnjs_file}</a></td><td>同步  cdnjs</td></tr><tr><td><a href="https://www.bootcdn.cn/">BootCDN</a></td><td><a href="https://cdn.bootcdn.net/ajax/libs/${cdnjs_name}/${version}/${min_cdnjs_file}">https://cdn.bootcdn.net/ajax/libs/${cdnjs_name}/${version}/${min_cdnjs_file}</a></td><td>同步  cdnjs</td></tr><tr><td><a href="https://cdn.baomitu.com/">Baomitu（360）</a></td><td>最新版本： <a href="https://lib.baomitu.com/${cdnjs_name}/latest/${min_cdnjs_file}">https://lib.baomitu.com/${cdnjs_name}/latest/${min_cdnjs_file}</a><br />指定版本： <a href="https://lib.baomitu.com/${cdnjs_name}/${version}/${min_cdnjs_file}">https://lib.baomitu.com/${cdnjs_name}/${version}/${min_cdnjs_file}</a></td><td>同步  cdnjs</td></tr><tr><td>Elemecdn</td><td>最新版本： <a href="https://npm.elemecdn.com/${name}@latest/${file}">https://npm.elemecdn.com/${name}@latest/${file}</a><br />指定版本： <a href="https://npm.elemecdn.com/${name}@${version}/${file}">https://npm.elemecdn.com/${name}@${version}/${file}</a></td><td>同步  npm</td></tr></tbody></table></div><a class="btn-beautify block green right larger" href="/posts/98d20436/"   title="❓ Butterfly 安裝文檔(五) 主題問答"><i class="far fa-hand-point-right"></i><span>❓ Butterfly 安裝文檔(五) 主題問答</span></a>]]></content>
      
      
      <categories>
          
          <category> Docs文檔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
            <tag> 主題 </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly 安裝文檔(三) 主題配置-1</title>
      <link href="/posts/4aa8abbe/"/>
      <url>/posts/4aa8abbe/</url>
      
        <content type="html"><![CDATA[<div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>📖  本教程更新於 2022 年 08 月 18 日，教程的內容針對最新<strong>穩定版</strong>而更新（如果你是舊版，教程會有些出入，請留意）</p><p>🦋  Butterfly 已經更新到 <a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/4.4.0">4.4.0</a></p></div><div class="note green icon-padding flat"><i class="note-icon fas fa-rocket"></i><p> 📚  文檔目錄</p><p><a href="/posts/21cfbf15/" title="🚀 快速開始">🚀 快速開始</a> - <a href="/posts/dc584b87/" title="📑 主題頁面">📑 主題頁面</a> - <a href="/posts/4aa8abbe/" title="🛠 主題配置-1">🛠 主題配置-1</a> - <a href="/posts/ceeb73f/" title="⚔️ 主題配置-2">⚔️ 主題配置-2</a> - <a href="/posts/98d20436/" title="❓ 主題問答">❓ 主題問答</a> - <a href="/posts/4073eda/" title="⚡️ 進階教程">⚡️ 進階教程</a> - <a href="/posts/198a4240/" title="✨ 更新日誌">✨ 更新日誌</a> - <a href="/posts/6ad51b4/" title="🤞 打賞">🤞 打賞</a></p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-magic"></i><p>你可以通過右下角的 <strong>簡</strong> 按鈕切換為簡體顯示 </p></div><hr><h2 id="語言"><a href="#語言" class="headerlink" title="語言"></a>語言</h2><p>修改站點配置文件 <code>_config.yml</code></p><p>默認語言是 en</p><p>主題支持三種語言</p><ul><li>default(en)</li><li>zh-CN (簡體中文)</li><li>zh-TW (繁體中文)</li></ul><h2 id="網站資料"><a href="#網站資料" class="headerlink" title="網站資料"></a>網站資料</h2><p>修改網站各種資料，例如標題、副標題和郵箱等個人資料，請修改博客根目錄的<code>_config.yml</code></p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/20191120000444.png" alt=""></p><h2 id="導航菜單"><a href="#導航菜單" class="headerlink" title="導航菜單"></a>導航菜單</h2><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line"><span class="attr">Archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-archive</span></span><br><span class="line"><span class="attr">Tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line"><span class="attr">Categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-folder-open</span></span><br><span class="line"><span class="string">List||fas</span> <span class="attr">fa-list:</span></span><br><span class="line">  <span class="attr">Music:</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-music</span></span><br><span class="line">  <span class="attr">Movie:</span> <span class="string">/movies/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-video</span></span><br><span class="line"><span class="attr">Link:</span> <span class="string">/link/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-link</span></span><br><span class="line"><span class="attr">About:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-heart</span></span><br></pre></td></tr></table></figure><p>必須是 <code>/xxx/</code>，後面<code>||</code>分開，然後寫圖標名。</p><p>如果不希望顯示圖標，圖標名可不寫。</p><p>默認子目錄是展開的，如果你想要隱藏，在子目錄裏添加 <code>hide</code> 。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">List||fas</span> <span class="string">fa-list||hide:</span></span><br><span class="line">  <span class="attr">Music:</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-music</span></span><br><span class="line">  <span class="attr">Movie:</span> <span class="string">/movies/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-video</span></span><br></pre></td></tr></table></figure><p><strong>注意：</strong> 導航的文字可自行更改</p><p>例如：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  首頁: / || fas fa-home</span><br><span class="line">  時間軸: /archives/ || fas fa-archive</span><br><span class="line">  標籤: /tags/ || fas fa-tags</span><br><span class="line">  分類: /categories/ || fas fa-folder-open</span><br><span class="line">  清單||fa fa-heartbeat:</span><br><span class="line"><span class="code">    音樂: /music/ || fas fa-music</span></span><br><span class="line"><span class="code">    照片: /Gallery/ || fas fa-images</span></span><br><span class="line"><span class="code">    電影: /movies/ || fas fa-video</span></span><br><span class="line"><span class="code">  友鏈: /link/ || fas fa-link</span></span><br><span class="line"><span class="code">  關於: /about/ || fas fa-heart</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-menu.png" alt=""></p><h2 id="代碼"><a href="#代碼" class="headerlink" title="代碼"></a>代碼</h2><div class="note info flat"><p>代碼塊中的所有功能只適用於 Hexo 自帶的代碼渲染</p><p>如果使用第三方的渲染器，不一定會有效</p></div><h3 id="代碼高亮主題"><a href="#代碼高亮主題" class="headerlink" title="代碼高亮主題"></a>代碼高亮主題</h3><div class="tabs" id="highlight-theme"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#highlight-theme-1">默認主題</button></li><li class="tab"><button type="button" data-href="#highlight-theme-2">自定義主題</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="highlight-theme-1"><p><code>Butterfly</code> 支持6種代碼高亮樣式：</p><ul><li>darker</li><li>pale night</li><li>light</li><li>ocean</li><li>mac</li><li>mac light</li></ul><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_theme:</span> <span class="string">light</span></span><br></pre></td></tr></table></figure><blockquote><p>darker</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-code-darker.png" alt=""></p><blockquote><p>pale night</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-code-pale-night.png" alt=""></p><blockquote><p>light</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-code-light.png" alt=""></p><blockquote><p>ocean</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-highlight-ocean.png" alt=""></p><blockquote><p>mac</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-highlight-mac.png" alt=""></p><blockquote><p>mac light</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-mac-light.png" alt="image-20200731175026827"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="highlight-theme-2"><p>主題從 3.0 開始，支持使用自定義的代碼顔色。</p><p>如何自定義主題，請查看下面這篇文章。</p><p><a href="/posts/b37b5fe3/" title="自定義代碼配色">自定義代碼配色</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="代碼複製"><a href="#代碼複製" class="headerlink" title="代碼複製"></a>代碼複製</h3><p>主題支持代碼複製功能</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_copy:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-code-copy.png" alt=""></p><h3 id="代碼框展開-關閉"><a href="#代碼框展開-關閉" class="headerlink" title="代碼框展開/關閉"></a>代碼框展開/關閉</h3><p>在默認情況下，代碼框自動展開，可設置是否所有代碼框都關閉狀態，點擊<code>&gt;</code>可展開代碼</p><ul><li>true 全部代碼框不展開，需點擊<code>&gt;</code>打開 </li><li>false 代碼框展開，有<code>&gt;</code>點擊按鈕</li><li>none 不顯示<code>&gt;</code>按鈕</li></ul><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_shrink:</span> <span class="literal">true</span> <span class="comment">#代碼框不展開，需點擊 &#x27;&gt;&#x27; 打開</span></span><br></pre></td></tr></table></figure><div class="note info flat"><p>你也可以在post/page頁對應的markdown文件front-matter添加highlight_shrink來獨立配置。</p><p>當<strong>主題配置文件中</strong>的 <code>highlight_shrink</code>設為true時，可在front-matter添加<code>highlight_shrink: false</code>來單獨配置文章展開代碼框。</p><p>當<strong>主題配置文件中</strong>的 <code>highlight_shrink</code>設為false時，可在front-matter添加<code>highlight_shrink: true</code>來單獨配置文章收縮代碼框。</p></div><p><code>highlight_shrink: true</code></p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-highlight-shrink-true.png" alt=""></p><p><code>highlight_shrink: false</code></p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-highlight-shrink-false.png" alt=""></p><p><code>highlight_shrink: none</code></p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-highlight-shirk-none.png" alt=""></p><h3 id="代碼換行"><a href="#代碼換行" class="headerlink" title="代碼換行"></a>代碼換行</h3><p>在默認情況下，Hexo 在編譯的時候不會實現代碼自動換行。如果你不希望在代碼塊的區域裏有橫向滾動條的話，那麼你可以考慮開啟這個功能。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">code_word_wrap:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>如果你是使用 highlight 渲染，需要找到你站點的 Hexo 配置文件<code>_config.yml</code>，將<code>line_number</code>改成<code>false</code>:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span> <span class="comment"># &lt;- 改這裏</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tab_replace:</span></span><br></pre></td></tr></table></figure><p>如果你是使用 prismjs 渲染，需要找到你站點的 Hexo 配置文件<code>_config.yml</code>，將<code>line_number</code>改成<code>false</code>:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">prismjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">preprocess:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span> <span class="comment"># &lt;- 改這裏</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><p>設置<code>code_word_wrap</code>之前:</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-code-word-wrap-before.png" alt=""></p><blockquote><p>設置<code>code_word_wrap</code>之後:</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-code-word-wrap-after.png" alt=""></p><h3 id="代碼高度限制"><a href="#代碼高度限制" class="headerlink" title="代碼高度限制"></a>代碼高度限制</h3><blockquote><p>3.7.0 及以上支持</p></blockquote><p>可配置代碼高度限制，超出的部分會隱藏，並顯示展開按鈕。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_height_limit:</span> <span class="literal">false</span> <span class="comment"># unit: px</span></span><br></pre></td></tr></table></figure><p>注意：</p><ol><li><p>單位是 <code>px</code>，直接添加數字，如 200</p></li><li><p>實際限制高度為 <code>highlight_height_limit + 30 px</code> ，多增加 30px 限制，目的是避免代碼高度只超出highlight_height_limit 一點時，出現展開按鈕，展開沒內容。</p></li><li><p>不適用於隱藏後的代碼塊（ css 設置 display: none）</p></li></ol><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN@m2/img/hexo-theme-butterfly-docs-highlight-heigh-limit.gif" alt="hexo-theme-butterfly-docs-highlight-heigh-limit"></p><h2 id="社交圖標"><a href="#社交圖標" class="headerlink" title="社交圖標"></a>社交圖標</h2><p>Butterfly支持 <a href="https://fontawesome.com/icons?from=io">font-awesome v6</a>圖標. </p><p>書寫格式 <code>圖標名：url || 描述性文字</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">fab fa-github:</span> <span class="string">https://github.com/xxxxx</span> <span class="string">||</span> <span class="string">Github</span></span><br><span class="line">  <span class="attr">fas fa-envelope:</span> <span class="string">mailto:xxxxxx@gmail.com</span> <span class="string">||</span> <span class="string">Email</span></span><br></pre></td></tr></table></figure><p>圖標名可在這尋找</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-fontawesome.png" alt=""></p><p>PC:</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-social-icon-pc.png" alt=""></p><p>Mobile:</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-socila-icon-mobile.png" alt="1560603353743"></p><h2 id="主頁文章節選-自動節選和文章頁description"><a href="#主頁文章節選-自動節選和文章頁description" class="headerlink" title="主頁文章節選(自動節選和文章頁description)"></a>主頁文章節選(自動節選和文章頁description)</h2><p>因為主題UI的關係，<code>主頁文章節選</code>只支持<code>自動節選</code>和<code>文章頁description</code>。</p><p>在<code>butterfly</code>裏，有四種可供選擇</p><ol><li><strong>description：</strong> 只顯示description</li><li><strong>both：</strong> 優先選擇description，如果沒有配置description，則顯示自動節選的內容</li><li><strong>auto_excerpt：</strong>只顯示自動節選</li><li><strong>false：</strong> 不顯示文章內容</li></ol><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">index_post_content:</span></span><br><span class="line">  <span class="attr">method:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">length:</span> <span class="number">500</span> <span class="comment"># if you set method to 2 or 3, the length need to config</span></span><br></pre></td></tr></table></figure><p><code>description</code>在front-matter裏添加</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-post-description.png" alt=""></p><h2 id="頂部圖"><a href="#頂部圖" class="headerlink" title="頂部圖"></a>頂部圖</h2><div class="note info flat"><p>如果不要顯示頂部圖，可直接配置 <code>disable_top_img: true</code></p></div><p>配置中的值：</p><div class="table-container"><table><thead><tr><th>配置</th><th>解釋</th></tr></thead><tbody><tr><td>index_img</td><td>主頁的 top_img</td></tr><tr><td>default_top_img</td><td>默認的 top_img，當頁面的 top_img 沒有配置時，會顯示 default_top_img</td></tr><tr><td>archive_img</td><td>歸檔頁面的 top_img</td></tr><tr><td>tag_img</td><td>tag 子頁面 的 默認 top_img</td></tr><tr><td>tag_per_img</td><td>tag 子頁面的 top_img，可配置每個 tag 的 top_img</td></tr><tr><td>category_img</td><td>category 子頁面 的 默認 top_img</td></tr><tr><td>category_per_img</td><td>category 子頁面的 top_img，可配置每個 category 的 top_img</td></tr></tbody></table></div><p>其它頁面 （tags/categories/自建頁面）和 文章頁 的 <code>top_img</code> ，請到對應的 md 頁面設置<code>front-matter</code>中的<code>top_img</code></p><p>以上所有的 top_img 可配置以下值</p><blockquote><p><strong>3.2.0 以下</strong>版本的配置只支持</p><ul><li>留空，true 和 false - 顯示默認的顔色</li><li>img鏈接 - 顯示所配置的圖片</li></ul></blockquote><div class="table-container"><table><thead><tr><th>配置的值</th><th>效果</th></tr></thead><tbody><tr><td>留空</td><td>顯示默認的top_img（如有），否則顯示默認的顔色<br>（文章頁top_img留空的話，會顯示 cover 的值）</td></tr><tr><td>img鏈接</td><td>圖片的鏈接，顯示所配置的圖片</td></tr><tr><td>顔色(<br>HEX值 - #0000FF<br>RGB值 - rgb(0,0,255)<br>顔色單詞 - orange<br>漸變色 - linear-gradient( 135deg, #E2B0FF 10%, #9F44D3 100%)<br>）</td><td>對應的顔色</td></tr><tr><td>transparent</td><td>透明</td></tr><tr><td>false</td><td>不顯示 top_img</td></tr></tbody></table></div><p><code>tag_per_img</code> 和 <code>category_per_img</code> 是 3.2.0 新增的內容，可對 tag 和 category 進行單獨的配置</p><p>並不推薦為每個 tag 和每個 category 都配置不同的頂部圖，因為配置太多會拖慢生成速度</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">tag_per_img：</span></span><br><span class="line">  <span class="attr">aplayer:</span> <span class="string">https://xxxxxx.png</span></span><br><span class="line">  <span class="attr">android:</span> <span class="string">ddddddd.png</span></span><br><span class="line">  </span><br><span class="line"><span class="string">category_per_img：</span></span><br><span class="line">  <span class="string">隨想:</span> <span class="string">hdhdh.png</span></span><br><span class="line">  <span class="string">推薦:</span> <span class="string">ddjdjdjd.png</span></span><br></pre></td></tr></table></figure><blockquote><p>top_img: false</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/theme-butterfly-docs-page-top-img-false.png" alt="image-20200924224536013"></p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/theme-butterfly-docs-post-top-img-false-new.png" alt="image-20201027210949089"></p><blockquote><p>top_img: orange</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/theme-butterfly-docs-top-img-orange.png" alt="image-20200924225024153"></p><blockquote><p>top_img: ‘linear-gradient(20deg, #0062be, #925696, #cc426e, #fb0347)’</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/theme-butterfly-docs-top-img-color.png" alt="image-20200924225300934"></p><h2 id="文章置頂"><a href="#文章置頂" class="headerlink" title="文章置頂"></a>文章置頂</h2><p>【推薦】<a href="https://github.com/hexojs/hexo-generator-index"><code>hexo-generator-index</code></a>從 2.0.0 開始，已經支持文章置頂功能。你可以直接在文章的<code>front-matter</code>區域裏添加<code>sticky: 1</code>屬性來把這篇文章置頂。數值越大，置頂的優先級越大。</p><h2 id="文章封面"><a href="#文章封面" class="headerlink" title="文章封面"></a>文章封面</h2><p>文章的markdown文檔上,在<code>Front-matter</code>添加<code>cover</code>,並填上要顯示的圖片地址。<br>如果不配置<code>cover</code>,可以設置顯示默認的cover.</p><p>如果不想在首頁顯示cover,可以設置為<code>false</code></p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cover:</span></span><br><span class="line">  <span class="comment"># 是否顯示文章封面</span></span><br><span class="line">  <span class="attr">index_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">aside_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">archives_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 封面顯示的位置</span></span><br><span class="line">  <span class="comment"># 三個值可配置 left , right , both</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">both</span></span><br><span class="line">  <span class="comment"># 當沒有設置cover時，默認的封面顯示</span></span><br><span class="line">  <span class="attr">default_cover:</span> </span><br></pre></td></tr></table></figure><p>當配置多張圖片時,會隨機選擇一張作為cover.此時寫法應為</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">default_cover:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">https://fastly.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">https://fastly.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg2.png</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">https://fastly.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-post-cover.png" alt=""><br><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-post-cover-show.png" alt=""></p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-cover-false.png" alt=""></p><blockquote><p>left</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-cover-left.png" alt=""></p><blockquote><p>right</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-cover-right.png" alt=""></p><blockquote><p>both</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-cover-both.png" alt=""></p><h2 id="文章頁相關配置"><a href="#文章頁相關配置" class="headerlink" title="文章頁相關配置"></a>文章頁相關配置</h2><h3 id="文章meta顯示"><a href="#文章meta顯示" class="headerlink" title="文章meta顯示"></a>文章meta顯示</h3><p>這個選項是用來顯示文章的相關信息的。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_meta:</span></span><br><span class="line">  <span class="attr">page:</span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">both</span> <span class="comment"># created or updated or both 主頁文章日期是創建日或者更新日或都顯示</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">relative</span> <span class="comment"># date/relative 顯示日期還是相對日期</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span> <span class="comment"># true or false 主頁是否顯示分類</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span> <span class="comment"># true or false 主頁是否顯示標籤</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span> <span class="comment"># true or false 顯示描述性文字</span></span><br><span class="line">  <span class="attr">post:</span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">both</span> <span class="comment"># created or updated or both 文章頁日期是創建日或者更新日或都顯示</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">relative</span> <span class="comment"># date/relative 顯示日期還是相對日期</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span> <span class="comment"># true or false 文章頁是否顯示分類</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span> <span class="comment"># true or false 文章頁是否顯示標籤</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span> <span class="comment"># true or false 顯示描述性文字</span></span><br></pre></td></tr></table></figure><blockquote><p>主頁</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-page-meta.png" alt=""></p><blockquote><p>文章頁</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-post-info.png" alt=""></p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-post-tag.png" alt=""></p><p><code>date_format</code>  是 3.2.0 新增的內容，配置時間顯示明確時間還是相對時間</p><blockquote><p>相對時間</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/theme-butterfly-docs-relative-time.png" alt="image-20200928201701560"></p><blockquote><p>明確時間</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/theme-butterfly-docs-full-date.png" alt="image-20200928201911032"></p><h3 id="文章版權"><a href="#文章版權" class="headerlink" title="文章版權"></a>文章版權</h3><p>為你的博客文章展示文章版權和許可協議。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_copyright:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">decode:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">author_href:</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">CC</span> <span class="string">BY-NC-SA</span> <span class="number">4.0</span></span><br><span class="line">  <span class="attr">license_url:</span> <span class="string">https://creativecommons.org/licenses/by-nc-sa/4.0/</span></span><br></pre></td></tr></table></figure><p>由於<code>Hexo 4.1</code>開始，默認對網址進行解碼，以至於如果是中文網址，會被解碼，可設置<code>decode: true</code>來顯示中文網址。</p><p>如果有文章（例如：轉載文章）不需要顯示版權，可以在文章Front-matter單獨設置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">copyright:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>從<code>3.0.0</code>開始，支持對單獨文章設置版權信息，可以在文章Front-matter單獨設置</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">copyright<span class="emphasis">_author: xxxx</span></span><br><span class="line"><span class="emphasis">copyright_</span>author<span class="emphasis">_href: https://xxxxxx.com</span></span><br><span class="line"><span class="emphasis">copyright_</span>url: https://xxxxxx.com</span><br><span class="line">copyright<span class="emphasis">_info: 此文章版權歸xxxxx所有，如有轉載，請註明來自原作者</span></span><br></pre></td></tr></table></figure><p><strong>版權顯示截圖</strong></p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-post-copyright.png" alt="image-20210130161913121"></p><h3 id="文章打賞"><a href="#文章打賞" class="headerlink" title="文章打賞"></a>文章打賞</h3><p>在你每篇文章的結尾，可以添加打賞按鈕。相關二維碼可以自行配置。</p><p>對於沒有提供二維碼的，可配置一張軟件的icon圖片，然後在link上添加相應的打賞鏈接。用户點擊圖片就會跳轉到鏈接去。</p><p>link可以不寫，會默認為圖片的鏈接。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">QR_code:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">/img/wechat.jpg</span></span><br><span class="line">      <span class="attr">link:</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">微信</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">/img/alipay.jpg</span></span><br><span class="line">      <span class="attr">link:</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">支付寶</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-post-donate.png" alt=""></p><h3 id="TOC"><a href="#TOC" class="headerlink" title="TOC"></a>TOC</h3><p>在文章頁，會有一個目錄，用於顯示TOC。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">expand:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">style_simple:</span> <span class="literal">false</span> <span class="comment"># for post</span></span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>屬性</th><th>解釋</th></tr></thead><tbody><tr><td>post</td><td>文章頁是否顯示 TOC</td></tr><tr><td>page</td><td>普通頁面是否顯示 TOC</td></tr><tr><td>number</td><td>是否顯示章節數</td></tr><tr><td>expand</td><td>是否展開 TOC</td></tr><tr><td>style_simple</td><td>簡潔模式（側邊欄<strong>只</strong>顯示 TOC, 只對文章頁有效 ）</td></tr></tbody></table></div><blockquote><p>Toc PC</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-toc-pc-new.png" alt=""></p><blockquote><p>Toc Mobile</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-toc-mobile-new.png" alt=""></p><blockquote><p>style_simple: true</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-toc-style-simple.png" alt="image-20201209232104167"></p><h4 id="為特定的文章配置"><a href="#為特定的文章配置" class="headerlink" title="為特定的文章配置"></a>為特定的文章配置</h4><p>在你的文章<code>md</code>文件的頭部，加入<code>toc_number</code>和<code>toc</code>，並配置<code>true</code>或者<code>false</code>即可。</p><p>主題會優先判斷文章Markdown的Front-matter是否有配置，如有，則以Front-matter的配置為準。否則，以<strong>主題配置文件中</strong>的配置為準</p><h3 id="相關文章"><a href="#相關文章" class="headerlink" title="相關文章"></a>相關文章</h3><p>相關文章推薦的原理是根據文章tags的比重來推薦</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">related_post:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">6</span> <span class="comment"># 顯示推薦文章數目</span></span><br><span class="line">  <span class="attr">date_type:</span> <span class="string">created</span> <span class="comment"># or created or updated 文章日期顯示創建日或者更新日</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-releatedpost.png" alt=""></p><h3 id="文章錨點"><a href="#文章錨點" class="headerlink" title="文章錨點"></a>文章錨點</h3><p>開啟文章錨點後，當你在文章頁進行滾動時，文章鏈接會根據標題ID進行替換<br>(注意: 每替換一次，會留下一個歷史記錄。所以如果一篇文章有很多錨點的話，網頁的歷史記錄會很多。)</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># anchor</span></span><br><span class="line"><span class="comment"># when you scroll in post , the url will update according to header id.</span></span><br><span class="line"><span class="attr">anchor:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="文章過期提醒"><a href="#文章過期提醒" class="headerlink" title="文章過期提醒"></a>文章過期提醒</h3><p>可設置是否顯示文章過期提醒，以更新時間為基準。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># Displays outdated notice for a post (文章過期提醒)</span></span><br><span class="line">noticeOutdate:</span><br><span class="line">  enable: true</span><br><span class="line">  style: flat # style: simple/flat</span><br><span class="line">  limit<span class="emphasis">_day: 365 # When will it be shown</span></span><br><span class="line"><span class="emphasis">  position: top # position: top/bottom</span></span><br><span class="line"><span class="emphasis">  message_</span>prev: It has been</span><br><span class="line">  message<span class="emphasis">_next: days since the last update, the content of the article may be outdated.</span></span><br></pre></td></tr></table></figure><p><code>limit_day</code>： 距離更新時間多少天才顯示文章過期提醒</p><p><code>message_prev</code> ： 天數之前的文字</p><p><code>message_next</code>：天數之後的文字</p><blockquote><p>style: flat</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butteffly-docs-outdate-flat.png" alt="image-20200731175909296"></p><blockquote><p>style: simple</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-outdated-simple.png" alt="image-20200731180037968"></p><h3 id="文章編輯按鈕"><a href="#文章編輯按鈕" class="headerlink" title="文章編輯按鈕"></a>文章編輯按鈕</h3><p>在文章標題旁邊顯示一個編輯按鈕，點擊會跳轉到對應的鏈接去。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Post edit</span></span><br><span class="line"><span class="comment"># Easily browse and edit blog source code online.</span></span><br><span class="line"><span class="attr">post_edit:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># url: https://github.com/user-name/repo-name/edit/branch-name/subdirectory-name/</span></span><br><span class="line">  <span class="comment"># For example: https://github.com/jerryc127/butterfly.js.org/edit/main/source/</span></span><br><span class="line">  <span class="attr">url:</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-post-edit.png" alt="image-20210130160108360"></p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-post-edit-2.png" alt="image-20210130160208436"></p><h3 id="文章分頁按鈕"><a href="#文章分頁按鈕" class="headerlink" title="文章分頁按鈕"></a>文章分頁按鈕</h3><p>可設置分頁的邏輯，也可以關閉分頁顯示</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># post_pagination (分頁)</span></span><br><span class="line"><span class="comment"># value: 1 || 2 || false</span></span><br><span class="line"><span class="comment"># 1: The &#x27;next post&#x27; will link to old post</span></span><br><span class="line"><span class="comment"># 2: The &#x27;next post&#x27; will link to new post</span></span><br><span class="line"><span class="comment"># false: disable pagination</span></span><br><span class="line"><span class="attr">post_pagination:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>參數</th><th>解釋</th></tr></thead><tbody><tr><td>post_pagination: false</td><td>關閉分頁按鈕</td></tr><tr><td>post_pagination: 1</td><td>下一篇顯示的是舊文章</td></tr><tr><td>post_pagination: 2</td><td>下一篇顯示的是新文章</td></tr></tbody></table></div><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-post-pagination.png" alt="image-20210130161545100"></p><h2 id="頭像"><a href="#頭像" class="headerlink" title="頭像"></a>頭像</h2><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="attr">img:</span> <span class="string">/img/avatar.png</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">true</span> <span class="comment"># 頭像會一直轉圈</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-avatar.png" alt=""></p><h2 id="圖片描述"><a href="#圖片描述" class="headerlink" title="圖片描述"></a>圖片描述</h2><p>可開啟圖片Figcaption描述文字顯示</p><p>優先顯示圖片的 title 屬性，然後是 alt 屬性</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">photofigcaption:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-photo-figcaption.png" alt=""></p><h2 id="複製相關配置"><a href="#複製相關配置" class="headerlink" title="複製相關配置"></a>複製相關配置</h2><p>可配置網站是否可以複製、複製的內容是否添加版權信息</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># copy settings</span></span><br><span class="line"><span class="section"># copyright: Add the copyright information after copied content (複製的內容後面加上版權信息)</span></span><br><span class="line">copy:</span><br><span class="line">  enable: true</span><br><span class="line">  copyright:</span><br><span class="line"><span class="code">    enable: true</span></span><br><span class="line"><span class="code">    limit_count: 50</span></span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>配置</th><th>解釋</th></tr></thead><tbody><tr><td>enable</td><td>是否開啟網站複製權限</td></tr><tr><td>copyright</td><td>複製的內容後面加上版權信息</td></tr><tr><td>enable</td><td>是否開啟複製版權信息添加</td></tr><tr><td>limit_count</td><td>字數限制，當複製文字大於這個字數限制時，將在複製的內容後面加上版權信息</td></tr></tbody></table></div><blockquote><p>添加版權信息後</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Lorem ipsum dolor sit amet, test link consectetur adipiscing elit. Strong text pellentesque ligula commodo viverra vehicula. Italic text at ullamcorper enim. Morbi a euismod nibh. Underline text non elit nisl. Deleted text tristique, sem id condimentum tempus, metus lectus venenatis mauris, sit amet semper lorem felis a eros. Fusce egestas nibh at sagittis auctor. Sed ultricies ac arcu quis molestie. Donec dapibus nunc in nibh egestas, vitae volutpat sem iaculis. Curabitur sem tellus, elementum nec quam id, fermentum laoreet mi. Ut mollis ullamcorper turpis, vitae facilisis velit ultricies sit amet. Etiam laoreet dui odio, id tempus justo tincidunt id. Phasellus scelerisque nunc sed nunc ultricies accumsan.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">作者: Jerry</span><br><span class="line">連結: http://localhost:4000/posts/bd3c650b/#Paragraph</span><br><span class="line">來源: Butterfly</span><br><span class="line">著作權歸作者所有。商業轉載請聯絡作者獲得授權，非商業轉載請註明出處。</span><br></pre></td></tr></table></figure><h2 id="Footer-設置"><a href="#Footer-設置" class="headerlink" title="Footer 設置"></a>Footer 設置</h2><h3 id="博客年份"><a href="#博客年份" class="headerlink" title="博客年份"></a>博客年份</h3><p><code>since</code>是一個來展示你站點起始時間的選項。它位於頁面的最底部。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">owner:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">since:</span> <span class="number">2018</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-since.png" alt=""></p><h3 id="頁腳自定義文本"><a href="#頁腳自定義文本" class="headerlink" title="頁腳自定義文本"></a>頁腳自定義文本</h3><p><code>custom_text</code>是一個給你用來在頁腳自定義文本的選項。通常你可以在這裏寫聲明文本等。支持 HTML。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_text:</span> <span class="string">Hi,</span> <span class="string">welcome</span> <span class="string">to</span> <span class="string">my</span> <span class="string">&lt;a</span> <span class="string">href=&quot;https://butterfly.js.org/&quot;&gt;blog&lt;/a&gt;!</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-footer-text.png" alt=""></p><p>對於部分人需要寫 ICP 的，也可以寫在 <code>custom_text</code>裏</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_text:</span> <span class="string">&lt;a</span> <span class="string">href=&quot;icp鏈接&quot;&gt;&lt;img</span> <span class="string">class=&quot;icp-icon&quot;</span> <span class="string">src=&quot;icp圖片&quot;&gt;&lt;span&gt;備案號：xxxxxx&lt;/span&gt;&lt;/a&gt;</span></span><br></pre></td></tr></table></figure><h2 id="右下角按鈕"><a href="#右下角按鈕" class="headerlink" title="右下角按鈕"></a>右下角按鈕</h2><h3 id="簡繁轉換"><a href="#簡繁轉換" class="headerlink" title="簡繁轉換"></a>簡繁轉換</h3><p>簡體繁體互換</p><p>右下角會有簡繁轉換按鈕。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">translate:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 默認按鈕顯示文字(網站是簡體，應設置為&#x27;default: 繁&#x27;)</span></span><br><span class="line">  <span class="attr">default:</span> <span class="string">簡</span></span><br><span class="line">  <span class="comment">#網站默認語言，1: 繁體中文, 2: 簡體中文</span></span><br><span class="line">  <span class="attr">defaultEncoding:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment">#延遲時間,若不在前, 要設定延遲翻譯時間, 如100表示100ms,默認為0</span></span><br><span class="line">  <span class="attr">translateDelay:</span> <span class="number">0</span></span><br><span class="line">  <span class="comment">#當文字是簡體時，按鈕顯示的文字</span></span><br><span class="line">  <span class="attr">msgToTraditionalChinese:</span> <span class="string">&quot;繁&quot;</span></span><br><span class="line">  <span class="comment">#當文字是繁體時，按鈕顯示的文字</span></span><br><span class="line">  <span class="attr">msgToSimplifiedChinese:</span> <span class="string">&quot;簡&quot;</span></span><br></pre></td></tr></table></figure><blockquote><p>簡體</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-simp.png" alt=""></p><blockquote><p>繁體</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-tranditional.png" alt=""></p><h3 id="夜間模式"><a href="#夜間模式" class="headerlink" title="夜間模式"></a>夜間模式</h3><p>右下角會有夜間模式按鈕</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dark mode</span></span><br><span class="line"><span class="attr">darkmode:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># dark mode和 light mode切換按鈕</span></span><br><span class="line">  <span class="attr">button:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">autoChangeMode:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-dark-mode-1.png" alt="image-20201230201029381"></p><div class="note info flat"><p>V2.0.0 開始增加一個選項，可開啟自動切換light mode 和 dark mode</p><p>autoChangeMode: 1  跟隨系統而變化，不支持的瀏覽器/系統將按照時間晚上6點到早上6點之間切換為 dark mode</p><p>autoChangeMode: 2  只按照時間 晚上6點到早上6點之間切換為 dark mode,其餘時間為light mode</p><p>autoChangeMode: false 取消自動切換</p></div><h3 id="閲讀模式"><a href="#閲讀模式" class="headerlink" title="閲讀模式"></a>閲讀模式</h3><p>閲讀模式下會去掉除文章外的內容，避免幹擾閲讀。</p><p>只會出現在文章頁面，右下角會有閲讀模式按鈕。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">readmode:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-read-mode.png" alt=""></p><h3 id="按鈕排序"><a href="#按鈕排序" class="headerlink" title="按鈕排序"></a>按鈕排序</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Don&#x27;t modify the following settings unless you know how they work (非必要請不要修改 )</span></span><br><span class="line"><span class="comment"># Choose: readmode,translate,darkmode,hideAside,toc,chat,comment</span></span><br><span class="line"><span class="comment"># Don&#x27;t repeat 不要重複</span></span><br><span class="line"><span class="attr">rightside_item_order:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">hide:</span> <span class="comment"># readmode,translate,darkmode,hideAside</span></span><br><span class="line">  <span class="attr">show:</span> <span class="comment"># toc,chat,comment</span></span><br></pre></td></tr></table></figure><p>注意： 不要重複</p><h2 id="側邊欄設置"><a href="#側邊欄設置" class="headerlink" title="側邊欄設置"></a>側邊欄設置</h2><h3 id="側邊排版"><a href="#側邊排版" class="headerlink" title="側邊排版"></a>側邊排版</h3><p>可自行決定哪個項目需要顯示，可決定位置，也可以設置不顯示側邊欄。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">aside:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hide:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">button:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">true</span> <span class="comment"># 手機頁面（ 顯示寬度 &lt; 768px ）是否顯示aside內容</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">right</span> <span class="comment"># left or right</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="attr">archive:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">tag:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">category:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">card_author:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">description:</span></span><br><span class="line">    <span class="attr">button:</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">Github</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://github.com/jerryc127/hexo-theme-butterfly</span></span><br><span class="line">  <span class="attr">card_announcement:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">content:</span> <span class="string">This</span> <span class="string">is</span> <span class="string">my</span> <span class="string">Blog</span></span><br><span class="line">  <span class="attr">card_recent_post:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">5</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">sort:</span> <span class="string">date</span> <span class="comment"># date or updated</span></span><br><span class="line">  <span class="attr">card_categories:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">8</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">expand:</span> <span class="string">none</span> <span class="comment"># none/true/false</span></span><br><span class="line">  <span class="attr">card_tags:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">40</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">color:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">card_archives:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">monthly</span> <span class="comment"># yearly or monthly</span></span><br><span class="line">    <span class="attr">format:</span> <span class="string">MMMM</span> <span class="string">YYYY</span> <span class="comment"># eg: YYYY年MM月</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">-1</span> <span class="comment"># Sort of order. 1, asc for ascending; -1, desc for descending</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">8</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">  <span class="attr">card_webinfo:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">post_count:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">last_push_date:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><blockquote><p>position: left</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-aside-left.png" alt=""></p><blockquote><p>position: right</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-aside-right.png" alt=""></p><blockquote><p>card_tags color: false</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/20200426182730.png" alt=""></p><blockquote><p>card_tags color: true</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/20200426183025.png" alt=""></p><blockquote><p>aside button</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-aside-button.gif" alt=""></p><h3 id="訪問人數-busuanzi-UV-和-PV"><a href="#訪問人數-busuanzi-UV-和-PV" class="headerlink" title="訪問人數 busuanzi (UV 和 PV)"></a>訪問人數 busuanzi (UV 和 PV)</h3><p>訪問 busuanzi 的<a href="http://busuanzi.ibruce.info/">官方網站</a>查看更多的介紹。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">busuanzi:</span></span><br><span class="line">  <span class="attr">site_uv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page_pv:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-busuanzi-site-pv.png" alt=""></p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-pv.png" alt=""></p><h3 id="運行時間"><a href="#運行時間" class="headerlink" title="運行時間"></a>運行時間</h3><p>網頁已運行時間</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">runtimeshow:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">publish_date:</span> <span class="number">6</span><span class="string">/7/2018</span> <span class="number">00</span><span class="string">:00:00</span>  </span><br><span class="line">  <span class="comment">##網頁開通時間</span></span><br><span class="line">  <span class="comment">#格式: 月/日/年 時間</span></span><br><span class="line">  <span class="comment">#也可以寫成 年/月/日 時間</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-runtime.png" alt=""></p><h3 id="最新評論"><a href="#最新評論" class="headerlink" title="最新評論"></a>最新評論</h3><blockquote><p>3.1.0 起支持</p></blockquote><div class="note primary flat"><p>最新評論只會在刷新時才會去讀取，並不會實時變化</p><p>由於 API 有 訪問次數限制，為了避免調用太多，主題默認存取期限為 10 分鐘。也就是説，調用後資料會存在 <em>localStorage</em> 裏，10分鐘內刷新網站只會去 <em>localStorage</em> 讀取資料。 10 分鐘期限一過，刷新頁面時才會去調取 API 讀取新的數據。（ 3.6.0 新增了 <code>storage</code> 配置，可自行配置緩存時間）</p></div><p>在側邊欄顯示最新評論板塊</p><p>修改 <code>主題配置文件</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># <span class="title class_">Aside</span> widget - <span class="title class_">Newest</span> <span class="title class_">Comments</span></span><br><span class="line"><span class="attr">newest_comments</span>:</span><br><span class="line">  <span class="attr">enable</span>: <span class="literal">true</span></span><br><span class="line">  <span class="attr">sort_order</span>: # <span class="title class_">Don</span><span class="string">&#x27;t modify the setting unless you know how it works</span></span><br><span class="line"><span class="string">  limit: 6</span></span><br><span class="line"><span class="string">  storage: 10 # unit: mins, save data to localStorage</span></span><br><span class="line"><span class="string">  avatar: true</span></span><br></pre></td></tr></table></figure><p>部分配置解釋：</p><div class="table-container"><table><thead><tr><th>配置</th><th>解釋</th></tr></thead><tbody><tr><td>limit</td><td>顯示的數量</td></tr><tr><td>storage</td><td>設置緩存時間，單位 分鐘</td></tr><tr><td>avatar</td><td>是否顯示頭像</td></tr></tbody></table></div><blockquote><p>Demo</p></blockquote><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-newest-comments.png" alt="image-20200830223037320"></p><h3 id="自定義添加欄目"><a href="#自定義添加欄目" class="headerlink" title="自定義添加欄目"></a>自定義添加欄目</h3><a class="btn-beautify block green" href="/posts/ea33ab97/"   title="點擊前往"><i class="fas fa-lightbulb"></i><span>點擊前往</span></a><h2 id="標籤外掛（Tag-Plugins）"><a href="#標籤外掛（Tag-Plugins）" class="headerlink" title="標籤外掛（Tag Plugins）"></a>標籤外掛（Tag Plugins）</h2><div class="note info flat"><p>標籤外掛是Hexo獨有的功能，並不是標準的Markdown格式。</p><p>以下的寫法，只適用於Butterfly主題，用在其它主題上不會有效果，甚至可能會報錯。使用前請留意</p></div><div class="note warning flat"><p>標籤外掛雖然能為主題帶來一些額外的功能和UI方面的強化，但是，標籤外掛也有明顯的限制，使用時請留意。</p></div><h3 id="Note-Bootstrap-Callout"><a href="#Note-Bootstrap-Callout" class="headerlink" title="Note (Bootstrap Callout)"></a>Note (Bootstrap Callout)</h3><div class="tabs" id="note"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#note-1">通用設置</button></li><li class="tab"><button type="button" data-href="#note-2">用法 1</button></li><li class="tab"><button type="button" data-href="#note-3">用法 2（自定義 icon）</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="note-1"><p>移植於next主題，並進行修改。</p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">note:</span></span><br><span class="line">  <span class="comment"># Note tag style values:</span></span><br><span class="line">  <span class="comment">#  - simple    bs-callout old alert style. Default.</span></span><br><span class="line">  <span class="comment">#  - modern    bs-callout new (v2-v3) alert style.</span></span><br><span class="line">  <span class="comment">#  - flat      flat callout style with background, like on Mozilla or StackOverflow.</span></span><br><span class="line">  <span class="comment">#  - disabled  disable all CSS styles import of note tag.</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">simple</span></span><br><span class="line">  <span class="attr">icons:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">border_radius:</span> <span class="number">3</span></span><br><span class="line">  <span class="comment"># Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span></span><br><span class="line">  <span class="comment"># Offset also applied to label tag variables. This option can work with disabled note tag.</span></span><br><span class="line">  <span class="attr">light_bg_offset:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><p><code>icons</code>和<code>light_bg_offset</code>只對<em>方法一</em>生效</p><p>Note 標籤外掛有兩種用法</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="note-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note [class] [no-icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>名稱</th><th>用法</th></tr></thead><tbody><tr><td>class</td><td>【可選】標識，不同的標識有不同的配色<br>（ default / primary / success / info / warning / danger ）</td></tr><tr><td>no-icon</td><td>【可選】不顯示 icon</td></tr><tr><td>style</td><td>【可選】可以覆蓋配置中的 style <br>（simple/modern/flat/disabled）</td></tr></tbody></table></div><blockquote><p>simple</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note simple %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default simple %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary simple %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success simple %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info simple %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning simple %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger simple %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note simple"><p>默認 提示塊標籤</p></div><div class="note default simple"><p>default 提示塊標籤</p></div><div class="note primary simple"><p>primary 提示塊標籤</p></div><div class="note success simple"><p>success 提示塊標籤</p></div><div class="note info simple"><p>info 提示塊標籤</p></div><div class="note warning simple"><p>warning 提示塊標籤</p></div><div class="note danger simple"><p>danger 提示塊標籤</p></div><blockquote><p>modern</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note modern %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default modern %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary modern %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success modern %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info modern %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning modern %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger modern %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note modern"><p>默認 提示塊標籤</p></div><div class="note default modern"><p>default 提示塊標籤</p></div><div class="note primary modern"><p>primary 提示塊標籤</p></div><div class="note success modern"><p>success 提示塊標籤</p></div><div class="note info modern"><p>info 提示塊標籤</p></div><div class="note warning modern"><p>warning 提示塊標籤</p></div><div class="note danger modern"><p>danger 提示塊標籤</p></div><blockquote><p>flat</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note flat %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default flat %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary flat %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success flat %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info flat %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning flat %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger flat %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note flat"><p>默認 提示塊標籤</p></div><div class="note default flat"><p>default 提示塊標籤</p></div><div class="note primary flat"><p>primary 提示塊標籤</p></div><div class="note success flat"><p>success 提示塊標籤</p></div><div class="note info flat"><p>info 提示塊標籤</p></div><div class="note warning flat"><p>warning 提示塊標籤</p></div><div class="note danger flat"><p>danger 提示塊標籤</p></div><blockquote><p>disabled</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note disabled %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default disabled %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary disabled %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success disabled %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info disabled %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning disabled %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger disabled %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note disabled"><p>默認 提示塊標籤</p></div><div class="note default disabled"><p>default 提示塊標籤</p></div><div class="note primary disabled"><p>primary 提示塊標籤</p></div><div class="note success disabled"><p>success 提示塊標籤</p></div><div class="note info disabled"><p>info 提示塊標籤</p></div><div class="note warning disabled"><p>warning 提示塊標籤</p></div><div class="note danger disabled"><p>danger 提示塊標籤</p></div><blockquote><p>no-icon</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default no-icon %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary no-icon %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success no-icon %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info no-icon %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning no-icon %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger no-icon %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note no-icon flat"><p>默認 提示塊標籤</p></div><div class="note default no-icon flat"><p>default 提示塊標籤</p></div><div class="note primary no-icon flat"><p>primary 提示塊標籤</p></div><div class="note success no-icon flat"><p>success 提示塊標籤</p></div><div class="note info no-icon flat"><p>info 提示塊標籤</p></div><div class="note warning no-icon flat"><p>warning 提示塊標籤</p></div><div class="note danger no-icon flat"><p>danger 提示塊標籤</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="note-3"><blockquote><p>3.2.0 以上版本支</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note [color] [icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>名稱</th><th>用法</th></tr></thead><tbody><tr><td>color</td><td>【可選】顔色 <br>(default / blue / pink / red / purple / orange / green)</td></tr><tr><td>icon</td><td>【可選】可配置自定義 icon (只支持 fontawesome 圖標, 也可以配置 no-icon )</td></tr><tr><td>style</td><td>【可選】可以覆蓋配置中的 style<br/>（simple/modern/flat/disabled）</td></tr></tbody></table></div><blockquote><p>simple</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; simple %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; simple %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; simple %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; simple%&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; simple %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; simple %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; simple %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding simple"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note blue icon-padding simple"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了….</p></div><div class="note pink icon-padding simple"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p></div><div class="note red icon-padding simple"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p></div><div class="note orange icon-padding simple"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note purple icon-padding simple"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p></div><div class="note green icon-padding simple"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p></div><blockquote><p>modern</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; modern %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; modern %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; modern%&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; modern %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; modern %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; modern %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding modern"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了….</p></div><div class="note pink icon-padding modern"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p></div><div class="note red icon-padding modern"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p></div><div class="note orange icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note purple icon-padding modern"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p></div><div class="note green icon-padding modern"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p></div><blockquote><p>flat</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; flat %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; flat %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; flat %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; flat%&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; flat %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; flat %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; flat %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding flat"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了….</p></div><div class="note pink icon-padding flat"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p></div><div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note purple icon-padding flat"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p></div><div class="note green icon-padding flat"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p></div><blockquote><p>disabled</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; disabled %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; disabled %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; disabled %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; disabled %&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; disabled %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; disabled %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; disabled %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding disabled"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note blue icon-padding disabled"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了….</p></div><div class="note pink icon-padding disabled"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p></div><div class="note red icon-padding disabled"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p></div><div class="note orange icon-padding disabled"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note purple icon-padding disabled"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p></div><div class="note green icon-padding disabled"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p></div><blockquote><p>no-icon</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue no-icon %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink no-icon %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red no-icon %&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange no-icon %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple no-icon %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green no-icon %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note no-icon flat"><p>你是刷 Visa 還是 UnionPay</p></div><div class="note blue no-icon flat"><p>2021年快到了….</p></div><div class="note pink no-icon flat"><p>小心開車 安全至上</p></div><div class="note red no-icon flat"><p>這是三片呢？還是四片？</p></div><div class="note orange no-icon flat"><p>你是刷 Visa 還是 UnionPay</p></div><div class="note purple no-icon flat"><p>剪刀石頭布</p></div><div class="note green no-icon flat"><p>前端最討厭的瀏覽器</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="Gallery相冊圖庫"><a href="#Gallery相冊圖庫" class="headerlink" title="Gallery相冊圖庫"></a>Gallery相冊圖庫</h3><blockquote><p>2.2.0以上提供</p></blockquote><p>一個圖庫集合。</p><p>寫法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;gallery-group-main&quot;&gt;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><ul><li>name：圖庫名字</li><li>description：圖庫描述</li><li>link：連接到對應相冊的地址</li><li>img-url：圖庫封面的地址</li></ul><p>例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;gallery-group-main&quot;&gt;</span><br><span class="line">&#123;% galleryGroup &#x27;壁紙&#x27; &#x27;收藏的一些壁紙&#x27; &#x27;/Gallery/wallpaper&#x27; https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png %&#125;</span><br><span class="line">&#123;% galleryGroup &#x27;漫威&#x27; &#x27;關於漫威的圖片&#x27; &#x27;/Gallery/marvel&#x27; https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg %&#125;</span><br><span class="line">&#123;% galleryGroup &#x27;OH MY GIRL&#x27; &#x27;關於OH MY GIRL的圖片&#x27; &#x27;/Gallery/ohmygirl&#x27; https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><div class="gallery-group-main">  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">壁紙</div>  <p>收藏的一些壁紙</p>  <a href='/Gallery/wallpaper'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">漫威</div>  <p>關於漫威的圖片</p>  <a href='/Gallery/marvel'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">OH MY GIRL</div>  <p>關於OH MY GIRL的圖片</p>  <a href='/Gallery/ohmygirl'></a>  </figcaption>  </figure>  </div><h3 id="Gallery相冊"><a href="#Gallery相冊" class="headerlink" title="Gallery相冊"></a>Gallery相冊</h3><blockquote><p>2.0.0以上提供</p></blockquote><p>區別於舊版的Gallery相冊,新的Gallery相冊會自動根據圖片長度進行排版，書寫也更加方便，與markdown格式一樣。可根據需要插入到相應的md。</p><p>寫法:</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">markdown 圖片格式</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><p>例如</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg</span>)</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg" alt=""></p>          </div><h3 id="tag-hide"><a href="#tag-hide" class="headerlink" title="tag-hide"></a>tag-hide</h3><div class="note warning flat"><p>2.2.0以上提供</p><p>請注意，tag-hide內的標簽外掛content內都不建議有h1 - h6 等標題。因為Toc會把隱藏內容標題也顯示出來，而且當滾動屏幕時，如果隱藏內容沒有顯示出來，會導致Toc的滾動出現異常。</p></div><p>如果你想把一些文字、內容隱藏起來，並提供按鈕讓用户點擊顯示。可以使用這個標籤外掛。</p><div class="tabs" id="tag-hide"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#tag-hide-1">Inline</button></li><li class="tab"><button type="button" data-href="#tag-hide-2">Block</button></li><li class="tab"><button type="button" data-href="#tag-hide-3">Toggle</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="tag-hide-1"><p><code>inline</code> 在文本里面添加按鈕隱藏內容，只限文字</p><p>( content不能包含英文逗號，可用<code>&amp;sbquo;</code>)</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideInline content,display,bg,color %&#125;</span><br></pre></td></tr></table></figure><ul><li><p>content: 文本內容</p></li><li><p>display: 按鈕顯示的文字(可選)</p></li><li><p>bg: 按鈕的背景顏色(可選)</p></li><li><p>color: 按鈕文字的顏色(可選)</p></li></ul><blockquote><p>Demo</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">哪個英文字母最酷？ &#123;% hideInline 因為西裝褲(C裝酷),查看答案,#FF7242,#fff %&#125;</span><br><span class="line"></span><br><span class="line">門裏站着一個人? &#123;% hideInline 閃 %&#125;</span><br></pre></td></tr></table></figure><p>哪個英文字母最酷？ <span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案  </button><span class="hide-content">因為西裝褲(C裝酷)</span>&lt;/span&gt;</p><p>門裏站着一個人? <span class="hide-inline"><button type="button" class="hide-button" style="">Click  </button><span class="hide-content">閃</span>&lt;/span&gt;</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="tag-hide-2"><p><code>block</code>獨立的block隱藏內容，可以隱藏很多內容，包括圖片，代碼塊等等</p><p>( display 不能包含英文逗號，可用<code>&amp;sbquo;</code>)</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><ul><li>content: 文本內容</li><li>display: 按鈕顯示的文字(可選)</li><li>bg: 按鈕的背景顏色(可選)</li><li>color: 按鈕文字的顏色(可選)</li></ul><blockquote><p>Demo</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">查看答案</span><br><span class="line">&#123;% hideBlock 查看答案 %&#125;</span><br><span class="line">傻子，怎麼可能有答案</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><p>查看答案</p><div class="hide-block"><button type="button" class="hide-button" style="">查看答案    </button><div class="hide-content"><p>傻子，怎麼可能有答案</p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="tag-hide-3"><blockquote><p>2.3.0以上支持</p></blockquote><p>如果你需要展示的內容太多，可以把它隱藏在收縮框裏，需要時再把它展開。</p><p>( display 不能包含英文逗號，可用<code>&amp;sbquo;</code>)</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideToggle display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideToggle %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Demo</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideToggle Butterfly安裝方法 %&#125;</span><br><span class="line">在你的博客根目錄裏</span><br><span class="line"></span><br><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br><span class="line"></span><br><span class="line">如果想要安裝比較新的dev分支，可以</span><br><span class="line"></span><br><span class="line">git clone -b dev https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br><span class="line"></span><br><span class="line">&#123;% endhideToggle %&#125;</span><br></pre></td></tr></table></figure><details class="toggle" ><summary class="toggle-button" style="">Butterfly安裝方法</summary><div class="toggle-content"><p>在你的博客根目錄裏</p><p>git clone -b master <a href="https://github.com/jerryc127/hexo-theme-butterfly.git">https://github.com/jerryc127/hexo-theme-butterfly.git</a> themes/Butterfly</p><p>如果想要安裝比較新的dev分支，可以</p><p>git clone -b dev <a href="https://github.com/jerryc127/hexo-theme-butterfly.git">https://github.com/jerryc127/hexo-theme-butterfly.git</a> themes/Butterfly</p></div></details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="mermaid"><a href="#mermaid" class="headerlink" title="mermaid"></a>mermaid</h3><p>使用mermaid標籤可以繪製Flowchart（流程圖）、Sequence diagram（時序圖 ）、Class Diagram（類別圖）、State Diagram（狀態圖）、Gantt（甘特圖）和Pie Chart（圓形圖），具體可以查看<a href="https://mermaid-js.github.io/mermaid/#/">mermaid文檔</a></p><p>修改 <code>主題配置文件</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mermaid</span></span><br><span class="line"><span class="comment"># see https://github.com/mermaid-js/mermaid</span></span><br><span class="line"><span class="attr">mermaid:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># built-in themes: default/forest/dark/neutral</span></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">default</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">dark</span></span><br></pre></td></tr></table></figure><p>寫法：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% mermaid %&#125;</span><br><span class="line">內容</span><br><span class="line">&#123;% endmermaid %&#125;</span><br></pre></td></tr></table></figure><p>例如：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;% mermaid %&#125;</span><br><span class="line">pie</span><br><span class="line"><span class="code">    title Key elements in Product X</span></span><br><span class="line"><span class="code">    &quot;Calcium&quot; : 42.96</span></span><br><span class="line"><span class="code">    &quot;Potassium&quot; : 50.05</span></span><br><span class="line"><span class="code">    &quot;Magnesium&quot; : 10.01</span></span><br><span class="line"><span class="code">    &quot;Iron&quot; :  5</span></span><br><span class="line"><span class="code">&#123;% endmermaid %&#125;</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-mermaid.png" alt=""></p><h3 id="Tabs"><a href="#Tabs" class="headerlink" title="Tabs"></a>Tabs</h3><p>移植於next主題</p><p>使用方法</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs Unique name, [index] %&#125;</span><br><span class="line">&lt;!-- tab [Tab caption] [@icon] --&gt;</span><br><span class="line">Any content (support inline tags too).</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br><span class="line"></span><br><span class="line">Unique name   : Unique name of tabs block tag without comma.</span><br><span class="line"><span class="code">                Will be used in #id&#x27;s as prefix for each tab with their index numbers.</span></span><br><span class="line"><span class="code">                If there are whitespaces in name, for generate #id all whitespaces will replaced by dashes.</span></span><br><span class="line"><span class="code">                Only for current url of post/page must be unique!</span></span><br><span class="line"><span class="code">[index]       : Index number of active tab.</span></span><br><span class="line"><span class="code">                If not specified, first tab (1) will be selected.</span></span><br><span class="line"><span class="code">                If index is -1, no tab will be selected. It&#x27;s will be something like spoiler.</span></span><br><span class="line"><span class="code">                Optional parameter.</span></span><br><span class="line"><span class="code">[Tab caption] : Caption of current tab.</span></span><br><span class="line"><span class="code">                If not caption specified, unique name with tab index suffix will be used as caption of tab.</span></span><br><span class="line"><span class="code">                If not caption specified, but specified icon, caption will empty.</span></span><br><span class="line"><span class="code">                Optional parameter.</span></span><br><span class="line"><span class="code">[@icon]       : FontAwesome icon name (full-name, look like &#x27;fas fa-font&#x27;)</span></span><br><span class="line"><span class="code">                Can be specified with or without space; e.g. &#x27;Tab caption @icon&#x27; similar to &#x27;Tab caption@icon&#x27;.</span></span><br><span class="line"><span class="code">                Optional parameter.</span></span><br></pre></td></tr></table></figure><blockquote><p>Demo 1 - 預設選擇第一個【默認】</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">test1 1</button></li><li class="tab"><button type="button" data-href="#test1-2">test1 2</button></li><li class="tab"><button type="button" data-href="#test1-3">test1 3</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><blockquote><p>Demo 2 - 預設選擇tabs</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test2, 3 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><div class="tabs" id="test2"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test2-1">test2 1</button></li><li class="tab"><button type="button" data-href="#test2-2">test2 2</button></li><li class="tab active"><button type="button" data-href="#test2-3">test2 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test2-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test2-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content active" id="test2-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><blockquote><p>Demo 3 - 沒有預設值</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test3, -1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><div class="tabs" id="test3"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test3-1">test3 1</button></li><li class="tab"><button type="button" data-href="#test3-2">test3 2</button></li><li class="tab"><button type="button" data-href="#test3-3">test3 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test3-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test3-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test3-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><blockquote><p>Demo 4 - 自定義Tab名 + 只有icon + icon和Tab名</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test4 %&#125;</span><br><span class="line">&lt;!-- tab 第一個Tab --&gt;</span><br><span class="line"><span class="strong">**tab名字為第一個Tab**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab @fab fa-apple-pay --&gt;</span><br><span class="line"><span class="strong">**只有圖標 沒有Tab名字**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 炸彈@fas fa-bomb --&gt;</span><br><span class="line"><span class="strong">**名字+icon**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">第一個Tab</button></li><li class="tab"><button type="button" data-href="#test4-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button></li><li class="tab"><button type="button" data-href="#test4-3"><i class="fas fa-bomb"></i>炸彈</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p><strong>tab名字為第一個Tab</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><p><strong>只有圖標 沒有Tab名字</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-3"><p><strong>名字+icon</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="Button"><a href="#Button" class="headerlink" title="Button"></a>Button</h3><blockquote><p>3.0以上適用</p></blockquote><p>使用方法：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btn [url],[text],[icon],[color] [style] [layout] [position] [size] %&#125;</span><br><span class="line"></span><br><span class="line">[url]         : 鏈接</span><br><span class="line">[text]        : 按鈕文字</span><br><span class="line">[icon]        : [可選] 圖標</span><br><span class="line">[color]       : [可選] 按鈕背景顔色(默認style時）</span><br><span class="line"><span class="code">                      按鈕字體和邊框顔色(outline時)</span></span><br><span class="line"><span class="code">                      default/blue/pink/red/purple/orange/green</span></span><br><span class="line"><span class="code">[style]       : [可選] 按鈕樣式 默認實心</span></span><br><span class="line"><span class="code">                      outline/留空</span></span><br><span class="line"><span class="code">[layout]      : [可選] 按鈕佈局 默認為line</span></span><br><span class="line"><span class="code">                      block/留空</span></span><br><span class="line"><span class="code">[position]    : [可選] 按鈕位置 前提是設置了layout為block 默認為左邊</span></span><br><span class="line"><span class="code">                      center/right/留空</span></span><br><span class="line"><span class="code">[size]        : [可選] 按鈕大小</span></span><br><span class="line"><span class="code">                      larger/留空</span></span><br></pre></td></tr></table></figure><blockquote><p>Demo</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">This is my website, click the button &#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly %&#125;</span><br><span class="line">This is my website, click the button &#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right %&#125;</span><br><span class="line">This is my website, click the button &#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,,outline %&#125;</span><br><span class="line">This is my website, click the button &#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline %&#125;</span><br><span class="line">This is my website, click the button &#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,larger %&#125;</span><br></pre></td></tr></table></figure><p>This is my website, click the button <a class="btn-beautify " href="https://butterfly.js.org/"   title="Butterfly"><span>Butterfly</span></a><br>This is my website, click the button <a class="btn-beautify " href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><br>This is my website, click the button <a class="btn-beautify outline" href="https://butterfly.js.org/"   title="Butterfly"><span>Butterfly</span></a><br>This is my website, click the button <a class="btn-beautify outline" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><br>This is my website, click the button <a class="btn-beautify larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,block %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,block center larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,block right outline larger %&#125;</span><br></pre></td></tr></table></figure><a class="btn-beautify block" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify block center larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify block right outline larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><p><strong>more than one button in center</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,blue larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,pink larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,red larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,purple larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,orange larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,green larger %&#125;</span><br></pre></td></tr></table></figure><a class="btn-beautify larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify blue larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify pink larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify red larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify purple larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify orange larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify green larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn-center&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline blue larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline pink larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline red larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline purple larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline orange larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline green larger %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><div class="btn-center"><a class="btn-beautify outline larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify outline blue larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify outline pink larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify outline red larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify outline purple larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify outline orange larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify outline green larger" href="https://butterfly.js.org/"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a></div><h3 id="inlineImg"><a href="#inlineImg" class="headerlink" title="inlineImg"></a>inlineImg</h3><p>主題中的圖片都是默認以<code>塊級元素</code>顯示，如果你想以<code>內聯元素</code>顯示，可以使用這個標簽外掛。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% inlineImg [src] [height] %&#125;</span><br><span class="line"></span><br><span class="line">[src]      :    圖片鏈接</span><br><span class="line">[height]   ：   圖片高度限制【可選】</span><br></pre></td></tr></table></figure><blockquote><p>Demo</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">你看我長得漂亮不</span><br><span class="line"></span><br><span class="line">![](<span class="link">https://i.loli.net/2021/03/19/2P6ivUGsdaEXSFI.png</span>)</span><br><span class="line"></span><br><span class="line">我覺得很漂亮 &#123;% inlineImg https://i.loli.net/2021/03/19/5M4jUB3ynq7ePgw.png 150px %&#125;</span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN@m2/img/hexo-theme-butterfly-docs-inlineimg.png" alt="image-20210319001204045"></p><h3 id="label"><a href="#label" class="headerlink" title="label"></a>label</h3><blockquote><p>3.7.5 及以上版本適用</p></blockquote><p>高亮所需的文字</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% label text color %&#125;</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>參數</th><th>解釋</th></tr></thead><tbody><tr><td>text</td><td>文字</td></tr><tr><td>color</td><td>【可選】背景顏色，默認為 <code>default</code><br />default/blue/pink/red/purple/orange/green</td></tr></tbody></table></div><blockquote><p>Demo</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">臣亮言：&#123;% label 先帝 %&#125;創業未半，而&#123;% label 中道崩殂 blue %&#125;。今天下三分，&#123;% label 益州疲敝 pink %&#125;，此誠&#123;% label 危急存亡之秋 red %&#125;也！然侍衞之臣，不懈於內；&#123;% label 忠志之士 purple %&#125;，忘身於外者，蓋追先帝之殊遇，欲報之於陛下也。誠宜開張聖聽，以光先帝遺德，恢弘志士之氣；不宜妄自菲薄，引喻失義，以塞忠諫之路也。</span><br><span class="line">宮中、府中，俱為一體；陟罰臧否，不宜異同。若有&#123;% label 作奸 orange %&#125;、&#123;% label 犯科 green %&#125;，及為忠善者，宜付有司，論其刑賞，以昭陛下平明之治；不宜偏私，使內外異法也。</span><br></pre></td></tr></table></figure><p>臣亮言：<mark class="hl-label default">先帝</mark> 創業未半，而<mark class="hl-label blue">中道崩殂</mark> 。今天下三分，<mark class="hl-label pink">益州疲敝</mark> ，此誠<mark class="hl-label red">危急存亡之秋</mark> 也！然侍衞之臣，不懈於內；<mark class="hl-label purple">忠志之士</mark> ，忘身於外者，蓋追先帝之殊遇，欲報之於陛下也。誠宜開張聖聽，以光先帝遺德，恢弘志士之氣；不宜妄自菲薄，引喻失義，以塞忠諫之路也。</p><p>宮中、府中，俱為一體；陟罰臧否，不宜異同。若有<mark class="hl-label orange">作奸</mark> 、<mark class="hl-label green">犯科</mark> ，及為忠善者，宜付有司，論其刑賞，以昭陛下平明之治；不宜偏私，使內外異法也。</p><h3 id="timeline"><a href="#timeline" class="headerlink" title="timeline"></a>timeline</h3><blockquote><p>4.0.0 以上支持</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline title,color %&#125;</span><br><span class="line">&lt;!-- timeline title --&gt;</span><br><span class="line">xxxxx</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline title --&gt;</span><br><span class="line">xxxxx</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>參數</th><th>解釋</th></tr></thead><tbody><tr><td>title</td><td>標題/時間線</td></tr><tr><td>color</td><td>timeline 顏色<br />default(留空) / blue / pink / red / purple / orange / green</td></tr></tbody></table></div><blockquote><p>Demo</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline 2022 %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">這是測試頁面</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><div class="timeline"><p class='p h2'>2022</p><!-- timeline 01-02 -->這是測試頁面<!-- endtimeline --></div><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline 2022,blue %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">這是測試頁面</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><div class="timeline"><p class='p h2'>2022,blue</p><!-- timeline 01-02 -->這是測試頁面<!-- endtimeline --></div><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline 2022,pink %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">這是測試頁面</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><div class="timeline"><p class='p h2'>2022,pink</p><!-- timeline 01-02 -->這是測試頁面<!-- endtimeline --></div><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline 2022,red %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">這是測試頁面</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><div class="timeline"><p class='p h2'>2022,red</p><!-- timeline 01-02 -->這是測試頁面<!-- endtimeline --></div><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline 2022,purple %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">這是測試頁面</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><div class="timeline"><p class='p h2'>2022,purple</p><!-- timeline 01-02 -->這是測試頁面<!-- endtimeline --></div><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline 2022,orange %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">這是測試頁面</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><div class="timeline"><p class='p h2'>2022,orange</p><!-- timeline 01-02 -->這是測試頁面<!-- endtimeline --></div><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline 2022,green %&#125;</span><br><span class="line">&lt;!-- timeline 01-02 --&gt;</span><br><span class="line">這是測試頁面</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><div class="timeline"><p class='p h2'>2022,green</p><!-- timeline 01-02 -->這是測試頁面<!-- endtimeline --></div><h3 id="flink"><a href="#flink" class="headerlink" title="flink"></a>flink</h3><blockquote><p>4.1.0 支持</p></blockquote><p>可在任何界面插入類似友情鏈接列表效果</p><p>內容格式與友情鏈接界面一樣，支持 yml 格式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% flink %&#125;</span><br><span class="line">xxxxxx</span><br><span class="line">&#123;% endflink %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Demo</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;% flink %&#125;</span><br><span class="line"><span class="bullet">-</span> class<span class="emphasis">_name: 友情鏈接</span></span><br><span class="line"><span class="emphasis">  class_</span>desc: 那些人，那些事</span><br><span class="line">  link<span class="emphasis">_list:</span></span><br><span class="line"><span class="emphasis">    - name: JerryC</span></span><br><span class="line"><span class="emphasis">      link: https://jerryc.me/</span></span><br><span class="line"><span class="emphasis">      avatar: https://jerryc.me/img/avatar.png</span></span><br><span class="line"><span class="emphasis">      descr: 今日事,今日畢</span></span><br><span class="line"><span class="emphasis">    - name: Hexo</span></span><br><span class="line"><span class="emphasis">      link: https://hexo.io/zh-tw/</span></span><br><span class="line"><span class="emphasis">      avatar: https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg</span></span><br><span class="line"><span class="emphasis">      descr: 快速、簡單且強大的網誌框架</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">- class_</span>name: 網站</span><br><span class="line">  class<span class="emphasis">_desc: 值得推薦的網站</span></span><br><span class="line"><span class="emphasis">  link_</span>list:</span><br><span class="line"><span class="bullet">    -</span> name: Youtube</span><br><span class="line"><span class="code">      link: https://www.youtube.com/</span></span><br><span class="line"><span class="code">      avatar: https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png</span></span><br><span class="line"><span class="code">      descr: 視頻網站</span></span><br><span class="line"><span class="code">    - name: Weibo</span></span><br><span class="line"><span class="code">      link: https://www.weibo.com/</span></span><br><span class="line"><span class="code">      avatar: https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png</span></span><br><span class="line"><span class="code">      descr: 中國最大社交分享平台</span></span><br><span class="line"><span class="code">    - name: Twitter</span></span><br><span class="line"><span class="code">      link: https://twitter.com/</span></span><br><span class="line"><span class="code">      avatar: https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png</span></span><br><span class="line"><span class="code">      descr: 社交分享平台</span></span><br><span class="line"><span class="code">&#123;% endflink %&#125;</span></span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN@m2/img/hexo-theme-butterfly-docs-flink-demo.png" alt=""></p><a class="btn-beautify block red right larger" href="/posts/ceeb73f/"   title="⚔️ Butterfly-安裝文檔-四-主題配置-2"><i class="far fa-hand-point-right"></i><span>⚔️ Butterfly-安裝文檔-四-主題配置-2</span></a>]]></content>
      
      
      <categories>
          
          <category> Docs文檔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
            <tag> 主題 </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly 安裝文檔(二) 主題頁面</title>
      <link href="/posts/dc584b87/"/>
      <url>/posts/dc584b87/</url>
      
        <content type="html"><![CDATA[<div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>📖  本教程更新於 2022 年 08 月 18 日，教程的內容針對最新<strong>穩定版</strong>而更新（如果你是舊版，教程會有些出入，請留意）</p><p>🦋  Butterfly 已經更新到 <a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/4.4.0">4.4.0</a></p></div><div class="note green icon-padding flat"><i class="note-icon fas fa-rocket"></i><p> 📚  文檔目錄</p><p><a href="/posts/21cfbf15/" title="🚀 快速開始">🚀 快速開始</a> - <a href="/posts/dc584b87/" title="📑 主題頁面">📑 主題頁面</a> - <a href="/posts/4aa8abbe/" title="🛠 主題配置-1">🛠 主題配置-1</a> - <a href="/posts/ceeb73f/" title="⚔️ 主題配置-2">⚔️ 主題配置-2</a> - <a href="/posts/98d20436/" title="❓ 主題問答">❓ 主題問答</a> - <a href="/posts/4073eda/" title="⚡️ 進階教程">⚡️ 進階教程</a> - <a href="/posts/198a4240/" title="✨ 更新日誌">✨ 更新日誌</a> - <a href="/posts/6ad51b4/" title="🤞 打賞">🤞 打賞</a></p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-magic"></i><p>你可以通過右下角的 <strong>簡</strong> 按鈕切換為簡體顯示 </p></div><hr><h2 id="Front-matter"><a href="#Front-matter" class="headerlink" title="Front-matter"></a>Front-matter</h2><p><strong>Front-matter 是 markdown 文件最上方以 <code>---</code> 分隔的區域，用於指定個別檔案的變數。</strong></p><ul><li>Page Front-matter 用於<code>頁面</code>配置</li><li>Post Front-matter 用於<code>文章頁</code>配置</li></ul><div class="note info flat"><p>如果標注<code>可選</code>的參數，可根據自己需要添加，不用全部都寫在markdown裏</p></div><h3 id="Page-Front-matter"><a href="#Page-Front-matter" class="headerlink" title="Page Front-matter"></a>Page Front-matter</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title:</span><br><span class="line">date:</span><br><span class="line">updated:</span><br><span class="line">type:</span><br><span class="line">comments:</span><br><span class="line">description:</span><br><span class="line">keywords:</span><br><span class="line">top<span class="emphasis">_img:</span></span><br><span class="line"><span class="emphasis">mathjax:</span></span><br><span class="line"><span class="emphasis">katex:</span></span><br><span class="line"><span class="emphasis">aside:</span></span><br><span class="line"><span class="emphasis">aplayer:</span></span><br><span class="line"><span class="emphasis">highlight_</span>shrink:</span><br><span class="line">---</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>寫法</th><th>解釋</th></tr></thead><tbody><tr><td>title</td><td>【必需】頁面標題</td></tr><tr><td>date</td><td>【必需】頁面創建日期</td></tr><tr><td>type</td><td>【必需】標籤、分類和友情鏈接三個頁面需要配置</td></tr><tr><td>updated</td><td>【可選】頁面更新日期</td></tr><tr><td>description</td><td>【可選】頁面描述</td></tr><tr><td>keywords</td><td>【可選】頁面關鍵字</td></tr><tr><td>comments</td><td>【可選】顯示頁面評論模塊(默認 true)</td></tr><tr><td>top_img</td><td>【可選】頁面頂部圖片</td></tr><tr><td>mathjax</td><td>【可選】顯示mathjax(當設置mathjax的per_page: false時，才需要配置，默認 false)</td></tr><tr><td>katex</td><td>【可選】顯示katex(當設置katex的per_page: false時，才需要配置，默認 false)</td></tr><tr><td>aside</td><td>【可選】顯示側邊欄 (默認 true)</td></tr><tr><td>aplayer</td><td>【可選】在需要的頁面加載aplayer的js和css,請參考文章下面的<code>音樂</code> 配置</td></tr><tr><td>highlight_shrink</td><td>【可選】配置代碼框是否展開(true/false)(默認為設置中highlight_shrink的配置)</td></tr></tbody></table></div><h3 id="Post-Front-matter"><a href="#Post-Front-matter" class="headerlink" title="Post Front-matter"></a>Post Front-matter</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title:</span><br><span class="line">date:</span><br><span class="line">updated:</span><br><span class="line">tags:</span><br><span class="line">categories:</span><br><span class="line">keywords:</span><br><span class="line">description:</span><br><span class="line">top<span class="emphasis">_img:</span></span><br><span class="line"><span class="emphasis">comments:</span></span><br><span class="line"><span class="emphasis">cover:</span></span><br><span class="line"><span class="emphasis">toc:</span></span><br><span class="line"><span class="emphasis">toc_</span>number:</span><br><span class="line">toc<span class="emphasis">_style_</span>simple:</span><br><span class="line">copyright:</span><br><span class="line">copyright<span class="emphasis">_author:</span></span><br><span class="line"><span class="emphasis">copyright_</span>author<span class="emphasis">_href:</span></span><br><span class="line"><span class="emphasis">copyright_</span>url:</span><br><span class="line">copyright<span class="emphasis">_info:</span></span><br><span class="line"><span class="emphasis">mathjax:</span></span><br><span class="line"><span class="emphasis">katex:</span></span><br><span class="line"><span class="emphasis">aplayer:</span></span><br><span class="line"><span class="emphasis">highlight_</span>shrink:</span><br><span class="line"><span class="section">aside:</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th style="text-align:left">寫法</th><th>解釋</th></tr></thead><tbody><tr><td style="text-align:left">title</td><td>【必需】文章標題</td></tr><tr><td style="text-align:left">date</td><td>【必需】文章創建日期</td></tr><tr><td style="text-align:left">updated</td><td>【可選】文章更新日期</td></tr><tr><td style="text-align:left">tags</td><td>【可選】文章標籤</td></tr><tr><td style="text-align:left">categories</td><td>【可選】文章分類</td></tr><tr><td style="text-align:left">keywords</td><td>【可選】文章關鍵字</td></tr><tr><td style="text-align:left">description</td><td>【可選】文章描述</td></tr><tr><td style="text-align:left">top_img</td><td>【可選】文章頂部圖片</td></tr><tr><td style="text-align:left">cover</td><td>【可選】文章縮略圖(如果沒有設置top_img,文章頁頂部將顯示縮略圖，可設為false/圖片地址/留空)</td></tr><tr><td style="text-align:left">comments</td><td>【可選】顯示文章評論模塊(默認 true)</td></tr><tr><td style="text-align:left">toc</td><td>【可選】顯示文章TOC(默認為設置中toc的enable配置)</td></tr><tr><td style="text-align:left">toc_number</td><td>【可選】顯示toc_number(默認為設置中toc的number配置)</td></tr><tr><td style="text-align:left">toc_style_simple</td><td>【可選】顯示 toc 簡潔模式</td></tr><tr><td style="text-align:left">copyright</td><td>【可選】顯示文章版權模塊(默認為設置中post_copyright的enable配置)</td></tr><tr><td style="text-align:left">copyright_author</td><td>【可選】文章版權模塊的<code>文章作者</code></td></tr><tr><td style="text-align:left">copyright_author_href</td><td>【可選】文章版權模塊的<code>文章作者</code>鏈接</td></tr><tr><td style="text-align:left">copyright_url</td><td>【可選】文章版權模塊的<code>文章連結</code>鏈接</td></tr><tr><td style="text-align:left">copyright_info</td><td>【可選】文章版權模塊的<code>版權聲明</code>文字</td></tr><tr><td style="text-align:left">mathjax</td><td>【可選】顯示mathjax(當設置mathjax的per_page: false時，才需要配置，默認 false)</td></tr><tr><td style="text-align:left">katex</td><td>【可選】顯示katex(當設置katex的per_page: false時，才需要配置，默認 false)</td></tr><tr><td style="text-align:left">aplayer</td><td>【可選】在需要的頁面加載aplayer的js和css,請參考文章下面的<code>音樂</code> 配置</td></tr><tr><td style="text-align:left">highlight_shrink</td><td>【可選】配置代碼框是否展開(true/false)(默認為設置中highlight_shrink的配置)</td></tr><tr><td style="text-align:left">aside</td><td>【可選】顯示側邊欄 (默認 true)</td></tr></tbody></table></div><h2 id="標籤頁"><a href="#標籤頁" class="headerlink" title="標籤頁"></a>標籤頁</h2><ol><li><p>前往你的 Hexo 博客的根目錄</p></li><li><p>輸入<code>hexo new page tags</code></p></li><li><p>你會找到<code>source/tags/index.md</code>這個文件</p></li><li><p>修改這個文件：</p><p><strong>記得添加 <code>type: &quot;tags&quot;</code></strong></p></li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 標籤</span><br><span class="line">date: 2018-01-05 00:00:00</span><br><span class="line"><span class="section">type: &quot;tags&quot;</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><h2 id="分類頁"><a href="#分類頁" class="headerlink" title="分類頁"></a>分類頁</h2><ol><li><p>前往你的 Hexo 博客的根目錄</p></li><li><p>輸入<code>hexo new page categories</code></p></li><li><p>你會找到<code>source/categories/index.md</code>這個文件</p></li><li><p>修改這個文件：</p><p><strong>記得添加 <code>type: &quot;categories&quot;</code></strong></p></li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 分類</span><br><span class="line">date: 2018-01-05 00:00:00</span><br><span class="line"><span class="section">type: &quot;categories&quot;</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><h2 id="友情鏈接"><a href="#友情鏈接" class="headerlink" title="友情鏈接"></a>友情鏈接</h2><p>為你的博客創建一個友情鏈接！</p><h3 id="創建友情鏈接頁面"><a href="#創建友情鏈接頁面" class="headerlink" title="創建友情鏈接頁面"></a>創建友情鏈接頁面</h3><ol><li><p>前往你的 Hexo 博客的根目錄</p></li><li><p>輸入 <code>hexo new page link</code></p></li><li><p>你會找到<code>source/link/index.md</code>這個文件</p></li><li><p>修改這個文件：</p><p>記得添加 <code>type: &quot;link&quot;</code></p></li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 友情鏈接</span><br><span class="line">date: 2018-06-07 22:17:49</span><br><span class="line"><span class="section">type: &quot;link&quot;</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><h3 id="友情鏈接添加"><a href="#友情鏈接添加" class="headerlink" title="友情鏈接添加"></a>友情鏈接添加</h3><div class="tabs" id="flink-add"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#flink-add-1">本地生成</button></li><li class="tab"><button type="button" data-href="#flink-add-2">遠程拉取</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="flink-add-1"><p>在Hexo博客目錄中的<code>source/_data</code>（如果沒有 _data 文件夾，請自行創建），創建一個文件<code>link.yml</code></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">友情鏈接</span></span><br><span class="line">  <span class="attr">class_desc:</span> <span class="string">那些人，那些事</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Hexo</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://hexo.io/zh-tw/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">快速、簡單且強大的網誌框架</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">網站</span></span><br><span class="line">  <span class="attr">class_desc:</span> <span class="string">值得推薦的網站</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Youtube</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://www.youtube.com/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">視頻網站</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Weibo</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://www.weibo.com/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">中國最大社交分享平台</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Twitter</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://twitter.com/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">社交分享平台</span></span><br></pre></td></tr></table></figure><p><code>class_name</code>  和 <code>class_desc</code> 支持 html 格式書寫，如不需要，也可以留空。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="flink-add-2"><p>從 <code>4.0.0</code> 開始，支持從遠程加載友情鏈接，遠程拉取只支持 <code>json</code>。</p><p>注意： 選擇遠程加載後，本地生成的方法會無效。</p><p>在  <code>source/link/index.md</code> 這個文件的 front-matter 添加遠程鏈接</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flink<span class="emphasis">_url: xxxxx</span></span><br></pre></td></tr></table></figure><p>Json 的格式</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;class_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;友情鏈接&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;class_desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;那些人，那些事&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;link_list&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hexo&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://hexo.io/zh-tw/&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;avatar&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;descr&quot;</span><span class="punctuation">:</span> <span class="string">&quot;快速、簡單且強大的網誌框架&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;class_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;網站&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;class_desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;值得推薦的網站&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;link_list&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Youtube&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://www.youtube.com/&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;avatar&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;descr&quot;</span><span class="punctuation">:</span> <span class="string">&quot;視頻網站&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Weibo&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://www.weibo.com/&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;avatar&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;descr&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中國最大社交分享平台&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Twitter&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://twitter.com/&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;avatar&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;descr&quot;</span><span class="punctuation">:</span> <span class="string">&quot;社交分享平台&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="友情鏈接界面設置"><a href="#友情鏈接界面設置" class="headerlink" title="友情鏈接界面設置"></a>友情鏈接界面設置</h3><p>由 2.2.0 起，友情鏈接界面可以由用户自己自定義，只需要在友情鏈接的md檔設置就行，以普通的Markdown格式書寫。</p><h2 id="圖庫"><a href="#圖庫" class="headerlink" title="圖庫"></a>圖庫</h2><p>圖庫頁面只是普通的頁面，你只需要<code>hexo n page xxxxx</code> 創建你的頁面就行</p><p>然後使用標簽外掛 <a href="https://butterfly.js.org/posts/4aa8abbe/#Gallery%E7%9B%B8%E5%86%8A%E5%9C%96%E5%BA%AB">galleryGroup</a>，具體用法請查看對應的內容。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;div</span> <span class="string">class=&quot;gallery-group-main&quot;&gt;</span></span><br><span class="line">&#123;<span class="string">%</span> <span class="string">galleryGroup</span> <span class="string">&#x27;壁紙&#x27;</span> <span class="string">&#x27;收藏的一些壁紙&#x27;</span> <span class="string">&#x27;/Gallery/wallpaper&#x27;</span> <span class="string">https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png</span> <span class="string">%</span>&#125;</span><br><span class="line">&#123;<span class="string">%</span> <span class="string">galleryGroup</span> <span class="string">&#x27;漫威&#x27;</span> <span class="string">&#x27;關於漫威的圖片&#x27;</span> <span class="string">&#x27;/Gallery/marvel&#x27;</span> <span class="string">https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg</span> <span class="string">%</span>&#125;</span><br><span class="line">&#123;<span class="string">%</span> <span class="string">galleryGroup</span> <span class="string">&#x27;OH MY GIRL&#x27;</span> <span class="string">&#x27;關於OH MY GIRL的圖片&#x27;</span> <span class="string">&#x27;/Gallery/ohmygirl&#x27;</span> <span class="string">https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg</span> <span class="string">%</span>&#125;</span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br></pre></td></tr></table></figure><div class="gallery-group-main">  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">壁紙</div>  <p>收藏的一些壁紙</p>  <a href='/Gallery/wallpaper'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">漫威</div>  <p>關於漫威的圖片</p>  <a href='/Gallery/marvel'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">OH MY GIRL</div>  <p>關於OH MY GIRL的圖片</p>  <a href='/Gallery/ohmygirl'></a>  </figcaption>  </figure>  </div><h3 id="子頁面"><a href="#子頁面" class="headerlink" title="子頁面"></a>子頁面</h3><p>子頁面也是普通的頁面，你只需要<code>hexo n page xxxxx</code> 創建你的頁面就行</p><p>然後使用標簽外掛 <a href="/posts/4aa8abbe/#Gallery%E7%9B%B8%E5%86%8A">gallery</a>，具體用法請查看對應的內容。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">%</span> <span class="string">gallery</span> <span class="string">%</span>&#125;</span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg)</span></span><br><span class="line">&#123;<span class="string">%</span> <span class="string">endgallery</span> <span class="string">%</span>&#125;</span><br></pre></td></tr></table></figure><div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg" alt=""></p>          </div><div class="note pink icon-padding flat"><i class="note-icon fas fa-sitemap"></i><p>如果你想要使用 <code>/photo/ohmygirl</code> 這樣的鏈接顯示你的圖片內容</p><p>你可以把創建好的 <code>ohmygirl</code>整個文件夾移到 <code>photo</code>文件夾裏去</p></div><h2 id="404頁面"><a href="#404頁面" class="headerlink" title="404頁面"></a>404頁面</h2><p>主題內置了一個簡單的404頁面，可在設置中開啟</p><div class="note info flat"><p>本地預覽時，訪問出錯的網站是不會跳到404頁面的。</p><p>如需本地預覽，請訪問<code>http://localhost:4000/404.html</code></p></div><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># A simple 404 page</span></span><br><span class="line"><span class="attr">error_404:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">subtitle:</span> <span class="string">&quot;頁面沒有找到&quot;</span></span><br><span class="line">  <span class="attr">background:</span> </span><br></pre></td></tr></table></figure><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-error404.png" alt=""></p><a class="btn-beautify block pink right larger" href="/posts/4aa8abbe/"   title="🛠 Butterfly 安裝文檔(三) 主題配置"><i class="far fa-hand-point-right"></i><span>🛠 Butterfly 安裝文檔(三) 主題配置</span></a>]]></content>
      
      
      <categories>
          
          <category> Docs文檔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
            <tag> 主題 </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly 安裝文檔(一) 快速開始</title>
      <link href="/posts/21cfbf15/"/>
      <url>/posts/21cfbf15/</url>
      
        <content type="html"><![CDATA[<div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>📖  本教程更新於 2022 年 08 月 18 日，教程的內容針對最新<strong>穩定版</strong>而更新（如果你是舊版，教程會有些出入，請留意）</p><p>🦋  Butterfly 已經更新到 <a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/4.4.0">4.4.0</a></p></div><div class="note green icon-padding flat"><i class="note-icon fas fa-rocket"></i><p> 📚  文檔目錄</p><p><a href="/posts/21cfbf15/" title="🚀 快速開始">🚀 快速開始</a> - <a href="/posts/dc584b87/" title="📑 主題頁面">📑 主題頁面</a> - <a href="/posts/4aa8abbe/" title="🛠 主題配置-1">🛠 主題配置-1</a> - <a href="/posts/ceeb73f/" title="⚔️ 主題配置-2">⚔️ 主題配置-2</a> - <a href="/posts/98d20436/" title="❓ 主題問答">❓ 主題問答</a> - <a href="/posts/4073eda/" title="⚡️ 進階教程">⚡️ 進階教程</a> - <a href="/posts/198a4240/" title="✨ 更新日誌">✨ 更新日誌</a> - <a href="/posts/6ad51b4/" title="🤞 打賞">🤞 打賞</a></p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-magic"></i><p>你可以通過右下角的 <strong>簡</strong> 按鈕切換為簡體顯示 </p></div><hr><p><code>hexo-theme-butterfly</code>是基於 <a href="https://github.com/Molunerfinn/hexo-theme-melody">hexo-theme-melody</a> 的基礎上進行開發的。</p><h2 id="安裝"><a href="#安裝" class="headerlink" title="安裝"></a>安裝</h2><div class="tabs" id="butterfly-install"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#butterfly-install-1"><i class="fab fa-github-square"></i>Git安裝 (Github)</button></li><li class="tab"><button type="button" data-href="#butterfly-install-2"><i class="fab fa-git-square"></i>Git安裝 (Gitee)</button></li><li class="tab"><button type="button" data-href="#butterfly-install-3"><i class="fab fa-npm"></i>npm安裝</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="butterfly-install-1"><p><strong>穩定版【建議】</strong></p><p>在你的 Hexo 根目錄裏</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone <span class="literal">-b</span> master https://github.com/jerryc127/hexo<span class="literal">-theme-butterfly</span>.git themes/butterfly</span><br></pre></td></tr></table></figure><p><strong>測試版</strong></p><blockquote><p>測試版可能存在 bug，追求穩定的請安裝穩定版</p></blockquote><p>如果想要安裝比較新的 dev 分支，可以</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone <span class="literal">-b</span> dev https://github.com/jerryc127/hexo<span class="literal">-theme-butterfly</span>.git themes/butterfly</span><br></pre></td></tr></table></figure><div class="note info flat"><p>升級方法：在主題目錄下，運行 <code>git pull</code></p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="butterfly-install-2"><p><strong>穩定版【建議】</strong></p><p>在你的 Hexo 根目錄裏</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone <span class="literal">-b</span> master https://gitee.com/immyw/hexo<span class="literal">-theme-butterfly</span>.git themes/butterfly</span><br></pre></td></tr></table></figure><p><strong>測試版</strong></p><blockquote><p>測試版可能存在Bugs，追求穩定的請安裝穩定版</p></blockquote><p>如果想要安裝比較新的dev分支，可以</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone <span class="literal">-b</span> dev https://gitee.com/immyw/hexo<span class="literal">-theme-butterfly</span>.git themes/butterfly</span><br></pre></td></tr></table></figure><div class="note info flat"><p>升級方法：在主題目錄下，運行<code>git pull</code></p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="butterfly-install-3"><blockquote><p>此方法只支持 Hexo 5.0.0 以上版本</p><p><strong><em>通過 npm 安裝並不會在 themes 裏生成主題文件夾，而是在 node_modules 裏生成</em></strong></p></blockquote><p>在你的 Hexo 根目錄裏</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo<span class="literal">-theme-butterfly</span></span><br></pre></td></tr></table></figure><div class="note info flat"><p>升級方法：在 Hexo 根目錄下，運行 <code>npm update hexo-theme-butterfly</code></p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="應用主題"><a href="#應用主題" class="headerlink" title="應用主題"></a>應用主題</h2><p>修改 Hexo 根目錄下的 <code>_config.yml</code>，把主題改為<code>butterfly</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">butterfly</span></span><br></pre></td></tr></table></figure><h2 id="安裝插件"><a href="#安裝插件" class="headerlink" title="安裝插件"></a>安裝插件</h2><p>如果你沒有 pug 以及 stylus 的渲染器，請下載安裝：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo<span class="literal">-renderer-pug</span> hexo<span class="literal">-renderer-stylus</span> <span class="literal">--save</span></span><br></pre></td></tr></table></figure><h2 id="升級建議"><a href="#升級建議" class="headerlink" title="升級建議"></a>升級建議</h2><div class="note blue icon-padding flat"><i class="note-icon fas fa-train"></i><p>升級完成後，請到 Github 的 <a href="https://github.com/jerryc127/hexo-theme-butterfly/releases">Releases</a> 界面 或者 <a href="https://butterfly.js.org/posts/198a4240/">文檔七</a> 查看新版的更新內容。</p><p>裏面有標注  <code>_config</code> 文件的變更內容（如有），請根據實際情況更新你的配置內容。</p></div><p>為了減少升級主題後帶來的不便，請使用以下方法（<strong>建議，可以不做</strong>）。</p><p>在 hexo 的根目錄創建一個文件 <code>_config.butterfly.yml</code>，並把<strong>主題</strong>目錄的 <code>_config.yml</code> <strong>內容</strong>複製到 <code>_config.butterfly.yml</code> 去。( <strong>注意: 複製的是主題的 <code>_config.yml</code> ,而不是 hexo 的 <code>_config.yml</code></strong>)</p><blockquote><p><strong>注意：</strong> 不要把主題目錄的 <code>_config.yml</code> 刪掉</p><p><strong>注意：</strong> 以後只需要在 <code>_config.butterfly.yml</code>進行配置就行。<br>如果使用了 <code>_config.butterfly.yml</code>， 配置主題的 <code>_config.yml</code> 將不會有效果。</p></blockquote><p>Hexo會自動<strong>合併</strong>主題中的<code>_config.yml</code>和 <code>_config.butterfly.yml</code>裏的配置，如果存在同名配置，會使用<code>_config.butterfly.yml</code>的配置，其優先度較高。</p><p><img src="https://fastly.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-docs-install-suggestion-1.png" alt="image-20200805191531090"></p><a class="btn-beautify block right larger" href="/posts/dc584b87/"   title="📑 Butterfly 安裝文檔(二) 主題頁面"><i class="far fa-hand-point-right"></i><span>📑 Butterfly 安裝文檔(二) 主題頁面</span></a>]]></content>
      
      
      <categories>
          
          <category> Docs文檔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
            <tag> 主題 </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo Built-in Tag Plugins (Hexo內置標籤外掛)</title>
      <link href="/posts/39b121ef/"/>
      <url>/posts/39b121ef/</url>
      
        <content type="html"><![CDATA[<p>Tag plugins are different from post tags. They are ported from Octopress and provide a useful way for you to quickly add specific content to your posts.</p><h2 id="Block-Quote"><a href="#Block-Quote" class="headerlink" title="Block Quote"></a>Block Quote</h2><p>Perfect for adding quotes to your post, with optional author, source and title information.</p><p><strong>Alias:</strong> quote</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% blockquote [author[, source]] [link] [source_link_title] %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure><h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h3><p><strong>No arguments. Plain blockquote.</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% blockquote %&#125;</span><br><span class="line">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque hendrerit lacus ut purus iaculis feugiat. Sed nec tempor elit, quis aliquam neque. Curabitur sed diam eget dolor fermentum semper at eu lorem.</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque hendrerit lacus ut purus iaculis feugiat. Sed nec tempor elit, quis aliquam neque. Curabitur sed diam eget dolor fermentum semper at eu lorem.</p></blockquote><p><strong>Quote from a book</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% blockquote David Levithan, Wide Awake %&#125;</span><br><span class="line">Do not just seek happiness for yourself. Seek happiness for all. Through kindness. Through mercy.</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Do not just seek happiness for yourself. Seek happiness for all. Through kindness. Through mercy.</p><footer><strong>David Levithan</strong><cite>Wide Awake</cite></footer></blockquote><p><strong>Quote from Twitter</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% blockquote @DevDocs https://twitter.com/devdocs/status/356095192085962752 %&#125;</span><br><span class="line">NEW: DevDocs now comes with syntax highlighting. http://devdocs.io</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>NEW: DevDocs now comes with syntax highlighting. <a href="http://devdocs.io">http://devdocs.io</a></p><footer><strong>@DevDocs</strong><cite><a href="https://twitter.com/devdocs/status/356095192085962752">twitter.com/devdocs/status/356095192085962752</a></cite></footer></blockquote><p><strong>Quote from an article on the web</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% blockquote Seth Godin http://sethgodin.typepad.com/seths_blog/2009/07/welcome-to-island-marketing.html Welcome to Island Marketing %&#125;</span><br><span class="line">Every interaction is both precious and an opportunity to delight.</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Every interaction is both precious and an opportunity to delight.</p><footer><strong>Seth Godin</strong><cite><a href="http://sethgodin.typepad.com/seths_blog/2009/07/welcome-to-island-marketing.html">Welcome to Island Marketing</a></cite></footer></blockquote><h2 id="Code-Block"><a href="#Code-Block" class="headerlink" title="Code Block"></a>Code Block</h2><p>Useful feature for adding code snippets to your post.</p><p><strong>Alias:</strong> code</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% codeblock [title] [lang:language] [url] [link text] [additional options] %&#125;</span><br><span class="line">code snippet</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure><p>Specify additional options in <code>option:value</code> format, e.g. <code>line_number:false first_line:5</code>.</p><div class="table-container"><table><thead><tr><th>Extra Options</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>line_number</code></td><td>Show line number</td><td><code>true</code></td></tr><tr><td><code>highlight</code></td><td>Enable code highlighting</td><td><code>true</code></td></tr><tr><td><code>first_line</code></td><td>Specify the first line number</td><td><code>1</code></td></tr><tr><td><code>mark</code></td><td>Line highlight specific line(s), each value separated by a comma. Specify number range using a dash<br>Example: <code>mark:1,4-7,10</code> will mark line 1, 4 to 7 and 10.</td><td></td></tr><tr><td><code>wrap</code></td><td>Wrap the code block in <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/table"><code>&lt;table&gt;</code></a></td><td><code>true</code></td></tr></tbody></table></div><h3 id="Examples-1"><a href="#Examples-1" class="headerlink" title="Examples"></a>Examples</h3><p><strong>A plain code block</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% codeblock %&#125;</span><br><span class="line">alert(&#x27;Hello World!&#x27;);</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(&#x27;Hello World!&#x27;);</span><br></pre></td></tr></table></figure><p><strong>Specifying the language</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% codeblock lang:objc %&#125;</span><br><span class="line">[rectangle setX: 10 y: 10 width: 20 height: 20];</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[rectangle setX: <span class="number">10</span> y: <span class="number">10</span> width: <span class="number">20</span> height: <span class="number">20</span>];</span><br></pre></td></tr></table></figure><p><strong>Adding a caption to the code block</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% codeblock Array.map %&#125;</span><br><span class="line">array.map(callback[, thisArg])</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>Array.map</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.map(callback[, thisArg])</span><br></pre></td></tr></table></figure><p><strong>Adding a caption and a URL</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% codeblock _.compact http://underscorejs.org/#compact Underscore.js %&#125;</span><br><span class="line">_.compact([0, 1, false, 2, &#x27;&#x27;, 3]);</span><br><span class="line">=&gt; [1, 2, 3]</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>_.compact</span><a href="http://underscorejs.org/#compact">Underscore.js</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_.compact([0, 1, false, 2, &#x27;&#x27;, 3]);</span><br><span class="line">=&gt; [1, 2, 3]</span><br></pre></td></tr></table></figure><h2 id="Backtick-Code-Block"><a href="#Backtick-Code-Block" class="headerlink" title="Backtick Code Block"></a>Backtick Code Block</h2><p>This is identical to using a code block, but instead uses three backticks to delimit the block.</p>&#96`` [language] [title] [url] [link text]code snippet&#96;``<h2 id="Pull-Quote"><a href="#Pull-Quote" class="headerlink" title="Pull Quote"></a>Pull Quote</h2><p>To add pull quotes to your posts:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% pullquote [class] %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endpullquote %&#125;</span><br></pre></td></tr></table></figure><h3 id="Left"><a href="#Left" class="headerlink" title="Left"></a>Left</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% pullquote left %&#125;</span><br><span class="line">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span><br><span class="line">&#123;% endpullquote %&#125;</span><br></pre></td></tr></table></figure><blockquote class="pullquote left"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p></blockquote><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas tempus molestie arcu, et fringilla mauris placerat ac. Nullam luctus bibendum risus. Ut cursus sed ipsum feugiat egestas. Suspendisse elementum, velit eu consequat consequat, augue lorem dapibus libero, eget pulvinar dolor est sit amet nulla. Suspendisse a porta tortor, et posuere mi. Pellentesque ultricies, mi quis volutpat malesuada, erat felis vulputate nisl, ac congue ante tortor ut ante. Proin aliquam sem vel mauris tincidunt, eget scelerisque tortor euismod. Nulla tincidunt enim nec commodo dictum. Mauris id sapien et orci gravida luctus id ut dui. In vel vulputate odio. Duis vel turpis molestie, scelerisque enim eu, lobortis eros. Cras at ipsum gravida, sagittis ante vel, viverra tellus. Nunc mauris turpis, elementum ullamcorper nisl pretium, ultrices cursus justo. Mauris porttitor commodo eros, ac ornare orci interdum in. Cras fermentum cursus leo sed mattis. In dignissim lorem sem, sit amet elementum mauris venenatis ac.</p><h3 id="Right"><a href="#Right" class="headerlink" title="Right"></a>Right</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% pullquote right %&#125;</span><br><span class="line">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span><br><span class="line">&#123;% endpullquote %&#125;</span><br></pre></td></tr></table></figure><blockquote class="pullquote right"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p></blockquote><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed ligula justo, lobortis sit amet semper vel, dignissim sit amet libero. Praesent ac tempus ligula. Maecenas at gravida odio. Etiam tristique volutpat lacus eu faucibus. Donec non tempus arcu. Phasellus adipiscing, mauris nec mollis egestas, ipsum nunc auctor velit, et rhoncus lorem ipsum at ante. Praesent et sem in velit volutpat auctor. Duis vel mauris nulla. Maecenas mattis interdum ante, quis sagittis nibh cursus et. Nulla facilisi. Morbi convallis gravida tortor, ut fermentum enim gravida et. Nunc vel dictum nisl, non ultrices libero. Proin vestibulum felis eget orci consectetur lobortis. Vestibulum augue nulla, iaculis vitae augue vehicula, dignissim ultrices libero. Sed imperdiet urna et quam ultrices tincidunt nec ac magna. Etiam vel pharetra elit.</p><h2 id="jsFiddle"><a href="#jsFiddle" class="headerlink" title="jsFiddle"></a>jsFiddle</h2><p>To embed a jsFiddle snippet:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% jsfiddle shorttag [tabs] [skin] [width] [height] %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% jsfiddle ccWP7 %&#125;</span><br></pre></td></tr></table></figure><iframe scrolling="no" width="100%" height="300" src="https://jsfiddle.net/ccWP7/embedded/js,resources,html,css,result/light" frameborder="0" loading="lazy" allowfullscreen></iframe><h2 id="Gist"><a href="#Gist" class="headerlink" title="Gist"></a>Gist</h2><p>To embed a Gist snippet:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gist gist_id [filename] %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gist 996818 %&#125;</span><br></pre></td></tr></table></figure><script src="//gist.github.com/996818.js"></script><h2 id="iframe"><a href="#iframe" class="headerlink" title="iframe"></a>iframe</h2><p>To embed an iframe:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% iframe url [width] [height] %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% iframe &#x27;https://butterfly.js.org/&#x27; 100% 300px %&#125;</span><br></pre></td></tr></table></figure><iframe src="https://butterfly.js.org/" width="100%" height="300px" frameborder="0" loading="lazy" allowfullscreen></iframe><h2 id="Image"><a href="#Image" class="headerlink" title="Image"></a>Image</h2><p>Inserts an image with specified size.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% img [class names] /path/to/image [width] [height] &#x27;&quot;title text&quot; &quot;alt text&quot;&#x27; %&#125;</span><br></pre></td></tr></table></figure><img src="/img/avatar.png" class="test"><h2 id="Link"><a href="#Link" class="headerlink" title="Link"></a>Link</h2><p>Inserts a link with <code>target=&quot;_blank&quot;</code> attribute.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link text url [external] [title] %&#125;</span><br></pre></td></tr></table></figure><h2 id="Include-Code"><a href="#Include-Code" class="headerlink" title="Include Code"></a>Include Code</h2><p>Inserts code snippets in <code>source/downloads/code</code> folder. The folder location can be specified through the <code>code_dir</code> option in the config.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include_code [title] [lang:language] [from:line] [to:line] path/to/file %&#125;</span><br></pre></td></tr></table></figure><h3 id="Examples-2"><a href="#Examples-2" class="headerlink" title="Examples"></a>Examples</h3><p><strong>Embed the whole content of test.js</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include_code lang:javascript test.js %&#125;</span><br></pre></td></tr></table></figure><p><strong>Embed line 3 only</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include_code lang:javascript from:3 to:3 test.js %&#125;</span><br></pre></td></tr></table></figure><p><strong>Embed line 5 to 8</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include_code lang:javascript from:5 to:8 test.js %&#125;</span><br></pre></td></tr></table></figure><p><strong>Embed line 5 to the end of file</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include_code lang:javascript from:5 test.js %&#125;</span><br></pre></td></tr></table></figure><p><strong>Embed line 1 to 8</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include_code lang:javascript to:8 test.js %&#125;</span><br></pre></td></tr></table></figure><h2 id="YouTube"><a href="#YouTube" class="headerlink" title="YouTube"></a>YouTube</h2><p>Inserts a YouTube video.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% youtube video_id %&#125;</span><br></pre></td></tr></table></figure><div class="video-container"><iframe src="https://www.youtube.com/embed/iDjQSdN_ig8" frameborder="0" loading="lazy" allowfullscreen></iframe></div><h2 id="Vimeo"><a href="#Vimeo" class="headerlink" title="Vimeo"></a>Vimeo</h2><p>Inserts a responsive or specified size Vimeo video.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% vimeo video_id [width] [height] %&#125;</span><br></pre></td></tr></table></figure><div class="video-container"><iframe src="https://player.vimeo.com/video/124876737" frameborder="0" loading="lazy" allowfullscreen></iframe></div><h2 id="Include-Posts"><a href="#Include-Posts" class="headerlink" title="Include Posts"></a>Include Posts</h2><p>Include links to other posts.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% post_path filename %&#125;</span><br><span class="line">&#123;% post_link filename [title] [escape] %&#125;</span><br></pre></td></tr></table></figure><p>You can ignore permalink and folder information, like languages and dates, when using this tag.</p><p>For instance: <code>{% post_link how-to-bake-a-cake %}</code>.</p><p>This will work as long as the filename of the post is <code>how-to-bake-a-cake.md</code>, even if the post is located at <code>source/posts/2015-02-my-family-holiday</code> and has permalink <code>2018/en/how-to-bake-a-cake</code>.</p><p>You can customize the text to display, instead of displaying the post’s title. Using <code>post_path</code> inside Markdown syntax <code>[]()</code> is not supported.</p><p>Post’s title and custom text are escaped by default. You can use the <code>escape</code> option to disable escaping.</p><p>For instance:</p><p><strong>Display title of the post.</strong></p><p><code>{% post_link 標籤外掛-Tag-Plugins %}</code></p><a href="/posts/2df239ce/" title="標籤外掛(Tag Plugins)">標籤外掛(Tag Plugins)</a><p><strong>Display custom text.</strong></p><p><code>{% post_link 標籤外掛-Tag-Plugins 'Link to a post' %}</code></p><a href="/posts/2df239ce/" title="Link to a post">Link to a post</a><p><strong>Escape title.</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% post_link 標籤外掛-Tag-Plugins &#x27;How to use &lt;b&gt; tag in title&#x27; %&#125;</span><br></pre></td></tr></table></figure><a href="/posts/2df239ce/" title="How to use &lt;b&gt; tag in title">How to use &lt;b&gt; tag in title</a><p><strong>Do not escape title.</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% post_link 標籤外掛-Tag-Plugins &#x27;&lt;b&gt;bold&lt;/b&gt; custom title&#x27; false %&#125;</span><br></pre></td></tr></table></figure><a href="/posts/2df239ce/" title="&lt;b&gt;bold&lt;&#x2F;b&gt; custom title"><b>bold</b> custom title</a><h2 id="Include-Assets"><a href="#Include-Assets" class="headerlink" title="Include Assets"></a>Include Assets</h2><p>Include post assets.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% asset_path filename %&#125;</span><br><span class="line">&#123;% asset_img filename [title] %&#125;</span><br><span class="line">&#123;% asset_link filename [title] [escape] %&#125;</span><br></pre></td></tr></table></figure><h2 id="Raw"><a href="#Raw" class="headerlink" title="Raw"></a>Raw</h2><p>If certain content is causing processing issues in your posts, wrap it with the <code>raw</code> tag to avoid rendering errors.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Demo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 標籤外掛 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pandownload:愿你归来仍是英雄</title>
      <link href="/posts/1b33467f/"/>
      <url>/posts/1b33467f/</url>
      
        <content type="html"><![CDATA[<p>PanDownload 21世纪的英雄，在几天前，死了。</p><p>4月15日下午，扬州网警巡查执法官方微博发布通报称：“Pandownload软件开发嫌疑人已经被捕。”</p><p>刘某：PanDownload有窃取用户隐私行为。</p><p>嗯，来，你的证据呢？</p><h1 id="人性的毁灭"><a href="#人性的毁灭" class="headerlink" title="人性的毁灭"></a>人性的毁灭</h1><p>百度网盘迟迟不对PanDownload限制，之前很奇怪，现在明白了，原来是等到“盈利”到30万，有了个证据，才死死咬住不放。百度阴险，由此可见。</p><p>百度网盘限速，我就只能说呵呵了，如果你杠百度网盘硬盘资源有限，那么开始你可以调小硬盘大小，尽量不限速，那还行。自己拼命张开嘴说自己吃的多，到头来发现吃不了又悄悄闭嘴，什么意思？</p><p>刘某，一个人就可以把一个开发者抓到牢里，呵，我现在相当有理由怀疑这是个幌子，百度人性，可见一斑。哦不，百度没有人性。</p><p>想当年，550KB的运用程序硬是给我弄成大文件。我？？？</p><h1 id="要推车出去的停车场"><a href="#要推车出去的停车场" class="headerlink" title="要推车出去的停车场"></a>要推车出去的停车场</h1><p>百度网盘就好比停车场吧，刚开始假惺惺说这里空间比谁都大，好吧这确实赢得了我的好感，于是我也存了很多东西上去，就好比我把很多车开进来。直到垄断了整个停车场事业。百度终于展现自己的吃相了。</p><p>开车进来？没问题！2T空间，随便你！对啊，2T空间，谁不想要呢？我也停了。附近的停车场用户太多没能力，倒闭了。</p><p>现在，当我要开车出去的时候，你突然告诉我，不能开车出去，要用手推出去，理由是出去的通道很窄？要开车要付费，几十块一个月？</p><p>PanDownload，形象点，就是把你分身成几个，一起推，现在，总算能正常出去了吧。</p><p>PanDownload窃取用户隐私？你可能没搞懂，PanDownload，作用就是把你分身（Aria2多线程下载），窃取用户隐私，我可以肯定地说，就是个幌子。幕后百度，我只能说呵呵了。</p><h1 id="漏洞百出的被捕声明"><a href="#漏洞百出的被捕声明" class="headerlink" title="漏洞百出的被捕声明"></a>漏洞百出的被捕声明</h1><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-195.png" alt="upload successful"></p><p>首先，PanDownload核心就是获取个直链，你需要反编译解剖软件结构，一盯几个小时？民警办案效率挺高的嘛。</p><p>黑客攻击计算机系统，哦，获取直链就算是黑客啦？我觉得我好屌哦。</p><p>隐私照片和文件泄露：证据呢？</p><p>以非会员权限突破百度网盘设定：你还是没脸说自己限速是吧，百度？</p><p>侵入？非法控制？：PanDownload唯一的作用就是获取直接链接（百度网盘客户端的正常操作）以及多线程下载（官方客户端没有），我用多线程就算是违法咯？</p><p>欸，行了行了，我都不想说了；</p><h1 id="未来，何去何从"><a href="#未来，何去何从" class="headerlink" title="未来，何去何从"></a>未来，何去何从</h1><p>互联网上分享个文件真的很难吗？我想，对于众多小白来说，真的，互联网分享文件确实很难。</p><p>百度一家，我已经彻底失去最后一点希望了，</p><p>贴吧的风控我也是服了，认认真真敲好的字被删除，我还不如用知乎；</p><p>搜索引擎？呵呵，营销号的风格，一目了然，国内我现在用<a href="https://magi.com">magi</a> 一个人工智能搜索引擎，自动从网上拉取文章研究，AI把营销号和同类文章精准度真的高，而且搜索一些学习单词也很正常；或者使用DogeDoge（感觉颇似DuckDuckGo），精准的不误导不追踪；Bing，说实话不太习惯；国外的我就不必多说了；</p><p>网盘？OneDrive15GB储存个人资料不香么？普通大文件分享像我这样的穷B Workers+GoogleDrive用户体验完爆百度，为什么要百度资本？Mega还行，实际上Mega15GB也就刚好吧（那个50GB中35GB是新用户临时体验，一个月后失效）。再不济，iCloud！苹果有国内加速节点，虽然5GB真的够呛，不过同步一些个人资料还行吧？开源项目直接扔Github，反正也没多大。</p><p>所有百度，我只有用百度统计需求，原因么，Google统计国内加载真的很拖速度，迫不得已使用百度统计，虽然功能差很多，不过勉强吧；</p><p><strong>PanDownload能死而复生么？我不清楚，但是，我衷心祈愿！</strong></p><style>html{filter: grayscale(100%);-webkit-filter: grayscale(100%);-moz-filter: grayscale(100%);-ms-filter: grayscale(100%);-o-filter: grayscale(100%);filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);}</style>]]></content>
      
      
      <categories>
          
          <category> 随心记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 百度 </tag>
            
            <tag> 网盘 </tag>
            
            <tag> PanDownload </tag>
            
            <tag> 悼文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IPFS+CloudFlare=ServerLessWebPage</title>
      <link href="/posts/7fe9d99f/"/>
      <url>/posts/7fe9d99f/</url>
      
        <content type="html"><![CDATA[<p>IPFS，这个2018年诞生出来的小东西，似乎掀起了一阵热潮，然后被忘性极大的互联网吃瓜群众所抛弃，但不得不说这个东西可玩度非常高。</p><h1 id="IPFS是什么"><a href="#IPFS是什么" class="headerlink" title="IPFS是什么"></a>IPFS是什么</h1><p>网上一大堆文绉绉气昂昂极富学术气息的营销号整天吹嘘着ipfs是跨时代下一时代的比特币，我只能说呵呵，真的想要了解ipfs是什么的，建议左转维基百科或百度百科。</p><p>抄一下wikipedia上的介绍：</p><blockquote><p>（InterPlanetary File System，缩写IPFS）是一个旨在创建持久且分布式存储和共享文件的网络传输协议。它是一种内容可寻址的对等超媒体分发协议。在IPFS网络中的节点将构成一个分布式文件系统。</p></blockquote><p>其实按我的话来说,ipfs就是一个神奇的东西,你放上去一个文件,就会立刻被瓜分成数个文件碎片,每一台运行着ipfs的电脑和矿机就会争先恐后来抢夺你的碎片,并且抢到的人就会获得系统的奖励,而你却一分钱也不用付出.</p><p>是不是听起来很神奇?对的,你没有付出任何东西,别人却能获得奖励,而且你既满足储存文件的需求,储存你文件的人也能得到金钱.这种机制,叫做FileCoin.</p><p>你可以把它想象成Bittorrent+BitCoin的结合物,实际上他就是这样的<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/huaji.png">.当然不完全是,但核心理念就是这样的.只不过,BitCoin付出的是算力,而FileCoin付出的是硬盘.</p><p>IPFS的主要目标是取代HTTP,说是取代,那刚开始就必须兼容,所以目前ipfs可以通过官网ipfs.io获取.</p><h1 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h1><p>与bt下载类似,我们需要先介绍BT.</p><h2 id="Bittorrent：分布式哈希表技术"><a href="#Bittorrent：分布式哈希表技术" class="headerlink" title="Bittorrent：分布式哈希表技术"></a>Bittorrent：分布式哈希表技术</h2><h3 id="先来一个故事"><a href="#先来一个故事" class="headerlink" title="先来一个故事"></a>先来一个故事</h3><p>很久很久以前，有一位老头，叫做刘XX。</p><p>他是一位很有资格的老师，为了顽固学生们的学习效果，他发送给所有学生一部视频：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/BT/视频.bmp" alt="图片" title="大视频"></p><p>（注：老刘的带宽是8Mbps，即最大带宽1MB/s，每一个学生的带宽也是8Mbps）</p><p>我们假设有5位学生需要这部视频，则可以画这样一幅图：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/BT/down1.png" alt="图片" title="组团下载ing..."></p><p>这只视频是<code>88.8MB</code>大小,按照这样的速度,同学需要花费<code>1024*88.8MB/(204.8kb/s)=444s</code>即<code>7分钟24秒</code></p><p>这还往往只是最理想状况.现在,我们来假设一下现象的出现:</p><ol><li>由于视频过于好看,引起广泛关注.现在有200个同学要求下载.则单个人下载完需要17760s即296min也就是约5h!</li><li>刘老师觉得单个视频教学质量不够好,决定上传一个8880GB的超大视频.(下载时间大于一天)</li><li>几个同学与刘老师搞好了关系,刘老师给他们较高的下载速度,导致带宽分配不均匀,没有关系的学生下载速度更慢了.(百度网盘既视感)</li></ol><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/BT/down-VIP.png" alt="图片" title="A1拥有VIP专线"></p><ol><li>由于刘老师给的视频过于激烈,在下载了一段时间后,FBI<code>open the door!</code>敲上门来带走了刘老师,视频被查封了!!!(下载速度0)</li></ol><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/BT/FBI.jpeg" alt="图片" title="FBI！Open the door！"></p><p>可是，学习是必须的，这可怎么办呢？？？</p><p>这时….</p><p>刘老师突然想起来，为什么不让每一个学生互相连接，贡献自己已经下好的部分，以来获得最大的下载速度呢？？</p><p>请注意，在上述下载中，每一个人都没有充分利用自己的最大带宽，对不对？</p><p>那，解决办法就来了:</p><h3 id="P2P："><a href="#P2P：" class="headerlink" title="P2P："></a>P2P：</h3><p>以256KB为一包，我们就可获得356块文件</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/BT/file.png" alt="图片" title="分包"></p><p>回到下载界面，我们看到，所有人都与其他人获得连接，那么，连接完成后：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/BT/down-each.png" alt="图片" title="连接"></p><p>（为了方便观察，我们将不必要的连接全部去掉）</p><p>现在，我们重新开始下载：</p><p>我们假设，A1下载了第一块，A2下载了第二块…</p><p>两秒后，所有人手上都拥有了一块文件：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/BT/down-part1.png" alt="图片" title="下载"></p><p>接下来，在不影响下载的情况下，A1与A2交换下载好的部分，同时与A3、A4、A5交换</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/BT/down-part2.png" alt="图片" title="贡献&amp;下载"></p><p>看到了吗，所有人都得到了更高的速度，所有人的带宽都得到了最充分的利用，包括原先看起来毫无用处的上传带宽。</p><p>接着4秒后，所有的贡献分块都下载好了，而每一个人都从文件发布者身上又得到新的文件碎片。</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/BT/down-part3.png" alt="图片" title="下载！"></p><p>所以，这种情况回一直持续下去，直到每一个人都下载完成，每一个人都只需下载149秒即2分29秒！相对于单点时间大大减少！</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/BT/down-finish.png" alt="图片" title="完整！"></p><h3 id="人数多-amp-文件大-问题"><a href="#人数多-amp-文件大-问题" class="headerlink" title="人数多&amp;文件大 问题"></a>人数多&amp;文件大 问题</h3><p>现在，我们来假设第一个问题，200人下载怎么办？</p><p>我们可以明白，人数越多，文件交换越密集，对不对？</p><p>显然会见的，这个问题显得异常白痴，可以体会的是，在最佳条件下，每个人的带宽都达到了最大，如果每个人都下载了不同的分块，同时每个人都在贡献。</p><p>那么，每个人的下载速度，根本不会受到很大影响。</p><p>这对于传统下载（http/https/ftp）不同，传统下载仅仅由一台服务器贡献，人数多对于这台服务器压力极大。</p><p>但是，在这个环境里，服务器不仅仅是一台，而且，每当加入一个人，每一个人都可以当作服务器，这样，下载速度反而会大大提升。</p><p>反而文件很大是个硬梗，不过相对于传统下载，这种下载方式还是有一定能力解决这个问题的。</p><p><strong>回到这里</strong></p><h2 id="IPFS的原理"><a href="#IPFS的原理" class="headerlink" title="IPFS的原理"></a>IPFS的原理</h2><p>ipfs的世界有个东西叫做cid,大概类似于这样一串: <code>QmZCvMHrE56VqsejmG53xd9bW4RZjtFpLz46QMQjA81orL</code> ,前面的 <code>Qm</code> 是固定的,后面是SHA256密钥.cid又分为用户密钥和文件密钥,这个暂时不讨论.SHA256强度目前看来基本不会碰撞,毕竟64位十六进制的字符串,能实现16^64个文件的存储,也就是1.1579208923731619542357098500869e+77个id,有生之年能看到它碰撞也不是一件容易的事情</p><h3 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h3><p>如同BT,在短短几秒内,需要分享的文件被分块完毕,但此时,文件还是乖乖的窝在硬盘里,没有分享出去.</p><p>当有任何一个人试图获取资源时，你的ipfs会联系距离最近的节点,询问他们有没有意愿存东西.请注意此处的 <code>距离</code> ,这可不是物理距离,而是逻辑距离.</p><p>节点大都都会很高兴的同意,当然有些节点可能就是混口饭吃不想存,于是这些节点就会帮你联系离他最近的节点要不要,直到所有碎片瓜分完毕.这种算法,像极了DHT.</p><p>几分钟内,全球数个硬盘里就会出现你的文件的碎片,只要一声令下,这些文件就会调出.</p><p>此时,纵使文件发布者下线,文件照样流传.重复上传的文件,拆碎后被校验到与存在的文件相同则不会被上传.</p><p>上传完毕,文件就会拥有自己的id,也称为指纹,取回这些文件则需要id.</p><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>你可以通过客户端下载,这个下载方式和btDHT其实原理是一样的;当然IPFS为了向下兼容http,自己也有网关,不过网关由于是公开的,一方面是速度,另一方面是已经引起了G||F||\/\/の注意，目前并不推荐使用网关下载，当然对于一些小文件比如网页和图片，这些都是随意的。</p><h1 id="IPFS的作用"><a href="#IPFS的作用" class="headerlink" title="IPFS的作用"></a>IPFS的作用</h1><p>与一些网盘相反，ipfs反而非常鼓励你往里面塞东西，越多越好，但是作为个人网盘并不适合，一方面ipfs的资源会随着下载的人越多，缓存的机器也会越多，速度更快，私人文件反而速度不佳；另一方面ipfs一旦上传，任何人包括你自己永远无法彻底删除这些文件，即使你在ipfs客户端删除了你分享的文件，这些文件仍然会得到传播。所以ipfs其实可以作为公开下载，甚至是图床，网页托管等等。</p><p>在中国，ipfs实际上并没有得到很大的限制，分享文件和下载文件其实很容易做到，麻烦的只是不能从ipfs网关获取罢了。</p><p>下面是我放在ipfs上的一张图片，即使我下线，这个文件依旧流传于网络之间。</p><p><img src="https://ipfs.cyfan.top/ipfs/QmU4Eh586TBCBP5KwKF3zvcXCKcnkw9wD9nKCqxTi15f4n" alt=""></p><p>但是，ipfs反感在网关下载大文件，因为这样会造成不必要的带宽浪费，下载大文件请使用ipfs客户端+ipfs伴侣</p><h1 id="搭建无服务器网页"><a href="#搭建无服务器网页" class="headerlink" title="搭建无服务器网页"></a>搭建无服务器网页</h1><p>很多人网页放在Github+CloudFlare，其实换个思路，为什么不用IPFS+CloudFlare呢？</p><p>开始吧！</p><h2 id="下载ipfs"><a href="#下载ipfs" class="headerlink" title="下载ipfs"></a>下载ipfs</h2><p>官网因为自带网关已经封锁了，请自带梯子访问。</p><h2 id="写html"><a href="#写html" class="headerlink" title="写html"></a>写html</h2><p>请注意，在ipfs上写网页时，请尽量不要使用外链，对于js和css请直接写在网页中，图片请使用base64或上传至ipfs后使用相对链接。</p><h2 id="上传-1"><a href="#上传-1" class="headerlink" title="上传"></a>上传</h2><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-189.png" alt="upload successful"></p><p>点击添加按钮，上传</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-190.png" alt="upload successful"></p><p>接下来，重点来了！</p><p>ipfs分享文件有两种方式，是ipfs和ipns，前者采用文件hash辨别文件，文件内容一旦改变，原来的链接无法更新，链接格式为 <code>https://ipfs.io/ipfs/QmZCvMHrE56VqsejmG53xd9bW4RZjtFpLz46QMQjA81orL</code> ；后者采用用户id辨别,内容允许更新，但是用户在线时间过短会导致无法同步，并且有可能暴露用户信息，后者格式为： <code>https://ipfs.io/ipfs/QmQQKZphgJdEGhTp18NRvVdSJ3RJArRst2keKk3tZvmfPz?filename=index.html</code> .</p><p>如果你只是单个文件网页，此处比较建议使用ipfs，ipns可能离线时间过长导致无法下载。具体看个人所好。</p><p>ipfs链接获取：点击 <code>···</code> ,选择复制哈希，在前面加上网关域名即可。</p><p>ipns连接获取：点击 <code>···</code> ,选择分享，复制链接即可。</p><p>在善用技术上网的前提下访问 <code>https://ipfs.io/ipfs/QmZCvMHrE56VqsejmG53xd9bW4RZjtFpLz46QMQjA81orL</code> 显示目标界面</p><p><img src="https://ipfs.cyfan.top/ipfs/QmSGR6p5PxFJqQdEbDySG9QUpBx4WnQcVfxDPohgQ4pDoL" alt=""></p><blockquote><p>请注意，每次上传后一定要先访问一遍资源，否则文件是不会上传到ipfs服务器的！</p></blockquote><h2 id="CloudFlare设置"><a href="#CloudFlare设置" class="headerlink" title="CloudFlare设置"></a>CloudFlare设置</h2><p><del>不知道为什么CloudFlare的ipfs服务器有点问题，使用官方说明一直爆404 page not found，官方地址在这里<a href="https://www.cloudflare.com/distributed-web-gateway/">https://www.cloudflare.com/distributed-web-gateway/</a> 反正我是折腾失败了。<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/lh.jpg"></del></p><p>↑以上为放屁，现在来讲一下怎么正确绑定：</p><h3 id="dnslink绑定"><a href="#dnslink绑定" class="headerlink" title="dnslink绑定"></a>dnslink绑定</h3><p>这个方法无论你的dns服务商在哪都能绑定，只不过不在CloudFlare托管的用户要多一步。</p><p>1.将需要绑定的域名,以CNAME形式指向 <code>www.cloudflare-ipfs.com</code> ,比如我需要让 <code>showtime.cyfan.top</code> 成为ipfs出口，则这么设置。</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-191.png" alt="upload successful"></p><p>2.使用txt记录绑定ipfs hash，新建txt记录，名字是 <code>_dnslink.yourwebsite</code> 一定要加上yourwebsite！比如我绑定的是 <code>showtime.cyfan.top</code> ，则名称一行填上 <code>_dnslink.showtime</code> !接着内容是 <code>dnslink=/ipfs/</code> 后面接上hash，比如showtimehtml的hash是： <code>QmWAvNck7QBhUAYAEgBFvbvvsMxDC9s55NXVJXeJTjTM1Y</code> 则大概这么填:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-192.png" alt="upload successful"></p><p>3.如果你本来就是托管在CloudFlare上的,到此为止就可以了,如果不是托管在Cloudflare上,类似dnspod\alicdn之类的,那还要获取证书,进入<a href="https://www.cloudflare.com/distributed-web-gateway/">https://www.cloudflare.com/distributed-web-gateway/</a> 拉到最底下</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-193.png" alt="upload successful"></p><p>输入域名，获取证书即可。</p><p><strong>但问题是，<code>www.cloudflare-ipfs.com</code> 已经被dns污染了，你用cname绑定是无法正常访问的啦！所以只能用Workers绕路啦！</strong></p><h3 id="JSProxy反代ipfs-io"><a href="#JSProxy反代ipfs-io" class="headerlink" title="JSProxy反代ipfs.io"></a>JSProxy反代ipfs.io</h3><p>老办法，Workersjsproxy反向代理ipfs网关，解决<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/wc.jpg"></p><p>网址：<a href="https://showtime.cyfan.top">https://showtime.cyfan.top</a></p><h1 id="其他的用处"><a href="#其他的用处" class="headerlink" title="其他的用处"></a>其他的用处</h1><p>我在Github上看了很多奇奇怪怪的用法，有的拿来做博客，有的拿来做网盘，有的拿来做图床，欸，真的是脑洞大开，幸好ipfs经得起折腾，越折腾他们赚的越多<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/huaji.png"></p>]]></content>
      
      
      <categories>
          
          <category> 爱学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CloudFlare </tag>
            
            <tag> 撸羊毛 </tag>
            
            <tag> IPFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在不支持ipv6的路由器下使用ipv6</title>
      <link href="/posts/536a1a2d/"/>
      <url>/posts/536a1a2d/</url>
      
        <content type="html"><![CDATA[<p>从奶奶家回到城里，立刻有个问题困扰着我，我将处于没有ipv6的环境下。</p><p>拜托，都0202年了，你怎么连ipv6都没有？</p><p>因为家里情况有点小特殊，有三个路由器：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-127.png" alt="upload successful"></p><p>移动路由器网关：楼下。100Mbps。通常使用LAN口直接网线插进去，一般不用无线功能，实际上老早支持ipv6了。</p><p>小米路由器：楼下。有线连接移动网关，因为支持5GHz的WiFi，所以在楼下一般手机都是接入小米路由器。</p><p>水星路由器：楼上。有线链接移动网关，不支持5GHzWiFi，不过2.4GHz一般满足日常使用，峰值可达44Mbps，对等网速4MB/s保持的住，也就不计较速度慢了。扯淡的是由于生产日期过早，居然不支持ipv6！！！</p><p>我在楼上，身边有个2008年买来的水星路由器，这个路由器通过百兆网线链接楼下的移动网关，也就是套了两层路由器。</p><p>恼火的是，由于是2008年的产物，这破玩意是不支持ipv6的。</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-128.png" alt="upload successful"></p><p>问题是，没有公网ipv6就意味着我的BTSYNC将处于疯狂的中继服务器，欸，不可忍耐。</p><p>以至于百度的ipv6都上不去。</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-129.png" alt="upload successful"></p><p>甚至连自己ipv6站点都上不去。<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/huaji.png"></p><p>这谁忍得住啊。</p><h1 id="坐下来好好想想"><a href="#坐下来好好想想" class="headerlink" title="坐下来好好想想"></a>坐下来好好想想</h1><p>之前去问过姨父，姨父是个非常屌的男人。</p><p>我问：“阿姨丈（方言称呼），怎样在不支持ipv6的路由器下使用ipv6啊，把局域网下电脑做代理可以吗？”</p><p>姨父：（一脸鄙夷地瞟了我一眼）“硬件解决不了的的事情还想用软件解决？”</p><p>好，那我就用软件解决硬件解决不了的事情！</p><p>刷固件？我不知道这种行不行的通，刚才问了一下 <a href="https://winkiller.jamjams.xyz">winkiller</a> 刷硬件的大佬,回答是应该不行.</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-130.png" alt="upload successful"></p><p>不行就不行吧,反正我也没指望刷硬件.</p><p>想一想,对了,父母那台电脑不是挺适合拿来做代理服务器吗?</p><p>思考一下:</p><ul><li>[x] 我是笔记本,他们是台式电脑,他们电脑每天开机,早6:00到网上11:00一直开着,也就是我开机的时间他们绝对开着.</li><li>[x] 父母根本就没有ipv6这个需求,他们最多上爱奇艺央视看视频,ipv4和ipv6是啥都不知道,不过那台机子ipv6常开.</li><li>[x] 父母网速需求不大,我因为路由器一层限制速度最多4MB/s,而家里带宽是12.5MB/s,基本不会影响.</li><li>[x] 楼下那台绝大多数情况是空闲的╮(╯▽╰)╭</li><li>[x] 楼下那台为了方便我把它设置成静态ip了</li></ul><p>那就把父母那台机子做代理吧!</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>首先要思考拿什么做代理.</p><p>VPN?算了吧,配置太麻烦,还是SS好.</p><p>欸你没看错,没错,把父母电脑作为SS服务端.</p><p>查了查,有一个东西叫做<a href="https://github.com/shadowsocks/libQtShadowsocks/releases">libQtShadowsocks</a></p><p>不过最新版本有点问题,于是我下载了1.10.0版</p><p>那就下载吧,为了防止楼下Github连不上去,我打包好了</p><p><a class="btn" href="https://drive.cyfan.top/shadowsocks-libqss-v1.10.0-win64.zip"> &gt;&gt;去网盘下载            </a></p><p>解压,我的版本里已经预置了一下内容,可以修改,如果是用原版的同学请继续.</p><p>在 <code>shadowsocks-libqss.exe</code> 同目录的文件夹下新建 <code>config.json</code> ,里面填上:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span>  </span><br><span class="line">    <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span><span class="string">&quot;0.0.0.0&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="attr">&quot;server_port&quot;</span><span class="punctuation">:</span><span class="number">8023</span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="attr">&quot;local_address&quot;</span><span class="punctuation">:</span><span class="string">&quot;127.0.0.1&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="attr">&quot;local_port&quot;</span><span class="punctuation">:</span><span class="number">1080</span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span><span class="string">&quot;password&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="attr">&quot;timeout&quot;</span><span class="punctuation">:</span><span class="number">600</span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="attr">&quot;method&quot;</span><span class="punctuation">:</span><span class="string">&quot;aes-256-cfb&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="attr">&quot;http_proxy&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span>  </span><br><span class="line">    <span class="attr">&quot;auth&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span>  </span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li><code>server</code> 表示监听的ip, <code>0.0.0.0</code> 表示监听来自局域网的ip,保持默认即可</li><li><code>server_port</code> 表示监听的端口,随意,只要不被占用即可</li><li><code>password</code> 密码</li><li><code>method</code> 加密方式.</li></ul><p>上面的配置看情况修改,我这里就这样.</p><p>运行,出现个黑色框框碍眼,还报错?</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-132.png" alt="upload successful"></p><p>不要紧,因为没有指定配置,在底下新建 <code>Start.vbs</code> 里面填上：</p><figure class="highlight vbs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Set</span> ws = <span class="built_in">CreateObject</span>(<span class="string">&quot;Wscript.Shell&quot;</span>)</span><br><span class="line">ws.run <span class="string">&quot;shadowsocks-libqss.exe  -c config.json -S&quot;</span>,vbhide </span><br></pre></td></tr></table></figure><p>双击解决,隐藏运行.</p><h2 id="开机自启"><a href="#开机自启" class="headerlink" title="开机自启"></a>开机自启</h2><p>难道每天早上我都要手动去运行?</p><p>不可能.</p><p>所以要设置开机自启动.</p><p>注册表 <code>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run</code>,里头新建一个字符串值,名字随意,值为vbs的绝对路径.</p><h1 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h1><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-133.png" alt="upload successful"></p><p>添加浏览器代理.</p><p>于是出现封面如此不可思议的景象.</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-134.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-188.png" alt="upload successful"></p><p>完成!</p><h1 id="后言"><a href="#后言" class="headerlink" title="后言"></a>后言</h1><p>实际上原理是这样的:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-135.png" alt="upload successful"></p><p>另外,不知道是不是楼下360杀毒的锅,http链接经常不能跳转成https,导致一些网页没办法好好运行,emmm,加个HTTPSEverywhere解决问题。</p><p><a class="btn" href="https://pan.cyfan.top/%E6%8F%92%E4%BB%B6/crx/HTTPS_Everywhere.7z"> &gt;&gt;去私有云下载HTTPSEverywhere            </a></p><p>因为代理在局域网内，速度损耗和延迟基本不计入在内，也就是全天挂在这里都没问题，想要全局笼罩建议加个Proxifier</p><p><a class="btn" href="https://drive.cyfan.top/PHPnow-1.5.6.zip"> &gt;&gt;去网盘下载Proxifier            </a></p>]]></content>
      
      
      <categories>
          
          <category> 好方法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 奇淫巧技 </tag>
            
            <tag> 网络 </tag>
            
            <tag> ipv6 </tag>
            
            <tag> 代理 </tag>
            
            <tag> SS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>愿逝者安息，愿生者坚强</title>
      <link href="/posts/63180028/"/>
      <url>/posts/63180028/</url>
      
        <content type="html"><![CDATA[<p class="note note-primary">博客首页、项目首页将在2020年4月4日10：00至2020年4月5日10：00保持灰化界面，此篇博文永久保持灰化。</p><p>2020年的清明，与众不同，在我的记忆里，清明，永远是伴随着那蒙蒙小雨和四处弥漫的寒意。今天，2020年地清明，却意外的是晴天，这很令人意外，但也似乎表达了什么。</p><p>可能，老天的眼泪，早已哭干吧…</p><p>今年的清明比往年更添一抹特殊的意义:</p><p>一个不明源头的病毒使本应蒙上喜庆色彩的华夏大地变得毫无生机</p><p>一群可敬可爱的人儿用自己的血肉之躯筑起了护我们平安的防线</p><p>是他们日夜坚守勇敢逆行</p><p>是他们治病救人坚守一线</p><p>的确，没有什么岁月静好，只是有人在替我们负重前行罢了。</p><p>花开疫散并非一瞬间</p><p>日夜奋战才换来一座座城市恢复脉搏</p><p>为表达全国各族人民对抗击新冠肺炎疫情斗争牺牲烈士和逝世同胞的深切哀悼，国务院昨天（4月3日）发布公告，决定2020年4月4日举行全国性哀悼活动。在此期间，全国和驻外使领馆下半旗志哀，全国停止公共娱乐活动。4月4日10时起，全国人民默哀3分钟，汽车、火车、舰船鸣笛，防空警报鸣响。</p><p>下半旗….恍惚间除了2019年7月29日就是2015年,这已经很早以前了,下半旗本是领导人死后的待遇;这些疫情战士,用生命给我们换来了一片净土,自己却没能躺回去享受,毫不客气地说,他们就是这个新时代最开始的领导人,带领我们拼过最艰难的时期,下半旗,毫不为过!</p><p>可能没有他们,中国早已生灵涂炭.</p><p>感谢你们，替我们守住了这个春天</p><p>愿逝者安息，愿生者坚强</p><p>静默,悼念.</p><style>html{filter: grayscale(100%);-webkit-filter: grayscale(100%);-moz-filter: grayscale(100%);-ms-filter: grayscale(100%);-o-filter: grayscale(100%);filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);}</style>]]></content>
      
      
      <categories>
          
          <category> 随心记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 悼念 </tag>
            
            <tag> 疫情 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AV?BV!</title>
      <link href="/posts/b94b19d4/"/>
      <url>/posts/b94b19d4/</url>
      
        <content type="html"><![CDATA[<h1 id=""><a href="#" class="headerlink" title=":("></a>:(</h1><p>Bilibili在2020/3/23公布要将av号全面换成BV号：<a href="https://www.bilibili.com/read/cv5167957">公告地址</a></p><blockquote><p>尊敬的各位用户：<br>一直以来，AV号都是B站视频稿件的重要标识，在视频的传播和分享中起到了关键作用。<br>为了保护稿件信息安全，容纳更多投稿，维护UP主的权益，自2020年3月23日起，AV号将全面升级为BV号。与纯数字的AV号不同，BV号是一段由数字和大小写字母组成的字符串，经过算法自动生成。未来将统一使用BV号作为稿件标识。<br>同时，2020年3月23日前生成AV号的相关功能保持不变。例如，已分享的稿件链接，AV号搜索，以及动态、评论、私信中的高亮跳转。<br>此外，用户在复制BV号或者包含BV号的链接后，打开B站APP的同时会自动跳转至该视频。<br>更多详细规则说明请见链接FAQ：<a href="https://www.bilibili.com/blackboard/activity-BV-PC.html">https://www.bilibili.com/blackboard/activity-BV-PC.html</a><br>BV号将继续见证UP主们在这个舞台上创造无限的可能。陪伴大家的每一次灵感迸发，为每一个创意而干杯喝彩！</p></blockquote><p>这就意味着AV号将永远没落于网络世界的角落,50年后b站的AV号将成为这个年代所有人的回忆.</p><p>我当时就觉得这是扯淡,本来AV号弄的好好的为什么又要换成BV号??</p><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><h2 id="AV号"><a href="#AV号" class="headerlink" title="AV号"></a>AV号</h2><p><code>AV</code> 指的是AcgVideo（动漫视频）<span class="heimu">而不是AdultVideo</span> ，目的是为了和niconico的 <code>sm</code> 号（SmileVideo）相对应。</p><p>通常AV号是按顺序的，比如前一个视频是AV10491，下一个视频如果审核通过了那一定是AV10492，绝对不可能是AV10493或AV17001，即使被删了那也是永远占了这个坑，想填都填不了， <del>排除后台操作可能性</del></p><p>AV号已经持续了将近12年的时间，具有了非常悠久的历史，b站老用户永远都不会忘记的数字。</p><h2 id="BV号"><a href="#BV号" class="headerlink" title="BV号"></a>BV号</h2><p>BV：“BilibiliVideo”，感觉和油管接轨了一样，也是一堆看似乱码的玩意</p><p>反人类设计：10位固定设计，字母数字混合，最难受的是还要<strong>区分大小写</strong>，这让线下传播视频就变得异常难受啊！！！</p><p>区分大小写意味着如果你忘记按<kbd>CapsLock</kbd>打bv,那么你就会进入一个全新世界<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/huaji.png"></p><h1 id="坏处"><a href="#坏处" class="headerlink" title="坏处"></a>坏处</h1><h2 id="难记难打"><a href="#难记难打" class="headerlink" title="难记难打"></a>难记难打</h2><p>AV号很简洁,稿件是 <code>av</code> 前缀 加 若干位数字，一般人大都是八到十位，当然一些陈年老梗： <code>av17001</code> <img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/huaji.png">、<code>av10492</code> <img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/yhuaji.png">、<code>av10388</code> <img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/zhuaji.png"> 往往就更加简洁了。</p><h4 id="以前"><a href="#以前" class="headerlink" title="以前"></a>以前</h4><p>A: 看看这个沙雕视频，香蕉哥，哈哈哈哈哈哈哈，AV号10198539</p><p>B: 1…噼里啪啦…9…噼里啪啦…3…噼里啪啦</p><p>B: 噗，哈哈哈哈哈哈哈，笑死我了</p><p>A&amp;B： 哈哈哈哈哈哈</p><h4 id="结果现在"><a href="#结果现在" class="headerlink" title="结果现在"></a>结果现在</h4><p>A: 看看这个沙雕视频，香蕉哥，哈哈哈哈哈哈哈，BV号是17小写x411大写S7小写d大写Y</p><p>B: 什么沙雕玩意，那么难打，懒得看。</p><h2 id="老是有关键字"><a href="#老是有关键字" class="headerlink" title="老是有关键字"></a>老是有关键字</h2><p>比如说av57336629（这个是虚拟的），转成BV是BV17x411R18Y，然后因为有个R18被禁了….</p><p>[当时心情真的无语了]</p><h2 id="换汤不换药"><a href="#换汤不换药" class="headerlink" title="换汤不换药"></a>换汤不换药</h2><p>AV与BV其实是<strong>互通的</strong>,只是算法极其nb,base58(这辈子就听说过base64)加一堆高大上算法,结果还是可逆的,也就是说AV号实际上永远保留下来,但是永远从外部转向内部了.</p><h2 id="分享视频必须进入b站复制bv号或者直接告知标题。"><a href="#分享视频必须进入b站复制bv号或者直接告知标题。" class="headerlink" title="分享视频必须进入b站复制bv号或者直接告知标题。"></a>分享视频必须进入b站复制bv号或者直接告知标题。</h2><p>因为记不住。</p><h2 id="著名的视频早晚会淡出视野。"><a href="#著名的视频早晚会淡出视野。" class="headerlink" title="著名的视频早晚会淡出视野。"></a>著名的视频早晚会淡出视野。</h2><p>因为记不住。</p><h2 id="新用户则会对一些老视频的梗一头雾水。"><a href="#新用户则会对一些老视频的梗一头雾水。" class="headerlink" title="新用户则会对一些老视频的梗一头雾水。"></a>新用户则会对一些老视频的梗一头雾水。</h2><p>因为他们不知道,AV已经成为历史。</p><h2 id="邻居问题"><a href="#邻居问题" class="headerlink" title="邻居问题"></a>邻居问题</h2><p>很多up主都有这样的经历,将自己视频的av号加个1或减个1,看看邻居的视频怎么样.对于自己稿件通过审核的时间也把握的清楚</p><h2 id="搞颜色"><a href="#搞颜色" class="headerlink" title="搞颜色"></a>搞颜色</h2><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-184.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-185.png" alt="upload successful"></p><p>注：BlueVideo是美国黄片的俚语</p><h1 id="当然也有唯一好处"><a href="#当然也有唯一好处" class="headerlink" title="当然也有唯一好处"></a>当然也有唯一好处</h1><p>孩子:妈妈过来看看B站上的AV!</p><p><strong>啪!</strong></p><p>妈妈:小小年纪不学好, <del>和隔壁老王一样</del> 看AV!</p><hr><p>孩子:妈妈过来看看B站上的BV!</p><p>妈妈:欸,宝贝,来了~~~~</p><h1 id="究竟是为什么-让B站决定要换BV呢"><a href="#究竟是为什么-让B站决定要换BV呢" class="headerlink" title="究竟是为什么,让B站决定要换BV呢?"></a>究竟是为什么,让B站决定要换BV呢?</h1><p>网上众说纷纭,不外乎关于这几点:</p><h2 id="AV号有限-装不下了"><a href="#AV号有限-装不下了" class="headerlink" title="AV号有限,装不下了"></a>AV号有限,装不下了</h2><p>目前我觉得可能性不大,一般性int值能达到2147483647,全中国一人发个视频也勉强装得下,而且最主要的AV号和BV号是互通的,以BV1874111715为例</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-168.png" alt="upload successful"></p><p>换成av号av99307985</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-169.png" alt="upload successful"></p><p>这说明,av只是从明面转向暗面,实际还是存在的.</p><p>当然,我也不清楚av什么时候会永远被清除,不过我可以肯定,av在最近10年估计都不会消失,因为B站也不想让以前网上流传的b站av链接点进去变成404.</p><h2 id="反爬虫"><a href="#反爬虫" class="headerlink" title="反爬虫"></a>反爬虫</h2><p>反百度爬虫这种沙雕问题不在讨论范围内,b站估计反的是从av1到av100000000获取所有标题简介之类的爬虫.</p><p>可问题是,谁会那么蛋疼去遍历10万个视频的简介,大多数爬虫也就是遍历热搜榜的视频,这些换不换都是一样的啊.</p><h2 id="保护安全和利益"><a href="#保护安全和利益" class="headerlink" title="保护安全和利益"></a>保护安全和利益</h2><p>?????我觉得我语文阅读理解有点小问题,没读懂,有大神在评论区指导一下吗?</p><h2 id="宣扬品牌文化"><a href="#宣扬品牌文化" class="headerlink" title="宣扬品牌文化"></a>宣扬品牌文化</h2><p>其实这个解释有一定道理,但我觉得有点不必要,毕竟av号一贴别人就屁颠屁颠去b站粘贴了,换成bv还导致复制的位数更大了</p><h2 id="模仿油管"><a href="#模仿油管" class="headerlink" title="模仿油管"></a>模仿油管</h2><p>虽然经常上油管鬼混,但我非常厌恶这种行为,av号是b站独有的文化之一,说难听点,现在随意跟youtube屁股,我觉得b站有点变了味.</p><p>常用油管的朋友应该能看到，油管内部链接都是直接复制的链接，而不是一串神秘代码，这使传播视频的同时，强制向所有观众传播了油管的品牌。同样常用/s/xxx神秘代码+密码的朋友，也知道百度网盘、百度盘、百度云是一个多么不清晰的品牌概念。</p><p>以前是AV加一串数字，很是没牌面。</p><p>现在是BV加一串字母数字，看起来像一串密码，不容易记住，跟国际接轨，很有牌面。</p><h2 id="故意避免线下传播"><a href="#故意避免线下传播" class="headerlink" title="故意避免线下传播"></a>故意避免线下传播</h2><p>没什么,五星好评,这个结论我能送上天</p><h2 id="名字难听"><a href="#名字难听" class="headerlink" title="名字难听"></a>名字难听</h2><p>…好像确实是这样的</p><h1 id="转换"><a href="#转换" class="headerlink" title="转换"></a>转换</h1><p>之前提了很多次,av与bv是互通的,接下来随便说几个avbv互相转换的方法,估计有效期能很长.</p><h2 id="原生自带转换"><a href="#原生自带转换" class="headerlink" title="原生自带转换"></a>原生自带转换</h2><p>以BV1874111715</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-168.png" alt="upload successful"></p><p>ChromeF12直接开挂开发者调试,选择 <code>Console</code> 控制台,输入aid</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-170.png" alt="upload successful"></p><p>返回一串数字,就是av号</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-171.png" alt="upload successful"></p><p>同理,对于AV视频,可以输入bvid获取那 <del>F**king</del> BV</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-172.png" alt="upload successful"></p><h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><ol><li>手机无法使用,当然vConsole那就不再是原生浏览器原汁原味了.</li><li>对于一些已删除和不存在(这两个是有区别的)的视频无法正常返回.</li></ol><h2 id="官方接口"><a href="#官方接口" class="headerlink" title="官方接口"></a>官方接口</h2><h3 id="AV-to-BV"><a href="#AV-to-BV" class="headerlink" title="AV to BV"></a>AV to BV</h3><p>接口: <code>https://api.bilibili.com/x/web-interface/archive/stat?aid=</code></p><p>后面跟av号码,比如99307985,输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://api.bilibili.com/x/web-interface/archive/stat?aid=99307985</span><br></pre></td></tr></table></figure><p>返回json格式:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;message&quot;</span><span class="punctuation">:</span><span class="string">&quot;0&quot;</span><span class="punctuation">,</span><span class="attr">&quot;ttl&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span><span class="attr">&quot;data&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;aid&quot;</span><span class="punctuation">:</span><span class="number">99307985</span><span class="punctuation">,</span><span class="attr">&quot;bvid&quot;</span><span class="punctuation">:</span><span class="string">&quot;BV1874111715&quot;</span><span class="punctuation">,</span><span class="attr">&quot;view&quot;</span><span class="punctuation">:</span><span class="number">59702</span><span class="punctuation">,</span><span class="attr">&quot;danmaku&quot;</span><span class="punctuation">:</span><span class="number">524</span><span class="punctuation">,</span><span class="attr">&quot;reply&quot;</span><span class="punctuation">:</span><span class="number">1291</span><span class="punctuation">,</span><span class="attr">&quot;favorite&quot;</span><span class="punctuation">:</span><span class="number">1550</span><span class="punctuation">,</span><span class="attr">&quot;coin&quot;</span><span class="punctuation">:</span><span class="number">649</span><span class="punctuation">,</span><span class="attr">&quot;share&quot;</span><span class="punctuation">:</span><span class="number">134</span><span class="punctuation">,</span><span class="attr">&quot;like&quot;</span><span class="punctuation">:</span><span class="number">5068</span><span class="punctuation">,</span><span class="attr">&quot;now_rank&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;his_rank&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;no_reprint&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span><span class="attr">&quot;copyright&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span><span class="attr">&quot;argue_msg&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;evaluation&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>其中bvid即为bv号.</p><h3 id="BV-to-AV"><a href="#BV-to-AV" class="headerlink" title="BV to AV"></a>BV to AV</h3><p>接口: <code>https://api.bilibili.com/x/web-interface/archive/stat?bvid=</code></p><p>后面跟bv号码,比如1874111715,输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://api.bilibili.com/x/web-interface/archive/stat?bvid=1874111715</span><br></pre></td></tr></table></figure><p>返回json格式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;code&quot;:0,&quot;message&quot;:&quot;0&quot;,&quot;ttl&quot;:1,&quot;data&quot;:&#123;&quot;aid&quot;:99307985,&quot;bvid&quot;:&quot;BV1874111715&quot;,&quot;view&quot;:59704,&quot;danmaku&quot;:524,&quot;reply&quot;:1291,&quot;favorite&quot;:1551,&quot;coin&quot;:649,&quot;share&quot;:134,&quot;like&quot;:5068,&quot;now_rank&quot;:0,&quot;his_rank&quot;:0,&quot;no_reprint&quot;:1,&quot;copyright&quot;:1,&quot;argue_msg&quot;:&quot;&quot;,&quot;evaluation&quot;:&quot;&quot;&#125;&#125;</span><br></pre></td></tr></table></figure><p>其中aid即为av号</p><h3 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h3><p>对于一些特♂殊♂の♀视♂频,av10492,则返回</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="number">-403</span><span class="punctuation">,</span><span class="attr">&quot;message&quot;</span><span class="punctuation">:</span><span class="string">&quot;访问权限不足&quot;</span><span class="punctuation">,</span><span class="attr">&quot;ttl&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span><span class="attr">&quot;data&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="直接数据库"><a href="#直接数据库" class="headerlink" title="直接数据库"></a>直接数据库</h2><p>这个，我真的服了，方法有点傻，但我还是佩服，大家可以去知乎上看看这位大仙，在这里就不贴链接了。</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p>知乎<a href="https://www.zhihu.com/question/381784377/answer/1099055405">mcfx的回答</a>,欸我是真的服了,下面直接照搬.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">table=<span class="string">&#x27;fZodR9XQDSUm21yCkr6zBqiveYah8bt4xsWpHnJE7jL5VG3guMTKNPAwcF&#x27;</span></span><br><span class="line">tr=&#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">58</span>):</span><br><span class="line">tr[table[i]]=i</span><br><span class="line">s=[<span class="number">11</span>,<span class="number">10</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">6</span>]</span><br><span class="line">xor=<span class="number">177451812</span></span><br><span class="line">add=<span class="number">8728348608</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dec</span>(<span class="params">x</span>):</span><br><span class="line">r=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>):</span><br><span class="line">r+=tr[x[s[i]]]*<span class="number">58</span>**i</span><br><span class="line"><span class="keyword">return</span> (r-add)^xor</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">enc</span>(<span class="params">x</span>):</span><br><span class="line">x=(x^xor)+add</span><br><span class="line">r=<span class="built_in">list</span>(<span class="string">&#x27;BV1  4 1 7  &#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>):</span><br><span class="line">r[s[i]]=table[x//<span class="number">58</span>**i%<span class="number">58</span>]</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(r)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(dec(<span class="string">&#x27;BV17x411w7KC&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(dec(<span class="string">&#x27;BV1Q541167Qg&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(dec(<span class="string">&#x27;BV1mK4y1C7Bz&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(enc(<span class="number">170001</span>))</span><br><span class="line"><span class="built_in">print</span>(enc(<span class="number">455017605</span>))</span><br><span class="line"><span class="built_in">print</span>(enc(<span class="number">882584971</span>))</span><br></pre></td></tr></table></figure><p>互相转换脚本，如果算法没猜错，可以保证在 av 号 <img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-183.png" alt="upload successful"> 时正确，同时应该在<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-174.png" alt="upload successful"> 时也是正确的。</p><p>此代码以 WTFPL 开源。<br>UPD：之前的代码中，所有数位都被用到是乱凑的，实际上并不需要，目前只要低 6 位就足够了。<br>（更大的 av 号需要 64 位整数存储，但是 b 站现在使用的应该还是 32 位整数，所以应该还要很久）<br>发现的方法：首先从各种渠道的信息来看，应该是 base58 编码的。设 x 是一个钦定的 av 号，查询<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-175.png" alt="upload successful">这些 av 号对应的 bv 号，发现 bv 号的第 12、11、4、9、5 位分别会变化。所以猜测这些是 58 进制下的相应位。但是直接 base58 是不行的，所以猜测异或了一个大数，并且 base58 的字符表可能打乱了。经过实验，bv 号最低位相同的数，av 号的奇偶性相同，这一定程度上印证了之前的猜想。接下来找了一些 av 号 x，满足 x 和 x+1 对应 bv 号的第 11 位不同。设异或的数为 X，那么<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-176.png" alt="upload successful">（<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-177.png" alt="upload successful">表示异或）。由于 av 号（除了最新的少量视频）最多只有 27 bits，所以可以设<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-178.png" alt="upload successful">。然后可以发现X只和<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-179.png" alt="upload successful">和b有关，那么可以枚举这两个值（一共<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-180.png" alt="upload successful">种情况）然后使用上面的式子检查，就能得到若干可能的<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-179.png" alt="upload successful">和b。这里我得到的可能值如下：（左边是<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-179.png" alt="upload successful">，右边是b）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">22 90983642</span><br><span class="line">22 90983643</span><br><span class="line">50 43234084</span><br><span class="line">50 43234085</span><br></pre></td></tr></table></figure><p>有奇有偶是因为异或 1 之后也能找到轮换表。而<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-181.png" alt="upload successful">则使得模 58 的余数刚好变成<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-182.png" alt="upload successful">减它。我取了 b=43234084，然后处理最低位，可以得到一个字符表，即 fZodR9XQDSUm21yCkr6zBqiveYah8bt4xsWpHnJE7jL5VG3guMTKNPAwcF。对于更高位，实际上还需要知道<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-179.png" alt="upload successful">^2,<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-179.png" alt="upload successful">^3这些值也可以 枚举 58 次得到，最后我得到的值是<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-179.png" alt="upload successful">^4=1749968。这时我发现，每一位的字符表是相同的（实际上只对 b=43234084 是这样的），然后再微调一下参数（上面代码中的两个 magic number 就相当于这里的a,b），最后处理了一下<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-183.png" alt="upload successful">的情况就得到了这份代码。</p><p>讲句大实话,我根本没看懂,不过看起来好牛逼的样子.</p><h2 id="在线工具转换"><a href="#在线工具转换" class="headerlink" title="在线工具转换"></a>在线工具转换</h2><p>既然python能做到,那么js也能做到!</p><p>工具很多,知乎上一搜一大把,这里懒得贴了.</p><h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><p><a href="https://greasyfork.org/zh-CN/scripts/398526-give-me-av-not-bv">Give me AV not BV</a></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-186.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-187.png" alt="upload successful"></p><p>作者估计是个暴躁老哥,骂人骂的挺顺口的,不过脚本不错,脚本检测到地址栏的BV号会自动无刷新替换为AV号，同时会在稿件页标题下方显示原始av号。.</p><p>安装前前请安装Tampermonkey或暴力猴脚本宿主.</p><h1 id="后言"><a href="#后言" class="headerlink" title="后言"></a>后言</h1><p>也许很多人认为这没什么大不了的,不要小题大做,没意思,那你还不是照样要看b站吗?</p><p><span class="heimu">我王境泽就是饿死，死外边，从这里跳下去，不会吃你们一点东西!</span><span class="heimu"> <del>欸,真香</del></span></p><p>对啊,可是这样就给我们b站的老用户一种错觉(其实我是2017入坑的),认为b站没有重视过老用户的感受,似乎就没了这种情怀.</p><p>AV转BV,似乎暗示着B站已经逐渐去ACG化了,这很难令人不落泪,还记得当时b站发的公告吗,大用户与普通用户无异,b站可能会倒闭,但不会变味,b站永远不会添加广告.</p><p>这几条与其它氪金为主的中短视频平台的差异广告,成为了绝大多数用户入坑的原因.</p><p>现在转头看来,大用户似乎有点越权,b站可能会在我们这辈子人的孙子的孙子的孙子死后倒闭,b站的味道依旧真香,但是以前和现在总感觉多了一些孜然味,原来的味道还有,但没有那么重了.唯一不变的是没有添加添加广告,这是我依旧占坑不爬出来的原因.</p><p>AV号历史很悠久,成为b站用户必不可缺的玩意,av梗也很多,很多up辛辛苦苦等在电脑前排个号av号,如今已成为泡影;像av10492,av10388,av17001这些老梗在未来就变成无人能理解的事物,有趣而神秘.</p><p>如果BV是高管随随便便提出来没有考虑过用户的体验而是盲目跟油管风的产物,那我可以毫不犹豫骂这个东西垃圾反人类,甚至很担心从前的niconico将成为b站的翻版,希望这是也只是担心.</p><p>从此,AV号将成为我们这辈子的纪念,50年后提起AV号就变得像如今提起抗日战争,听起来刺激又有意思,但不亲身体会永远没有这种失落感.</p>]]></content>
      
      
      <categories>
          
          <category> 随心记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Bilibili </tag>
            
            <tag> AV </tag>
            
            <tag> BV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHPnow-Windows下最轻巧的PHP运行软件，没有之一</title>
      <link href="/posts/fb03447c/"/>
      <url>/posts/fb03447c/</url>
      
        <content type="html"><![CDATA[<p>虽然作为一个静态博客的博主，但是还是有调试PHP的需求，<span class="heimu">（搭建静态是因为静态博客省钱）</span>，之前用过PHPStudy，不得不说功能真的非常强大，<del>但我很多功能都不需要</del> ，而且相当吃内存，我一个笔记本主要是追求轻巧，PHPStudy一个安装包将近50MB。最头疼的是，我的80端口已经被系统监听了，无法终结，PHPStudy即使改了端口也没用，导致MySQL服务刚启动就停止的奇葩现象，害的我一年都没有好好调试过PHP。</p><p>至于这个安装包哪里来的，讲个笑话，在植物大战僵尸贴吧个人网址flash试玩版里提到：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-143.png" alt="upload successful"></p><p>然后我就把PHPnow提取出来了，一个只有20MB的PHP运行包。</p><p><a class="btn" href="https://drive.cyfan.top/PHPnow-1.5.6.zip"> &gt;&gt;去网盘下载            </a></p><p> <strong>请注意，PHPnow已经终止开发，最后一版的更新时间是2012-02-03</strong> ，默认官网是<a href="http://phpnow.org">http://phpnow.org</a>,现在已经重定向至<a href="http://servkit.org/?from=phpnow.org">http://servkit.org/?from=phpnow.org</a>,最高PHP是5.2.14,最高MySQL是5.1.50,框架只有Apache,最高2.2.16,并且与Windows10存在一定的bug,请仔细阅读下面的文档!</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-152.png" alt="upload successful"></p><p>解压：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-153.png" alt="upload successful"></p><p>有个7z.exe说明这是个解压Package.7z包，</p><p>Win10因为有UAC，直接双击Setup.cmd有问题，右键管理员也不行，要手动启动管理员命令行，cd到相应文件夹，输入 <code>Setup</code> 安装！否则会安装失败！</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-154.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-155.png" alt="upload successful"></p><p>输入22</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-156.png" alt="upload successful"></p><p>输入51</p><p>接着是一番解压，不要管。</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-157.png" alt="upload successful"></p><p>输入y</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-158.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-159.png" alt="upload successful"></p><p>Windows10家庭版不知道为什么80端口被禁用了，所以只能选1，我这里端口为4001</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-160.png" alt="upload successful"></p><p>安装，设置root密码</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-161.png" alt="upload successful"></p><p>任意键后，出现以下</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-162.png" alt="upload successful"></p><p>安装完成！</p><h1 id="控制面板"><a href="#控制面板" class="headerlink" title="控制面板"></a>控制面板</h1><p>安装完成后输入 <code>pncp</code> ,进入管理界面</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-163.png" alt="upload successful"></p><p>下次启动输入20,关闭输入30,其它的具体看情况</p><h1 id="放入"><a href="#放入" class="headerlink" title="放入"></a>放入</h1><p>将php放入 <code>htdocs</code> 即可!</p><h1 id="测试Typecho"><a href="#测试Typecho" class="headerlink" title="测试Typecho"></a>测试Typecho</h1><p>由于版本真的很古老,安装Typecho之类的请安装0.9,安装最新版1.*会导致错误!</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-164.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-165.png" alt="upload successful"></p><p>一路确认，数据库填写test，安装完成</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-166.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-167.png" alt="upload successful"></p><p>毕竟是古老的php,至少笔记本跑起来真的毫无压力,作为测试环境也完全足够了.</p>]]></content>
      
      
      <categories>
          
          <category> 繡软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PHP </tag>
            
            <tag> Windows </tag>
            
            <tag> 精简 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>讲讲2020/3/26Github遭中间人攻击事件</title>
      <link href="/posts/63c84fc7/"/>
      <url>/posts/63c84fc7/</url>
      
        <content type="html"><![CDATA[<p><del><strong>原标题：世界上最大的男同性恋GayHub遭到443端口劫持，是人性的毁灭还是道德的扭曲？</strong></del></p><p>本博文上半篇转载【 <a href="https://blog.qwqdanchun.cn/archives/807">https://blog.qwqdanchun.cn/archives/807</a> 】的博文，转载如下：</p><h2 id="—"><a href="#—" class="headerlink" title="—-"></a>—-</h2><h1 id="转载"><a href="#转载" class="headerlink" title="转载"></a>转载</h1><h2 id="GitHub今晨遭遇大规模中间人攻击"><a href="#GitHub今晨遭遇大规模中间人攻击" class="headerlink" title="GitHub今晨遭遇大规模中间人攻击"></a>GitHub今晨遭遇大规模中间人攻击</h2><p>昨晚6，7点左右，国内访问所有的 github pages 页面开启 HTTPS 的话证书都变成下面这个</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-136.png" alt="upload successful"></p><p>今晨，github.com也遭受了相同的中间人攻击</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-137.png" alt="upload successful"></p><p>谷歌浏览器提示不安全</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-138.png" alt="upload successful"></p><p>证书与昨晚的相同<br>疑似GitHub等网站遭到了大规模中间人攻击 。</p><p>中间人攻击（英语：Man-in-the-middle attack，缩写：MITM）在密码学和计算机安全领域中是指攻击者与通讯的两端分别创建独立的联系，并交换其所收到的数据，使通讯的两端认为他们正在通过一个私密的连接与对方直接对话，但事实上整个会话都被攻击者完全控制。在中间人攻击中，攻击者可以拦截通讯双方的通话并插入新的内容。在许多情况下这是很简单的（例如，在一个未加密的Wi-Fi 无线接入点的接受范围内的中间人攻击者，可以将自己作为一个中间人插入这个网络）。</p><p>一个中间人攻击能成功的前提条件是攻击者能将自己伪装成每一个参与会话的终端，并且不被其他终端识破。中间人攻击是一个（缺乏）相互认证的攻击。大多数的加密协议都专门加入了一些特殊的认证方法以阻止中间人攻击。例如，SSL协议可以验证参与通讯的一方或双方使用的证书是否是由权威的受信任的数字证书认证机构颁发，并且能执行双向身份认证。</p><p>简而言之，所谓的中间人攻击就是通过拦截正常的网络通信数据，并进行数据篡改和嗅探，而通信的双方却毫不知情。</p><p>奇特的是，可以实现此攻击需要劫持运营商或者dns才有可能实现，但是这种公然留qq邮箱的做法就十分迷惑</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-139.png" alt="upload successful"></p><p>本账号疑似真实姓名：张勇 ，黑龙江人？？？<br>经搜索，该用户曾在 <a href="https://blog.csdn.net/yhyhyhy/article/details/51248497#comments">https://blog.csdn.net/yhyhyhy/article/details/51248497#comments</a> 帖子下评论，csdn账户： <a href="https://me.csdn.net/blog/qq_29158525">https://me.csdn.net/blog/qq_29158525</a> ；引出qq： 29158525</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-140.png" alt="upload successful"></p><p>本账号疑似真实姓名：周言諭 ，台北人？？？</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-141.png" alt="upload successful"></p><p>本账号疑似真实姓名： 谢邵 ，河南人？？？<br>据不可靠消息来源： <a href="https://www.hottg.com/liyuans/p31809.html">https://www.hottg.com/liyuans/p31809.html</a> 此邮箱可能归属于某三位数公司？？？</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-142.png" alt="upload successful"></p><p>另有v2ex老哥声称之前就看到过这个邮箱劫持其他域名</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-144.png" alt="upload successful"></p><p>证书生成疑似参照此文章：<a href="https://www.lagou.com/lgeduarticle/52972.html">https://www.lagou.com/lgeduarticle/52972.html</a>（是否参照存疑，不过原理确实相同，仅加密算法有所更改）</p><p>曾在贴吧提问： <a href="https://tieba.baidu.com/p/400626957?red_tag=3454236974">https://tieba.baidu.com/p/400626957?red_tag=3454236974</a></p><p>从论坛其他人评论可以得到其qq群关系：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">群号:4823518 昵称:张勇</span><br><span class="line">群名:建三江一中同学</span><br><span class="line">群介绍:三江一中89级92届同学,,本届的加入,加入必须写名字!谢</span><br><span class="line">群号:66136842 昵称:张勇</span><br><span class="line">群名:亲友群</span><br><span class="line">群介绍:沟通</span><br><span class="line">群号:69386774 昵称:帅哥5号  张勇</span><br><span class="line">群名:帅哥靓女对对碰</span><br><span class="line">群介绍:命运负责洗牌，但是玩牌的是我们自己！</span><br><span class="line">群号:72876767 昵称:张勇</span><br><span class="line">群号:10456040 昵称:张勇</span><br><span class="line">群名:synjones</span><br><span class="line">群介绍:http://www.synjones.com</span><br><span class="line">群号:13602636 昵称:灵山-D3</span><br><span class="line">群名:★城东新居—D区★</span><br><span class="line">群介绍:哈尔滨城东新居，群策群力，共建美好家园。（有好的主张，可以发到群论坛）</span><br><span class="line">群号:15116517 昵称:灵山-D3</span><br><span class="line">群名:城东新居</span><br><span class="line">群介绍:小区业主维权的专家，溪畔家园业主委员会的李主任，联系电话是13069708074。大家回家</span><br><span class="line">群号:15376336 昵称:心即灵山</span><br><span class="line">群名:金龙卡服务群</span><br><span class="line">群介绍:内部专用</span><br><span class="line">群号:32068923 昵称:心即灵山</span><br><span class="line">群名:城东新居高级群</span><br><span class="line">群介绍:希望大家都能为本群和小区做一些贡献。都想一想办法，怎样能解决我们小区现存的问题。</span><br><span class="line">群号:19466772 昵称:我想回到以前</span><br><span class="line">群名:张兴庄吧</span><br><span class="line">群号:52260534 昵称:我想回到以前</span><br><span class="line">群名:巧</span><br><span class="line">群号:1363550 昵称:(り Remote、</span><br><span class="line">群名:都四班的</span><br><span class="line">群号:4250637 昵称:(り Remote、</span><br><span class="line">群名:QQ群</span><br><span class="line">群介绍:http://www.167cq.com/</span><br><span class="line">群号:70152084 昵称:谢绍。</span><br><span class="line">群名:国专08三班</span><br><span class="line">群介绍:国际经济与贸易专科0803班</span><br><span class="line">群号:84351791 昵称:帅气G★Remote</span><br><span class="line">群名:荣华09汽三</span><br><span class="line">群介绍:-</span><br><span class="line">群号:92050039 昵称:(り Remote、</span><br><span class="line">群名:ｖ1p&#123;會員&#125;倲.总群</span><br><span class="line">群号:92118193 昵称:(り Remote、</span><br><span class="line">群名:高楼庄⒐⑥界黄金一班</span><br><span class="line">群号:92637291 昵称:(り Remote、</span><br><span class="line">群名:小伙伴</span><br><span class="line">群号:95128769 昵称:(り Remote、</span><br><span class="line">群名:藝术学院体育部</span><br><span class="line">群介绍:发掘、培养体育特长学生；做好对班级的考核工作；协助其他部门开展工作。</span><br><span class="line">群号:6888129 昵称:(り Remote、</span><br><span class="line">群号:9496270 昵称:(り Remote、</span><br><span class="line">群名:21中</span><br><span class="line">群号:11604443 昵称:収惢養鮏.┊</span><br><span class="line">群名:安阳铁路中学高06</span><br><span class="line">群介绍:班级群外人勿进</span><br><span class="line">群号:22739863 昵称:(り Remote、</span><br><span class="line">群名:华□豫□学□院。</span><br><span class="line">群号:29121641 昵称:(り Remote、</span><br><span class="line">群名:乀闭丄眼﹋⒑指紧筘</span><br><span class="line">群号:30215035 昵称:(り Remote、</span><br><span class="line">群名:看群公告！好消息！</span><br><span class="line">群介绍:免费拿話費兩百块!群里的朋友们用手机拨打1259064212参加侣友在线答题就可以了，我今</span><br><span class="line">群号:32591681 昵称:(り Remote、</span><br><span class="line">群名:高三一班群</span><br><span class="line">群介绍:创建此群的目的：仅仅是为了提供朋友之间的交流。在此群里，拒绝一切色情粗俗</span><br><span class="line">群号:34421223 昵称:(り Remote、</span><br><span class="line">群名:魭滴系鲥緔</span><br><span class="line">群介绍:IC，IP．IQ卡，通通告诉我密码！！</span><br><span class="line">群号:38607494 昵称:(り Remote、</span><br><span class="line">群名:ωǒ錯了？</span><br><span class="line">群介绍:莪們都昰好孩孓。异想’兲開徳孩孒︶￣~°</span><br><span class="line">群号:56483925 昵称:谢邵。</span><br><span class="line">群名:国专0803班</span><br><span class="line">群介绍:国专0803</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>总结：其人曾用qq：346608453，29158525，23853637；地址等不明，有代码基础，有能力实现本次攻击，疑似qq都是盗来的，无法确定本人身份</p><h2 id="最后提醒："><a href="#最后提醒：" class="headerlink" title="最后提醒："></a>最后提醒：</h2><p>《中华人民共和国刑法》第二百八十六条 违反国家规定，对计算机信息系统功能进行删除、修改、增加、干扰，造成计算机信息系统不能正常运行，后果严重的，处五年以下有期徒刑或者拘役；后果特别严重的，处五年以上有期徒刑。</p><p>违反国家规定，对计算机信息系统中存储、处理或者传输的数据和应用程序进行删除、修改、增加的操作，后果严重的，依照前款的规定处罚。</p><p>千万要知法守法，技术无罪，但是拿来做坏事可是要被抓进去的哦</p><h2 id="11：03前来更新"><a href="#11：03前来更新" class="headerlink" title="11：03前来更新"></a>11：03前来更新</h2><p>攻击者换了一个证书，新的邮箱为 1396060845037@mymail.com ，截图如下</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-145.png" alt="upload successful"></p><p>第一个qq里的网址可能是因为这个qq是盗的，如果这样的话，几个qq之间没有联系也就正常了</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-146.png" alt="upload successful"></p><h2 id="可能是最后的更新（2020-3-28-9：38）"><a href="#可能是最后的更新（2020-3-28-9：38）" class="headerlink" title="可能是最后的更新（2020/3/28 9：38）"></a>可能是最后的更新（2020/3/28 9：38）</h2><p>昨天文章写的有些急，也受了一些言论的误导，出现了一处错误，csdn的昵称后缀是随机生成的，因此推出来的后两个qq号与此无关。而在昨晚，该用户修改签名为：“QQ号码被盗，现已恢复”，并在随后关闭空间（确实很多老哥前去轰炸），这一波貌似洗白的操作却是疑点重重。</p><p>首先，大家基本已经认为这个号是被盗的了，但是号主现身就有些奇妙，作为一个 从事软件开发工作近 16 年（ CSDN 介绍 ）的人，被长时间盗号，却不找回或无法找回，突然出事了便轻松找回，可能性？？？</p><p>而且，这样的话，另一个昨天没用到的点就有意思了，928天 qq达人，如果是盗号，那盗号的人也是把这个号当大号用了叭。这样我们可以假设确实被盗号，那么如果明天达人就该断了叭。找回了一个三年多没用的号，发完解释还会占着手机那一个qq登录的位置吗，大概率不会。而如果不是盗号，咳咳，那这位张勇兄弟大概就是真的勇了叭，哈哈。</p><p>其实说了这么多，就是我们这些GitHub重度用户，想要一个合理的解释，不管是有些人猜测的G||F||\/\/，还是一线小兵误操作，抑或是黑客在家闲极无聊等等。如果是误操作或被黑，大家就当吃瓜一场，就算是墙的问题，我们也好提前搬好仓库吧。</p><h2 id="—-1"><a href="#—-1" class="headerlink" title="—-"></a>—-</h2><p>好的，视线转回来，我要开始bb了。</p><p>刚开始知道这件事还是我的好<span class="heimu">基</span>友 <a href="https://blog.say521.cn">奥秘Sir</a> QQ空间里的转载:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-147.png" alt="upload successful"></p><p>哦，发生了什么？</p><p>于是拿着QQ号去网上一找，冷汗直流：</p><p>这个QQ号的主人在2020/3/26通过手段劫持了Github、CloudflareCDN、京东网站，不过证书有问题被截下来了。</p><p>为什么冷汗直流？因为我全站绑定在Github+CloudFlare上，那岂不是我也被影响了吗？</p><p>至于为什么我没有察觉到,是因为3/26-3/27我在认真学习,没有上github<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/huaji.png"></p><p>后来查找了一下，这次攻击只是影响了国内的互联网，CloudFlare劫持也只是针对美国那几个节点。</p><p>正好，上次嫌美国节点慢，通过自代理的方式节点到香港线，也就是我和攻击玩了个擦边球。</p><p>于是我就放心了.</p><p>但这次攻击不是一般的诡异，有很多疑点，当我松了一口气后又觉得不对，请听我慢慢讲解：</p><h1 id="1-本次攻击并非DNS劫持，而是中间人劫持"><a href="#1-本次攻击并非DNS劫持，而是中间人劫持" class="headerlink" title="1.本次攻击并非DNS劫持，而是中间人劫持"></a>1.本次攻击并非DNS劫持，而是中间人劫持</h1><p>DNS劫持那是G||F||\\/\\/的老把戏了,如果这一次这三家遭到DNS劫持,也许我也就懒得说了,毕竟这已经见怪不怪了，手动绕开来就可以了。</p><p>但是这一次，是七层精准劫持,也许这个名词不懂,那就是<strong>中间人攻击特定端口</strong>.</p><h2 id="什么是中间人"><a href="#什么是中间人" class="headerlink" title="什么是中间人?"></a>什么是中间人?</h2><p><strong>MITM</strong>,全称Man-in-the-middle attack,这种攻击在一定程度上能突破HTTPS,通俗的来讲是这样的:</p><p>先说正常https传输:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-148.png" alt="upload successful"></p><p>这种加密方式叫<strong>非对称加密</strong>,应用的很广泛,至于为什么要用非对称加密而不用对称加密,这不是这里该讨论的.</p><p>假设有个黑客,想要窃取他们之间的信息:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-149.png" alt="upload successful"></p><p>为什么毫无卵用?因为,非对称加密有个特点,<strong>用公钥加密的东西就不能用公钥解密了</strong>,而公钥是公开的.</p><p>但是,这样还有攻击的方式:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-150.png" alt="upload successful"></p><p>这种黑客卡中间的方式,叫<strong>中间人攻击</strong>.</p><p>而且这种攻击,做的好就可以神不知鬼不觉窃听通话<strong>甚至篡改内容</strong>,最惨的是你都不知道被窃听了,用户和服务器都以为自己和对方直接通话,这才是最阴险的地方.解决办法只有HSTS。</p><p>至于用户是怎么被误导到黑客的,这就相当有意思,这就是路由污染,我们所说的ip查找,其实没有说有ip就可以直接找到对方了,还是要经过路由的.</p><p>比如说我第一次上百度（假设沿途完全没有缓存）:baidu.com,真正完整的经过是这样的</p><ol><li>电脑查找hosts,没有baidu</li><li>电脑于是向DNS（假如是8.8.8.8）发送请求包，问baidu.com在哪？</li><li>8.8.8.8这台服务器查了查，没有缓存，于是回头和我说稍等，自己去联系.com服务器</li><li>.com服务器查了查,和8.8.8.8说,你去北京I根域名服务器找,我这里没有缓存</li><li>于是8.8.8.8又屁颠屁颠去北京I根域名服务器找NS记录,I根查了查,你去ns1.baidu.com找,它的ip是202.108.22.220</li><li>于是8.8.8.8回来跟我说,nameserver是202.108.22.220</li><li>于是我去202.108.22.220,向上一级路由(我的路由器)问202.108.22.220在哪?</li><li>路由器不知道,于是向上一级询问</li><li>上一级返回给我的路由器稍等,自己还要去上上级查询,我这里是117.149.*.*<br>(此处省略17步路由查询)</li><li>最终,层层路由查询告诉我,ip202.108.22.220在北京联通,我帮你找到了</li><li>发个握手包,连接,返回baidu.com的ip 39.156.69.79</li><li>又一次经历7-10步，我与百度连接成功<br>||完了？嘿嘿，其实还没完</li><li>百度301重定向将我从 <code>baidu.com</code> 定向到 <code>www.baidu.com</code></li><li>又一次经历1-10步,最终,百度界面华丽丽地展开来.</li></ol><p>那么,中间的路由查询变得很有意思,如果我在骨干网那么干,故意把 <code>github.io</code> 路由到我的服务器上,是不是所有人都被劫持了?</p><p>很不巧,这一次真的就是那么干的.</p><h1 id="2-只劫持443端口-没有劫持80端口"><a href="#2-只劫持443端口-没有劫持80端口" class="headerlink" title="2.只劫持443端口,没有劫持80端口"></a>2.只劫持443端口,没有劫持80端口</h1><p>有人curl一下github.io,80端口TTL是51,443就变成56了<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/ld.jpg"></p><p>更nb是，有人ping了一下github.io:80和github.io:443,前者延迟280ms,丢包率25%,后者延迟20ms,不丢包<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/dy.png">.</p><p>所以这玩意还能降低延迟?</p><p>我笑了.</p><p>更厉害的是,由于是中间人攻击,有网友说如果信任证书还能上github,不过速度很慢.</p><p>也对,谁叫他手贱修改了全国路由,现在他的服务器正在遭受全国的DDoS.</p><p>敢情难道是他想给全国人民一个惊喜,反向代理gihub以提高访问速度?</p><h1 id="3-留下QQ邮箱"><a href="#3-留下QQ邮箱" class="headerlink" title="3.留下QQ邮箱"></a>3.留下QQ邮箱</h1><p>【以一己之力攻击国家骨干网污染三个大网站的路由】和【留下自己的QQ邮箱】，干这两件事情的真的是同一个人吗？？？？？</p><p>有人说这是仿照一篇文章伪造的，文章什么我就懒得贴了，反正伪造证书这种事情我也不会( ﹁ ﹁ ) ~→</p><p>但是，能攻击国家骨干网却拿了个自签名的证书攻击，这种事情都可以上诡异录了，唯一的解释可能是混淆视听，或者是大攻击前的试水，亦或是真的QQ被盗了，来当个替罪羊。</p><h1 id="4-声称自己QQ被盗"><a href="#4-声称自己QQ被盗" class="headerlink" title="4.声称自己QQ被盗"></a>4.声称自己QQ被盗</h1><p>这是QQ对应的空间，3/27晚上已无法正常访问，这是之前截图的：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-151.png" alt="upload successful"></p><h1 id="5-同时攻击了京东和CloudFlare"><a href="#5-同时攻击了京东和CloudFlare" class="headerlink" title="5.同时攻击了京东和CloudFlare"></a>5.同时攻击了京东和CloudFlare</h1><p>如果说只攻击了Github，那我能肯定，多半是G||F||\\/\\/技术人员手动失误,但你把京东给搞了,我觉得这……没搞懂啊,所以这真的可能是试水咯?</p><h1 id="6-初学者"><a href="#6-初学者" class="headerlink" title="6.初学者?"></a>6.初学者?</h1><p>网上有很多人说这是个初学者,想测试一下,没想到惹出那么大的事情.</p><p>好啊,初学者随随便便搞塌国内Github京东CF,再学一点签个真实证书,下次干脆把gov.cn全站劫持了,是不是这样才能让zf了解到https的重要性.</p><p>如果真的是初学者,那么从侧面就可以讽刺我国网络安全堪忧啊.</p><p>教练,我想学这个.<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/zcbg.jpg"></p><h1 id="7-这么值得报道的新闻，官媒毫无反应"><a href="#7-这么值得报道的新闻，官媒毫无反应" class="headerlink" title="7.这么值得报道的新闻，官媒毫无反应"></a>7.这么值得报道的新闻，官媒毫无反应</h1><p>我觉得这就很有意思了，我不说，大家应该知道为什么</p><h1 id="后言"><a href="#后言" class="headerlink" title="后言"></a>后言</h1><p>关于这次被攻击，为什么Github错误页面会被显示呢？</p><p>1.Github开了HSTS，匹配的头字符不对，浏览器直接拦截，连<kbd>忽略警告,继续访问</kbd>这样的字符都没有,吓得我赶紧给我全站开了HSTS.<br>2.证书是个自签名,按理说能攻击骨干网的大佬伪造个证书应该很容易,为什么用了这个呢?</p><p>另外，以国内的环境，大家上Github扔代码一定要用SSH，因为SSH双方是强加密的，可以预防中间人攻击！</p>]]></content>
      
      
      <categories>
          
          <category> 随心记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github </tag>
            
            <tag> CloudFlare </tag>
            
            <tag> 网络 </tag>
            
            <tag> 京东 </tag>
            
            <tag> 劫持 </tag>
            
            <tag> 安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一次“修”冰箱的经历</title>
      <link href="/posts/75fc481/"/>
      <url>/posts/75fc481/</url>
      
        <content type="html"><![CDATA[<p>奶奶家有一台2年前买到的美的智能冰箱，当时买过来时因为在清仓，花了800块。后来出了点小问题停用了，闲置了1年。今年疫情，我只能窝在奶奶家，<span class="heimu">这个孙子又特别能吃</span>,所以只能重新启用了这台冰箱.</p><p>但是开始用的时候就出了点问题,不知道是不是放久了,冰箱两个按键短路了<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/huaji.png">.</p><p>短路也就罢了,关键是这冰箱有安全锁，10秒钟不操作就锁住了，如果在锁住的时候试图操纵，冰箱蜂鸣器就会B~~~~~一声,锁键就会闪烁表示不允许操作;</p><p>结果现在这台冰箱变成电音演奏者了,短路短的很有节奏;而且最重要的是这安全锁没办法彻底禁用…<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/dhuaji.gif">.</p><p>最重要的是这蜂鸣器非常响亮,冰箱在一楼,我在三楼睡觉都能听的清清楚楚<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/qgbf.png">.</p><p>而且家里必须要用这台冰箱，不用不行。</p><p>以前上去扇两巴掌就安静了，最近变<span class="heimu">屌</span>了，怎么扇都没用了。欸，好生生的智能冰箱变成智障冰箱了。这设计者是怎么想的。 <img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/whks.png">.</p><p>最致命的是如果修就要回厂重修，费用200元，那还不如不修呢<br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/fn.gif"></p><p>至于为什么解决是因为这货不识像,在晚上吃饭的时候在我耳边响.<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/s.png">，怎么响我也就忍了，在我耳边响，不好意思,我上去用力一扣,把整个面板扣了下来.后面有一束线连着,仔细一看是可插拔的,使劲一拔:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-127.jpg" alt="upload successful"></p><p>欸，整个世界都安静了。</p><p>安心吃完饭，我拿着面板上楼了，现在必须要修理一下，否则没面板这个冰箱是不能运行的。</p><h1 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h1><p>我思考了一下，为什么它会发出恼人的声音呢？</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-131.png" alt="upload successful"></p><p>简单思考一下，解决短路我觉得是不可能的，把安全锁彻底解除也没有办法，</p><p>一、我没有螺丝刀<br>二、短路具体在哪我也不知道<br>三、解锁键没有短路，安全锁不可能解除，所以不会乱调温<br>四、这台冰箱没有解锁的需求</p><p>所以最经济最治标不治本的方法就是把蜂鸣器破坏掉。</p><h1 id="观察"><a href="#观察" class="headerlink" title="观察"></a>观察</h1><p>背面：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-128.jpg" alt="upload successful"></p><p>侧面：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-129.jpg" alt="upload successful"></p><p>这是六针接口，待会儿从这里重新插进去。</p><p>观察了一下，很快就确定了蜂鸣器的位置：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-130.jpg" alt="upload successful"></p><p>（虚化没做好，请见谅）</p><p>以前拆过计算器，发出声音的就是这个玩意。</p><p>拿了把剪刀，伸进去，夹住，弄两下就下来了：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-132.jpg" alt="upload successful"></p><p>这是蜂鸣器的三张特写：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-133.jpg" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-134.jpg" alt="upload successful"></p><p>蜂鸣器设计者还是用心的，起码标注了正极在哪：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-135.jpg" alt="upload successful"></p><p>搞定，下去重新插上去，接着不管怎么闪烁、怎么按，它都不会响啦！</p>]]></content>
      
      
      <categories>
          
          <category> 随心记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 冰箱 </tag>
            
            <tag> 动手实践 </tag>
            
            <tag> 修理 </tag>
            
            <tag> 电器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>学习笔记:物理12课 天体运动 </title>
      <link href="/posts/a27d0f18/"/>
      <url>/posts/a27d0f18/</url>
      
        <content type="html"><![CDATA[<p>翘课翘太多了，不能接着翘课了，不然接着挂科，所以干脆拿来做笔记，顺便复习一下。</p><h1 id="公式"><a href="#公式" class="headerlink" title="公式"></a>公式</h1><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-93.png" alt="upload successful"></p><h1 id="小记"><a href="#小记" class="headerlink" title="小记"></a>小记</h1><h2 id="4"><a href="#4" class="headerlink" title="*4"></a>*4</h2><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-94.png" alt="upload successful"></p><p>什么是冲日现象？</p><p>太阳地球某行星变成一条线。</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-95.png" alt="upload successful"></p><p>圆周运动：GMm/r^2=m·w^2r</p><p>这一题考虑的是地球以外,金星水星不算.</p><p>P表示地外行星;<br>某一时刻链接到一线,下一时刻也链接到一线.</p><p>则EE’与PP’的角速度绝对不一样(废话)</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-96.png" alt="upload successful"></p><p>由于考虑的是地外行星,所以这是个追击问题,追的是角度.</p><p>E转到E’比P多转了一圈(问题所在).</p><p>在同样时间T中,地球比外面行星多转了2π角度(弧度制)</p><p>地球转过的角度减去外面行星转过的角度.</p><p>所以:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-97.png" alt="upload successful"></p><p>而TE=1year</p><p>==&gt; 得出t(两次冲日时间)</p><p>核心公式</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-98.png" alt="upload successful"></p><p>回到题目:<br>A:每年冲日,那么t必须小于等于1,也就是TE=1year,本质就是问t能不能小于1,脑子想想就知道不可能了.</p><p>上述公式修改.</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-99.png" alt="upload successful"></p><p>接着算周期:</p><p>根据开普勒第三定律:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-100.png" alt="upload successful"></p><p>得出每一个周期:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-101.png" alt="upload successful"></p><p>回到B,从2014年1/1到2015年12/31有就可以,但是木星周期是11.86年,代入公式,选B。</p><p>依次算出C错D对。</p><p>选BD。</p><h2 id="7"><a href="#7" class="headerlink" title="*7"></a>*7</h2><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-102.png" alt="upload successful"></p><h2 id="9"><a href="#9" class="headerlink" title="*9"></a>*9</h2><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-103.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-104.png" alt="upload successful"></p><h2 id="10"><a href="#10" class="headerlink" title="*10"></a>*10</h2><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-105.png" alt="upload successful"></p><p>因为两个 w 相同,所以Mw^2R=mw^2r</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-106.png" alt="upload successful"></p><p>R+r是来自距离(M与m),而R是圆周运动轨道半径.</p><p>对于双星问题,有一个条件,w相同.</p><p>所以因为角速度一样,A是错误,w相同,所以t相同,B错误.</p><p>而D中向心力就是应力,只有两个,D错误.</p><p>由公式得出,C错误.</p><p>如果假设M不动,m绕着它转,那么m的质量就不是m了,而是约化质量 <img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/huaji.png"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-107.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-108.png" alt="upload successful"></p><p>绝大多数情况下m引=m惯,所以一般无视.</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-109.png" alt="upload successful"></p><p>严重超纲,所以..不考虑</p><h2 id="11"><a href="#11" class="headerlink" title="*11"></a>*11</h2><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-110.png" alt="upload successful"></p><p>公式一套就完事了</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-111.png" alt="upload successful"></p><p>==&gt;<br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-112.png" alt="upload successful"></p><p>质量变为k倍，M+m==&gt;k(M+m)<br>距离变为n倍, R+r==&gt;n(R+r)</p><p>导出结果，B</p><h2 id="12-这题没搞懂-lll￢ω￢"><a href="#12-这题没搞懂-lll￢ω￢" class="headerlink" title="*12 (这题没搞懂(lll￢ω￢))"></a>*12 (这题没搞懂(lll￢ω￢))</h2><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-113.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-114.png" alt="upload successful"></p><p>答案是AD</p><h2 id="16"><a href="#16" class="headerlink" title="*16"></a>*16</h2><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-115.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-116.png" alt="upload successful"></p><p>由于是椭圆,所以可以用开普勒第三定律解决.</p><p>令椭圆轨道周期为T0,可以把圆看成椭圆,链接AB,AB=R+R0,则中间的椭圆半长轴为(R+R0)/2</p><p>直接上公式</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-117.png" alt="upload successful"></p><p>很快就能得出T0.</p><p>但是题目需要的是t,而不是周期,</p><p>所以:<br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-118.png" alt="upload successful"></p><h2 id="18"><a href="#18" class="headerlink" title="*18"></a>*18</h2><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-119.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-120.png" alt="upload successful"></p><p>挖空?则m完整球+m负质量球=m挖空球(奇葩定律)</p><p>所以挖空的地方也有引力,但是斥力,这个地方比较好理解.</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-121.png" alt="upload successful"></p><p>物理上挖空的地方假设为斥力,等效替代.(这种思想真的很巧妙)</p><h2 id="19"><a href="#19" class="headerlink" title="*19"></a>*19</h2><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-122.png" alt="upload successful"></p><p>黄金代换<br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-124.png" alt="upload successful"></p><p>(1) 重力多少?g’=4/9g=40/9 m/s^2</p><p>G=mg’=222.2N</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-123.png" alt="upload successful"></p><h2 id="20-暂时没搞懂"><a href="#20-暂时没搞懂" class="headerlink" title="*20(暂时没搞懂)"></a>*20(暂时没搞懂)</h2><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-125.png" alt="upload successful"></p><h2 id="21"><a href="#21" class="headerlink" title="*21"></a>*21</h2><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-126.png" alt="upload successful"></p><p>好了，题目暂时到这里，有空回来接着整理。</p>]]></content>
      
      
      <categories>
          
          <category> 爱学习 </category>
          
          <category> 物理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 物理 </tag>
            
            <tag> 学习 </tag>
            
            <tag> 天体运动 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GooseDesktop桌面鸭_网课好宠物</title>
      <link href="/posts/5b32ef71/"/>
      <url>/posts/5b32ef71/</url>
      
        <content type="html"><![CDATA[<h1 id="GooseDesktop"><a href="#GooseDesktop" class="headerlink" title="GooseDesktop"></a>GooseDesktop</h1><p><a class="btn" href="https://g.cyfan.ga/Public/DesktopGoose%2520v0.3.7z"></p><pre><code>          &gt;&gt;点我去下载        &lt;/a&gt;</code></pre><p>可玩性非常高:</p><ul><li>会随机拖出一些<del>治愈人心</del>毒鸡汤(可以自定义)<br>  <img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/10.gif" alt=""></li><li>会随机拖出一些你珍藏多年的图片(可以自定义)<br>  <img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/11.gif" alt=""></li><li>关闭它拖出了来的图片会导致它追你的鼠标,追到就咬住,鼠标暂时失控.</li><li>双击它也会追鼠标(可以关闭)</li><li>自定义鸭子的颜色</li></ul><p>好的,也就这么多,更多的可以自己用VSCode写一些mod.</p><p>试着想一下,这是不是特别适合网课的时候玩呢<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/huaji.png">?</p><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>下载下来,打开来应该是这样:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-91.png" alt="upload successful"></p><p>进入 <code>Assets</code>:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-92.png" alt="upload successful"></p><p><code>Images\memes</code>,里面是鸭子随机拖出来的图片,我的版本里已经预置了10张美图+2张脖子以下不能看.jpg<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/bx.png">.注意不要在家长旁边打开!当然你也可以替换成别的,文件名随意.</p><p>在 <code>/Assets/Text/NotepadMessages</code> 里是鸭子拖出来的文本,里面已经预置了1222句毒鸡汤,句句治愈人心<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/yhuaji.png">.当然你也可以替换成别的,文件名随意.</p><p>打开 <code>/config.ini</code> 应该是这样:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Version_DoNotEdit=1</span><br><span class="line">EnableMods=false</span><br><span class="line">SilenceSounds=false</span><br><span class="line">Task_CanAttackMouse=True</span><br><span class="line">AttackRandomly=False</span><br><span class="line">UseCustomColors=true</span><br><span class="line">GooseDefaultWhite=#ffffff</span><br><span class="line">GooseDefaultOrange=#ffa500</span><br><span class="line">GooseDefaultOutline=#d3d3d3</span><br><span class="line">MinWanderingTimeSeconds=10</span><br><span class="line">MaxWanderingTimeSeconds=10</span><br><span class="line">FirstWanderTimeSeconds=1</span><br></pre></td></tr></table></figure><p>第二行指开不开启mod,目前它还没有很多mod,保持false即可.</p><p><code>SilenceSounds</code> 指鸭子发布发出声音,false表示发出,默认false.</p><p><code>Task_CanAttackMous</code> 指点击它会不会咬,默认为true(否则桌面鸭意义何在)</p><p><code>AttackRandomly</code> 指会不会随机咬,默认保持false,这个最好不要开起来(否则后果难以想象)</p><p><code>UseCustomColors</code> 使用自定义颜色,默认false</p><p>下面三行是颜色自定义.</p><p><code>MinWanderingTimeSeconds</code> 鸭子随机拖出文件等待时间最小值,单位秒,建议:30<br><code>MaxWanderingTimeSeconds</code> 鸭子随机拖出文件等待时间最小值,单位秒,建议:120</p><p><code>FirstWanderTimeSeconds</code> 第一次打开鸭子后多久开始拖,随意</p><h1 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h1><h2 id="关闭"><a href="#关闭" class="headerlink" title="关闭"></a>关闭</h2><p><strong>回到桌面</strong> 其他应用无效,长按Esc即可.</p><p>或双击运行 <code>Close Goose.bat</code> 快速关闭</p><p>或直接运行: <code>taskkill/f /im goosedesktop.exe</code> 也行.</p><h2 id="静音"><a href="#静音" class="headerlink" title="静音"></a>静音</h2><p>配置文件 <code>SilenceSounds=true</code> 即可</p><h2 id="惹怒"><a href="#惹怒" class="headerlink" title="惹怒"></a>惹怒</h2><p>双击它,它就会追着你的鼠标,咬到了就是将近5秒鼠标失控时间,鼠标就会被这只鸭子叼着走.</p><p>或关闭它拖出来的文件,也是同样的效果.</p><h1 id="后言"><a href="#后言" class="headerlink" title="后言"></a>后言</h1><p>这篇水的有点彻底啊….QWQ</p>]]></content>
      
      
      <categories>
          
          <category> 繡软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 宠物 </tag>
            
            <tag> 桌面 </tag>
            
            <tag> GooseDesktop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GithubのUnlimited Private Repo有感</title>
      <link href="/posts/36dee3d7/"/>
      <url>/posts/36dee3d7/</url>
      
        <content type="html"><![CDATA[<p>Unlimited Repo这个项目上一年就开了，只不过当时我身边一堆垃圾新闻客户端根本没有提到这件事，我居然不知道<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/k.png">。直到现在手贱开了一个PrivateRepo才发现什么时候变免费了<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/s.png">？？？顿时感觉失去了关爱….</p><p><span class="heimu"><del>欸没错这篇又是水文</del></span>今天讲讲关于这件事以及对于github的心理感想。</p><h1 id="收购"><a href="#收购" class="headerlink" title="收购"></a>收购</h1><p>微软<del>爸爸</del>2018年末收购Github这件事情我是知道的。</p><p>哦，知道就知道呗，我当时的心理想法是这样的。</p><p>确实是这样，我虽然知道网上很多人对这件事褒贬不一，可我确实是心中毫无波澜。</p><p>因为很多人认为，有那么一个大靠山，就可以接着<del>薅</del>撸羊毛。</p><p>也有一些程序员觉得，这样Github就丧失了它开源（OpenSource）的初衷。</p><p>甚至还有Gitlab公然在底下挑衅。</p><p>（当然这篇博文不是过来喷GitLab的，我只是想描述当时Github有多惨。<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/huaji.png">）</p><p>我为什么当时毫无波澜呢，说实话原因有下：</p><p>1.当时还是个萌新，不知道这有什么意义。（雾<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/h.png">）<br>2.感觉收购后和收购前没什么不同。（大雾<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/m.png">）<br>3.当时还没有理解Git是什么东西，上传方式都是拖拽上传（大大雾<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/c.png">）</p><p>嗯<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/huaji.gif">。</p><h1 id="成长"><a href="#成长" class="headerlink" title="成长"></a>成长</h1><p>渐渐的，用到Github多了，虽然是个学生，但还是有抽出心思写写无聊的程序，对于一些吊炸天的repo一个star，对于一些有版权风险的一个fork…逐渐对于github熟悉起来,也渐渐喜欢上了github,虽然后面使用过coding和gitee,但用户体验就没做那么好(个人感想),最终还是没有抛弃github…</p><p>Github附加功能有些真的没法比,光是那pages我就觉得好上天了,用过codingpages,A记录绑定的ip过几天就要换一次,CNAME绑定的又不会宕机时自动切换,有时候速度还不如Github.</p><h1 id="感想"><a href="#感想" class="headerlink" title="感想"></a>感想</h1><h2 id="拿来当网盘用"><a href="#拿来当网盘用" class="headerlink" title="拿来当网盘用"></a>拿来当网盘用</h2><p>很多人说github开放Unlimited Private Repo后国内会引起一波免费网盘潮,我觉得这似乎不大可能:</p><p>1.Github本身只是托管代码的,那些放私人文件的一群人难道没有感觉到这一点么?<br>2.光是那Github全英文注册界面估计就能拦截一堆小学生了<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/j.png">,滥用的可能性就会大大降低了.<br>3.Github被国内防火*限速了(这似乎才是最大原因好不好),用起来比百度网盘还难过.<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/8082.png"></p><p>当然,如果只是放一些文档,我觉得大部分人也就是睁一只眼闭一只眼,毕竟临时放一些文档也不为过么.</p><p>只是有时候瞎逛github总能找到一些SB宗教的信息,欸,打广告打到这上面来了,亏他们想得出,不过网页有时候也是可以借鉴的,一些比较好的善用技术上网法则有些时候也能发现.</p><p>当然有一些正义的人会到这些repo上抗议,我看过了,但这些repo的拥有者反而更加不讲理,开口就是骂人.我觉得这样的人根本没有理可以讲,而且这种人也没有交流的价值,我个人建议还是不要管这些人,毕竟上Github的人大都都是有理智的,没有多少人会相信这一群讲话毫无根据的人,让他们自生自灭,不被人看得起,才是最好的解决办法.</p><h2 id="好代码不会开源"><a href="#好代码不会开源" class="headerlink" title="好代码不会开源"></a>好代码不会开源</h2><p>好,我就说几个结局,看看大家有没有身同感受.</p><h3 id="Public坑"><a href="#Public坑" class="headerlink" title="Public坑"></a>Public坑</h3><p>开了一个Public坑 ==&gt; 被dalao给了一个Star ==&gt; 两个人互相follow ==&gt; PY交易(雾) ==&gt;两个人都被互相激励,写出更好的代码</p><p>开了一个Public坑 ==&gt; 没人来 ==&gt; 默默自己写着repo ==&gt; 有一天有人把你的repo分享到了知乎 ==&gt; Star过一千 ==&gt; <del>接到局里喝茶(大大雾)</del><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/8082.png"> ==&gt; 删除repo</p><p>开了一个Public坑 ==&gt; 没人来 ==&gt; 归档,不想写了 ==&gt; 一个人看到了,测试了一下,发了一个issues ==&gt; 一群人被吸引过来,发了一堆issues ==&gt;被迫续更</p><p>开了一个Public坑 ==&gt; 吸引了一群人 ==&gt;没空写了,转给社区,自己去悠哉悠哉了 ==&gt;社区继续维护</p><p>开了一个Public坑 ==&gt; 然后就没有然后了…</p><h3 id="Private坑"><a href="#Private坑" class="headerlink" title="Private坑"></a>Private坑</h3><p>开了一个Private Repo ==&gt; 哎呀自己写的怎么这么烂,欸,幸好没有开源 ==&gt; 清空repo重新写</p><p>开了一个Private Repo ==&gt; 欸我写的这么好,赶紧开源 ==&gt;跳回public坑 ==&gt;结局与前四个一样</p><p>开了一个Private Repo ==&gt; 欸我写的这么好,怎么没人Star呢 ==&gt;四处宣扬自己的项目 ==&gt; 最后发现开成私人坑了 ==&gt; 转回public ==&gt; 结局相同</p><p>开了一个Private Repo ==&gt; 做网盘 ==&gt; 这特么什么神速度 ==&gt; 退坑</p><h1 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h1><p>至少现在看来Private Repo似乎没有被滥用的很厉害,当然,善用免费服务才能让服务变得更加长久,多了微软<del>爸爸</del>,相信Github会做的更好!</p>]]></content>
      
      
      <categories>
          
          <category> 瞎扯淡 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github </tag>
            
            <tag> Repository </tag>
            
            <tag> 撸羊毛 </tag>
            
            <tag> 私人 </tag>
            
            <tag> 无限制 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一次糟糕的换主题过程</title>
      <link href="/posts/834823b0/"/>
      <url>/posts/834823b0/</url>
      
        <content type="html"><![CDATA[<p>前天看到了一个自称 <code>无名小辈</code> 的博主的博客，那界面，简洁又华丽，正好符合我的审美，</p><p>回头看看自己的，NexT最大的缺点是什么？大众脸,通常随便点几个博客都跟我的博客差不多。因为集成了大量插件以及修改简单、界面优雅，NexT已经在Hexo里占了半边江山，基本上网上搜索Hexo建立博客教程，其中主题绝大多数是NexT。</p><p>当然，NexT也有NexT的好处，毕竟作为一款主打全兼容的主题，NexT修改起来真的很简单，而且任何常见错误网上一搜就行了。但是，自建博客的主要目的是什么？当然是个性化，那不然我何苦不在CSDN、简书、掘金这些平台上写，还免去一番折腾，<span class="heimu">还能免去高额的域名价钱</span>.</p><p>于是去<a href="https://hexo.io/themes">hexo主题市场</a>看看，感觉 Diaspora主题不错：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-71.png" alt="upload successful"></p><p>因为NexT真的过于豪华，所以我就决定开始换主题，</p><p>最后发现我究竟是入了一个什么大坑<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-5.png">…</p><p>因为这是个个人主题，根本没有很多详细的使用文档，整合的东西也不多，网上基本没有资料，所以修改时全靠经验，有一些根本没办法在本地预览…</p><p>说个数字就知道这坑有多大了，昨天刨掉上传前天博文一次，push量达到了30次。<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-5.png">  我还能说什么。</p><h1 id="更换"><a href="#更换" class="headerlink" title="更换"></a>更换</h1><p>下载，解压，修改站点配置文件指向Diaspora。</p><p>这一步简单极了，那么接下来谈谈这到底有多少问题。</p><h2 id="Gitalk问题"><a href="#Gitalk问题" class="headerlink" title="Gitalk问题"></a>Gitalk问题</h2><p>首先，之前说过Gitalk一个lable不能超过50字，很多人采用了decode方式规避解码，但对于我这种<del>标题党</del>人来说，50字显然不够。</p><p>于是看了一下主题配置文件:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">gitalk:</span><br><span class="line">    # 是否启用评论功能</span><br><span class="line">    enable: false</span><br><span class="line">    # 是否自动展开评论框</span><br><span class="line">    autoExpand: false</span><br><span class="line">    # 应用编号</span><br><span class="line">    clientID: &#x27;&#x27;</span><br><span class="line">    # 应用秘钥</span><br><span class="line">    clientSecret: &#x27;&#x27;</span><br><span class="line">    # issue仓库名</span><br><span class="line">    repo: &#x27;&#x27;</span><br><span class="line">    # Github名</span><br><span class="line">    owner: &#x27;&#x27;</span><br><span class="line">    # Github名</span><br><span class="line">    admin: [&#x27;&#x27;]</span><br><span class="line">    # Ensure uniqueness and length less than 50</span><br><span class="line">    id: location.pathname</span><br><span class="line">    # Facebook-like distraction free mode</span><br><span class="line">    distractionFreeMode: false</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>那么修改 <code>id</code> 不就行了么.</p><p>但是我修改后毫无卵用啊.</p><p>…</p><p>在 <code>\layout\_partial\post</code> 下,我看到了 <code>gitalk.ejs</code>,本来以为抓到核心了,结果打开来:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (theme.gitalk != undefined)&#123; %&gt;</span><br><span class="line">    &lt;div id=&#x27;gitalk-container&#x27; class=&quot;comment link&quot;</span><br><span class="line">data-enable=&#x27;&lt;%=theme.gitalk.enable%&gt;&#x27;</span><br><span class="line">        data-ae=&#x27;&lt;%=theme.gitalk.autoExpand%&gt;&#x27;</span><br><span class="line">        data-ci=&#x27;&lt;%=theme.gitalk.clientID%&gt;&#x27;</span><br><span class="line">        data-cs=&#x27;&lt;%=theme.gitalk.clientSecret%&gt;&#x27;</span><br><span class="line">        data-r=&#x27;&lt;%=theme.gitalk.repo%&gt;&#x27;</span><br><span class="line">        data-o=&#x27;&lt;%=theme.gitalk.owner%&gt;&#x27;</span><br><span class="line">        data-a=&#x27;&lt;%=theme.gitalk.admin%&gt;&#x27;</span><br><span class="line">        data-d=&#x27;&lt;%=theme.gitalk.distractionFreeMode%&gt;&#x27;</span><br><span class="line">    &gt;查看评论&lt;/div&gt;</span><br><span class="line">&lt;%&#125;%&gt;</span><br></pre></td></tr></table></figure><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-73.png" alt="upload successful"></p><p>根本没有id好不好!!!!!!!!所以你放在主题配置文件有什么用?????</p><p>最终拿出notepad++的文件夹搜索功能</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-72.png" alt="upload successful"></p><p>在 <code>\source\js\diaspora.js</code> 里有关于gitalk的配置,</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// comment</span><br><span class="line">           case - 1 != tag.indexOf(&quot;comment&quot;): </span><br><span class="line">if($(&#x27;#gitalk-container&#x27;).data(&#x27;enable&#x27;) == true)&#123;</span><br><span class="line">Diaspora.loading(),</span><br><span class="line">comment = $(&#x27;#gitalk-container&#x27;);</span><br><span class="line">gitalk = new Gitalk(&#123;</span><br><span class="line">  clientID: comment.data(&#x27;ci&#x27;),</span><br><span class="line">  clientSecret: comment.data(&#x27;cs&#x27;),</span><br><span class="line">  repo: comment.data(&#x27;r&#x27;),</span><br><span class="line">  owner: comment.data(&#x27;o&#x27;),</span><br><span class="line">  admin: comment.data(&#x27;a&#x27;),</span><br><span class="line">  id: decodeURI(window.location.pathname),</span><br><span class="line">  distractionFreeMode: comment.data(&#x27;d&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line">$(&quot;.comment&quot;).removeClass(&quot;link&quot;)</span><br><span class="line">gitalk.render(&#x27;gitalk-container&#x27;)</span><br><span class="line">Diaspora.loaded();</span><br><span class="line">&#125;else&#123;</span><br><span class="line">$(&#x27;#gitalk-container&#x27;).html(&quot;评论已关闭&quot;);</span><br><span class="line">&#125;</span><br><span class="line">               return false;</span><br><span class="line">               break;</span><br></pre></td></tr></table></figure><p>把id换成 <code>id: md5(location.pathname),</code> ,回到 <code>\layout\_partial\post\gitalk.ejs</code> 添加一行 <code>&lt;script src=&quot;https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js&quot;&gt;&lt;/script&gt;</code> 才行.</p><p>更惨的是当我测试的时候,issues却多开了一个</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-74.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-75.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-73.png" alt="upload successful"></p><p>编码之后才发现，NexT主题默认是在打开文章后添加了一个 <code>#more</code> 用于定位加载更多的地方，这个位置被gitalk统计进去了….</p><p>还好博客没有人留言，这个坑总算是填上去了。</p><h2 id="google-analytics"><a href="#google-analytics" class="headerlink" title="google-analytics"></a>google-analytics</h2><p>由于我不用谷歌统计,因为谷歌统计在国内真的支持很差,很容易拖慢速度,所以一直在用百度统计.</p><p>但这个主题只整合了谷歌,没有百度.</p><p>欸,这就是小主题和大主题的区别.(つ&amp;⊂)</p><p>不过这个坑还好填,文件夹搜索google,很快定位到位置 <code>\diaspora\layout\_partial\post\google-analytics.ejs</code> ,直接全部替换,解决.</p><h2 id="搜索功能"><a href="#搜索功能" class="headerlink" title="搜索功能"></a>搜索功能</h2><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-76.png" alt="upload successful"></p><p>按照官方文档说明,首先</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page search</span><br></pre></td></tr></table></figure><p>接着在search添加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title: search</span><br><span class="line">date: 2014-12-22 12:39:04</span><br><span class="line">type: &quot;search&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>由于之前装过插件,我以为就这样打开直接使用,</p><p>结果搜索功能是正常的,链接点开就不正常了.</p><p>点开链接,地址栏变成这样:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.cyfan.top/search/%2F2020%2F03%2F18%2F%E5%85%8D%C2%B7%E7%88%AC%C2%B7%E5%9F%8E%C2%B7%E5%9B%BD%E5%86%85%E7%AE%A1%E7%90%86%E5%88%86%E4%BA%ABGoogleDrive%2F</span><br></pre></td></tr></table></figure><p>地址栏不正确.</p><p>由于我是直接从NexT迁到Diaspora,没有重新安装插件,以前的NexT是直接在主页就可以搜索了,但Diaspora这个似乎要跳到一个专门的页面,导致链接不正确…</p><p>在作者主页和issues找过,发现了只有一个open的issues和我一样…</p><p>欸算了,自己动手丰衣足食.</p><p>同样是文件夹全局搜索,还是在 <code>\source\js\diaspora.js</code> 找到了目标:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// 返回搜索结果</span><br><span class="line">if (isMatch) &#123;</span><br><span class="line">//结果标签</span><br><span class="line">str += &quot;&lt;li&gt;&lt;a href=&#x27;&quot;+ data_url +&quot;&#x27; class=&#x27;search-result-title&#x27; target=&#x27;_blank&#x27;&gt;&quot;+ data_title +&quot;&lt;/a&gt;&quot;;</span><br><span class="line">var content = data.content.trim().replace(/&lt;[^&gt;]+&gt;/g,&quot;&quot;);</span><br><span class="line">if (first_occur &gt;= 0) &#123;</span><br><span class="line">// 拿出含有搜索字的部分</span><br><span class="line">var start = first_occur - 6;</span><br><span class="line">var end = first_occur + 6;</span><br><span class="line">if(start &lt; 0)&#123;</span><br><span class="line">start = 0;</span><br><span class="line">&#125;</span><br><span class="line">if(start == 0)&#123;</span><br><span class="line">end = 10;</span><br><span class="line">&#125;</span><br><span class="line">if(end &gt; content.length)&#123;</span><br><span class="line">end = content.length;</span><br><span class="line">&#125;</span><br><span class="line">var match_content = content.substr(start, end); </span><br><span class="line">// 列出搜索关键字，定义class加高亮</span><br><span class="line">                          </span><br></pre></td></tr></table></figure><p>在第四行我发现这个是根据地址跳转的,所以将 <code>str += &quot;&lt;li&gt;&lt;a href=&#39;&quot;+ data_url +&quot;&#39; class=&#39;search-result-title&#39; target=&#39;_blank&#39;&gt;&quot;+ data_title +&quot;&lt;/a&gt;&quot;;</code> 替换成 <code>str += &quot;&lt;li&gt;&lt;a href=&#39;https://blog.cyfan.top/&quot;+ data_url +&quot;&#39; class=&#39;search-result-title&#39; target=&#39;_blank&#39;&gt;&quot;+ data_title +&quot;&lt;/a&gt;&quot;;</code> , 其中域名改成你自己的。</p><h2 id="友链"><a href="#友链" class="headerlink" title="友链"></a>友链</h2><p>这个在浏览页是没有显示友链框的，所以干脆开辟了一个新的，使用的是孟坤的卡片式友链，这里就不多介绍了。</p><h2 id="menu"><a href="#menu" class="headerlink" title="menu"></a>menu</h2><p>菜单不再使用fontawesome，注意要去掉NexT的图标文字。</p><h2 id="Jquery"><a href="#Jquery" class="headerlink" title="Jquery"></a>Jquery</h2><p>这个主题jquery库位置不对/(ㄒoㄒ)/，通常来讲jquery库需要放在所有要用到jquery的上方,否则会报错,这就要靠自己了.</p><h2 id="Lazyload"><a href="#Lazyload" class="headerlink" title="Lazyload"></a>Lazyload</h2><p>这个我硬生生折腾了4小时,原因是这个主题似乎是不兼容懒加载的.</p><p>主题主页点击文章后,载入方式是直接平滑载入,这确实有助于提升访问好感,但这样js就不会自动载入了呀.必须手动刷新才行.</p><p>…</p><p>最后还是手动关闭懒加载,虽然提升了页面载入时间,但平滑加载从某种意义上来说也可以算作懒加载.</p><h1 id="后言"><a href="#后言" class="headerlink" title="后言"></a>后言</h1><p>总的来说,总算拜托了NexT的豪华和臃肿,以及大众脸.博客载入速度缩短至0.8秒(指打开到显示加载图像),首次载入时间缩短至6秒.</p><p>不过这个主题毕竟是小主题,修改还是很麻烦的,新手还是用NexT吧.</p>]]></content>
      
      
      <categories>
          
          <category> 爱折腾 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 主题 </tag>
            
            <tag> NexT </tag>
            
            <tag> Diaspora </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何++CloudFlare Warp+ </title>
      <link href="/posts/16d5e71e/"/>
      <url>/posts/16d5e71e/</url>
      
        <content type="html"><![CDATA[<p>自从CloudFlare渐渐浮出大众的视野，现在它的各项服务已经玩出花了，如果不陌生，它有一个应用叫 <code>1.1.1.1</code>,简单的说就是在手机上搭建DoH和DoT,本来的意思就是绕开域名污染,结果正好撞到某些人怀里,<span class="heimu">当然也包括我 </span>,亲测使用DoH虽然速度慢了点,但是上<code>DuckDuckGo</code> 不是梦啊.</p><p>另外,’1.1.1.1’多了一个功能叫 <code>Warp+</code>,简单的说就是 <code>代理</code> ,嗯~ o(<em>￣▽￣</em>)o,我想我在说什么你应该知道,由于CloudFlare主打边缘服务,所以.😏</p><h1 id="什么是边缘服务"><a href="#什么是边缘服务" class="headerlink" title="什么是边缘服务?"></a>什么是边缘服务?</h1><p>这里简单介绍一下,边缘服务指的是当用户发出请求后,接到相应的不再是少量的中心服务,而是所有的在用户身边CDN进行相应.</p><p>就拿CFWorker来说,传统服务是这样的:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-67.png" alt="upload successful"></p><p>但是CloudFlare换了个思路,为什么所有数据都要一个中心节点算,在用户旁边的CDN不能算吗?</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-68.png" alt="upload successful"></p><p>让用户身边的服务器进行相应,在用户与服务器的边缘计算,这就是边缘服务.</p><h1 id="Warp"><a href="#Warp" class="headerlink" title="Warp+"></a>Warp+</h1><p>手机端上Warp+主打的功能是在网络拥堵时提供更好的服务,个人用了一下,速度不快,大约100kb/s,勉强支撑正常使用,而且默认只有1GB,需要靠分享获取更多流量.</p><p>那么,我现在告诉你我有多少流量:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-69.png" alt="upload successful"></p><p>这全都依赖这个脚本：</p><details><summary>避免大规模泛滥和爬虫，已用很简单的方式加密，点击展开</summary><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Ly8lMjBGYWtlJTIwcmVnaXN0ZXIlMjBmb3IlMjByZWZlcnJlciUyMHRvJTIwZ2V0JTIwd2FycCUyMHBsdXMlMjBiYW5kd2lkdGglMEFjb25zdCUyMHJlZmVycmVyJTIwJTNEJTIwJTIyMGY0NGRkZWEtY2MyNS00NzNhLWE4OTctOWEzYzdhNDVlZjc5JTIyJTNCJTBBY29uc3QlMjB0aW1lc1RvTG9vcCUyMCUzRCUyMDEwMDAlM0IlMEFjb25zdCUyMHJldHJ5VGltZXMlMjAlM0QlMjAxMDAlM0IlMEEvLyUyMEhvdyUyMG1hbnklMjBzZWMlMjB0byUyMHNsZWVwJTJDJTIwY3VycmVudGx5JTIwcmF0ZSUyMGxpbWl0JTIwbWlnaHQlMjBiZSUyMGFwcGx5JTIwdG8lMjBwZXIlMjBtaW4lMjBwZXIlMjBpcCUyMGZyb20lMjBteSUyMG9ic2VydmF0aW9uLiUwQWNvbnN0JTIwc2xlZXBTZWNvbmRzJTIwJTNEJTIwMzAlM0IlMEElMEFjb25zdCUyMGh0dHBzJTIwJTNEJTIwcmVxdWlyZSUyOCUyMmh0dHBzJTIyJTI5JTNCJTBBY29uc3QlMjB6bGliJTIwJTNEJTIwcmVxdWlyZSUyOCUyMnpsaWIlMjIlMjklM0IlMEElMEFhc3luYyUyMGZ1bmN0aW9uJTIwaW5pdCUyOCUyOSUyMCU3QiUwQSUyMCUyMGZvciUyMCUyOGxldCUyMGklMjAlM0QlMjAwJTNCJTIwaSUyMCUzQyUyMHRpbWVzVG9Mb29wJTNCJTIwaSsrJTI5JTIwJTdCJTBBJTIwJTIwJTIwJTIwaWYlMjAlMjhhd2FpdCUyMHJ1biUyOCUyOSUyOSUyMCU3QiUwQSUyMCUyMCUyMCUyMCUyMCUyMGNvbnNvbGUubG9nJTI4aSUyMCslMjAxJTJDJTIwJTIyT0slMjIlMjklM0IlMEElMjAlMjAlMjAlMjAlN0QlMjBlbHNlJTIwJTdCJTBBJTIwJTIwJTIwJTIwJTIwJTIwY29uc29sZS5sb2clMjhpJTIwKyUyMDElMkMlMjAlNjBFcnJvciUyQyUyMHdpbGwlMjBzbGVlcCUyMGZvciUyMCUyNCU3QnNsZWVwU2Vjb25kcyU3RHMlNjAlMjklM0IlMEElMjAlMjAlMjAlMjAlMjAlMjBmb3IlMjAlMjhsZXQlMjByJTIwJTNEJTIwMCUzQiUyMHIlMjAlM0MlMjByZXRyeVRpbWVzJTNCJTIwcisrJTI5JTIwJTdCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwYXdhaXQlMjBzbGVlcCUyOHNsZWVwU2Vjb25kcyUyMColMjAxMDAwJTI5JTNCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwaWYlMjAlMjhhd2FpdCUyMHJ1biUyOCUyOSUyOSUyMCU3QiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMGNvbnNvbGUubG9nJTI4aSUyMCslMjAxJTJDJTIwJTIyUmV0cnklMjAlMjMlMjIlMjArJTIwJTI4ciUyMCslMjAxJTI5JTJDJTIwJTIyT0slMjIlMjklM0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBicmVhayUzQiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCU3RCUyMGVsc2UlMjAlN0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBjb25zb2xlLmxvZyUyOGklMjArJTIwMSUyQyUyMCUyMlJldHJ5JTIwJTIzJTIyJTIwKyUyMCUyOHIlMjArJTIwMSUyOSUyQyUyMCU2MEVycm9yJTJDJTIwd2lsbCUyMHNsZWVwJTIwZm9yJTIwJTI0JTdCc2xlZXBTZWNvbmRzJTdEcyU2MCUyOSUzQiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMGlmJTIwJTI4ciUyMCUzRCUzRCUzRCUyMHJldHJ5VGltZXMlMjAtJTIwMSUyOSUyMCU3QiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMHJldHVybiUzQiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCU3RCUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCU3RCUwQSUyMCUyMCUyMCUyMCUyMCUyMCU3RCUwQSUyMCUyMCUyMCUyMCU3RCUwQSUyMCUyMCU3RCUwQSU3RCUwQSUwQWFzeW5jJTIwZnVuY3Rpb24lMjBydW4lMjglMjklMjAlN0IlMEElMjAlMjByZXR1cm4lMjBuZXclMjBQcm9taXNlJTI4cmVzb2x2ZSUyMCUzRCUzRSUyMCU3QiUwQSUyMCUyMCUyMCUyMGNvbnN0JTIwaW5zdGFsbF9pZCUyMCUzRCUyMGdlblN0cmluZyUyODExJTI5JTNCJTBBJTIwJTIwJTIwJTIwY29uc3QlMjBwb3N0RGF0YSUyMCUzRCUyMEpTT04uc3RyaW5naWZ5JTI4JTdCJTBBJTIwJTIwJTIwJTIwJTIwJTIwa2V5JTNBJTIwJTYwJTI0JTdCZ2VuU3RyaW5nJTI4NDMlMjklN0QlM0QlNjAlMkMlMEElMjAlMjAlMjAlMjAlMjAlMjBpbnN0YWxsX2lkJTNBJTIwaW5zdGFsbF9pZCUyQyUwQSUyMCUyMCUyMCUyMCUyMCUyMGZjbV90b2tlbiUzQSUyMCU2MCUyNCU3Qmluc3RhbGxfaWQlN0QlM0FBUEE5MWIlMjQlN0JnZW5TdHJpbmclMjgxMzQlMjklN0QlNjAlMkMlMEElMjAlMjAlMjAlMjAlMjAlMjByZWZlcnJlciUzQSUyMHJlZmVycmVyJTJDJTBBJTIwJTIwJTIwJTIwJTIwJTIwd2FycF9lbmFibGVkJTNBJTIwZmFsc2UlMkMlMEElMjAlMjAlMjAlMjAlMjAlMjB0b3MlM0ElMjBuZXclMjBEYXRlJTI4JTI5LnRvSVNPU3RyaW5nJTI4JTI5LnJlcGxhY2UlMjglMjJaJTIyJTJDJTIwJTIyKzA3JTNBMDAlMjIlMjklMkMlMEElMjAlMjAlMjAlMjAlMjAlMjB0eXBlJTNBJTIwJTIyQW5kcm9pZCUyMiUyQyUwQSUyMCUyMCUyMCUyMCUyMCUyMGxvY2FsZSUzQSUyMCUyMnpoX0NOJTIyJTBBJTIwJTIwJTIwJTIwJTdEJTI5JTNCJTBBJTBBJTIwJTIwJTIwJTIwY29uc3QlMjBvcHRpb25zJTIwJTNEJTIwJTdCJTBBJTIwJTIwJTIwJTIwJTIwJTIwaG9zdG5hbWUlM0ElMjAlMjJhcGkuY2xvdWRmbGFyZWNsaWVudC5jb20lMjIlMkMlMEElMjAlMjAlMjAlMjAlMjAlMjBwb3J0JTNBJTIwNDQzJTJDJTBBJTIwJTIwJTIwJTIwJTIwJTIwcGF0aCUzQSUyMCUyMi92MGE3NDUvcmVnJTIyJTJDJTBBJTIwJTIwJTIwJTIwJTIwJTIwbWV0aG9kJTNBJTIwJTIyUE9TVCUyMiUyQyUwQSUyMCUyMCUyMCUyMCUyMCUyMGhlYWRlcnMlM0ElMjAlN0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjJDb250ZW50LVR5cGUlMjIlM0ElMjAlMjJhcHBsaWNhdGlvbi9qc29uJTIyJTJDJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwSG9zdCUzQSUyMCUyMmFwaS5jbG91ZGZsYXJlY2xpZW50LmNvbSUyMiUyQyUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMENvbm5lY3Rpb24lM0ElMjAlMjJLZWVwLUFsaXZlJTIyJTJDJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIyQWNjZXB0LUVuY29kaW5nJTIyJTNBJTIwJTIyZ3ppcCUyMiUyQyUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMlVzZXItQWdlbnQlMjIlM0ElMjAlMjJva2h0dHAvMy4xMi4xJTIyJTJDJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIyQ29udGVudC1MZW5ndGglMjIlM0ElMjBwb3N0RGF0YS5sZW5ndGglMEElMjAlMjAlMjAlMjAlMjAlMjAlN0QlMEElMjAlMjAlMjAlMjAlN0QlM0IlMEElMEElMjAlMjAlMjAlMjBjb25zdCUyMHJlcSUyMCUzRCUyMGh0dHBzLnJlcXVlc3QlMjhvcHRpb25zJTJDJTIwcmVzJTIwJTNEJTNFJTIwJTdCJTBBJTIwJTIwJTIwJTIwJTIwJTIwaWYlMjhyZXMuc3RhdHVzQ29kZSUyMCUzRCUzRCUzRCUyMDQyOSUyOSUyMCU3QiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC8vJTIwVG9vJTIwbWFueSUyMHJlcXVlc3RzJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwcmVzb2x2ZSUyOGZhbHNlJTI5JTNCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTdEJTBBJTIwJTIwJTIwJTIwJTIwJTIwY29uc3QlMjBnemlwJTIwJTNEJTIwemxpYi5jcmVhdGVHdW56aXAlMjglMjklM0IlMEElMjAlMjAlMjAlMjAlMjAlMjAvLyUyMGNvbnN0JTIwYnVmZmVyJTIwJTNEJTIwJTVCJTVEJTNCJTBBJTIwJTIwJTIwJTIwJTIwJTIwcmVzLnBpcGUlMjhnemlwJTI5JTNCJTBBJTIwJTIwJTIwJTIwJTIwJTIwZ3ppcCUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC5vbiUyOCUyMmRhdGElMjIlMkMlMjBmdW5jdGlvbiUyOGRhdGElMjklMjAlN0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAvLyUyMGJ1ZmZlci5wdXNoJTI4ZGF0YS50b1N0cmluZyUyOCUyOSUyOSUzQiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCU3RCUyOSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC5vbiUyOCUyMmVuZCUyMiUyQyUyMGZ1bmN0aW9uJTI4JTI5JTIwJTdCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwLy8lMjBjb25zb2xlLmRpciUyOEpTT04ucGFyc2UlMjhidWZmZXIuam9pbiUyOCUyMiUyMiUyOSUyOSUyOSUzQiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMHJlc29sdmUlMjh0cnVlJTI5JTNCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTdEJTI5JTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwLm9uJTI4JTIyZXJyb3IlMjIlMkMlMjBmdW5jdGlvbiUyOGUlMjklMjAlN0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAvLyUyMGNvbnNvbGUuZXJyb3IlMjhlJTI5JTNCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwcmVzb2x2ZSUyOGZhbHNlJTI5JTNCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTdEJTI5JTNCJTBBJTIwJTIwJTIwJTIwJTdEJTI5JTNCJTBBJTBBJTIwJTIwJTIwJTIwcmVxLm9uJTI4JTIyZXJyb3IlMjIlMkMlMjBlcnJvciUyMCUzRCUzRSUyMCU3QiUwQSUyMCUyMCUyMCUyMCUyMCUyMC8vJTIwY29uc29sZS5lcnJvciUyOGVycm9yJTI5JTNCJTBBJTIwJTIwJTIwJTIwJTIwJTIwcmVzb2x2ZSUyOGZhbHNlJTI5JTNCJTBBJTIwJTIwJTIwJTIwJTdEJTI5JTNCJTBBJTBBJTIwJTIwJTIwJTIwcmVxLndyaXRlJTI4cG9zdERhdGElMjklM0IlMEElMjAlMjAlMjAlMjByZXEuZW5kJTI4JTI5JTNCJTBBJTIwJTIwJTdEJTI5JTNCJTBBJTdEJTBBJTBBZnVuY3Rpb24lMjBzbGVlcCUyOG1zJTI5JTIwJTdCJTBBJTIwJTIwcmV0dXJuJTIwbmV3JTIwUHJvbWlzZSUyOHJlc29sdmUlMjAlM0QlM0UlMjBzZXRUaW1lb3V0JTI4cmVzb2x2ZSUyQyUyMG1zJTI5JTI5JTNCJTBBJTdEJTBBJTBBZnVuY3Rpb24lMjBnZW5TdHJpbmclMjhsZW5ndGglMjklMjAlN0IlMEElMjAlMjAvLyUyMGh0dHBzJTNBLy9zdGFja292ZXJmbG93LmNvbS9hLzEzNDk0MjYvMTE4NjAzMTYlMEElMjAlMjBsZXQlMjByZXN1bHQlMjAlM0QlMjAlMjIlMjIlM0IlMEElMjAlMjBjb25zdCUyMGNoYXJhY3RlcnMlMjAlM0QlMjAlMjJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JTIyJTNCJTBBJTIwJTIwY29uc3QlMjBjaGFyYWN0ZXJzTGVuZ3RoJTIwJTNEJTIwY2hhcmFjdGVycy5sZW5ndGglM0IlMEElMjAlMjBmb3IlMjAlMjhsZXQlMjBpJTIwJTNEJTIwMCUzQiUyMGklMjAlM0MlMjBsZW5ndGglM0IlMjBpKyslMjklMjAlN0IlMEElMjAlMjAlMjAlMjByZXN1bHQlMjArJTNEJTIwY2hhcmFjdGVycy5jaGFyQXQlMjhNYXRoLmZsb29yJTI4TWF0aC5yYW5kb20lMjglMjklMjAqJTIwY2hhcmFjdGVyc0xlbmd0aCUyOSUyOSUzQiUwQSUyMCUyMCU3RCUwQSUyMCUyMHJldHVybiUyMHJlc3VsdCUzQiUwQSU3RCUwQSUwQWluaXQlMjglMjklM0I=</span><br></pre></td></tr></table></figure></details><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-70.png" alt="upload successful"></p><p>解密脚本，前面四行是这样的：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Fake register for referrer to get warp plus bandwidth</span></span><br><span class="line"><span class="keyword">const</span> referrer = <span class="string">&quot;0f44ddea-cc25-473a-a897-9a3c7a45ef79&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> timesToLoop = <span class="number">1024</span>;</span><br><span class="line"><span class="keyword">const</span> retryTimes = <span class="number">100</span>;</span><br><span class="line"><span class="comment">// How many sec to sleep, currently rate limit might be apply to per min per ip from my observation.</span></span><br><span class="line"><span class="keyword">const</span> sleepSeconds = <span class="number">30</span>;</span><br></pre></td></tr></table></figure><p>第二行 <code>const referrer</code> 是你的ID，点击设置=》更多设置=》诊断，客户端配置的ID就是你的ID,默认是我的,<span class="heimu">当然你不介意也可以帮我刷哦 </span></p><p>第三行 <code>timesToLoop</code>,指你刷几个GB流量，1024表示1024个模拟，一个模拟1GB，默认保持刷1TB。</p><p>第四行 <code>const retryTimes</code> 指失败重试几次,这个值越大越好,默认100次足够了.</p><p>第七行 <code>const sleepSeconds</code> 指失败后冷却几秒,个人测试下来发现值大约稳定在30s~50s间,太小了重试过多会封ip,太大了效率太低.默认为30.</p><p>安装nodejs环境,解密脚本,重命名为 <code>n.js</code> ,命令行进入脚本所在文件夹使用 <code>node n.js</code>,使劲刷吧!</p><blockquote><p>警告：玩过火了导致封号，本站不负责一切责任！</p></blockquote><h1 id="后言"><a href="#后言" class="headerlink" title="后言"></a>后言</h1><p>欸，很担心CF被这么玩会不会玩坏掉，拿到好处时才觉得CF良心啊！</p><p>由于脚本用的是Nodejs,而heroku也有nodejs环境,所以.嗯,对,你懂的.</p><p>嗯，又是一篇优雅的撸羊毛技巧。<br><img src="https://npm.elemecdn.com/chenyfan-oss@1.1.11/186.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> 撸羊毛 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CloudFlare </tag>
            
            <tag> 撸羊毛 </tag>
            
            <tag> 奇淫巧计 </tag>
            
            <tag> Warp+ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>免·爬·城·国内管理分享GoogleDrive</title>
      <link href="/posts/74e90c90/"/>
      <url>/posts/74e90c90/</url>
      
        <content type="html"><![CDATA[<p>昨天网上早早写完作业在Github上瞎逛，话说回来Github Explorer有时候真的很神奇给我推荐一些稀奇好用或正好急缺的东西，比如Accesser、MusicPlayer2、PHPProxy等等等等。结果昨天搜罗了这么一个极棒的玩意：<a href="https://github.com/maple3142/GDIndex">GDIndex</a>。</p><h2 id="这个是拿过来干什么的"><a href="#这个是拿过来干什么的" class="headerlink" title="这个是拿过来干什么的"></a>这个是拿过来干什么的</h2><p>基于rClone和CFWorkers的脚本，可以免F下载上传管理GoogleDrive。</p><p>国内访问GoogleDrive总会被…咳咳…那个…对了…嗯…你懂的东西干掉,所以只能隔洋兴叹.说实话个人使用googledrive真的不频繁,当时注册的时候只有4GB,2017年注册至今,我就放了一部400MB的视频,根本没有用多少. 至于当时为什么不用,这是后面的事情了,这里暂时不讲.<br>只是不知道为什么,现在我的谷歌硬盘变成15GB了,emmmm,也不差.</p><p>这个脚本有两个作用:1.在国内管理GoogleDrive2.快速分享给国内用户.</p><p>说实话,这个正好填充我的缺陷,小文件我直接扔在Heroku+CF Always Online,静态文件缓存我调到一星期,勉强支撑私有云的下载;太大的文件直接放百度网盘上,虽然下载速度慢了点,但对于分享还是可以的;</p><p>但那种不大不小的文件,比如一个80MB的安装包,你让我放哪?放heroku?由于它有500MB的限制,似乎不可能;放百度网盘?就因此要启动一个客户端,还那么慢,我觉得估计没人会下载.</p><p>因此,原先准备放OneDrive上,但OneIndex脚本运行在Heroku上失败了…这个时候我看到了GDIndex.</p><p>…<br>简直上天!这是我搭好的公开分享:<br>[<a href="https://drive.cyfan.top">https://drive.cyfan.top</a> ]<br>避免和谐,有用户密码,均为User.主要分享一些不是特别大的安装包,当然不会<br>放那些违反中国大陆法律的东西,某些人就省省心吧.</p><h2 id="搭建"><a href="#搭建" class="headerlink" title="搭建:"></a>搭建:</h2><p>搭建过程变得异常简单:</p><p>准备:</p><ul><li>Google账号(没有可以注册一个)</li><li>CloudFlare账号(可以没有自己的域名)</li></ul><h3 id="1-代码生成"><a href="#1-代码生成" class="headerlink" title="1:代码生成"></a>1:代码生成</h3><p>(确保在代理情况下进行,因为要登入googledrive)</p><p>进入[<a href="https://gdindex-code-builder.glitch.me/">https://gdindex-code-builder.glitch.me/</a> ],</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-52.png" alt="upload successful" title="界面"></p><p>点击<kbd>Click me</kbd></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-53.png" alt="upload successful"></p><p>点击登入,允许(此时需要你的谷歌账号授权,如果你觉得这对你的账号造成了危险,可以换一个不常用的谷歌账号,反正我个人使用时没有问题)</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-54.png" alt="upload successful"><br>获取密钥:<br>回到[<a href="https://gdindex-code-builder.glitch.me/">https://gdindex-code-builder.glitch.me/</a> ]，粘贴密钥</p><p>关于 <code>Default Root ID</code> 如果你只是管理自己个人网盘,私有使用,那么请保持默认,但如果和我一样是公开的,而且只希望访问其中一个文件夹内容,那么:</p><p>登入自己的谷歌drive</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-55.png" alt="upload successful"></p><p>进入希望分享的文件夹,比如 <code>Public</code></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-56.png" alt="upload successful"></p><p>那么地址栏就会变成这样:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://drive.google.com/drive/folders/1Gv9Un9FGJtbpVY4-xuxI3ELsUzAlxwrx</span><br></pre></td></tr></table></figure><p>folders后面就是文件夹ID,我这里是 <code>1Gv9Un9FGJtbpVY4-xuxI3ELsUzAlxwrx</code></p><p>回到[<a href="https://gdindex-code-builder.glitch.me/">https://gdindex-code-builder.glitch.me/</a> ]，粘贴ID</p><p><code>Enable authentication</code> 强烈建议开启,如果你不希望自己搭起来的GDIndex被和谐,请听信我的话!即使是公开分享,也最好设置一个!</p><p><code>Enable file uploading</code> 如果只是个人使用,请开启,如果公开分享…你肯定不希望你的网盘被拿来做公开网盘.</p><p>点击<kbd>Get Code</kbd>,底下会生成代码,这里就不公开展示了</p><h3 id="2-部署代码"><a href="#2-部署代码" class="headerlink" title="2.部署代码"></a>2.部署代码</h3><p>回到cloudflare,点击workers,新建,粘贴代码,重命名workers（比如pdrive）,点击部署,完成!</p><p>(我甚至都懒得贴图了,这一步真的没什么技术含量可言)</p><p>这个时候的地址是：<code>https://#WorkersName.#UserName.workers.dev</code> 把它输入地址栏直接访问，看看行不行。</p><h3 id="3-自选CDN-可选"><a href="#3-自选CDN-可选" class="headerlink" title="3.自选CDN(可选)"></a>3.自选CDN(可选)</h3><p>实际上到这一部已经完成了,直接访问workers网址就可以使用了,但速度很慢，而且搞不好某一天 <code>「羲农去我久」1PjT8X/2TCX3i。</code> 发威，把workers全盘封禁怎么办？</p><p>（这一步需要有你自己的域名，没有自己域名的可以不做，但速度就很慢了）</p><p>进入cloudflare，点击workers,新建路由，选择之前新建的Workers，写入需要绑定的域名：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-57.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-58.png" alt="upload successful"></p><p>确定，回到DNS，添加A记录，名字为刚刚绑定的那个，ip地址请去我博客-关于界面查看所有CFIPv4地址，这里比较推荐1.0.0.* CN2线路，速度不错。</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-59.png" alt="upload successful"></p><p>最好在加个ipv6，这样对于ipv4小水管比较好解决问题，本站暂时不添加，因为国内ipv6环境真的不是很好。</p><p>完成，试试自己的谷歌硬盘吧！</p><h2 id="一些比较棒的功能"><a href="#一些比较棒的功能" class="headerlink" title="一些比较棒的功能"></a>一些比较棒的功能</h2><h3 id="支持密码保护"><a href="#支持密码保护" class="headerlink" title="支持密码保护"></a>支持密码保护</h3><p>此处不详解。</p><h3 id="支持直接上传"><a href="#支持直接上传" class="headerlink" title="支持直接上传"></a>支持直接上传</h3><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-60.png" alt="upload successful"></p><p>自选CDN，上传速度很可观</p><p>但是有个问题，上传大于100MB的文件会随机失败，这应该是Workers的限制，因为免费Workers每分钟最多支持1000次，超过了就会暂时宕机</p><h3 id="支持离线下载"><a href="#支持离线下载" class="headerlink" title="支持离线下载"></a>支持离线下载</h3><p>这是我远远没有想到的，没想到还可以从网址获取，可惜不支持种子磁力电驴，也许可以和WebTorrent结合。</p><p>打开Upload From Url，输入网址：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-61.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-62.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-63.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-64.png" alt="upload successful"></p><p>不过上面也写的很清楚，由于CFWorkers的限制，下载大文件有可能会失败。</p><h3 id="支持免F下载"><a href="#支持免F下载" class="headerlink" title="支持免F下载"></a>支持免F下载</h3><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-65.png" alt="upload successful"></p><p>速度很可观，将近1.5MB/s，但请不要使用IDM！本来速度就可以了，如果使用IDM多线程，会导致CFWorkers提早达到每分钟阈值导致无法下载！</p><h3 id="支持在线预览视频文档音乐"><a href="#支持在线预览视频文档音乐" class="headerlink" title="支持在线预览视频文档音乐"></a>支持在线预览视频文档音乐</h3><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-66.png" alt="upload successful"></p><h3 id="支持放一些XXX福利的东西"><a href="#支持放一些XXX福利的东西" class="headerlink" title="支持放一些XXX福利的东西"></a>支持放一些XXX福利的东西</h3><p>这就是谷歌硬盘和百度网盘最大的区别（笑）<br>但我绝对不会在公开云上放这些的！（认真脸！）</p><h2 id="一些比较严重的缺陷"><a href="#一些比较严重的缺陷" class="headerlink" title="一些比较严重的缺陷"></a>一些比较严重的缺陷</h2><h3 id="上传很容易失败"><a href="#上传很容易失败" class="headerlink" title="上传很容易失败"></a>上传很容易失败</h3><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-78.png" alt="upload successful"></p><p>这个问题是在我试图上传htmlDesigner时发现的，上传上传就卡住了，原来是达到100MB,CloudFlare免费计划最多上传100MB限制，而且有时候上传完成却没有出现等等。这个就比较影响用户体验了。</p><h3 id="没有新建文件夹功能"><a href="#没有新建文件夹功能" class="headerlink" title="没有新建文件夹功能"></a>没有新建文件夹功能</h3><p>这个还行</p><h3 id="没有删除功能"><a href="#没有删除功能" class="headerlink" title="没有删除功能"></a>没有删除功能</h3><p>这个就比较糟心了</p><h3 id="水管有限"><a href="#水管有限" class="headerlink" title="水管有限"></a>水管有限</h3><p>这个倒还好，只要不太过分就行</p><h1 id="后言"><a href="#后言" class="headerlink" title="后言"></a>后言</h1><p>至少我已经很满意了，起码可以充分利用那15GB空间，而且可以外链，所以拿来当图床还行，只是延迟大了点。更棒的是只要不大规模分享，放些XXX还是可以滴…..</p><p>至于为什么以前不用GD原因:</p><ul><li>任何操作(哪怕是删除)就要F一次,我真的没这个耐心.</li><li>上传个大文件就很糟心了,免费代理的上传速度就…而且丢包断线常有,经常上传失败</li><li>4GB(GoogleDrive)&lt;2TB(BaiduDrive)</li><li>没有离线下载功能</li><li>当时百度限速还没有这么严重,哪怕是油猴脚本+IDM轻松跑满速(12.5MB/s),下部4GB电影6分钟完成</li></ul><p>现在百度网盘下载速度真的是…PanDownload是很聪明,采用Aria2多线程尽可能突破百度单线程限速,采用分享下载绕开账号限制,采用打包下载绕开IP限制…架不住百度网盘铁了心收费，现在单线程下载只有可怜的10kb/s…  </p><p>网上很多在疯传除了PanDownload的下载器,都是声称不限速,其实还没有pandownload聪明,有的用cookie登陆其实和账号密码登陆一样,只是多了个障眼法,让用户感觉安全一些;  </p><p>有的说爱奇艺播放器…好吧我这个不能驳回，但当时我下载了两部哈利波特电影将近12GB后又被限速了…</p><p>或者还有一个还可以说机智的下载器:ENFI下载器,采用P2P下载,这样从根本解决源头慢的问题,但是有流量限制,而且资源不热门时就根本没有加速效果了..</p><p>甚至现在百度网盘变本加利,多了个临时下载加速流量券,所以百度网盘这是侧面承认限速了吗???</p><p>欸,毕竟百度网盘采用新用户2TB本身就是个错误,虽然采用哈希储存的方式,架不住下载人多速度快.</p>]]></content>
      
      
      <categories>
          
          <category> 撸羊毛 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CloudFlare </tag>
            
            <tag> Workers </tag>
            
            <tag> 网盘 </tag>
            
            <tag> 干货 </tag>
            
            <tag> 脚本 </tag>
            
            <tag> GoogleDrive </tag>
            
            <tag> 下载 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一次愉快的更换域名经历</title>
      <link href="/posts/992fe77/"/>
      <url>/posts/992fe77/</url>
      
        <content type="html"><![CDATA[<p>五天前买了白菜价cyfan.top，由于没有实名被ServerHold了，从昨天回了趟老家，顺便拿回了我的身份证，早上八点开始了实名认证的经历。</p><p>现在，全站从 <code>cyfan.ga</code> 永久迁址到 <code>cyfan.top</code>。</p><p>所花的时间：从早上8点到现在11点，只用了3小时。</p><p>这已经很快了好吧…</p><h1 id="实名："><a href="#实名：" class="headerlink" title="实名："></a>实名：</h1><p>由于事先为了方便提交，我很早就下好了阿里云手机端。</p><p>拿到身份证，点击阿里云，分别实名认证账号、信息模板、域名账号。</p><p>接着，我看了一下说明，实名认证大约要3-5天。</p><p>好吧╮(╯-╰)╭，这工单处理速度真的是。</p><p>结果刚发完牢骚，手机信息就给我发进来，说信息模板实名认证成功。</p><p>.<br>..<br>…<br>….</p><p>这就是你说的3天?是不是你的时间跟我不太一样啊,这工单的处理速度真的是…还好未成年可以实名…</p><p>不出3分钟,当我正在实名认证支付宝(对,我的支付宝还没有实名认证),连续两条信息发过来,分别是账号和域名实名成功…</p><p>说实话，这速度真的是大大超乎我的预料，这里真心赞扬阿里云工单的处理速度！给个赞！</p><p>接着等待Whois上ServerHold消失，等待了15分钟,终于!:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-42.png" alt="upload successful"></p><h1 id="更换NS"><a href="#更换NS" class="headerlink" title="更换NS"></a>更换NS</h1><p>由于习惯了CF的简洁控制台、良心的附加服务、高效的更新和较快的速度，我还是迁回了CF：</p><p>更换NameServer：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-43.png" alt="upload successful"></p><p>回到CloudFlare上，删除重新添加，结果卡在了这么哭笑不得的步骤：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-44.png" alt="upload successful"></p><p>NS你让我怎么改？？？</p><p>好吧，估计是ServerHold缓存没有搞回来,预计24小时…</p><p>于是手贱在CF论坛上发了一篇求助:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-46.png" alt="upload successful"></p><p>但!问!题!是!当我发出这篇求助后3秒不到,我的邮箱里就接到一篇来自CF的邮件,显示域名托管成功:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-47.png" alt="upload successful"></p><p>当时我脸都黑了,你这个托管时间有点及时啊,为什么偏偏在我发出求助后…</p><p>欸不管了,开工!</p><h1 id="更替域名"><a href="#更替域名" class="headerlink" title="更替域名"></a>更替域名</h1><p>期间的痛苦我觉得没必要在这里重新复述一遍了,也就是一个一个删除,一个一个增加,Github飞快的解绑加绑,CloudFlare修改Workers,这也没得抱怨,欸,起码比上次更换Hexo环境轻松多了.</p><p>很快,所有替换都完毕了,接下来要处理第三方服务了.</p><h1 id="第三方服务"><a href="#第三方服务" class="headerlink" title="第三方服务"></a>第三方服务</h1><h2 id="Google-Adsense"><a href="#Google-Adsense" class="headerlink" title="Google Adsense"></a>Google Adsense</h2><p>说实话广告收入本来就是附加的,到现在只赚了0.24$,折合人民币一块五毛,正好抵得上2个月的域名费用。。。</p><p>添加域名，添加代码，提示人工审核要2星期，欸，经历以前的添加广告的经历，我觉得可能不止，算了，添加都添加了，还能怎样…估计两个星期我都要上学去了..</p><h2 id="Gitalk"><a href="#Gitalk" class="headerlink" title="Gitalk"></a>Gitalk</h2><p>由于换了域名,回源地址要改一下,这里也就不展开说了</p><h2 id="Google-Search"><a href="#Google-Search" class="headerlink" title="Google Search"></a>Google Search</h2><p>之前仅仅只是在谷歌上提交了搜索,也不知道怎么搞得,百度必应DuckDuckGo上都有了(也不是什么坏事),不过主要来源是谷歌,而且只是在谷歌上搞.</p><p>谷歌还是比较贴心的,多了一个快速迁移,只要是更换域名就都可以使用:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-48.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-49.png" alt="upload successful"></p><p>PS:使用时需要添加301永久重定向,CloudFlare上可以快速设置PageRule达到,不过Free最多设置三个…(资本主义大佬)</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-51.png" alt="upload successful" title="你这个有点小贵啊"></p><p>由于 <code>.ga</code> 这个域名还有4个月,我还有其他用途,总不可能泛域名301吧,所以也就添加了两个原先在谷歌上有较多记录的两个.</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-50.png" alt="upload successful"></p><h2 id="QQ企业邮箱"><a href="#QQ企业邮箱" class="headerlink" title="QQ企业邮箱"></a>QQ企业邮箱</h2><p>eeeeeeeem,我自己是删除了原先的账号重新添加,当然这是最简单的法子,因为这个账号里真的没什么可以用的.</p><h1 id="个人API类"><a href="#个人API类" class="headerlink" title="个人API类"></a>个人API类</h1><p>这个真的很蛋疼,因为我自己都忘记了到底添加了多少个api,只能依靠Github自带功能搜索 <code>cyfan.ga</code> 手动替换,对于一些多的api就直接下载,靠Notepad++的批量替换功能解决,比如Bing美图一替换就有40个,这个做起来还是可以的.</p><h1 id="源站跳转"><a href="#源站跳转" class="headerlink" title="源站跳转"></a>源站跳转</h1><p>由于本人比较活泼,在各个站点都有留下足迹,别人点击就可以进入我的博客.</p><p>但是全部301跳转是不可能的,所以干脆加了个CFWorker+GithubPages+JS跳转,重写了一下UI,访问原先站点就通通跳向 <code>cyfan.top</code></p><h1 id="安定下来了"><a href="#安定下来了" class="headerlink" title="安定下来了"></a>安定下来了</h1><p>话说为什么要花大钱(9￥)买个 <code>.top</code> 域名，纯粹是想安定下来好好写博客， <code>.ga</code> 毕竟是免费1年域名,测试开发还行,想永久下去真的很难了,而且最主要的是Freenom最近一直关闭注册,一直换域名就很难让别人能关注到你写的东西..</p><p>阿里云是真的便宜, <code>.top</code>首年只要 <code>9￥</code>，可以随时续费，接下来每年都只要续费 <code>26￥</code>,对于我这种学生党而言,过年的时候支付宝攒个26块还是有的.</p><p>说实话搭建这个站点的费用真的不高,每年花费点鼠标钱（一个鼠标30块）就可以永久维护下去</p><ul><li>静态托管:Github (Coding托管些大文件): <strong>0.00￥/year</strong></li><li>动态托管:Heroku(600hours/m) <strong>0.00￥/year</strong></li><li>域名: <code>.top</code> 白菜价 <strong>26.00￥/year</strong></li><li>CDN:CloudFlare,国内外还行的速度(当然不指望在特殊时期还能保持较高的速度) <strong>0.00￥/year</strong></li></ul><p>另外Adsense提供了微薄的收入…(0.24$/year)</p><p>折算下来折腾这个站点真的很值得了,花那么一点小钱就可以在互联网一个角落里打理一片属于自己的天地,这真的很让人兴奋.</p><p><span class="heimu">加个域名的好处就是可以随便加友链啦,hiahiahia○( ＾皿＾)っHiahiahia…</span></p><p>顺便测试了一下全国访问情况:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-45.png" alt="upload successful"></p><p>还行,那就这么办吧!</p>]]></content>
      
      
      <categories>
          
          <category> 爱折腾 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 域名 </tag>
            
            <tag> 更换 </tag>
            
            <tag> 迁址 </tag>
            
            <tag> 公告 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Bing美图与故事PHP正式上线</title>
      <link href="/posts/20ca08a/"/>
      <url>/posts/20ca08a/</url>
      
        <content type="html"><![CDATA[<p>欸…自己挖的坑必须要自己填啊…</p><p>最近听信了某个·大佬·<span class="heimu" title="你知道的太多了">其实是把我做实验的</span>,在Hexo环境安装了dplayer,结果装到一半,断网了,重新安装就疯狂报错,以至于想要npm卸载都卸不了,结果手贱，手动删除了几个npm依赖，结果导致整个Hexo环境崩溃了<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-5.png" >，一旦进行 <code>hexo server -w</code> 就会冒出一大片红海。害的我不得不备份文章和主题后删除了整个Hexo环境，从头安装Hexo，结果忘记了我还安装了一大堆插件，只好一个一个安装回去，期间的痛苦我真的再也不想回忆一遍,新手可以自己安装一遍Hexo+数十个插件，体验一下。问题是还把鼠标按坏了,现在打字变成异常困难的事情了…<img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-5.png"></p><p>欸，最近逃课太频繁，理科全挂科了，甚至在这一次<span class="heimu" title="你知道的太多了">尖子班</span>考试里化学挂科了，不应该这样的啊，我以前化学老棒老棒的了，看起来要拾回学习的心了。所以以后站点维护估计不会那么频繁了。</p><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>这两天因为Heroku每月时间重置了，又可以接着用了，于是考虑了很长时间决定工具箱和私有云重新上线。</p><p>不过工具箱因为绝大部分都是静态，没几个是动态的，所以打算采用动静态前后分离，动态资源以接口形式接到静态页面上，这样可以尽可能减少动态Heroku的运行时间，同样由于前端CloudFlare缓存大大减少调用时间。而私有云静态不可能,所以完全动态,又因为Heroku的时间计算是一个没验证账户一个月600小时,上个月不知道分成两个应用运行…所以干脆私有云和接口并在了一起，加上CloudFlare2hours的缓存，600小时一个月应该够用了…</p><h2 id="关于bing接口"><a href="#关于bing接口" class="headerlink" title="关于bing接口"></a>关于bing接口</h2><p>以前我在博客上写过怎么用BingPHP,但当时是用缓存的方式写入,但换到heroku上缓存写入就不可能了,于是想想办法解决, <code>windows.location</code> 会导致强制https至bing,对于不支持http就很吃亏了,最终采用 <code>header</code> 注入方式.</p><p>由于如果没有获取版权总觉得空荡荡，所以又特地写了一个获取bingcopyright的PHP，同时好好恶补了一下正则获取和解析xml。</p><p>还有当时没空写UI,这次特地去淘了两个css3和html5漂亮的界面,同时解决了手机端莫名其妙的UI问题.采用js检测UA的方式实现移动端和桌面端分别跳转.</p><p>这是实际使用:</p><p>桌面端:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/8.gif" alt="实际使用" title="桌面端动图"></p><p>手机端:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/9.gif" width="200%" height="200%"></p><p>解决手机端不兼容桌面端问题：</p><p>手机横屏bug（已修复）：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-40.png" alt="upload successful"></p><p>以及我的头像版权镇压，保证没有bug（不要删除ヽ（≧□≦）ノ！）</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-41.png" alt="upload successful"></p><p>已开源，<a href="https://github.com/ChenYFan/Bing_Pic_and_Copyright_Catcher">https://github.com/ChenYFan/Bing_Pic_and_Copyright_Catcher</a><br>不过暂时不允许转载删除版权和头像,因为修改这个花费我太多精力了,感谢您的理解!</p><p>今日Bing美图：</p><p><img src="https://pan.cyfan.top/api/bing/bing.php" alt="Bing" title="今日Bing美图"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.1.11/213.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 屌代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PHP </tag>
            
            <tag> Bing </tag>
            
            <tag> 美图 </tag>
            
            <tag> 版权 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>工具箱和私有云恢复！顺便讨论一下免费php供应商怎么选=&gt;</title>
      <link href="/posts/d72d7290/"/>
      <url>/posts/d72d7290/</url>
      
        <content type="html"><![CDATA[<h1 id="所有"><a href="#所有" class="headerlink" title="所有"></a>所有</h1><p>早上折腾了3个小时，终于完美恢复了两个因为heroku宕机而失效的php网站。</p><p>现在选择的是这家免费php ： <a href="https://ProFreeHost.com">ProFreeHost</a></p><p><span class="heimu" title="你知道的太多了">你让我买一台服务器???对不起,做不到,没钱.</span><span class="heimu" title="你知道的太多了">不过捐个八十一百还有可能会考虑</span></p><p>讲讲最近跳槽的free php hosts</p><h2 id="000Webhost"><a href="#000Webhost" class="headerlink" title="000Webhost"></a>000Webhost</h2><p>之前一直使用000webhost,这里给大家提个醒,千万不要用三蛋空间的东西了!!!太坑了!!!!虽然1GB硬盘10GB流量免费套餐很诱人,可完全就是个骗子!</p><p>之前在很多社交网站上都看到有人极力推荐，没广告，速度快。</p><p>PS：现在变成300MB磁盘和3GB带宽了：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-38.png" alt="upload successful"></p><p>可我真的登进去后才发现暗坑汹涌，<br>随便捡几个：</p><ul><li>绑定自定义域名最多<strong>2个</strong>，三个？对不起，请付费或左转至上司Hostinger购买<del>炒鸡便宜</del>的vps主机</li><li>MySQL数据库最多<strong>2个</strong>，三个？对不起，请付费或左转至上司Hostinger购买<del>炒鸡便宜</del>的vps主机</li><li>右下角的000wenhost广告需要你的支持，不能关闭哦！要关闭？对不起，请付费或左转至上司Hostinger购买<del>炒鸡便宜</del>的php</li><li>超长时间在线，保证你的网站能被别人访问！（官方介绍） 实际情况：在经历了多重人机检测、多重广告关闭，我终于在一个隐藏的很深的协议里看到了免费网站在线时间不少于95%，实际上个人检测在90%上下波动。</li><li>对于中国服务很不友好，其中不仅仅有 <code>「羲农去我久」1PjT8X/2TCX3i。</code> 的功劳，他自己也对来自中国的ip进行了限速。</li><li>以及隐私政策里写的很隐蔽的 ·我们可以在特殊情况下掌握您账户的控制权 ·</li><li>…</li></ul><p>以至于首页极其搞笑的计数器：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/7.gif" alt="upload successful" title="中间短暂的空白是刷新"></p><p>当时我注册了两个账号,一个拿来搭建网站,另一个搭建 <code>「故人重分携，临流驻归驾」1lDFXf/1wDWhT。</code> 个人使用,结果没用几天搭建的  <code>「故人重分携，临流驻归驾」1lDFXf/1wDWhT。</code> 直接给我Block了，点进去说是第三方服务举报，说我违反了使用条约，就把整个账户禁用了，而且恢复还要提交个人身份证明。</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-37.png" alt="upload successful"></p><p>？？？？？？？？？</p><p>见了鬼了，我就想问一下，搭个个人镜像哪来的第三方？流量没走到20MB，使用不超过5天，根本没有理由就把我禁止了，什么玩意？</p><p>更令人难受的是没过一星期，把我的工具箱和私有云也给禁用了，也是同样的第三方举报，也是违反使用条约，也是整个账户禁用。</p><p>我就服了，直接说不干不行吗，为什么p话怎么多？？？</p><p>随便一找就在百度上找到难兄难弟：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-36.png" alt="upload successful" title="emmmmm..."></p><p>幸好我的所有网站资料一直有一份备份在本地，不然整个网站没了我就要疯了。</p><p>幸好我博客没有使用动态，要是连窝颠了那不就完蛋了。</p><p>况且对于000webhost种种限制我真的没办法忍受,于是我就出坑了.</p><h2 id="heroku"><a href="#heroku" class="headerlink" title="heroku"></a>heroku</h2><p>这个其实我很早就开用了.</p><p>这个还是比较良心的,免费没验证的用户最多五个应用,经过信用卡验证的最多20个,支持php\nodejs\ruby\python主流网页应用.</p><p>据这个nodejs可以搭建代理,php可以搭建 <code>「故人重分携，临流驻归驾」1lDFXf/1wDWhT。</code>,结果Youtube上涌现出一堆 <code>「遥夜亭皋闲信步，乍过清明，早觉伤春暮。数点雨声风约住，朦胧淡月云来去」qzNyk/2xYh2k。</code> 、 <code>「去郭轩楹敞，无村眺望赊。澄江平少岸，幽树晩多花。细雨鱼儿出，微风燕子斜。城中十万戸」3tdLut/3nY4xB。</code>等等撸羊毛技巧。不过啊，同学们，撸羊毛也要有限度啊，把羊撸死了还撸什么羊毛啊！！，现在Heroku国内下载已经严重限速到15kb/s，部分情况下直接阻断。不过这个问题可以通过CFWorkers解决。</p><p>上传方式有点少,一般用Git方式或直接绑定github.</p><p>当然也有几条有点坑的问题</p><ul><li>每月600hours运行，添加银行卡验证再加400hours（实际上600hours够用了，平均每天能运行20小时）</li><li>未绑定银行卡不能使用CNAME绑定域名；这个比较坑，如果只是搭建网站还能用CFWorkers。</li><li>以及半小时没人访问休眠，有人访问会自动唤醒，但大概要5秒。</li></ul><p>之前就一直使用这种方案，感觉运行的还行，不过前几个月不知道为什么只要是php运行就会报错,现在好了，不过已经换了就懒得还回来了。</p><h2 id="ProFreeHost"><a href="#ProFreeHost" class="headerlink" title="ProFreeHost"></a>ProFreeHost</h2><p>这家是今年新开的，不过广告没做的很响，也没多少人推荐。</p><p>似乎可以无限注册，每注册一个就会给一个独立ip，但是不是固定的暂时不知道</p><p>支持NS绑定域名（不过获取到独立IP后可以用A记录绑定）</p><p>不过独立ip全部都被 <code>墙</code> 了,只能用CFCDN复活。</p><p>只是无法添加SSL证书很蛋疼，那个添加SSL的cPanel界面死活进不去，害的我不得不把CloudFlare改成链接到源服务器不加密，折腾了将近一小时。</p><p>上传方式和000webhost一样，支持网页上传和FTP上传，只能说还行。</p><p>cpannel界面烂的一撇，不过至少还能用，就先凑合吧。</p><p>隐私政策说的很清楚，不会莫名其妙禁用账户，不过实际效果还需要检验。</p><p>欸，目前看来这个先凑合着用吧。</p><p>不过还行的是，支持php修改文件，也就是说我的EncodeExplorer也支持上传，在国内免翻也能上传文件，这个还行。</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-39.png" alt="upload successful"></p><p><del>游客账号：admin<br>密码： admin<br>游客账号只能浏览，不能能添加上传删除。</del></p><h1 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h1><p>欸，现在也只能走一步看一步了，<code>.top</code> 域名这事搞得我浑身难受,至少今天把php服务搞定了,也行,每天都有小突破.</p><hr><p>华丽丽的分割线</p><hr><p>2020年3月16日添加：</p><p>真不好意思，折腾了这么多天，又把数据全部迁回Heroku了。</p><p>欸，ProFreeHost其实有个地方相当的坑，单文件最多只能存储4M，再大就直接403了，欸，算了，就当作临时盘白嫖吧。</p><p>到最后来还是Heroku靠谱。</p>]]></content>
      
      
      <categories>
          
          <category> 要公告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PHP </tag>
            
            <tag> 撸羊毛 </tag>
            
            <tag> 免费 </tag>
            
            <tag> 工具箱 </tag>
            
            <tag> 私有云 </tag>
            
            <tag> 恢复 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>白菜价域名的问题</title>
      <link href="/posts/2698fd57/"/>
      <url>/posts/2698fd57/</url>
      
        <content type="html"><![CDATA[<p>……………………………………………</p><h1 id="没有开头的开头"><a href="#没有开头的开头" class="headerlink" title="没有开头的开头"></a>没有开头的开头</h1><p>今天2020年3月12日早上去万网，发现<code>.top</code>域名首年只要9块钱.</p><p>真的只要9块钱,而且下一年续费也炒鸡便宜,只要26元,这点小钱还是付的起的.</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-21.png" alt="upload successful"></p><p>因为自己的.ga域名毕竟是免费域名,拿出去没牌面.Freenom半死不活,现在又不能重新购买白嫖撸羊毛,反正9元也不贵,买就买吧，就把.top换成永久站点名字也行.</p><p>然后手贱,一步一步点下去,支付宝一扫,就在那指纹按下去的一瞬间,我突然意识到一件事情,不用实名认证吗?</p><p>结果低头一看,支付成功.</p><p>emmmmmm…既然买了,那就看看吧.</p><p>点进去,默认的NS是阿里云,用这个很容易被ServerHold,而且不能用CFCDN.</p><p>国内备案你就让我别想了,你让我手持身份证拍照很抱歉我做不到,况且我服务器本来就是白嫖Github+CF高速香港CDN不在国内,也不需要备案.</p><p>于是我就换成了CoudFlare的NameServer:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-22.png" alt="upload successful"></p><p>结果CloudFlare死活不肯接受:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-23.png" alt="upload successful"></p><p>但是Whois已经确认绑定完成了.</p><p>…</p><p>我当时就无语了,NS解析已经删除了,人家whois也说可以了,怎么就你不行呢?</p><p>放ICANN Lookup上查:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-24.png" alt="upload successful"></p><p>怎么就被serverHold了???????还有注册姓名全部是空的为什么????</p><p>前往ICANN帮助文档:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-26.png" alt="upload successful"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">If you provided delegation information (name servers), this status may indicate an issue with your domain that needs resolution. If so, you should contact your registrar to request more information. If your domain does not have any issues, but you need it to resolve in the DNS, you must first contact your registrar in order to provide the necessary delegation information.</span><br></pre></td></tr></table></figure><p>至少以我现在的英语水平,还是能勉强读懂的,大意就是注册商没有给予完整的注册人信息;</p><p>可是我在万网填的东西比当时Freenom填的东西还要多,怎么就没完整呢???</p><p>回到万网,我找了找帮助文档:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-25.png" alt="upload successful"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-27.png" alt="upload successful"></p><p>行了行了,到这一步我也明白了,简单的说不给实名认证就故意不填写完整,故意Serverhold,目的就是要实名认证.</p><p>可是,问题是我身份证落在老家,现在疫情这么严重,你让我怎么回去拿????</p><p>(而且问题是我还是个学生,未成年…)</p><h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>后来想一想,万网域名白菜价肯定是有它的原因的,毕竟不拿点用户隐私资料,不应付工信部压力,这饭真的没法恰了.</p><p>欸,算了, <code>.top</code> 买来也不算贵,而且 <code>cyfan.ga</code> 还有5个月余额,先吊这吧,有空再换站点.</p><p>说实话当时建立这个博客纯粹是试水,纯粹测试一下有没有写博客的毅力,大家看看我以前的博文就知道了,基本都是直接搬运的,这也是为什么用免费域名的原因,考试考完了仔细思考了一下,发现自己创作博文更加有趣,结果最近就入水了…</p><p>白菜价域名确实便宜,Godaddy上最经济的续费价格域名应该是<code>.de</code>,大概每年56RMB,其它的大都首年便宜,续费就令人望而止步了.</p><p>欸,还能说什么呢,既然买了,就更应该好好写.</p>]]></content>
      
      
      <categories>
          
          <category> 随心记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 域名 </tag>
            
            <tag> 便宜 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo-Admin:体验如Wordpress般GUI编辑</title>
      <link href="/posts/4d89c422/"/>
      <url>/posts/4d89c422/</url>
      
        <content type="html"><![CDATA[<p>先放图：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/pasted-0.png" alt="图片" title="Hexo-Admin"></p><p>怎么说，逛Github时偶然间发现了这个插件，感觉还不错。</p><p>等到现在在用的时候真的感觉不仅仅是不错了,简直就是舒爽啊.</p><h1 id="简介"><a href="#简介" class="headerlink" title="简介:"></a>简介:</h1><p>官网地址: <a href="https://github.com/jaredly/hexo-admin">Github</a></p><p>安装:</p><p>一句话的事:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-admin</span><br></pre></td></tr></table></figure><blockquote><p>npm下载慢??? <a href="/2019/07/19/国内加快NPM下载速度/">&gt;&gt;点此</a></p></blockquote><p><style><br>  .alignleft {<br>display: inline;<br>float: left;<br>}<br>//居右<br>.alignright {<br>display: inline;<br>float: right;<br>}<br>//居中<br>.aligncenter {<br>clear: both;<br>display: block;<br>margin:auto;<br>} </style><br>至于安装的时候出现很多很多报错,这是版本不兼容原因,不过并不影响正常使用,比如我随随便便报了这么多错误</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">√ Installed 1 packages</span><br><span class="line">√ Linked 221 latest versions</span><br><span class="line">√ Run 0 scripts</span><br><span class="line">deprecate hexo-admin@2.3.0 › bcrypt-nodejs@0.0.3 bcrypt-nodejs is no longer actively maintained. Please use bcrypt or bcryptjs. See https://github.com/kelektiv/node.bcrypt.js/wiki/bcrypt-vs-brypt.js to learn more about these two options</span><br><span class="line">deprecate hexo-admin@2.3.0 › connect-auth@0.6.1 › connect@2.7.x connect 2.x series is deprecated</span><br><span class="line">deprecate hexo-admin@2.3.0 › browserify@11.2.0 › glob@4.5.3 › minimatch@^2.0.1 Please update to minimatch 3.0.2 or higher to avoid a RegExp DoS issue</span><br><span class="line">deprecate hexo-admin@2.3.0 › less@2.7.3 › request@2.81.0 › hawk@~3.1.3 This module moved to @hapi/hawk. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.</span><br><span class="line">deprecate hexo-admin@2.3.0 › less@2.7.3 › request@2.81.0 › hawk@3.1.3 › cryptiles@2.x.x This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).</span><br><span class="line">deprecate hexo-admin@2.3.0 › less@2.7.3 › request@2.81.0 › hawk@3.1.3 › sntp@1.x.x This module moved to @hapi/sntp. Please make sure to switch over as this distribution is no longer supported and may contain bugs and critical security issues.</span><br><span class="line">deprecate hexo-admin@2.3.0 › less@2.7.3 › request@2.81.0 › hawk@3.1.3 › boom@2.x.x This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).</span><br><span class="line">deprecate hexo-admin@2.3.0 › less@2.7.3 › request@2.81.0 › hawk@3.1.3 › hoek@2.x.x This version has been deprecated in accordance with the hapi support policy (hapi.im/support). Please upgrade to the latest version to get the best features, bug fixes, and security patches. If you are unable to upgrade at this time, paid support is available for older versions (hapi.im/commercial).</span><br><span class="line">Recently updated (since 2020-03-04): 2 packages (detail see file E:\bloghexo\node_modules\.recently_updates.txt)</span><br><span class="line">  Today:</span><br><span class="line">    → hexo-admin@2.3.0 › browserify@11.2.0 › deps-sort@1.3.9 › subarg@1.0.0 › minimist@^1.1.0(1.2.3) (03:08:24)</span><br><span class="line">√ All packages installed (210 packages installed from npm registry, used 45s(network 44s), speed 213.53kB/s, json 222(516.55kB), tarball 8.67MB)</span><br></pre></td></tr></table></figure><p>而且在运行 <code>hexo server -w</code> 时也随随便便报了一个警告：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(node:7628) [DEP0061] DeprecationWarning: fs.SyncWriteStream is deprecated.</span><br></pre></td></tr></table></figure><p>不过根本不影响正常使用,反正我Hexo-Admin现在还能使用</p><h2 id="好处"><a href="#好处" class="headerlink" title="好处"></a>好处</h2><h3 id="直接在写的时候就能看到预览"><a href="#直接在写的时候就能看到预览" class="headerlink" title="直接在写的时候就能看到预览"></a>直接在写的时候就能看到预览</h3><p>之前编辑博客时一直使用的是NotePad++,因为很喜欢它的代码高亮,甚至支持MarkDown,但是就是没有预览.</p><p>还记得当时打字时省麻烦, <code>&gt;</code> 应用符号懒得换行,结果导致在部署完成后才发现有点不对,害的我又一行一行换行过去.</p><p>但是使用Hexo-Admin后,我每新增一行,右边就会实时出现文章.</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-1.png" alt="图片" title="预览"></p><p>爽翻了.</p><p>甚至上下滑动它都会自动同步:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/1.gif" alt="图片" title="Hexo-Admin上下滑动自动同步"></p><h3 id="草稿制"><a href="#草稿制" class="headerlink" title="草稿制"></a>草稿制</h3><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-0.png" alt="图片" title="草稿"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-2.png" alt="图片"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-3.png" alt="图片"></p><p>当我点击 <code>New Post</code>时，它的显示就变成了灰色，这说明这是草稿形式，并不会真正发布。</p><p>这对于我这样的手残党真的很有用。虽然hexo自带草稿功能，但是同样是通过命令实现，写完之后还是要手动转正，那我还不如新建文本文档写完后剪切粘贴呢。</p><p>但是，Hexo-Admin的发布只要按一下 <code>Publish</code>,所有的事情就交给Hexo吧!</p><h3 id="迅速添加tag和categories"><a href="#迅速添加tag和categories" class="headerlink" title="迅速添加tag和categories"></a>迅速添加tag和categories</h3><p>看到右上角的齿轮了吗，点击它，</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-4.png" alt="图片"></p><p>时间作者都能改，这个不重要，Tag和Categories换行就是随便填写，这个舒爽度直接爆表啊有木有。</p><h3 id="随手添加一张图片"><a href="#随手添加一张图片" class="headerlink" title="随手添加一张图片"></a>随手添加一张图片</h3><p>这个功能我觉得是Hexo-Admin亮点，没有之一。</p><p>你体验过在Hexo里添加一张图片的痛苦吗？？？？</p><p>以前用NotePad++，添加一张截图要这样：</p><ol><li><kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>PrtSc</kbd> 截图</li><li>新建jpg空白图像</li><li>右键，编辑，粘贴</li><li>重命名文件</li><li>剪切到 <code>/source/pic/</code> 文件夹里，必要的时候会新建一个文件夹</li><li>回到NotePad++，键入：<code>![标题](路径 &quot;标题&quot;)</code></li></ol><p>现在用了Hexo-Admin:</p><ol><li><kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>PrtSc</kbd> 截图</li><li><kbd>Ctrl</kbd>+<kbd>V</kbd></li><li>删掉一个多余的<code>/</code></li><li>添加标题</li></ol><p>直接舒爽了好几倍,以后添加图片再也不用那么吃力了.</p><p>(幸好添加了懒加载,这样就可以放肆的添加图片啦)</p><p>至于图片本来就以一个文件存在,那就有点麻烦了,剪切,改名,添加,完成!</p><p><img class="alingleft" src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-5.png"></p><p>PS:Hexo Admin可以直接复制图片粘贴，然后自动下载到指定目录并重命名。但在Windows中粘贴后会出现裂图。这时就需要手动把括号中的前后两个斜杠去掉，就能正常显示。</p><h3 id="设置密码"><a href="#设置密码" class="headerlink" title="设置密码"></a>设置密码</h3><p>这对于静态玩家来说毫无关系，毕竟人家权限再大也打不过你，不过如果是部署在000webhost类似的免费可修改空间，或者是纯粹在本地装B的，也可以。</p><p>点击Setting：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-6.png" alt="图片"></p><p>点击 <code>Setup authentification here.</code></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-7.png" alt="输入"></p><p>输入用户名、密码、和密钥。</p><p>密钥建议手滚键盘，反正你也不用记。</p><p>在下面会生成代码块，类似于这样：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># hexo-admin authentification</span><br><span class="line">admin:</span><br><span class="line">  username: username</span><br><span class="line">  password_hash: $2a$10$L.XAIqIWgTc5S1zpvV3MEu7/rH34p4Is/nq824smv8EZ3lIPCp1su</span><br><span class="line">  secret: my super secret phrase</span><br><span class="line">  </span><br></pre></td></tr></table></figure><p>密码是依靠哈希加密，完全不用担心泄漏。</p><p>把这一串代码复制到站点配置文件 <code>_Config.yml</code>,重启hexo,完成!</p><h3 id="一键部署"><a href="#一键部署" class="headerlink" title="一键部署"></a>一键部署</h3><p>什么，你连 <code>hexo d</code> 都不想打？好吧，Hexo-Admin deploy满足你。</p><p>首先需要绑定Hexo 《=》 Github 的SSH公钥，这个教程网上都有，在此暂时不讲。</p><p>接着在 hexo根目录下创建一个批处理文件 <code>push.bat</code>,里面填上:</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g -d</span><br></pre></td></tr></table></figure><p>打开站点配置文件 <code>_Config.yml</code>,在同目录的admin下换行按一下<kbd>Tab</kbd>,写上 </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deployCommand: &#x27;push.bat&#x27;</span><br></pre></td></tr></table></figure><p>重启Hexo server,点击Deploy,进入以下画面:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-8.png" alt="图片"></p><p>什么都不用填,直接点击 <code>Deploy</code> 即可.</p><h3 id="实时保存"><a href="#实时保存" class="headerlink" title="实时保存"></a>实时保存</h3><p>这个功能和NotePad++的缓存保存差不多效果,不过NotePad的缓存保存一般性修改的是副本,而Hexo-Admin则直接修改源文件.</p><p>不过用起来还是差不多的,无非都是防止手贱随手关掉没保存的现象出现.</p><p>不过Hexo-Admin的保存是真的快.在我打好这句话后发了一下呆o_o ….,右上角就出现这样的字:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-9.png" alt="图片"></p><p>…都做到这样了,我还能说什么呢?</p><h3 id="语法校对"><a href="#语法校对" class="headerlink" title="语法校对"></a>语法校对</h3><p>这个是我最哭笑不得的功能.</p><p>点击右上角的勾,进入校对界面:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-10.png" alt="图片"></p><p>不过这个功能仅仅对于英文来讲,而且对于代码的语法校对似乎没有这么准确,我又不写英文,有点鸡肋.</p><h3 id="还有很多…"><a href="#还有很多…" class="headerlink" title="还有很多…"></a>还有很多…</h3><h2 id="一些小问题"><a href="#一些小问题" class="headerlink" title="一些小问题"></a>一些小问题</h2><p>Hexo-Admin能做到这样,我已经很满足了,不过我使用的时候,发现有几个问题:</p><h3 id="打字的时候浏览框会不自觉的向上飘"><a href="#打字的时候浏览框会不自觉的向上飘" class="headerlink" title="打字的时候浏览框会不自觉的向上飘:"></a>打字的时候浏览框会不自觉的向上飘:</h3><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/2.gif" alt="图片"></p><h3 id="不能拖拽放入图片"><a href="#不能拖拽放入图片" class="headerlink" title="不能拖拽放入图片"></a>不能拖拽放入图片</h3><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/3.gif" alt="图片"></p><h3 id="以及…直接粘贴的图片斜杠方向是反的！！！"><a href="#以及…直接粘贴的图片斜杠方向是反的！！！" class="headerlink" title="以及…直接粘贴的图片斜杠方向是反的！！！"></a>以及…直接粘贴的图片斜杠方向是反的！！！</h3><h3 id="自定义css无法使用"><a href="#自定义css无法使用" class="headerlink" title="自定义css无法使用"></a>自定义css无法使用</h3><p><span class="heimu" title="你知道的太多了">你看的到我吗???</span></p><p><img class="alingleft" src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-5.png"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/4.gif" alt="图片"></p><p>不过这到不是大问题,就是编辑的时候没法用罢了</p><h3 id="性能问题"><a href="#性能问题" class="headerlink" title="性能问题"></a>性能问题</h3><p>Nodejs从以前内存占用120MB编程220MB了,比较吃内存</p><h1 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h1><p>至少在我看来,Hexo-Admin真的至少比Notepad++好多了,虽然依旧不能解决静态无法在线修改的硬伤,不过至少也能用.</p>]]></content>
      
      
      <categories>
          
          <category> 丆插件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 插件 </tag>
            
            <tag> 编辑 </tag>
            
            <tag> 神器 </tag>
            
            <tag> 黑科技 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>no cover</title>
      <link href="/posts/913b2502/"/>
      <url>/posts/913b2502/</url>
      
        <content type="html"><![CDATA[<p>This post no cover</p>]]></content>
      
      
      <categories>
          
          <category> Demo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> demo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LazyLoad_懒加载,将无形等待时间化为有形</title>
      <link href="/posts/f47a8d59/"/>
      <url>/posts/f47a8d59/</url>
      
        <content type="html"><![CDATA[<p>说实话，很早以前接触懒加载是在看别人提到过，但当时对此不温不火的，因为当时部署在Coding上，速度基本加载图片几毫秒的事。而且当时每篇文章也就三四张图，基本不影响加载时间。</p><p>可是现在部署在github上，国内一访问，终于明白LazyLoad的妙用了。</p><p>即使加载了CloudFlareCDN，选了个比较快的CDNIP加载Hosts中，也只有120kb/s的速度，致命的是，我上一篇博文图片将近31MB。</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/lazy/1.jpg" alt="图片" title="上一次手贱,图片添加的比较多."></p><p>以120kb/s的速度,以前加载个不到1MB的博文(Live2D看板娘本身自带LazyLoad)也就几秒钟的事情,加载个30MB的网页…</p><p>宏观来讲,就是打开博文一片空白,既看不到文字也看不到图片.</p><p>那么这就有一个问题,网页一片空白,你是怪博主还是怪网络呢?</p><p>很简单,肯定是怪博主,因为如果是网络,那也不至于连文字都加载不出来吧?</p><p>因为网页加载时,会将页面里所有资源加载完毕时才会显示,在加载完整之前是不显示的.</p><p>最最致命的是,博客使用CloudFlareCDN,总会遭到XXX的恶意丢包:<br>(测试环境为IPv6)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">ping blog.cyfan.ga -t</span><br><span class="line"></span><br><span class="line">正在 Ping blog.cyfan.ga [2606:4700:3033::681c:10de] 具有 32 字节的数据:</span><br><span class="line">来自 2606:4700:3033::681c:10de 的回复: 时间=438ms</span><br><span class="line">请求超时。</span><br><span class="line">来自 2606:4700:3033::681c:10de 的回复: 时间=462ms</span><br><span class="line">来自 2606:4700:3033::681c:10de 的回复: 时间=257ms</span><br><span class="line">来自 2606:4700:3033::681c:10de 的回复: 时间=270ms</span><br><span class="line">来自 2606:4700:3033::681c:10de 的回复: 时间=286ms</span><br><span class="line">来自 2606:4700:3033::681c:10de 的回复: 时间=279ms</span><br><span class="line">来自 2606:4700:3033::681c:10de 的回复: 时间=288ms</span><br><span class="line">来自 2606:4700:3033::681c:10de 的回复: 时间=288ms</span><br><span class="line">来自 2606:4700:3033::681c:10de 的回复: 时间=281ms</span><br><span class="line">请求超时。</span><br><span class="line">来自 2606:4700:3033::681c:10de 的回复: 时间=285ms</span><br><span class="line">来自 2606:4700:3033::681c:10de 的回复: 时间=281ms</span><br><span class="line">来自 2606:4700:3033::681c:10de 的回复: 时间=289ms</span><br><span class="line">来自 2606:4700:3033::681c:10de 的回复: 时间=287ms</span><br><span class="line">来自 2606:4700:3033::681c:10de 的回复: 时间=288ms</span><br><span class="line">请求超时。</span><br><span class="line">来自 2606:4700:3033::681c:10de 的回复: 时间=291ms</span><br><span class="line"></span><br><span class="line">2606:4700:3033::681c:10de 的 Ping 统计信息:</span><br><span class="line">    数据包: 已发送 = 18，已接收 = 15，丢失 = 3 (16% 丢失)，</span><br><span class="line">往返行程的估计时间(以毫秒为单位):</span><br><span class="line">    最短 = 257ms，最长 = 462ms，平均 = 304ms</span><br><span class="line">Control-C</span><br><span class="line">^C</span><br></pre></td></tr></table></figure><p>如果丢包丢的正好是图片,即使加载完毕,估计也是这么一个半死不活的图标:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/lazy/2.jpg" alt="图片" title="..."></p><p>啧啧,有伤风雅有伤风雅…..((/- -)/</p><p>这个时候,懒加载就变得非常重要了.</p><h1 id="说了那么多-什么是懒加载"><a href="#说了那么多-什么是懒加载" class="headerlink" title="说了那么多,什么是懒加载?"></a>说了那么多,什么是懒加载?</h1><p>名符其义,懒加载懒加载,你懒得看我就懒得加载.</p><p>说的专业点,就是只加载在视野里的图片,不在视野里的图片先不加载,用一张相同的图片代替.</p><p>这样绝对有用,只加载用户可能看的图片,对于可能不看的图片暂时不加载,当用户滑动到这个地方再加载.</p><p>实际上懒加载运用的很广泛,举一个常见的例子,当你浏览知乎时,难道不是划到哪图片才加载到哪吗?只不过图片加载时间太快,很多人都没有留意罢了.</p><p>图片懒加载是提升网站性能和用户体验的一个非常很好方式，并且几乎所有的大型网站都使用到了，比如微博，仅把用户可见的部分显示图片，其余的都暂时不加载，做法就是：让所有图片元素src指向一个小的站位图片比如loading，并新增一个属性(如data-original)存放真实图片地址。每当页面加载（或者滚动条滚动），使用JS脚本将可视区域内的图片src替换回真实地址，并做请求重新加载。</p><h1 id="所以-你依旧没读懂"><a href="#所以-你依旧没读懂" class="headerlink" title="所以,你依旧没读懂?"></a>所以,你依旧没读懂?</h1><p>直接看例子吧.</p><p>当时,我的上一篇博文正常国内加载到显示文字用了将近10min,也就是空白页显示了10min,纵使在国外加载也用了4min.</p><p>也就是正常游客看起来根本加载不了,只有空白页.</p><p>现在,当使用懒加载后:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/lazy/3.gif" alt="图片" title="请注意开发者工具的监视项"></p><p>(为了降低用户查看该动图的时间,我进行了压缩减帧:30fps,大小约有4.3MB,请耐心等待)</p><p>看看开发者工具Network一项,我们很自然发现,当我滑动到某张图片上方,某张图片才开始加载,使用一张动图作为未加载的动画.</p><p>这,就是懒加载的奥秘.</p><h1 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用:"></a>如何使用:</h1><h2 id="html"><a href="#html" class="headerlink" title="html"></a>html</h2><p>我们正常引用一张图片,格式应该如下:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;/xxx.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;图片&quot;</span> <span class="attr">title</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>懒加载在html的图片语言中使用了回源, <code>data-original</code> 表示真正的图片位置,而 <code>src</code> 则是懒加载的外观图片.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/lazy.gif&quot;</span> <span class="attr">data-original</span>=<span class="string">&quot;/xxx.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;图片&quot;</span> <span class="attr">title</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这样,当打开时网站回家再 <code>src</code> 的资源,只有当滑动到图片上方,再加载 <code>data-original</code> 原始图片.</p><h2 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h2><p>当然,Hexo本来使用Markdown,而Markdown本来和html就是亲兄弟,如果不介意,用 <code>&lt;img&gt;</code>  标签也成.</p><p>但是对于已经有了的图片,这样做简直就是噩梦,总不可能一个一个换过去吧.</p><p>这时候,建议使用 <code>Troy</code> 大佬开发的 <code>hexo-lazyload-image</code></p><h3 id="安装hexo-lazyload-image"><a href="#安装hexo-lazyload-image" class="headerlink" title="安装hexo-lazyload-image:"></a>安装<code>hexo-lazyload-image</code>:</h3><p>npm安装:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-lazyload-image --save</span><br></pre></td></tr></table></figure><blockquote><p>关于npm安装慢,请参考以前写的一篇<a href="/2019/07/19/国内加快NPM下载速度/">博文&gt;&gt;</a></p></blockquote><p>接着再hexo配置文件 <code>_config.yml</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lazyload:</span><br><span class="line">  enable: true </span><br><span class="line">  onlypost: false</span><br><span class="line">  loadingImg: # eg. ./images/loading.png</span><br></pre></td></tr></table></figure><ul><li><code>enable</code> 不解释</li><li><code>onlypost</code> 指是全部站点都用懒加载还是对于文章使用懒加载,默认为 <code>false</code></li><li><code>loadingImg</code> 懒加载所需要的先前图片,目前看来是图片都行,gif也成</li></ul><p>post一下,试试吧.</p><h3 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h3><p>Hexo-lazy-image 实现原理<br>因为文章都是使用markdown来编写的，所以不可能要求我们在markdown里将所有图片路径都指向站位图片，并附加另一个属性，所以，这个工作必须留给hexo的generate部分来做。</p><p>最终可分为两步：</p><p>在 <code>hexo after_post_render</code>事件或者<code>after_render:html</code>事件里将生产出来的文章html代码中所有img元素都加上 <code>data-original</code> 属性，并把 <code>src</code> 值付给他， 然后在将 <code>src</code> 值致为 <code>loading</code> 图片<br>注入 <code>simple-lazyload</code> 脚本在每个页面最后面，当页面加载过后负责判定当前需要重新加载的图片。</p><p>原大佬博客: <a href="https://troyyang.com/2017/08/06/hexo-lazyload-image/">Troy’s 博客</a></p><h2 id="意外发现"><a href="#意外发现" class="headerlink" title="意外发现"></a>意外发现</h2><p>实际上懒加载还帮我掩饰了一个问题,对于一些失效的图片再也不会加载不出来了,(因为被懒加载图片替换掉了)</p><h1 id="结尾"><a href="#结尾" class="headerlink" title="结尾:"></a>结尾:</h1><p>不知道大家有没有这样的心理:</p><p>打开一篇文章,图片死死加载不出来,折腾好长一段时间,终于加载出来了,却发现这些图片毫无作用,这时候估计所有人心里都很恼火吧.</p><p>目前看来,懒加载基本上全是好处:</p><ol><li>缩短不需要看图片用户加载时间.</li><li>提升网页打开速度</li><li>暗示用户网络有问题而不是网站有问题 <del>(臭婊脸)</del></li><li>美化未加载网页</li><li>将用户等待时间从主观上缩短,暗示用户等待时间变短,让用户知道不是卡了,而是正在加载.</li></ol><p>当然,懒加载所需的图片要尽量的小,我的懒加载图片是剽窃百度的,压缩了一下约300kb,加载所需时间为0.2s.</p><p>这是我现在用的懒加载图片：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/lazy.gif" alt="LazyLoad"></p>]]></content>
      
      
      <categories>
          
          <category> 好方法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> LazyLoad </tag>
            
            <tag> NPM </tag>
            
            <tag> 奇淫巧技 </tag>
            
            <tag> 等待 </tag>
            
            <tag> 图片 </tag>
            
            <tag> 加载 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VMware 安装 CentOS 8.1 完整教程 </title>
      <link href="/posts/3316/"/>
      <url>/posts/3316/</url>
      
        <content type="html"><![CDATA[<p>我使用的<font color=red size=3>VMware</font>版本：<font color=red size=3>VMware 15 Pro</font></p><p>镜像：<font color=red size=3>CentOS 8.1</font></p><p><strong>电脑配置需求：</strong></p><ul><li><font color=red size=3>2 GB</font> 及以上的<font color=red size=3>RAM</font>（官方推荐至少<font color=red size=3>4G</font>）</li><li><font color=red size=3>2 GHz </font>或以上的 <font color=red size=3>CPU</font></li><li><font color=red size=3>64 </font>位 <font color=red size=3>x86</font> 架构</li><li><font color=red size=3>20 GB </font>及以上硬盘空间</li></ul><p><strong>关于CentOS 8.1</strong></p><ul><li>基于Linux 4.18</li><li>提供 PHP 7.2、Python 3.6、Ansible 2.8、VIM 8.0 和 Squid 4</li><li>使用网络管理器（nmcli 和 nmtui）进行网络配置，移除了网络脚本<br>通过 BaseOS 和应用流(AppStream)仓库发布.</li><li>AppStream 是对传统rpm格式的全新扩展，为一个组件同时提供多个主要版本</li><li>YUM 包管理器基于 DNF 技术，提供模块化内容支持，增强了性能，并且提供了设计良好的API用于与其他工具集成</li><li>RHEL 8提供了版本控制工具: Git 2.18, Mercurial 4.8,和 Subversion 1.10.</li></ul><blockquote><p>内核实时修补；称为 FRR 的新路由协议堆栈（支持多种 IPv4 和 IPv6 路由协议）；伯克利数据包筛选器（eBPF）的扩展版本，可帮助系统管理员解决复杂的网络问题；支持在使用设备时对 LUKS2 中的块设备进行重新加密；此外，还提供了一种用于为容器生成 SELinux 策略的新工具 udica.</p></blockquote><font color=red size=3>CentOS 8</font>系列增加了许多新特性，<font color=red size=3>CentOS 8.1</font>相当于它的第二个发行版本，我这里就不列出了，具体可以看官方文档：[CentOS 官网文档手册](https://wiki.centos.org/zh/Manuals/ReleaseNotes/CentOS8.1905#A.2BbpBO43gB-)[Centos8与Centos7区别参照redhat）](https://www.cnblogs.com/RXDXB/p/11660287.html)# 一、准备过程 #目前比较流行的两款虚拟机软件 <font color=red size=3>VMware</font> 、<font color=red size=3>VirtualBox</font>，<font color=red size=3>VirtualBox</font>安装<font color=red size=3>CentOS 8</font>系列目前还有很多<font color=red size=3>Bug</font>，推荐使用<font color=red size=3>VMware</font>。1.安装<font color=red size=3>VMware</font><p>如果你还没有安装虚拟机，进入<a href="https://www.vmware.com/products/workstation-pro/workstation-pro-evaluation.html" title="VMware">VMware官网</a>下载相应版本安装即可：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/01.png" alt=""></p><p>官网下载过程可能有点慢，这里安装过程我就不赘述了。</p><p>2.下载<font color=red size=3>CentOS 8.1</font>镜像资源</p><p>进入<a href="http://mirrors.huaweicloud.com/centos/8.1.1911/isos/x86_64/CentOS-8.1.1911-x86_64-dvd1.iso" title="CentOS">CentOS官网</a>下载<font color=red size=3>CentOS 8.1</font>镜像，我这里给的是在华为云的，下载速度还是可以。</p><h1 id="二、创建虚拟机"><a href="#二、创建虚拟机" class="headerlink" title="二、创建虚拟机"></a>二、创建虚拟机</h1><p>1.打开<font color=red size=3>VMware</font>，点击创建新的虚拟机：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/02.png" alt=""></p><p>2.点击自定义（高级）：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/03.png" alt=""></p><p>3.这一步直接默认就可以：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/04.png" alt=""></p><p>4.选择稍后安装操作系统：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/05.png" alt=""></p><p>5.选择<font color=red size=3>Linux</font>，版本选择<font color=red size=3>Linux 4 ×64位</font>，因为<font color=red size=3>CentOS 8</font>系列基于<font color=red size=3> Linux</font> 内核<font color=red size=3> 4.18</font>：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/06.png" alt=""></p><p>6.虚拟机名称随便，安装位置看自己电脑配置吧，建议安装在<font color=red size=3>D</font>盘：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/07.png" alt=""></p><p>7.处理器数量根据自己电脑来配置，反正不够后面可以更改，要安装图形界面的话可以填大一点，新手就这个配置也可以了：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/08.png" alt=""></p><p>8.内存大小根据自己电脑适当配置，我的电脑内存<font color=red size=3>16G</font>，所以我给它分配<font color=red size=3>4G</font>，要安装图形界面的话可以填大一点：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/09.png" alt=""></p><p>9.设置虚拟机网络连接模式（<font color=red size=3>NAT</font>）：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/10.png" alt=""></p><p><strong>关于网络连接模式说明：</strong></p><ul><li><p>桥接：选择桥接模式的话虚拟机和宿主机在网络上就是平级的关系，相当于连接在同一交换机上。</p></li><li><p>NAT：NAT模式就是虚拟机要联网得先通过宿主机才能和外面进行通信。</p></li><li><p>仅主机：虚拟机与宿主机直接连起来</p></li></ul><p>10.选择<font color=red size=3>I/O</font>控制器类型，然后下一步：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/11.png" alt=""></p><p>11.选择磁盘类型：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/12.png" alt=""></p><p>12.选择创建新虚拟磁盘，然后下一步：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/13.png" alt=""></p><p>13.根据自己的需要分配磁盘容量，勾选将虚拟磁盘拆分成多个文件（方便以后将虚拟机拷贝到设备），然后下一步：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/14.png" alt=""></p><p>14.根据自己需要指定磁盘文件存储位置，我放在D盘：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/15.png" alt=""></p><p>15.到这里虚拟机就创建完成了，可以点击自定义硬件更改配置，点击完成创建成功：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/16.png" alt=""></p><h1 id="三、安装CentOS-8-1"><a href="#三、安装CentOS-8-1" class="headerlink" title="三、安装CentOS 8.1"></a>三、安装CentOS 8.1</h1><p>1.点击编辑虚拟机设置：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/17.png" alt=""></p><p>2.选择<font color=red size=3>CD/DVD</font>，勾选启动时连接，再选择使用ISO映像文件，找到下载好的系统镜像文件添加进去，最后确定：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/18.png" alt=""></p><p>3.开启此虚拟机：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/19.png" alt=""></p><p>4.开启虚拟机后会出现以下界面，鼠标点进黑窗口，使用键盘方向键选择第一项，安装<font color=red size=3>CentOS 8</font>，回车，系统开始自动安装</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/20.png" alt=""></p><p>5.安装完成后选择语言，根据自己情况选择，然后点击继续：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/21.png" alt=""></p><p>6.首先打开网络和主机名，给虚拟机连上网络：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/22.png" alt=""></p><p><strong>如果网络连接不上，多半是<font color=red size=3>DHCP</font>问题，解决办法：</strong></p><p><a href="https://blog.csdn.net/suoyudong/article/details/83037670">解决安装centos 过程中以太网连接不上网络，不能自动分配ip的问题</a> (By 索渝东)</p><p>7.点击时间和日期，设置系统时间并更改时区(打开网络时间)：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/23.png" alt=""></p><p>8.选择安装目的地：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/24.png" alt=""></p><p>9.选择自定义配置，点击完成：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/25.png" alt=""></p><p>10.添加磁盘分区</p><p><font color=red size=3>Linux</font>的分区，并不像<font color=red size=3>Windows</font>一样，分成<font color=red size=3>C、D、E</font>等盘，介绍几个重要的分区：</p><ul><li>交换分区（swap）：交换分区和Windows的虚拟内存很像。现在内存也便宜，物理服务器的配置也高，以前的说法是一般为物理内存的2倍，现在一般情况下划分为4~8GB备用即可。我们虚拟机的内存是4GB，我们就划8GB吧。</li><li>启动分区（boot）：200MB足够了。</li><li>根分区（/）：剩余空间都给根分区吧。当然我们也可以单独划出/data分区，专门用来存储存数据，不过这里我们先不这样做，直接全部都给根分区。</li></ul><p>按照下图顺序依次进行设置：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/26.png" alt=""></p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/27.png" alt=""></p><p>11.点击完成后会弹出更改摘要页面，点击接受更改：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/28.png" alt=""></p><p>12.点击开始安装：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/29.png" alt=""></p><p>13.设置<font color=red size=3>ROOT</font>密码：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/30.png" alt=""></p><p>14.点击创建用户，可以把用户设为管理员方便操作，如果密码简单就点击两次完成：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/31.png" alt=""></p><p>15.安装完成后点击重启电脑：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/32.png" alt=""></p><p>16.重启完成后点击<font color=red size=3>LICENS INFORMATION</font>,勾选同意许可，然后点击完成：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/33.png" alt=""></p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/34.png" alt=""></p><p>17.点击结束配置：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/35.png" alt=""></p><p>18.来到登录界面，点击未列出，以<font color=red size=3>root</font>登录，方便后面配置操作：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/36.png" alt=""></p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/37.png" alt=""></p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/38.png" alt=""></p><p>19.选择语言：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/39.png" alt=""></p><p>选择键盘布局：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/40.png" alt=""></p><p>是否打开位置服务：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/41.png" alt=""></p><p>然后按照需要添加账号，然后就可以进入啦：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/42.png" alt=""></p><p>20.关闭系统使用帮助后，来到我们的<font color=red size=3>centos8.1</font>桌面，点击活动可以看到系统软件，第一个是内置浏览器，点击最下面可以看到系统所有软件：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/43.png" alt=""></p><p>21.点击右上角折叠按钮可以连接网络，打开浏览器就可以访问啦，如果不能联网，在上面已经给出解决办法：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/44.png" alt=""></p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/45.png" alt=""></p><p>22.右上角有关机按钮，点击就可以关机：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/VMware-%E5%AE%89%E8%A3%85-CentOS-8-1-%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/46.png" alt=""></p><p>到这里，我们的<font color=red size=3>CentOS 8 Linux</font> 就算安装完成了，其他<font color=red size=3>CentOS 8 </font>系列发行版本安装过程类似，可作参考。</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VMware </tag>
            
            <tag> CentOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>听说你喜欢盗头像？_私人独一无二彩色头像养成详解</title>
      <link href="/posts/4c080f73/"/>
      <url>/posts/4c080f73/</url>
      
        <content type="html"><![CDATA[<p>【图片比较多！国内用户建议在使用代理情况下查看，否则有些图片没办法正常加载！】<br>咳咳，实际上这个博文不是水的。  </p><p>最近比较闲，干脆写一篇盗头像壁纸的好方法吧。</p><h1 id="Go！"><a href="#Go！" class="headerlink" title="Go！"></a>Go！</h1><p>先放成品与原图对比，左边是原图，右边是成品：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/C1.jpg" alt="图片"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/C2.jpg" alt="图片"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/C3.jpg" alt="图片"></p><h2 id="准备："><a href="#准备：" class="headerlink" title="准备："></a>准备：</h2><p>由于很多素描画家喜欢在图片上摆一根铅笔，添加水印，并且手机拍摄，导致拍出来的图片难以被直接利用。</p><p>而且图片清晰度很低，好的图片拿来做头像又容易撞头。</p><p>所以，现在开始处理。</p><ul><li><a href="https://petalica-paint.pixiv.dev/index_en.html">Pixiv的素描填色工具 网站</a>  可能需要梯子</li><li><a href="https://bigjpg.com">Bigjpg=&gt;降噪无损AI放大卡通图片神器 网站</a></li><li>一个能够修改图片的工具=》ACDSee、Photoshop、isee，甚至2345看图王都可以胜任</li><li>画图板</li></ul><p>这些只是必须的，当然其它的改进纯粹是个人所好了。</p><h2 id="开工"><a href="#开工" class="headerlink" title="开工"></a>开工</h2><h1 id="1"><a href="#1" class="headerlink" title="#1"></a>#1</h1><p>首先Google盗图：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/1.jpg" alt="图片" title="盗图"></p><p>这一张图片直接作为头像估计直接会被笑死，不说别的，光旁边的一根铅笔别人就知道你是在晚上抄的。</p><p>那么，那这个开刀吧。</p><p>黑白化：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/1_1.jpg" alt="图片" title="简单的黑白化"></p><p>抹除那根铅笔(实际上我使用画图板抹除的…)</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/1_3.jpg" alt="图片" title="抹除"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/1_2.jpg" alt="图片" title="成品"></p><p>裁剪:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/1_4.jpg" alt="图片" title="头像大小"></p><p>Bigjpg放大降噪:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/1_5.jpg" alt="图片" title="降噪放大"></p><p>PS:此时建议降噪程度为高,太高了会造成边缘模糊,太低了噪点太多.</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/1_6.jpg" alt="图片" title="放大完毕"></p><p>大小：240*240 =&gt; 960*960</p><p>吐槽一下,Bigjpg最近服务器爆满,放大这张图片用了我10min…</p><p>使用 <a href="https://petalica-paint.pixiv.dev/index_en.html">Pixiv的素描填色工具 网站</a> </p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/1_7.jpg" alt="图片" title="P站神器"></p><p>把图片拖进去，就会进入填色界面：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/1_11.jpg" alt="图片" title="P站神器"></p><p>可以看到右上角有三种风格来选择：<code>Tanpopo</code>、<code>Satsuki</code>、<code>Canna</code> 三种风格,其中默认选择<code>Canna</code>.</p><p>不过作为头像壁纸填色,并不推荐Canna,这是三张不同风格填色图:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/1_8.jpg" alt="图片" title="Canna"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/1_9.jpg" alt="图片" title="Satsuki"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/1_10.jpg" alt="图片" title="Tanpopo"></p><p>可以明显看出 <code>Canna</code> 更加偏近真实风格, <code>Satsuki</code> 则是水彩风格, <code>Tanpopo</code> 更像是彩铅填色.</p><p>当然个人推荐 <code>Satsuki</code> 或 <code>Tanpopo</code> 填色.</p><h1 id="2"><a href="#2" class="headerlink" title="#2"></a>#2</h1><p>同上,Google盗图:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/2.jpg" alt="图片" title="盗图"></p><p>黑白化</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/2_1.jpg" alt="图片" title="简单的黑白化"></p><p>裁剪;</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/2_2.jpg" alt="图片" title="裁剪"></p><p>抹除铅笔,去除胸前的水印<span class="heimu" title="┗|｀O′|┛">上传者你可真色啊!!!</span></p><p>结果还是用画图板去除成功:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/2_3.jpg" alt="图片" title="去除标识"></p><p>由于这张图片本身就足够大了,3376*4800,就不必Bigjpg降噪了,直接填色:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/2_4.jpg" alt="图片" title="再次裁剪"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/2_5.jpg" alt="图片" title="填色"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/2_6.jpg" alt="图片" title="填色"></p><p>选择 <code>Tanpopo</code> 风格:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/2_7.jpg" alt="图片" title="Tanpopo"></p><p>实际上这张太长了,感觉适合做手机壁纸.</p><h1 id="3"><a href="#3" class="headerlink" title="#3"></a>#3</h1><p>废话不多说,直接看原图</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/3.jpg" alt="图片" title="原始图片"></p><p>这张就相对棘手了,因为直接黑白化就会造成部分线条颜色变淡,在填色过程中可能造成溢出.</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/3_1.jpg" alt="图片" title="直接处理"></p><p>所以先进行降低对比度:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/3_4.jpg" alt="图片" title="降低对比度&amp;裁剪"></p><p>再黑白化:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/3_5.jpg" alt="图片" title="黑白化"></p><p>抹除铅笔、抹除水印、修复图片：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/3_6.jpg" alt="图片" title="修正"></p><p>最后一次裁剪：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/3_7.jpg" alt="图片" title="裁剪"></p><p>bigjpg降噪放大：</p><p>337*515 =&gt; 1348*2060</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/3_8.jpg" alt="图片" title="降噪、放大"></p><p>填色：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/3_9.jpg" alt="图片" title="Satsuki"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/oura/3_10.jpg" alt="图片" title="Tanpopo"></p><h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>这种方法相当适合作为头像壁纸，不仅是彩色，能够相撞的概率极低（别人盗你头像不算啦），真正做到了独一无二。</p><p>而且别人就算是把你的头像放搜索引擎上处理，也是一无所获。</p>]]></content>
      
      
      <categories>
          
          <category> 好方法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 黑科技 </tag>
            
            <tag> 奇淫巧技 </tag>
            
            <tag> 头像 </tag>
            
            <tag> 壁纸 </tag>
            
            <tag> 素描 </tag>
            
            <tag> 填色 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitalk详细踩坑记录</title>
      <link href="/posts/9f2a11d8/"/>
      <url>/posts/9f2a11d8/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>没想到怎么快就更新一篇了。</p><p>这真的是踩了个巨坑啊。</p><h2 id="为什么又要切换回Gitalk？"><a href="#为什么又要切换回Gitalk？" class="headerlink" title="为什么又要切换回Gitalk？"></a>为什么又要切换回Gitalk？</h2><p>咳咳，这事情还得从上一年12月说起。</p><p>当时正忙于学业，等到期末考完以后接受到一份LeanCloud邮件，大概内容就是我的API1个月没有调用被强制归档了。</p><p><span class="heimu" title="你知道的太多了">那也不能怪我啊！我博客没人来就说我缘故咯？</span></p><p>然后登陆上LeanCloud，恢复数据，然后就没有然后了。</p><p>昨天刚刚更新了一篇白嫖记录，登入博客后却发现没有更新。</p><p>接着去Coding，告诉我Coding转型了，接着用Pages要实名认证。<span class="heimu" title="你知道的太多了">我要是能实名认证那我不早就买一台国内服务器备案了？？？</span></p><p>没办法，只好又迁回Github。好在Github可以给每一个仓库绑定一个域名，（大不了以后更新博客麻烦点罢了。）</p><p>接着折腾了Github好一会儿，包括后来解决Coding赖着域名不放，国内ip解析错误的原因。</p><p>结果今天早上登陆却发现：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/gitalk/1.jpg" alt="图片" title="LeanCloud报错"></p><p>…</p><p>打开LeanCloud官方文档,并没有找到答案.</p><p>也就是说,我还不知道错误发生在归档后还是在迁移后的.</p><p>况且本来LeanCloud开发版每天休眠6h我也受够了,于是打算迁到Gitalk.</p><h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><h2 id="数据"><a href="#数据" class="headerlink" title="数据:"></a>数据:</h2><p>数据肯定是没法恢复了,毕竟是要Github账号的.</p><h2 id="配置"><a href="#配置" class="headerlink" title="配置:"></a>配置:</h2><p>Gitalk官方说明安装只有简单的几句话:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://npm.elemecdn.com/gitalk@1/dist/gitalk.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://npm.elemecdn.com/gitalk@1/dist/gitalk.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- or --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://unpkg.com/gitalk/dist/gitalk.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/gitalk/dist/gitalk.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>…<br>添加一个容器：<br><code>&lt;div id=&quot;gitalk-container&quot;&gt;&lt;/div&gt;</code><br>用下面的 Javascript 代码来生成 gitalk 插件：</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var gitalk = new Gitalk(&#123;</span><br><span class="line">  clientID: &#x27;GitHub Application Client ID&#x27;,</span><br><span class="line">  clientSecret: &#x27;GitHub Application Client Secret&#x27;,</span><br><span class="line">  repo: &#x27;GitHub repo&#x27;,</span><br><span class="line">  owner: &#x27;GitHub repo owner&#x27;,</span><br><span class="line">  admin: [&#x27;GitHub repo owner and collaborators, only these guys can initialize github issues&#x27;],</span><br><span class="line">  id: location.pathname,      // Ensure uniqueness and length less than 50</span><br><span class="line">  distractionFreeMode: false  // Facebook-like distraction free mode</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">gitalk.render(&#x27;gitalk-container&#x27;)</span><br></pre></td></tr></table></figure><p>当然,在hexo里面使用估计就没有那么简单了,所以我最终按照里面自带集成的Gitment模板以及文档整理了一份.</p><p>实际上Gitment和Gitalk的核心原理是一样的,内容现实,所以最终还是成功了.</p><h2 id="注册"><a href="#注册" class="headerlink" title="注册:"></a>注册:</h2><blockquote><p>无图警告！</p></blockquote><p>点开 [<a href="https://github.com/settings/applications/new">https://github.com/settings/applications/new</a>], 注册一个App</p><p>:: Register a new OAuth application<br>必填.填写这个app的名字(其实随便起就好了)<br>:: Homepage URL<br>必填,博客根目录,不能在最后带<code>/</code><br>:: Application description<br>胡乱填写的简介<br>:: Authorization callback URL<br>必填。与Homepage URL一样,是回显目录</p><p>点击Register，注册成功！</p><p>接着会跳转，此处就不截图了。</p><p>其中Client ID和Client Secret在后面的配置中需要用到，到时复制粘贴即可</p><h2 id="配置："><a href="#配置：" class="headerlink" title="配置："></a>配置：</h2><p>根据Gitment样式，整理如下</p><h3 id="1"><a href="#1" class="headerlink" title="1"></a>1</h3><p>进入 <code>\themes\next\layout\_third-party\comments\</code> 新建 <code>gitalk.swig</code> 文件,里面填写一下内容:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">&#123;% if page.comments &amp;&amp; theme.gitalk.enable %&#125;</span><br><span class="line"></span><br><span class="line">  <span class="symbol">&amp;lt;</span>link rel=<span class="symbol">&amp;quot;</span>stylesheet<span class="symbol">&amp;quot;</span> href=<span class="symbol">&amp;quot;</span>https://unpkg.com/gitalk/dist/gitalk.css<span class="symbol">&amp;quot;</span><span class="symbol">&amp;gt;</span></span><br><span class="line">  <span class="symbol">&amp;lt;</span>script src=<span class="symbol">&amp;quot;</span>https://unpkg.com/gitalk/dist/gitalk.min.js<span class="symbol">&amp;quot;</span><span class="symbol">&amp;gt;</span><span class="symbol">&amp;lt;</span>/script<span class="symbol">&amp;gt;</span></span><br><span class="line">   <span class="symbol">&amp;lt;</span>script type=<span class="symbol">&amp;quot;</span>text/javascript<span class="symbol">&amp;quot;</span><span class="symbol">&amp;gt;</span></span><br><span class="line">        var gitalk = new Gitalk(&#123;</span><br><span class="line">          clientID: <span class="symbol">&amp;#x27;</span>&#123;&#123; theme.gitalk.ClientID &#125;&#125;<span class="symbol">&amp;#x27;</span>,</span><br><span class="line">          clientSecret: <span class="symbol">&amp;#x27;</span>&#123;&#123; theme.gitalk.ClientSecret &#125;&#125;<span class="symbol">&amp;#x27;</span>,</span><br><span class="line">          repo: <span class="symbol">&amp;#x27;</span>&#123;&#123; theme.gitalk.repo &#125;&#125;<span class="symbol">&amp;#x27;</span>,</span><br><span class="line">          owner: <span class="symbol">&amp;#x27;</span>&#123;&#123; theme.gitalk.githubID &#125;&#125;<span class="symbol">&amp;#x27;</span>,</span><br><span class="line">          admin: [<span class="symbol">&amp;#x27;</span>&#123;&#123; theme.gitalk.adminUser &#125;&#125;<span class="symbol">&amp;#x27;</span>],</span><br><span class="line">          id: location.pathname,</span><br><span class="line">          distractionFreeMode: <span class="symbol">&amp;#x27;</span>&#123;&#123; theme.gitalk.distractionFreeMode &#125;&#125;<span class="symbol">&amp;#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">        gitalk.render(<span class="symbol">&amp;#x27;</span>gitalk-container<span class="symbol">&amp;#x27;</span>)           </span><br><span class="line">       <span class="symbol">&amp;lt;</span>/script<span class="symbol">&amp;gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure><h3 id="2"><a href="#2" class="headerlink" title="2"></a>2</h3><p>修改 <code>\themes\next\layout\_third-party\comments\</code> ,在最后一行填下:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">&#123;% include &#x27;gitalk.swig&#x27; %&#125;</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure><h3 id="3"><a href="#3" class="headerlink" title="3"></a>3</h3><p>修改 <code>\themes\next\layout\_partials\comments.swig</code> ,在 <code>&#123;if&#125;</code> 之下, <code>&#123;elseif&#125;</code> 之上填下:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">&#123;% elseif theme.gitalk.enable %&#125;</span><br><span class="line"> <span class="symbol">&amp;lt;</span>div id=<span class="symbol">&amp;quot;</span>gitalk-container<span class="symbol">&amp;quot;</span><span class="symbol">&amp;gt;</span><span class="symbol">&amp;lt;</span>/div<span class="symbol">&amp;gt;</span></span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure><h3 id="4"><a href="#4" class="headerlink" title="4"></a>4</h3><p>新建 <code>\themes\next\source\css\_common\components\third-party\gitalk.styl</code> ,填下:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.gt-header</span> <span class="selector-tag">a</span>, <span class="selector-class">.gt-comments</span> <span class="selector-tag">a</span>, <span class="selector-class">.gt-popup</span> <span class="selector-tag">a</span></span><br><span class="line">  <span class="attribute">border-bottom</span>: none;</span><br><span class="line"><span class="selector-class">.gt-container</span> <span class="selector-class">.gt-popup</span> <span class="selector-class">.gt-action</span><span class="selector-class">.is--active</span><span class="selector-pseudo">:before</span></span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0.7em</span>;</span><br></pre></td></tr></table></figure><h3 id="5"><a href="#5" class="headerlink" title="5"></a>5</h3><p>修改<code>\themes\next\source\css\_common\components\third-party\third-party.styl</code>,最后一行填下</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;gitalk&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="6"><a href="#6" class="headerlink" title="6"></a>6</h3><p>最后,在<code>\themes\next\_config.yml</code>最后一行填下:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">gitalk:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">githubID:</span> <span class="string">github帐号</span>  <span class="comment">#如ChenYFan   </span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">仓库名称</span>   <span class="comment"># 例：blog</span></span><br><span class="line">  <span class="attr">ClientID:</span> <span class="string">Client</span> <span class="string">ID</span></span><br><span class="line">  <span class="attr">ClientSecret:</span> <span class="string">Client</span> <span class="string">Secret</span></span><br><span class="line">  <span class="attr">adminUser:</span> <span class="string">github帐号</span> <span class="comment">#指定可初始化评论账户</span></span><br><span class="line">  <span class="attr">distractionFreeMode:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="结束"><a href="#结束" class="headerlink" title="结束?"></a>结束?</h3><p>打开博客,你会发现有一些博文评论是正常的,但是有一些博文你可能会看到:</p><p>Error:Validation Failed</p><p>没错，这不是我的错<span class="heimu" title="别打我！">滑稽狗头保命</span>。</p><p>这个错误在Gitalk用户里非常常见。</p><p>为什么？</p><p>这还得从官方文档讲起：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">- owner String</span><br><span class="line"></span><br><span class="line">-必须. GitHub repository 所有者，可以是个人或者组织。</span><br><span class="line"></span><br><span class="line">-admin Array</span><br><span class="line"></span><br><span class="line">-必须. GitHub repository 的所有者和合作者 (对这个 repository 有写权限的用户)。</span><br><span class="line"></span><br><span class="line">-id String</span><br><span class="line"></span><br><span class="line">-Default: location.href.</span><br><span class="line"></span><br><span class="line">-页面的唯一标识。长度必须小于50。</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>注意一下id,这个最终会成为Github issues中的lable之一,但是lable是有字数限制的,50个英文单词.</p><p>但是有人会问我的中文名加上去之后也没有50字啊.</p><p>对啊,可是Gitalk会将其转码,比如说<code>留言板</code>三个字最终会转成<code>/%E7%95%99%E8%A8%80%E6%9D%BF/</code><span class="heimu" title="你知道的太多了">这又♀长又♂粗</span>的文字.</p><p>但是第一个Lable不能重复,重复后两个issues的两个Lable就相同了,这样两个评论就混在一起了.</p><p>所以网上就有人开始讨论怎么解决了.</p><h3 id="规避解码"><a href="#规避解码" class="headerlink" title="规避解码:"></a>规避解码:</h3><p>毕竟Github Lable其实是支持中文的…<span class="heimu" title="你知道的太多了">你怎么不早说!</span>,所以思路很简单,规避解码即可.</p><p>返回步骤1,第11行,默认值是<code>location.pathname</code>也就是路径,规避解码很简单,把它替换成<code>decode(location.pathname)</code>就可以啦.</p><p>当然这个办法最终还是有效的:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/gitalk/2.jpg" alt="图片" title="规避解码"></p><p>但是,但是,你还记得我有一篇文章的题目吗: <code>CloudFlare%EF%BC%9A%E5%8F%AE%E5%92%9A%EF%BC%81%E6%82%A8%E7%9A%8415%E5%B9%B4%E5%85%8D%E8%B4%B9%E6%B3%9B%E5%9F%9F%E5%90%8DSSL%E8%AF%81%E4%B9%A6%E5%88%B0%E4%BA%86%EF%BC%81</code></p><p>没错,解码以后就是: <code>CloudFlare：叮咚！您的15年免费泛域名SSL证书到了！</code><br>加上博客域名和路径,将近60字.</p><p>这个方法依旧没有解决根本问题.</p><h3 id="时间"><a href="#时间" class="headerlink" title="时间"></a>时间</h3><p><del>这个最终还是被我采用了,原因是它修改起来真的很简单.</del> 最终这个办法还是被舍弃了。</p><p>返回步骤1,第11行,默认值是 <code>location.pathname</code> 也就是路径,把它替换成 <code>J3t7cGFnZS5kYXRlfX0n</code> (直接输入page.date被识别成nodejs语言执行了,只能通过base64编码,解码即可)(请解码后替换即可).</p><p>最终的lable会变成时间戳(还是毫秒级别的),时间戳就是目标时间距离1970-01-01 08:00:00(UTC +8)的毫秒</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/gitalk/3.jpg" alt="图片" title="完结撒花"></p><p>这个是创建时间,也就是说只要我不是故意去更改时间,是几乎不可能碰撞的<span class="heimu" title="你知道的太多了">废话,我怎么可能在同一时间内写好两篇博文</span></p><p>而且时间戳到50位…9999年12月31日23点59分59秒的时间戳253402271999000（刚刚好15位），也就是说用到我200代都够用。</p><p>但是，</p><h3 id="MD5压缩字符"><a href="#MD5压缩字符" class="headerlink" title="MD5压缩字符"></a>MD5压缩字符</h3><blockquote><p>2020年2月27日最终选择。</p></blockquote><p>为什么？</p><p>因为后来发现使用时来作为Lable会导致在下一次修改后Lable改变。</p><p>因为选择的page.date并不是开头的date，而是根据电脑里面的修改时间判定的。</p><p>所以即使是改成page.update也没用…</p><p>所以最终采用了MD5</p><p>既然你最多50字,那么干脆用MD5强制压缩至32个字从根本解决问题,而且MD5只要不是恶意去碰撞基本不会相同.</p><p>毕竟MD5是一个比较著名的hash算法嘛.</p><p><del>但是,使用MD5需要额外添加很长一段js,在进行初始化估计就要一段时间了.</del></p><p><del>所以,此处不推荐使用MD5,如果你有这个需求,可以去gitalk或gitment官方github的issues中查看.</del></p><p>修改方式：在进入 <code>\themes\next\layout\_third-party\comments\gitalk.swig</code> ,修改成这样：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">&#123;% if page.comments &amp;&amp; theme.gitalk.enable %&#125;</span><br><span class="line"></span><br><span class="line">  <span class="symbol">&amp;lt;</span>link rel=<span class="symbol">&amp;quot;</span>stylesheet<span class="symbol">&amp;quot;</span> href=<span class="symbol">&amp;quot;</span>https://unpkg.com/gitalk/dist/gitalk.css<span class="symbol">&amp;quot;</span><span class="symbol">&amp;gt;</span></span><br><span class="line">  <span class="symbol">&amp;lt;</span>script src=<span class="symbol">&amp;quot;</span>https://unpkg.com/gitalk/dist/gitalk.min.js<span class="symbol">&amp;quot;</span><span class="symbol">&amp;gt;</span><span class="symbol">&amp;lt;</span>/script<span class="symbol">&amp;gt;</span></span><br><span class="line">  <span class="symbol">&amp;lt;</span>script src=<span class="symbol">&amp;quot;</span>https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js<span class="symbol">&amp;quot;</span><span class="symbol">&amp;gt;</span><span class="symbol">&amp;lt;</span>/script<span class="symbol">&amp;gt;</span></span><br><span class="line">   <span class="symbol">&amp;lt;</span>script type=<span class="symbol">&amp;quot;</span>text/javascript<span class="symbol">&amp;quot;</span><span class="symbol">&amp;gt;</span></span><br><span class="line">        var gitalk = new Gitalk(&#123;</span><br><span class="line">          clientID: <span class="symbol">&amp;#x27;</span>&#123;&#123; theme.gitalk.ClientID &#125;&#125;<span class="symbol">&amp;#x27;</span>,</span><br><span class="line">          clientSecret: <span class="symbol">&amp;#x27;</span>&#123;&#123; theme.gitalk.ClientSecret &#125;&#125;<span class="symbol">&amp;#x27;</span>,</span><br><span class="line">          repo: <span class="symbol">&amp;#x27;</span>&#123;&#123; theme.gitalk.repo &#125;&#125;<span class="symbol">&amp;#x27;</span>,</span><br><span class="line">          owner: <span class="symbol">&amp;#x27;</span>&#123;&#123; theme.gitalk.githubID &#125;&#125;<span class="symbol">&amp;#x27;</span>,</span><br><span class="line">          admin: [<span class="symbol">&amp;#x27;</span>&#123;&#123; theme.gitalk.adminUser &#125;&#125;<span class="symbol">&amp;#x27;</span>],</span><br><span class="line">          id: md5(location.pathname),</span><br><span class="line">          distractionFreeMode: <span class="symbol">&amp;#x27;</span>&#123;&#123; theme.gitalk.distractionFreeMode &#125;&#125;<span class="symbol">&amp;#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">        gitalk.render(<span class="symbol">&amp;#x27;</span>gitalk-container<span class="symbol">&amp;#x27;</span>)           </span><br><span class="line">       <span class="symbol">&amp;lt;</span>/script<span class="symbol">&amp;gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure><p>至于担心更换域名后Lable不匹配的问题,在这里说明一下,Lable采用的是相对目录,比如 <code>\留言板\</code> ,这个经过md5后是 <code>b31b6a578fce950674accdd14100e448</code></p><p>所以只要不改题目都没问题。</p><p>咳咳,<span class="heimu" title="你知道的太多了">还是MD5大法好b（￣▽￣）d　</span></p><h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>看起来自己解决问题就是好啊。</p><p>另外，国内用户如果看到评论框有：Error: Network Error字样或长时间加载或没有评论框，可以尝试修改一下DNS至国外如1.1.1.1、1.0.0.1、8.8.8.8、8.8.4.4，如果还是不行，那就，那就拿梯子吧。</p><p>毕竟GXX对于Github尤其是API很不友好…</p><p>呃,听说三月七号开学,估计博客又要荒凉了,高中生活好啊…</p>]]></content>
      
      
      <categories>
          
          <category> 爱折腾 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 踩坑 </tag>
            
            <tag> 手动填坑 </tag>
            
            <tag> 评论系统 </tag>
            
            <tag> 评论 </tag>
            
            <tag> Gitalk </tag>
            
            <tag> Github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一次成功的白嫖经历_萌娘百科</title>
      <link href="/posts/de23d03f/"/>
      <url>/posts/de23d03f/</url>
      
        <content type="html"><![CDATA[<p><span class="heimu" title="你知道的太多了">当你看到这一行字，说明我白嫖成功啦！</span></p><p>额，上一次更新都到了过年前X天。其实不隐瞒诸君，本来想写一篇关于BT下载的文章，只不过太长了，迟迟没有写完。</p><p>呜呜呜,快2个月了.</p><p>又遭遇了php服务商摔锅、网课袭击<span class="heimu" title="你知道的太多了">我TM还是个学生啊啊啊啊</span>，再加上实在太懒，也就没做了。</p><p>一眨眼2个月过去了，博客估计都荒废了，所以暂时移走BT文章，来讲讲最近成功白嫖的东西。</p><p><span class="heimu" title="你知道的太多了">这次是真的白嫖</span></p><h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><p>经常上萌娘百科的同学都知道，萌娘百科自带一个及其搞笑的功能：<span class="heimu" title="这一次，你知道的并不多">将黑色方块覆盖在文字上，鼠标移动时反白（就像现在一样）</span></p><p>Wikipedia上是这么评价的：</p><blockquote><p><strong>萌娘百科使用多种方法来增加幽默感：在条目中使用流行动漫术语及恶搞内容来刻画形象；故意写一些文字然后使用删除线来划去；亦或者使用加黑背景来隐藏某些词语，被隐藏的字用鼠标进行选择（反白）就可以看到。这些字大多数是与主条目内容无关的吐槽；另外，部分条目还使用了特殊效果或neta，如“阿卡林”相关的内容通常会被淡化处理，“漫无止境的八月”条目内容被重复了八次，“标题党”条目的标题为随机生成的标题党风格题目，等等。</strong></p></blockquote><p>话说回来这个功能真的很有趣,<span class="heimu" title="你知道的太多了">毕竟我要吐槽的还不少嘛?</span>,<del>删除线已经无法满足我了</del></p><p>所以,我就试图把这个功能照办到我的博客上去.</p><h2 id="解决："><a href="#解决：" class="headerlink" title="解决："></a>解决：</h2><p>当然，我刚开始有三种想法：</p><blockquote><p>1.网上直接抄<span class="heimu" title="你知道的太多了">额,这个似乎是最简单的</span><br>2.自己抓包抓资源(结果最后就这么办了)<br>3.自己写(这个是我最不想做的,因为我最多只能做出画词反白,无法做到鼠标移上去反白)(幸好最终方法二成功白嫖)</p></blockquote><h2 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h2><p>实不相瞒,刚开始就发现了最终目标:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moegirlcss/1.jpg" alt="图片" title="干得漂亮!"><br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moegirlcss/2.png" alt="图片" title="+1!"></p><p>而且截图也是萌娘百科耶( •̀ ω •́ )y！</p><p>结果回答让我直接吐血：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moegirlcss/2.jpg" alt="图片" title="?????????"></p><p>而且这还是唯一一个回答。 <del>捂脸痛哭つ﹏⊂</del></p><p>结果在百度上除了上述回答一无所获。</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moegirlcss/3.jpg" alt="图片" title="??????????????????????????"></p><p><span class="heimu" title="你知道的太多了"><del>看起来“百度已死”这句话确实适合于程序员</del></span></p><h2 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h2><p>欸，没办法，只能动手实践了。</p><p>萌娘百科黑色方框最多的一篇：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moegirlcss/4.jpg" alt="图片" title="鬼畜全明星！"></p><p>就按<code>提乾涉经</code>下手吧!</p><p>查看源代码:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moegirlcss/5.jpg" alt="图片" title="源代码"></p><p>搜索<code>提乾涉经</code></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moegirlcss/6.jpg" alt="图片" title="源代码+1"></p><p>摘下来这么一句:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ruby</span>&gt;</span><span class="tag">&lt;<span class="name">rb</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;heimu&quot;</span> <span class="attr">title</span>=<span class="string">&quot;你知道的太多了&quot;</span>&gt;</span>提前射精<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">rb</span>&gt;</span><span class="tag">&lt;<span class="name">rp</span>&gt;</span>（<span class="tag">&lt;/<span class="name">rp</span>&gt;</span><span class="tag">&lt;<span class="name">rt</span> <span class="attr">style</span>=<span class="string">&quot;font-size:0.75em&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;heimu&quot;</span> <span class="attr">title</span>=<span class="string">&quot;你知道的太多了&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">del</span>&gt;</span>提乾涉经<span class="tag">&lt;/<span class="name">del</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">rt</span>&gt;</span><span class="tag">&lt;<span class="name">rp</span>&gt;</span>）<span class="tag">&lt;/<span class="name">rp</span>&gt;</span><span class="tag">&lt;/<span class="name">ruby</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>&lt;ruby&gt;</code>和<code>&lt;rb&gt;</code>是html自带的不管,最让我感兴趣的是<code>&lt;span class=&quot;heimu&quot; title=&quot;你知道的太多了&quot;&gt;</code>,因为<code>你知道的太多了</code>这一句就是鼠标放在上面显示的话。</p><p><code>&lt;span&gt;</code>是层,class是样式为<code>heimu</code>,那么,<code>heimu</code>就是我们要找的了!</p><p>全局搜索<code>heimu</code>,竟然有300多,大致翻了一下,并没有在裸css(全部是关于bilibili播放器样式的文件…)里找到,那么,开头应用的样式文件就很可疑了.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/load.php?debug=false<span class="symbol">&amp;amp;</span>lang=zh-cn<span class="symbol">&amp;amp;</span>modules=ext.cite.styles%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles<span class="symbol">&amp;amp;</span>only=styles<span class="symbol">&amp;amp;</span>skin=vector&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span>=<span class="string">&quot;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/load.php?debug=false<span class="symbol">&amp;amp;</span>lang=zh-cn<span class="symbol">&amp;amp;</span>modules=startup<span class="symbol">&amp;amp;</span>only=scripts<span class="symbol">&amp;amp;</span>skin=vector&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;ResourceLoaderDynamicStyles&quot;</span> <span class="attr">content</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/load.php?debug=false<span class="symbol">&amp;amp;</span>lang=zh-cn<span class="symbol">&amp;amp;</span>modules=site.styles<span class="symbol">&amp;amp;</span>only=styles<span class="symbol">&amp;amp;</span>skin=vector&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;generator&quot;</span> <span class="attr">content</span>=<span class="string">&quot;MediaWiki 1.31.5&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">property</span>=<span class="string">&quot;og:image&quot;</span> <span class="attr">content</span>=<span class="string">&quot;https://img.moegirl.org/common/6/64/%E5%85%A8%E6%98%8E%E6%98%9F.gif&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;alternate&quot;</span> <span class="attr">media</span>=<span class="string">&quot;only screen and (max-width: 720px)&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://mzh.moegirl.org/%E9%AC%BC%E7%95%9C%E5%85%A8%E6%98%8E%E6%98%9F&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;shortcut icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/favicon.ico&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;search&quot;</span> <span class="attr">type</span>=<span class="string">&quot;application/opensearchdescription+xml&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/opensearch_desc.php&quot;</span> <span class="attr">title</span>=<span class="string">&quot;萌娘百科 (zh)&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;EditURI&quot;</span> <span class="attr">type</span>=<span class="string">&quot;application/rsd+xml&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://zh.moegirl.org/api.php?action=rsd&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;alternate&quot;</span> <span class="attr">hreflang</span>=<span class="string">&quot;zh&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/zh/%E9%AC%BC%E7%95%9C%E5%85%A8%E6%98%8E%E6%98%9F&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;alternate&quot;</span> <span class="attr">hreflang</span>=<span class="string">&quot;zh-Hans&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/zh-hans/%E9%AC%BC%E7%95%9C%E5%85%A8%E6%98%8E%E6%98%9F&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;alternate&quot;</span> <span class="attr">hreflang</span>=<span class="string">&quot;zh-Hant&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/zh-hant/%E9%AC%BC%E7%95%9C%E5%85%A8%E6%98%8E%E6%98%9F&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;alternate&quot;</span> <span class="attr">hreflang</span>=<span class="string">&quot;zh-CN&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/zh-cn/%E9%AC%BC%E7%95%9C%E5%85%A8%E6%98%8E%E6%98%9F&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;alternate&quot;</span> <span class="attr">hreflang</span>=<span class="string">&quot;zh-TW&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/zh-tw/%E9%AC%BC%E7%95%9C%E5%85%A8%E6%98%8E%E6%98%9F&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;alternate&quot;</span> <span class="attr">hreflang</span>=<span class="string">&quot;x-default&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/%E9%AC%BC%E7%95%9C%E5%85%A8%E6%98%8E%E6%98%9F&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;license&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/%E8%90%8C%E5%A8%98%E7%99%BE%E7%A7%91:%E7%89%88%E6%9D%83%E4%BF%A1%E6%81%AF&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;canonical&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://zh.moegirl.org/%E9%AC%BC%E7%95%9C%E5%85%A8%E6%98%8E%E6%98%9F&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;keywords&quot;</span> <span class="attr">content</span>=<span class="string">&quot;萌娘,百科,wiki,梗,娘化,萝莉,动画,漫画,动漫,游戏,音乐,宅腐,ACG,anime,comic,game,GalGame&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&#x27;https://dup.baidustatic.com/js/ds.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>baidujs和alternate、license、canonical、keywords显然就不是，实际上就只有三个资源：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/load.php?debug=false<span class="symbol">&amp;amp;</span>lang=zh-cn<span class="symbol">&amp;amp;</span>modules=ext.cite.styles%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles<span class="symbol">&amp;amp;</span>only=styles<span class="symbol">&amp;amp;</span>skin=vector&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/load.php?debug=false<span class="symbol">&amp;amp;</span>lang=zh-cn<span class="symbol">&amp;amp;</span>modules=site.styles<span class="symbol">&amp;amp;</span>only=styles<span class="symbol">&amp;amp;</span>skin=vector&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span>=<span class="string">&quot;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/load.php?debug=false<span class="symbol">&amp;amp;</span>lang=zh-cn<span class="symbol">&amp;amp;</span>modules=startup<span class="symbol">&amp;amp;</span>only=scripts<span class="symbol">&amp;amp;</span>skin=vector&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>由于当时不知道是不是通过js实现,顺便把js带上了.</p><p>接下来的事情就有点幼稚了:</p><p>=&gt;在桌面上新建html,粘贴,补上 “<a href="https://zh.moegirl.org”">https://zh.moegirl.org”</a> 域名前缀，再添一行<code>&lt;span class=&quot;heimu&quot; title=&quot;你知道的太多了&quot;&gt;提前射精&lt;/span&gt;</code>,打开<br>=&gt;成功显示!<br>=&gt;删去第一行<br>=&gt;成功显示<br>=&gt;删去第二行<br>=&gt;不成功显示!<br>=&gt;补回第二行,删去第三行<br>=&gt;成功显示!</p><p>那么,剩下来位置就很清楚了,<code>&lt;link rel=&quot;stylesheet&quot; href=&quot;/load.php?debug=false&amp;amp;lang=zh-cn&amp;amp;modules=site.styles&amp;amp;only=styles&amp;amp;skin=vector&quot; /&gt;</code>便是</p><p>直接点开来,结果找到拦截:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moegirlcss/7.jpg" alt="图片" title="遭到拦截"></p><p>emmmm…点开了文档:</p><p>按下了F12.</p><p>Chrome调试神器！</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moegirlcss/8.jpg" alt="图片" title="闪亮登场!"></p><p>点击load.php,成功显示:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moegirlcss/9.jpg" alt="图片" title="请看Preview"></p><p>里面就是啦!</p><h2 id="精简"><a href="#精简" class="headerlink" title="精简"></a>精简</h2><p>不过这个css太长了,<span class="heimu" title="你知道的太多了">而且大多是废话</span>,手动查找<code>heimu</code>,发现只有这短短几行:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-tag">span</span><span class="selector-class">.heimu</span> <span class="selector-tag">a</span><span class="selector-class">.external</span>,<span class="selector-tag">span</span><span class="selector-class">.heimu</span> <span class="selector-tag">a</span><span class="selector-class">.external</span><span class="selector-pseudo">:visited</span>,<span class="selector-tag">span</span><span class="selector-class">.heimu</span> <span class="selector-tag">a</span><span class="selector-class">.extiw</span>,<span class="selector-tag">span</span><span class="selector-class">.heimu</span> <span class="selector-tag">a</span><span class="selector-class">.extiw</span><span class="selector-pseudo">:visited</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#252525</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.heimu</span>,<span class="selector-class">.heimu</span> <span class="selector-tag">a</span>,<span class="selector-tag">a</span> <span class="selector-class">.heimu</span>,<span class="selector-class">.heimu</span> <span class="selector-tag">a</span><span class="selector-class">.new</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#252525</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#252525</span>;</span><br><span class="line">    <span class="attribute">text-shadow</span>: none</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.heimu_toggle_on</span>) <span class="selector-class">.heimu</span><span class="selector-pseudo">:hover</span>,<span class="selector-tag">body</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.heimu_toggle_on</span>) <span class="selector-class">.heimu</span><span class="selector-pseudo">:active</span>,<span class="selector-tag">body</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.heimu_toggle_on</span>) <span class="selector-class">.heimu</span><span class="selector-class">.off</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: color .<span class="number">13s</span> linear;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.heimu_toggle_on</span>) <span class="selector-class">.heimu</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">a</span>,<span class="selector-tag">body</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.heimu_toggle_on</span>) <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.heimu</span>,<span class="selector-tag">body</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.heimu_toggle_on</span>) <span class="selector-class">.heimu</span><span class="selector-class">.off</span> <span class="selector-tag">a</span>,<span class="selector-tag">body</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.heimu_toggle_on</span>) <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.heimu</span><span class="selector-class">.off</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: color .<span class="number">13s</span> linear;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#add8e6</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.heimu_toggle_on</span>) <span class="selector-class">.heimu</span><span class="selector-class">.off</span> <span class="selector-class">.new</span>,<span class="selector-tag">body</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.heimu_toggle_on</span>) <span class="selector-class">.heimu</span><span class="selector-class">.off</span> <span class="selector-class">.new</span><span class="selector-pseudo">:hover</span>,<span class="selector-tag">body</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.heimu_toggle_on</span>) <span class="selector-class">.new</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.heimu</span><span class="selector-class">.off</span>,<span class="selector-tag">body</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.heimu_toggle_on</span>) <span class="selector-class">.heimu</span><span class="selector-class">.off</span> <span class="selector-class">.new</span>,<span class="selector-tag">body</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.heimu_toggle_on</span>) <span class="selector-class">.heimu</span><span class="selector-class">.off</span> <span class="selector-class">.new</span><span class="selector-pseudo">:hover</span>,<span class="selector-tag">body</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.heimu_toggle_on</span>) <span class="selector-class">.new</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.heimu</span><span class="selector-class">.off</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: color .<span class="number">13s</span> linear;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ba0000</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>复制,粘贴,添加<code>&lt;style type=&quot;text/css&quot;&gt;</code>和<code>&lt;/style&gt;</code>,搞定！</p><p><span style="text-align: center;"><span class="heimu" title="当你成功看到这一行,说明我白嫖成功啦!">当你成功看到这一行,说明我白嫖成功啦!</span>&lt;/span&gt;</p><h1 id="后记"><a href="#后记" class="headerlink" title="后记:"></a>后记:</h1><p>当然我没有忘记去协助我那个百度难兄一把.<br>这个功能真好用<span style="text-align: center;"><span class="heimu" title="你不应该知道">我一定会大大发扬的!</span>&lt;/span&gt;!<br>由于最近网课频繁,可能更新很慢了.那么,下次再会!</p>]]></content>
      
      
      <categories>
          
          <category> 爱折腾 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 白嫖 </tag>
            
            <tag> css </tag>
            
            <tag> 实践 </tag>
            
            <tag> 萌娘百科 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>浅谈什么是好软件（1）</title>
      <link href="/posts/92dd5347/"/>
      <url>/posts/92dd5347/</url>
      
        <content type="html"><![CDATA[<p><strong>本序列持续更新</strong></p><p>先不说什么，就先放两张图片，这两张看了之后我当时就沉默了：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/Prog/1.jpg" class="full-image" alt="1"></p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/Prog/2.jpg" class="full-image" alt="2"></p><p>看完了吗？</p><p>接下来，我就只有一句话来总结我认为好的软件：将自己该做的事情做到最好，永远不做那些与名字不相符的事情,要用的时候及时跳出来,不用的时候永远静静待着。</p><p>拒绝All in one,只做该做的!</p><p>以下内容全部是个人观点，部分内容并非中立，更有内容关于破解，请不要将其扭曲，更不要将此作为借口挑起吵架，谢谢！</p><h1 id="压缩软件"><a href="#压缩软件" class="headerlink" title="压缩软件"></a>压缩软件</h1><h2 id="Bandizip"><a href="#Bandizip" class="headerlink" title="Bandizip"></a>Bandizip</h2><p>这个软件真的是将压缩做到极致了，网上很多人都在推荐它，不得不说真的很好，UI和内核做到了压缩软件的标杆，唯一有个问题最近升级到最高版本时发现个人版会添加广告，企业版要付费。感觉和WinRAR混到一块去了，真的不敢相信如此好的一款压缩软件竟然混成这样，在此真的不建议使用BandiZip。</p><blockquote><p>全新许可证系统<br>与以前的版本相比，Bandizip 7.0 在许可证和分发方面有所变化。</p><ul><li>Bandizip 7.0 版本历史 </li><li>Bandizip 许可证政策 </li><li>Bandizip 版本对比 </li><li>购买 Bandzip </li><li>Bandizip 最终用户许可协议  </li></ul><p>…<br>许可类型: 含有广告的软件（免费） / 商业软件<br>…</p></blockquote><h2 id="HaoZip-好压"><a href="#HaoZip-好压" class="headerlink" title="HaoZip 好压"></a>HaoZip 好压</h2><p>是的，今天的重点是它。</p><p>你可能会说我在打广告，2345怎么差的一款软件怎么可能排到好软件？？？？</p><p>我承认我有打广告的嫌疑，但我不承认我在打广告,请客官仔细观看。</p><p>是的，刚开始我也不信。</p><p>直到有一天手贱把电脑显卡驱动安坏了，回厂重修，厂方把C盘格式化重装系统后多了好几个2345软件，我直接卸载了，不过只留下了Haozip和看图王。</p><p>两个都有广告，但对于我来说阉割掉广告插件并不难，顺手阉掉之后，发现用户体验大大提升了不少，完全可以与BandiZip媲美。</p><p><span class="heimu" title="啊，你说什么？(・∀・(・∀・(・∀・\*)">在阉割过后</span>使用HaoZip后发现UI和性能并不必BandiZip差，基本上支持全部压缩格式,除了不能在RAR内直接添加文件,其它真的可以称上全格式了。</p><p>真的，作为一款压缩软件，撇去广告插件不看，HaoZip真的是2345旗下做的唯二两款像软件的东西了。</p><p>接下来谈谈怎么阉割。</p><h3 id="阉割："><a href="#阉割：" class="headerlink" title="阉割："></a>阉割：</h3><p>实际上所有广告软件无非也就这几样：伪装成服务而启动的广告，双进程保护广告进程，计划任务的广告程序，使用更新程序的广告软件，伪装成后台的收集用户隐私的进程。</p><p>相对来说，Haozip是2345旗下流氓程度真的不算高的软件，也没有改主页，也没有后台木马,也就简单的广告弹窗。相对于快压巧压,真的很好了有木有!<br><span class="heimu" title="啊，你说什么？(・∀・(・∀・(・∀・\*)">一刀剁下去,保证变得老老实实</span><br>以下在Win10 64位下运行：</p><ol><li>前往 [<a href="http://haozip.2345.cc">http://haozip.2345.cc</a>] 下载最新版好压</li><li>直接安装,取消安装推荐软件,取消安装后自动启动.</li><li>请不要直接打开!</li><li>右键桌面上的HoaZip图标,打开文件所在位置,开始阉割</li></ol><p>这是文件夹概况:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/Prog/3.jpg" alt="图片"></p><ol><li><p>删除文件夹下的 </p><ul><li><code>HaoZipHomePage.exe</code> 这是主页导航(压缩软件为什么要修改导航?)</li><li><code>HaoZipUpdate.exe</code> 这是更新软件,有可能会注入流氓(压缩软件不必频繁更新)</li><li><code>Haozip_2345Upgrade.exe</code> 这是更新(压缩软件为什么要两个更新软件?)</li><li><code>Haozip_2345Upgrade.dll</code> 这是更新注入(压缩软件为什么要更新注入?)</li></ul></li><li><p>进入服务,停止2345好压核心服务\2345安全中心(压缩软件为什么要开服务?)</p></li><li>打开注册表编辑器<code>regedit.exe</code>,依次进入: <code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services</code>,往下翻,删除带有<code>HaoZipsvc</code>或<code>2345Haozip</code>字样的项目(由于更新了,不知道具体是哪个项目)</li><li><p>回到好压文件夹,进入 <code>\Protect\</code> 文件夹，删除：</p><ul><li><code>HaozipMiniPage.exe</code> 这是热点资讯(压缩软件为什么要开热点资讯?)</li><li><code>HaozipSvc.exe</code> 这是好压服务(压缩软件为什么要开服务?)</li><li><code>HaozipSvc.dll</code> 这是好压服务注入(压缩软件为什么要开服务注入?)</li><li><code>Helper_Haozip.exe</code> 这是好压卸载时极力挽留的重装程序</li><li><code>ServiceManager.exe</code> 暂时没有搞清楚,不过用到了UAC,可疑,删除后不影响压缩服务</li></ul></li><li><p>一个有趣的程序:<code>Tool_Uninstall.exe</code>,在卸载好压时,如果选择不卸载但关闭广告,这个软件就会运行,但并没有真正删除广告程序,而是暂时禁用,过一段时间后又解除禁止,继续弹广告.这个exe可以不删,当然删不删都无所谓.</p></li><li>打开计算机管理,打开计划任务程序,删除带有Haozip字样的条目(这一步可做可不做,目的是删除冗余条目)</li><li>回到好压文件夹,进入 <code>\Tool\</code> 文件夹，删除：<ul><li><code>Haozip_2345DLAgent.exe</code> 这是下载器</li><li><code>Update_Haozip.exe</code> 这是第三个更新程序(压缩软件为什么要三个更新软件?)</li></ul></li><li>此时启动好压,选择右上角下拉菜单,点击更新选项卡,勾选手动更新.一个被阉割后老老实实的压缩软件就好了.</li></ol><p>问题:</p><ul><li>第五步提示删除失败: 可能是在安装后打开了2345Haozip,任务管理器关闭程序,服务关闭HaoZipsvc,用UAC打开注册表编辑器</li><li>第六步提示已在好压安全中心打开,删除失败:重做6、7两步，用任务管理器关闭Haozip以及附属所有进程。</li></ul><p>可以打开体验一下了,可以选择绑定默认压缩,因为它已经被阉割干净了.</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/Prog/4.jpg" alt="图片"></p><p>个人认为2345还是在这款软件上用心了,其实UI做的挺好的,用户体验真的很不错,解压速度其实也不差,还附带了一些对于压缩功能来说很有用的小工具,比如哈希校验,压缩包内重命名  <del>当然是对于阉割版而言</del></p><p><del>其实有些软件如果不加上广告而改为捐助,其实可以获利更多的,是眼前的利益污浊了它们的眼睛</del></p><h2 id="7-Zip"><a href="#7-Zip" class="headerlink" title="7-Zip"></a>7-Zip</h2><p><span class="heimu" title="你知道的太多了">喂喂喂,这篇文章不是讲阉割的,而是讲好软件的.</span></p><p>7-Zip是一款完全免费而且开源的压缩软件，相比其他软件有更高的压缩比而且相对于WinRAR不会消耗大量资源。</p><p>7-Zip真的是一款很古老的软件,很多国产压缩都用了它的内核,包括HaoZip.</p><p>完全没广告,完全免费,完全开源,但是时代变迁,现在它真的不太适合作为主流压缩软件了</p><p>当然，希望追求轻巧的我不介意下载。</p><p>下载地址:  [<a href="https://www.7-zip.org">https://www.7-zip.org</a>]</p><h2 id="WinRAR"><a href="#WinRAR" class="headerlink" title="WinRAR"></a>WinRAR</h2><p>作为一款压缩软件的经典,它的坠落真的很让我心疼.</p><p>无论是中国代理版还是国际版,打开就是广告弹窗,标题栏的个人免费版及其刺眼,古老的界面很难让人提起喜欢,200元/套的界面让人感觉怎么不去抢钱.</p><p>讲真,小时候就一直陪伴我的WinRAR,经常就能在里面解压出很多好看的动画片,当时是真的免费,完全没广告,也没有所谓的个人企业版,长大后回头重看,却惨不忍睹.</p><p>我认为WinRAR凭借样貌和名气继续盈利真的很匪夷所思了,在此真的对WinRAR的堕落感到惋惜.</p><p>我不知道它是不是和Flash一样遭到了破解的威胁,但是我对比了一下国际版和中文版,发现其实都是差不多的.</p><p>沉默….</p><h1 id="视频播放器"><a href="#视频播放器" class="headerlink" title="视频播放器"></a>视频播放器</h1><p>讲真,千万不要使用爱奇艺万能播放器一类的,因为它支持的文件越多,更加说明它的解包文件越大!</p><p>国内播放器绝大多数都不推荐,因为它们很多多是One in all!在播放视频时频繁更新，推荐对你来说毫无用处的热点新闻。</p><h2 id="PotPlaer"><a href="#PotPlaer" class="headerlink" title="PotPlaer"></a>PotPlaer</h2><p>据说是KMPlayer工程师跳槽…</p><p>这个风格我很喜欢,功能说实话真的很强大,虽然并没有成为我的主流播放器,但是我挺推荐!</p><p>官网: [<a href="https://potplayer.daum.net/?lang=zh_CN">https://potplayer.daum.net/?lang=zh_CN</a>]</p><p>鬼知道这个网站被Q了…这个比较意外.</p><p>完全没广告,完全免费.</p><h2 id="KLC-Media-Player"><a href="#KLC-Media-Player" class="headerlink" title="KLC Media Player"></a>KLC Media Player</h2><p>不知道你看到哪个路障时是什么想法?</p><p>对于这个软件,我真的只有一个字:强!</p><p>全格式支持,因为它是格式播放器,并没有对于一种后缀就是一种编码器,直接靠格式,对于蛋疼的qlv爱奇艺垄断的视频也能播放.</p><p>地址: [<a href="https://www.videolan.org/vlc/">https://www.videolan.org/vlc/</a>]<br><img src="https://images.videolan.org/vlc/screenshots/1.0.0/fitted_vlc_101_w7_2.jpg" alt="pic"></p><p>完全没广告,完全免费.对了,官方网上有捐助按钮5欧元,有兴趣去按一下?</p><h2 id="迅雷影音"><a href="#迅雷影音" class="headerlink" title="迅雷影音"></a>迅雷影音</h2><p>安装后直接把文件夹里面的<code>XMP.exe</code>剪切出来,再卸载,直接使用XMP.exe就成了.</p><p>虽然不是格式播放器,不过支持种子云播还行,用户体验因为有热点推荐大大降低,只能说还行.</p><h2 id="Format-player"><a href="#Format-player" class="headerlink" title="Format player"></a>Format player</h2><p>真正的格式播放器,是格式工厂自带的 <del>(丑婊脸)</del></p><p>这个真的是万能的,不过我暂时没有提取出独立版本,不过作为日常播放还行…</p><h1 id="音乐播放器"><a href="#音乐播放器" class="headerlink" title="音乐播放器:"></a>音乐播放器:</h1><p>如果你没有网上搜索音乐的需要,那么 <code>MusicPlayer2</code> 绝对适合你!</p><p>说一句你可能不相信的话,一个博客都用免费域名的抠门博主,给这个免费软件捐了2元.</p><p>没有别的原因,直接上截图!</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/Prog/5.jpg" class="full-image" alt="强力替换小娜"></p><p>(请无视右边的仪表盘,那个是MusicPlayer2作者zhongyang219开发的TrafficMonitor,有兴趣的请移步至Github)</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/Prog/6.jpg" alt="图片" title="主界面"><br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/Prog/7.jpg" alt="图片" title="支持匹配歌词"><br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/Prog/8.jpg" alt="图片" title="支持匹配封面"><br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/Prog/9.gif" alt="图片" title="播放"></p><p>(电脑不太好,录制出现了严重的掉帧)</p><p>套用官方的介绍:</p><blockquote><p>这是一款可以播放常见音频格式的音频播放器。支持歌词显示、歌词卡拉OK样式显示、歌词在线下载、歌词编辑、歌曲标签识别、Win10小娜搜索显示歌词、频谱分析、音效设置、任务栏缩略图按钮、主题颜色等功能。 播放内核为BASS音频库(V2.4)。</p></blockquote><p>现在,我可以自信的说,这里没有一句是假的!</p><p>而且没有广告,完全免费,界面良心,就连Issues里都是一篇点赞.</p><p>因为本身并不包含音乐下载功能,只有网易提供的API来封面和歌词下载,完全不必担心版权问题.</p><p>另外夸一句:这个图标做的不错:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/Prog/10.jpg" alt="图片" title="图标"></p><p>下载地址: [<a href="https://github.com/zhongyang219/MusicPlayer2/releases">https://github.com/zhongyang219/MusicPlayer2/releases</a>]</p><h1 id="后记"><a href="#后记" class="headerlink" title="后记:"></a>后记:</h1><p>这个专栏会一直持续下去,但更新频率可能没那么高,那么,下次再会!</p>]]></content>
      
      
      <categories>
          
          <category> 繡软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件 </tag>
            
            <tag> 优良 </tag>
            
            <tag> 压缩软件 </tag>
            
            <tag> 阉割 </tag>
            
            <tag> 流氓 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github + Hexo 搭建个人博客超详细教程</title>
      <link href="/posts/8b2f/"/>
      <url>/posts/8b2f/</url>
      
        <content type="html"><![CDATA[<p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/01.png" alt=""></p><font color=magenta size=4>**在搭建过程中遇到问题欢迎来骚扰我哈！<font color=red size=4> V：godxiaolong，QQ:1571504536</font>，如果觉得有帮助的话不介意打赏一杯奶茶哟~**</font><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/02.png" alt=""></p><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><ul><li><p>作为一名计算机爱好者，摸索了一周搭建出自己的博客。目前只学    习了c语言，没有任何前端知识和网站开发经验，总的来说，算不上很难，     但也要费些心思。网上各类教程应有尽有，只要肯摸索，还是水到渠成的事。另外，写下这篇文章，记录下自己的经验，给需要的朋友，祝你早日拥有自己的博客！</p></li><li><p>搭建博客的初衷是希望用博客记录下自己的学习过程，帮助自己复习，分享一部分不成熟的思考，敦促自己把既定的目标完成。</p></li><li><strong>为什么要搭建自己的博客？可以看看这三篇文章：</strong></li></ul><p><a href="http://mindhacks.cn/2009/02/15/why-you-should-start-blogging-now/" title="为什么你应该（从现在开始就）写博客">《为什么你应该（从现在开始就）写博客》</a>   (By 刘未鹏 | Mind Hacks)</p><p><a href="https://www.zhihu.com/question/19916345" title="为什么要自建博客？">《为什么要自建博客？》</a>   (By 知乎)</p><p><a href="https://www.cnblogs.com/jhzhu/p/3893297.html" title="我为什么写博客">《我为什么写博客》</a> （By 知明所以）</p><p>我们需要知道搭建博客要用到的框架。<font color=red size=3>Hexo</font>是高效的静态站点生成框架，它基于<font color=red size=3>Node.js</font>。我们使用<font color=red size=3>MarkDown</font>在本地编辑我们的博客文章，通过<font color=red size=3>Hexo</font>生成静态页面，再用两条命令即可部署到我们的网站。无需关心网页源代码的具体细节，我们只需要用心写好自己的博客内容就行。</p><h2 id="本文目录"><a href="#本文目录" class="headerlink" title="本文目录"></a>本文目录</h2><ul><li><strong>快速搭建</strong></li><li>安装<font color=red size=3>Node.js</font></li><li>添加国内镜像</li><li>安装<font color=red size=3>Git </font></li><li>注册<font color=red size=3>Github</font>账号</li><li>创建<font color=red size=3>Git</font>仓库</li><li>安装<font color=red size=3>Hexo</font> </li><li>配置本地<font color=red size=3>Hexo</font></li><li>连接<font color=red size=3>Github</font>与本地 </li><li>写文章、发布文章 </li><li><font color=red size=3>MarkDown</font>文章编辑器说明</li><li>配置个性化域名</li><li>更换自己喜欢的<font color=red size=3>Hexo</font>主题</li><li>我的博客源代码</li><li>结语</li></ul><hr><h1 id="快速搭建"><a href="#快速搭建" class="headerlink" title="快速搭建"></a>快速搭建</h1><p>有的朋友可能不想去折腾，自定义主题也比较麻烦，亦或有尝试几次搭建却失败，那就可以看这部分。快速搭建可以帮助我们更快搭建出自己的博客，优点是别人博客有的东西你都有，就跟复制差不多；缺点是博客里的配置信息都是别人的，不过不要紧，稍稍改改配置就可以。</p><p>在这里以我的博客为例。</p><h2 id="一、下载博客源代码"><a href="#一、下载博客源代码" class="headerlink" title="一、下载博客源代码"></a>一、下载博客源代码</h2><p>大家可以直接素质二连，<font color=red size=3>Star&amp;Fork</font>我的博客源代码：<a href="https://github.com/MUYIio/hexo-themes-matery">https://github.com/MUYIio/hexo-themes-matery</a>，这里我给出两种下载方法：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/03.png" alt=""></p><p><strong>第一种</strong>：直接<font color=red size=3>DownLoad</font>，下载到本地就可以。（<strong>不推荐</strong>）</p><p><strong>第二种</strong>：如果你已经安装了<a href="https://git-scm.com/download/win" title="Git">Git</a>，就可以右键单击<font color=red size=3>Come Bash Here</font>运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:MUYIio/hexo-themes-matery.git</span><br></pre></td></tr></table></figure><p>将所有文件下载到本地，这个复杂一点。</p><h2 id="二、修改博客文档配置"><a href="#二、修改博客文档配置" class="headerlink" title="二、修改博客文档配置"></a>二、修改博客文档配置</h2><p>首先将我们下载的博客源代码解压，然后修改主要配置：</p><ul><li>根目录配置文件<font color=red size=3>_config.yml</font>和主题目录配置文件<font color=red size=3>_config.yml</font>中修改个人信息。</li><li>根目录配置文件中修改<font color=red size=3>deploy</font>一栏的<font color=red size=3>repository</font>。</li><li>根目录配置文件中修改<font color=red size=3>baidu_url_submit</font>一栏的<font color=red size=3>token</font>。</li><li>主题配置文件中修改<font color=red size=3>gitalk</font>一栏，修改方法见正文。</li></ul><p>我给出的是博客比较明显的几个地方，先修改这几个地方，其它的可以自己慢慢摸索修改。</p><p>最后一步，<strong>本地的运行环境还是需要搭建好的</strong>，跟着下文操作到连接Github与本地，环境就算是搭建完成。</p><p><strong>本地环境搭建好之后会生成的文件：</strong></p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/35.png" alt=""></p><p>然后直接把<font color=red size=3>Hexo</font>文件夹里面的文件删掉，把我的源代码的文件全部移动过来，就是这样了：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/37.png" alt=""></p><p>然后在<font color=red size=3>Hexo</font>文件夹下右键单击鼠标，点击 <font color=red size=3>Git Bash Here</font>点击输入以下命令上传就可以了：</p><pre><code>hexo cleanhexo ghexo d</code></pre><h1 id="安装Node-js"><a href="#安装Node-js" class="headerlink" title="安装Node.js"></a>安装Node.js</h1><p>了解一下什么是<font color=red size=3>Node.js</font>：</p><blockquote><p><font color=red size=3>Node.js</font>就是一个用于创建服务器端应用程序的运行系统，它可以轻松构建网络或其他事件驱动的应用程序服务器。</p></blockquote><p>需要用到的命令：</p><pre><code>$ git --version$ node -v$ npm -v</code></pre><p><a href="https://nodejs.org/en/download/" title="Node.js">点击此处</a>进入<font color=red size=3>Node.js</font>官网下载相应版本即可，安装时选项全部默认，一路点击<font color=red size=3>Next</font>。</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/04.png" alt=""></p><p>检验是否安装成功：<br>按<font color=red size=3>Win+R</font>打开命令提示符，输入<font color=red size=3>node -v</font>和<font color=red size=3>npm -v</font>，如果出现版本号，那么就安装成功了。</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/05.png" alt=""></p><h1 id="添加国内镜像"><a href="#添加国内镜像" class="headerlink" title="添加国内镜像"></a>添加国内镜像</h1><p>这里我们使用阿里的国内镜像进行加速，按Win+R打开命令提示符输入：</p><pre><code>npm config set registry https://registry.npm.taobao.org</code></pre><h1 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h1><blockquote><p><font color=red size=3>Git</font>是一个开源的分布式版本控制系统，可以有效、高速地处理从很小到非常大的项目版本管理，帮助我们把本地网页上传到<font color=red size=3>Github</font>。</p></blockquote><p><a href="https://git-scm.com/download/win" title="Git">点击此处</a>进入Git官网下载相应版本，默认安装即可。</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/005.png" alt=""></p><p>参考资料：<a href="https://www.cnblogs.com/jytx/p/5602927.html" title="如何在windows下安装GIT">《如何在windows下安装GIT》</a> (By 俊雨廷休)</p><p>检验是否安装成功：</p><p>安装完成后在命令提示符中输入<font color=red size=3>git —version</font>验证是否安装成功</p><pre><code>git --version</code></pre><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/06.png" alt=""></p><h1 id="注册Github账号"><a href="#注册Github账号" class="headerlink" title="注册Github账号"></a>注册Github账号</h1><p><font color=red size=3>Github</font>作为全球最大的开源社区，相信朋友们都已经有了吧，如果没有，<a href="https://github.com/" title="Github">点击此处</a>进入<font color=red size=3>Github</font>官网点击 <font color=red size=3>Sign Up </font>注册账户。</p><h1 id="创建git仓库"><a href="#创建git仓库" class="headerlink" title="创建git仓库"></a>创建git仓库</h1><p>登录<font color=red size=3>Github</font>创建一个仓库</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/07.png" alt=""></p><p>如下图所示，<strong>输入自己的项目名字，后面一定要加<font color=red size=3>.github.io</font>后缀，<font color=red size=3>README</font>初始化也要勾上。名称一定要和你的<font color=red size=3>Github</font>名字完全一样，比如你<font color=red size=3>github</font>名字叫<font color=red size=3>A</font>，那么仓库名字一定要是<font color=red size=3>A.github.io</font>。</strong></p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/08.png" alt=""></p><p>选择一个自己喜欢的主题：<br>在上面创建的仓库里面点击<font color=red size=3>Settings</font>（不是头像下面那个<font color=red size=3>Settings</font>），向下拉到最后有个<font color=red size=3>GitHub Pages</font>，点击<font color=red size=3>Choose a theme</font>选择一个主题。然后等一会儿，再回到<font color=red size=3>GitHub Pages</font>，就可以预览效果啦。</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/09.png" alt=""></p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/10.png" alt=""></p><h1 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h1><blockquote><p><font color=red size=3>Hexo</font>是一款基于<font color=red size=3>Node.js</font>的静态博客框架，依赖少易于安装使用，可以方便的生成静态网页托管在<font color=red size=3>GitHub</font>和<font color=red size=3>Heroku</font>上，是搭建博客的首选框架。</p></blockquote><p>选择一个磁盘，新建一个文件夹用来存放博客文件。比如我的<font color=red size=3>（C/panakot Blog）</font>，在该文件夹下右键单击鼠标，点击<font color=red size=3> Git Bash Here</font>，输入以下<font color=red size=3> npm </font>命令即可安装</p><pre><code>$ npm install hexo-cli -g</code></pre><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/11.png" alt=""></p><p>输入<font color=red size=3>hexo -v</font>即可检验是否安装成功，我这里就不演示了。</p><h1 id="配置本地hexo"><a href="#配置本地hexo" class="headerlink" title="配置本地hexo"></a>配置本地hexo</h1><p>还是在刚才新建的文件夹下再新建一个<font color=red size=3>Hexo</font>文件夹，比如我的<font color=red size=3>（C/panakot Blog/Hexo）</font>，在<font color=red size=3>Hexo</font>文件夹下右键单击鼠标，点击<font color=red size=3> Git Bash Here</font>，依次输入以下<font color=red size=3> npm </font>命令即可初始化。</p><pre><code>hexo initnpm install</code></pre><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/12.png" alt=""></p><p>初始化成功生成的文件：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/13.png" alt=""></p><p>接着我们输入<font color=red size=3>hexo g</font>生成静态网页，然后输入<font color=red size=3>hexo s</font>打开本地服务器，然后浏览器打开<a href="http://localhost:4000/">http://localhost:4000/</a>，就可以预览我们的博客啦，如图：</p><p>显示以下信息说明操作正确：</p><p><code>INFO Hexo is running at http://0.0.0.0:4000/. Press Ctrl+C to stop.</code></p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/14.png" alt=""></p><p>按<font color=red size=3>ctrl+c</font>关闭本地服务器。</p><p><strong>我们以后常用到的<font color=red size=3>Hexo</font>命令：</strong></p><ul><li><p><font color=red size=3>hexo s</font>等价于 <font color=red size=3>hexo server</font>  #<font color=red size=3>Hexo</font> 会监视文件变动并自动更新，除修改站点配置文件外,无须重启服务器,直接刷新网页即可生效。</p></li><li><p><font color=red size=3>hexo g</font> 等价于 <font color=red size=3>hexo generate</font>  #生成静态网页 (执行 $ <font color=red size=3>hexo g</font>后会在站点根目录下生成<font color=red size=3>public</font>文件夹,<font color=red size=3> hexo</font>会将”<font color=red size=3>/blog/source/</font>“ 下面的<font color=red size=3>.md</font>后缀的文件编译为<font color=red size=3>.html</font>后缀的文件,存放在”<font color=red size=3>/blog/public/ </font>“ 路径下)</p></li><li><p><font color=red size=3>hexo d </font>等价于 <font color=red size=3>hexo deploy</font>  #将本地数据部署到远端服务器(如<font color=red size=3>github</font>)</p></li><li><font color=red size=3>hexo clean </font> #清除缓存 ,网页正常情况下可以忽略此条命令,执行该指令后,会删掉站点根目录下的<font color=red size=3>public</font>文件夹</li></ul><h1 id="连接Github与本地"><a href="#连接Github与本地" class="headerlink" title="连接Github与本地"></a>连接Github与本地</h1><h2 id="一、生成密钥"><a href="#一、生成密钥" class="headerlink" title="一、生成密钥"></a>一、生成密钥</h2><p>右键单击鼠标，点击 <font color=red size=3>Git Bash Here</font>输入以下命令：</p><pre><code>git config --global user.name &quot;Name&quot;git config --global user.email &quot;Email&quot;</code></pre><p><strong><font color=red size=3>Name</font>和<font color=red size=3>Email</font>是我们注册<font color=red size=3>Github</font>时的用户名和邮箱。</strong></p><p>然后生成密钥：</p><pre><code>ssh-keygen -t rsa -C &quot;Email&quot;</code></pre><p><strong><font color=red size=3>Email</font>是我们注册<font color=red size=3>Github</font>时的邮箱</strong></p><p>然后会出现：</p><pre><code>Generating public/private rsa key pair.Enter file in which to save the key (/c/Users/you/.ssh/id_rsa)://到这里可以直接回车将密钥按默认文件进行存储</code></pre><p>回车之后：</p><pre><code>Enter passphrase (empty for no passphrase)://这里是要你输入密码，其实不需要输什么密码，直接回车就行Enter same passphrase again:</code></pre><p>接下来会有：</p><pre><code>Your identification has been saved in /c/Users/you/.ssh/id_rsa.Your public key has been saved in /c/Users/you/.ssh/id_rsa.pub.The key fingerprint is:这里是各种字母数字组成的字符串，结尾是你的邮箱The key&#39;s randomart image is:这里也是各种字母数字符号组成的字符串</code></pre><p>现在密钥已经生成，一般存放在<font color=red size=3>（/c/Users/you/.ssh/id_rsa.pub.）</font>，我们运行下面的命令将密钥复制为粘贴板：</p><pre><code> clip &lt; ~/.ssh/id_rsa.pub</code></pre><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/15.png" alt=""></p><h2 id="二、连接Github"><a href="#二、连接Github" class="headerlink" title="二、连接Github"></a>二、连接Github</h2><p>在<font color=red size=3>Github</font>头像下面点击<font color=red size=3>Settings</font>，再点击<font color=red size=3>SSH and GPG keys</font>，新建一个<font color=red size=3>SSH</font>，名字任意。</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/16.png" alt=""></p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/17.png" alt=""></p><p>然后将刚才复制的密钥添加就可以了，像这样：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/18.png" alt=""></p><p><strong>本地连接Github</strong></p><p>右键单击鼠标，点击<font color=red size=3> Git Bash Here</font>输入以下命令，如果如下图所示，出现你的用户名，那就成功了</p><pre><code>ssh -T git@github.com//注意不要做任何修改</code></pre><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/19.png" alt=""></p><p>用记事本打开博客根目录下的<font color=red size=3>_config.yml</font>文件，这是博客的配置文件，我们需要修改一下才能连接<font color=red size=3>Github</font>。</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/20.png" alt=""></p><p>修改最后一行的配置：</p><pre><code># Deployment## Docs: https://hexo.io/docs/deployment.htmldeploy:  type:</code></pre><p>改为：</p><pre><code># Deployment## Docs: https://hexo.io/docs/deployment.htmldeploy:  type: git  repository: git@github.com:panakot/panakot.github.io.git  branch: master</code></pre><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/21.png" alt=""></p><p>切记：</p><ul><li><strong><font color=red size=3>repository</font>修改为你自己的<font color=red size=3>github</font>项目地址</strong>。</li><li><strong>每一个冒号后面都有一个空格。</strong></li></ul><h1 id="写文章、发布文章"><a href="#写文章、发布文章" class="headerlink" title="写文章、发布文章"></a>写文章、发布文章</h1><p>首先在博客根目录下右键打开<font color=red size=3>Git Bash Here</font>输入以下命令，安装一个扩展.</p><pre><code>npm i hexo-deployer-git</code></pre><p>然后输入下面的命令，新建一篇文章。</p><pre><code>hexo new post &quot;article title&quot;</code></pre><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/22.png" alt=""></p><p>然后打开<font color=red size=3>C:\panakot Blog\Hexo\source_posts</font>的目录，可以发现下面多了一个文件夹和一个<font color=red size=3>.md</font>文件，一个用来存放你的图片等数据，另一个就是你的文章文件啦。</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/23.png" alt=""></p><p>编写完<font color=red size=3>markdown</font>文件后，根目录下右键打开<font color=red size=3>Git Bash Here</font>输入<font color=red size=3>hexo g</font>生成静态网页，然后输入<font color=red size=3>hexo s</font>可以本地预览效果，最后输入<font color=red size=3>hexo d</font>上传到<font color=red size=3>github</font>上。</p><p>你的博客地址：<font color=red size=3><a href="https://你的用户名.github.io">https://你的用户名.github.io</a></font>，比如我的是：<a href="https://muyiio.github.io">https://muyiio.github.io</a>，现在每个人都可以通过此链接访问你的博客</p><h1 id="MarkDown文章编辑器说明"><a href="#MarkDown文章编辑器说明" class="headerlink" title="MarkDown文章编辑器说明"></a>MarkDown文章编辑器说明</h1><blockquote><p>前面我们提到了使用<font color=red size=3>MarkDown</font>编辑我们的博客文章。<font color=red size=3> Markdown</font> 是<font color=red size=3> 2004</font> 年由 <font color=red size=3>John Gruberis </font>设计和开发的纯文本格式的语法，非常的简单实用，常用的标记符号屈指可数，几分钟即可学会，<font color=red size=3> .md </font>文件可以使用支持 <font color=red size=3>Markdown </font>语法的编辑器编辑，然后将写好的文章<font color=red size=3>（.md文件）</font>保存到<font color=red size=3> \Hexo\source_posts </font>文件夹下即可。</p></blockquote><p> <font color=red size=3>Windows </font>上推荐使用 <font color=red size=3>MarkdownPad2 </font>或者<font color=red size=3>小书匠</font>编辑器，<font color=red size=3>macOS </font>上使用<font color=red size=3> Mou</font> 编辑器，<font color=red size=3>Linux </font>上使用 <font color=red size=3>Remarkable</font> 编辑器，<font color=red size=3>Web </font>端上使用 简书。</p><p><strong><a href="http://markdownpad.com/download.html" title="MarkDown">点击此处</a>下载<font color=red size=3>MarkDown</font><br>，刚使用的朋友或许不知道如何使用这个编辑器，只需要几分钟就可以掌握啦，给出以下几个我觉得不错的参考：</strong></p><p><a href="https://www.jianshu.com/p/q81RER/" title="献给写作者的 Markdown 新手指南">《献给写作者的 Markdown 新手指南》</a> （By 简书）</p><p><a href="https://blog.csdn.net/u014061630/article/details/81359144?utm_source=app" title="Markdown语法图文全面详解">《Markdown语法图文全面详解(10分钟学会)》</a>（By 黑暗星球）</p><p><a href="https://blog.csdn.net/witnessai1/article/details/52551362?utm_source=app" title="Markdown 语法手册 （完整整理版）">《Markdown 语法手册 （完整整理版）》</a> （By witnessai1）</p><p><a href="https://sspai.com/post/25137" title="认识与入门 Markdown">《认识与入门 Markdown》</a>（By Te_Lee）</p><p>写完文章记得在博客根目录<font color=red size=3>Bash Here</font>输入<font color=red size=3>hexo g</font>和<font color=red size=3>hexo d</font>上传到网站。</p><h1 id="配置个性化域名"><a href="#配置个性化域名" class="headerlink" title="配置个性化域名"></a>配置个性化域名</h1><p>一顿操作下来，打开我们的博客还是：<font color=red size=3>www.xxx.github.io</font>，是不是很没有牌面？我们可以考虑购买一个专属域名，以后打开博客就是这样：<font color=red size=3>www.xxx.com </font>。</p><p><a href="https://www.aliyun.com/" title="阿里云">阿里云</a>和<a href="https://cloud.tencent.com/" title="腾讯云">腾讯云</a>都可以，我的是腾讯云，购买域名后首先需要添加解析：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/24.png" alt=""></p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/25.png" alt=""></p><p><strong>方法一：</strong>点击添加记录，需要添加两个记录，两个记录类型都是 <font color=red size=3>CNAME </font>，第一个主机记录为<font color=red size=3> @ </font>，第二个主机记录为<font color=red size=3> www</font>，记录值都是填你自己的博客地址（比如我的是：<font color=red size=3>muyiio.github.io</font>），保存之后域名解析就完成了！</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/27.png" alt=""></p><p><strong>方法二：</strong>两个记录类型为<font color=red size=3> A </font>，第一个主机记录为<font color=red size=3> @ </font>，第二个主机记录为<font color=red size=3> www</font>，记录值都为博客的<font color=red size=3> IP</font> 地址，<font color=red size=3>IP </font>地址可以<font color=red size=3> cmd</font> 中输入<font color=red size=3> ping</font> 你的博客地址 获得（比如我的：<font color=red size=3>ping muyiio.github.io</font>），保存之后域名解析就完成了！</p><p>参考资料：</p><p><a href="https://blog.csdn.net/it_man/article/details/9017307" title="域名解析中A记录、CNAME、MX记录、NS记录的区别和联系">《域名解析中A记录、CNAME、MX记录、NS记录的区别和联系》</a></p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/26.png" alt=""></p><p><strong>不管在哪个平台购买域名，操作都大同小异，这里说明两点</strong>：</p><blockquote><p>如果你填写的是没有<font color=red size=3>www</font>的，比如 <font color=red size=3>muyio.com</font>，那么无论是访问<font color=red size=3> <a href="https://www.muyiio.com">https://www.muyiio.com</a> </font>还是<font color=red size=3> <a href="https://muyiio.com">https://muyiio.com</a></font> ，都会自动跳转到<font color=red size=3> <a href="https://muyiio.com">https://muyiio.com</a></font>。</p><p>如果你填写的是带<font color=red size=3>www</font>的，比如 <font color=red size=3>www.muyiio.com </font>，那么无论是访问 <font color=red size=3><a href="https://www.muyiio.com">https://www.muyiio.com</a></font> 还是 <font color=red size=3><a href="https://muyiio.com">https://muyiio.com</a> </font>，都会自动跳转到 <font color=red size=3><a href="http://www.imuyiio.com">http://www.imuyiio.com</a></font>。</p></blockquote><p>然后打开你的<font color=red size=3>github</font>博客项目，点击settings，拉到下面<font color=red size=3>Custom domain</font>处，填上你自己的域名，保存就可以了。</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/28.png" alt=""></p><p>现在我们的项目根目录应该会出现一个名为<font color=red size=3>CNAME</font>的文件了。如果没有的话，打开你本地博客<font color=red size=3>/source</font>目录，我的是<font color=red size=3>C:\Blog\Hexo\source</font>，新建<font color=red size=3>CNAME</font>文件，<font color=red size=3>（注意不要加.txt，没有任何后缀名！）</font>。然后在里面写上你的域名，保存。最后运行<font color=red size=3>hexo g、hexo d</font>上传到<font color=red size=3>github</font>。</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/29.png" alt=""></p><p>现在就可以通过我们的个性化域名：<font color=red size=3>www.xxx.com、xxx.com</font>访问自己的博客了。</p><h1 id="更换自己喜欢的Hexo主题"><a href="#更换自己喜欢的Hexo主题" class="headerlink" title="更换自己喜欢的Hexo主题"></a>更换自己喜欢的Hexo主题</h1><p>点击进入<a href="https://hexo.io/themes/" title="Hexo主题专栏">Hexo主题专栏</a>可以看到很多<font color=red size=3>Hexo</font>主题：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/30.png" alt=""></p><p>推荐：</p><p><a href="https://blog.csdn.net/fail_perfectly/article/details/83791781?utm_source=app" title="几个好用的hexo主题">几个好用的hexo主题</a> (By fail_perfectly)</p><p>这里我们以<a href="http://huangxuan.me/" title="Bean Tech">Bean Tech</a>主题为例，下滑到底部我们可以看到他的<font color=red size=3>GitHub</font>（<font color=red size=3>有的主题是：Theme by xxx，点击那里也是进入GitHub地址</font>）：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/31.png" alt=""></p><p>点击进入主题的<font color=red size=3>GitHub</font>地址：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/32.png" alt=""></p><p>复制该项目地址：</p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/33.png" alt=""></p><p>然后打开<font color=red size=3> Hexo </font>文件夹下的<font color=red size=3> themes</font> 目录（如：<font color=red size=3>C:\MUYIio Blog\Hexo\themes</font>），右键<font color=red size=3> Git Bash Here</font>，输入以下命令：</p><pre><code>$ git clone 此处填写你刚才复制的主题地址</code></pre><p>以我们刚才复制的为例：</p><pre><code>$ git clone https://github.com/Huxpro/huxpro.github.io</code></pre><p>下载完成后即可在<font color=red size=3> themes </font>目录下生成 <font color=red size=3>hexo-theme-Bean-Tech </font>文件夹，然后打开 <font color=red size=3>Hexo</font> 文件夹下的配置文件 <font color=red size=3>_config.yml </font>，找到关键字 <font color=red size=3>theme</font>，修改参数为：<font color=red size=3>theme：hexo-theme-Bean-Tech </font>（其他主题修改成相应名称即可），<strong>再次注意冒号后面有一个空格！</strong></p><p><img src="https://muyiio-1300292673.cos.ap-chongqing.myqcloud.com/%E5%8D%9A%E5%AE%A2/_posts/1/34.png" alt=""></p><p>现在我们的主题已经替换完成，将它部署到我们的博客，博客根目录下右键<font color=red size=3> Git Bash Here</font>，输入以下命令：</p><pre><code>hexo cleanhexo ghexo d</code></pre><p>现在访问我们的网站就可以看到主题已经更换了，但是比如网站标题，图标等都没有更换，我们博客文件中有两份主要的配置文件，名称都是 <font color=red size=3>_config.yml</font> ，它们均是用于站点配置使用的。其中，一份位于站点根目录下（比如我的：<font color=red size=3>C:\MUYIio Blog\Hexo_config.yml</font>），主要包含<font color=red size=3> Hexo</font> 本身整站的配置；另一份位于主题目录下（比如我的：<font color=red size=3>C:\MUYIio Blog\Hexo\themes\hexo-theme-matery_config.yml</font>），这份配置由主题作者提供，主要用于配置主题相关的选项，一般<font color=red size=3> _config.yml </font>文件里都有相关注释，按需修改即可。</p><h1 id="我的博客源代码"><a href="#我的博客源代码" class="headerlink" title="我的博客源代码"></a>我的博客源代码</h1><p><strong>我的博客源代码地址：<a href="https://github.com/MUYIio/hexo-themes-matery">https://github.com/MUYIio/hexo-themes-matery</a>，有心的话可以给个<font color=red size=3>Star&amp;Fork</font>。</strong></p><p>下载源代码：git clone git@github.com:MUYIio/hexo-themes-matery.git</p><p>在文章开头给出了快速搭建教程，相对于自己从头开始搭建还是比较方便的，修复了很多<font color=red size=3>Bug</font>，也添加了一些插件，下载就可以使用，可以帮你们省去个性化配置带来的很多麻烦。</p><p>主题的原地址在这里：<a href="https://github.com/blinkfox/hexo-theme-matery">hexo-theme-matery</a>，作者把文档写得也非常的详细，还有中英文两个版本，建议可以多看几遍，在本地修改的时候轻松一些。</p><p>使用我的源代码之前本地的环境还是要搭建好，就是前面一部分。</p><h2 id=""><a href="#" class="headerlink" title=""></a><table><tr><td bgcolor=orange></h2><p>&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</p><h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>初学者可能会觉得困难，毕竟很多东西都是第一次接触，当初我也尝试了好几次才成功，不要放弃，弄错了就删掉重新来过，当你把博客搭建出来会觉得受益良多的。</p><p>文章中难免有错误的地方，有大佬发现了欢迎给我指正！有的地方解释不够详细，可以百度一下看看细节，文章中的引用以及参考资料涉及侵权请联系我删除！</p>]]></content>
      
      
      <categories>
          
          <category> Blog </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Github </tag>
            
            <tag> 博客搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我们一起解题目吧！</title>
      <link href="/posts/992e034c/"/>
      <url>/posts/992e034c/</url>
      
        <content type="html"><![CDATA[<p>除夕快乐！<br>哎呀，作为一个贫困的<code>blogger</code>,我似乎没有什么礼物。<br>今天是己亥年的最后一日，快乐度过吧！</p><p>话题扯一下新型冠状病毒，大家一定要注意人身安全，假期家里蹲就好了！<br>中国加油！武汉加油！</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/疫情.JPG" alt="图片" title="一定要挺过去！"></p><p>话题扯回来…</p><h1 id="正文！"><a href="#正文！" class="headerlink" title="正文！"></a>正文！</h1><p>整理书的时候看到了一张纸，突然想起来这是当天偷偷在数学课上写的代码，结果被班主任发现骂了一顿。<br>题目非常有趣，是这样的：</p><blockquote><h2 id="题目："><a href="#题目：" class="headerlink" title="题目："></a>题目：</h2><p>在f（x）=ax^2+bx+c中，若有两个不等的实数根且在-0.25至0.25间，求a+b+c的最小值。</p></blockquote><p>思维导图：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/解题.bmp" alt="图片" title="思维导图↑自己做得有点丑(✿◡‿◡)"></p><p>当时写的代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># <span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta"># <span class="keyword">include</span> <span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta"># <span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std; </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span> <span class="params">()</span></span>&#123;</span><br><span class="line"><span class="type">int</span> min=<span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> i;</span><br><span class="line"><span class="type">double</span> mid,root,a,b,c,a1,b1,c1,delta;</span><br><span class="line">a=b=c=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(;a+b+c&lt;=min;i++)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;在a=%lf ,b=%lf ,c=%lf 时&quot;</span>,a,b,c);</span><br><span class="line">delta=b*b<span class="number">-4</span>*a*c;</span><br><span class="line"><span class="keyword">if</span>(delta&gt;<span class="number">0</span>)&#123;</span><br><span class="line">mid=(-b/<span class="number">2</span>)/a;</span><br><span class="line">root=((<span class="built_in">sqrt</span>(delta))/<span class="number">2</span>)/a;</span><br><span class="line"><span class="keyword">if</span>((mid+root)&gt;(<span class="number">-0.25</span>) <span class="built_in">and</span> (mid+root)&lt;<span class="number">0.25</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>((mid-root)&gt;(<span class="number">-0.25</span>) <span class="built_in">and</span> (mid-root)&lt;<span class="number">0.25</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(a+b+c&lt;min)&#123;</span><br><span class="line">a1=a;</span><br><span class="line">b1=b;</span><br><span class="line">c1=c;</span><br><span class="line">min=a+b+c;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;有min=%d ！\n&quot;</span>,min); </span><br><span class="line">&#125;<span class="keyword">else</span> cout&lt;&lt;<span class="string">&quot;a+b+c不是min值！&quot;</span>&lt;&lt;endl; </span><br><span class="line">&#125;<span class="keyword">else</span> cout&lt;&lt;<span class="string">&quot;较小值超出范围！&quot;</span>&lt;&lt;endl; </span><br><span class="line">&#125;<span class="keyword">else</span> cout&lt;&lt;<span class="string">&quot;较大值超出范围！&quot;</span>&lt;&lt;endl; </span><br><span class="line">&#125;<span class="keyword">else</span> cout&lt;&lt;<span class="string">&quot;没有两不等实根！&quot;</span>&lt;&lt;endl; </span><br><span class="line">a++;</span><br><span class="line"><span class="keyword">if</span>(a+b+c&gt;min)&#123;</span><br><span class="line">a=<span class="number">1</span>;</span><br><span class="line">b++;</span><br><span class="line"><span class="keyword">if</span>(a+b+c&gt;min)&#123;</span><br><span class="line">b=<span class="number">1</span>;</span><br><span class="line">c++;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;共循环 &quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot; 次,a+b+c的最小值是&quot;</span>&lt;&lt;min&lt;&lt;<span class="string">&quot;,此时a=&quot;</span>&lt;&lt;a1&lt;&lt;<span class="string">&quot;,b=&quot;</span>&lt;&lt;b1&lt;&lt;<span class="string">&quot;,c=&quot;</span>&lt;&lt;c1&lt;&lt;endl; </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125; </span><br></pre></td></tr></table></figure><p> 代码的核心是枚举，从a=b=c=1开算解，不符合就C自加一，c达到当时最小之后,c回到起点，从b开加，以此类推，如果a加到最后超范围，则说明解完了！</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">编译结果...</span><br><span class="line">--------</span><br><span class="line">- 错误: 0</span><br><span class="line">- 警告: 0</span><br><span class="line">- 输出文件名: C:\Users\CYF\Desktop\函数解题.exe</span><br><span class="line">- 输出大小: 1.83758735656738 MiB</span><br><span class="line">- 编译时间: 1.75s</span><br></pre></td></tr></table></figure><p>最后结果:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">在a=35.000000,b=4.000000,c=1.000000时,有没有两不等实根！</span><br><span class="line">在a=35.000000,b=4.000000,c=2.000000时,有没有两不等实根！</span><br><span class="line">在a=35.000000,b=5.000000,c=1.000000时,有没有两不等实根！</span><br><span class="line">在a=36.000000,b=1.000000,c=1.000000时,有没有两不等实根！</span><br><span class="line">在a=36.000000,b=1.000000,c=2.000000时,有没有两不等实根！</span><br><span class="line">在a=36.000000,b=1.000000,c=3.000000时,有没有两不等实根！</span><br><span class="line">在a=36.000000,b=1.000000,c=4.000000时,有没有两不等实根！</span><br><span class="line">在a=36.000000,b=2.000000,c=1.000000时,有没有两不等实根！</span><br><span class="line">在a=36.000000,b=2.000000,c=2.000000时,有没有两不等实根！</span><br><span class="line">在a=36.000000,b=2.000000,c=3.000000时,有没有两不等实根！</span><br><span class="line">在a=36.000000,b=3.000000,c=1.000000时,有没有两不等实根！</span><br><span class="line">在a=36.000000,b=3.000000,c=2.000000时,有没有两不等实根！</span><br><span class="line">在a=36.000000,b=4.000000,c=1.000000时,有没有两不等实根！</span><br><span class="line">在a=37.000000,b=1.000000,c=1.000000时,有没有两不等实根！</span><br><span class="line">在a=37.000000,b=1.000000,c=2.000000时,有没有两不等实根！</span><br><span class="line">在a=37.000000,b=1.000000,c=3.000000时,有没有两不等实根！</span><br><span class="line">在a=37.000000,b=2.000000,c=1.000000时,有没有两不等实根！</span><br><span class="line">在a=37.000000,b=2.000000,c=2.000000时,有没有两不等实根！</span><br><span class="line">在a=37.000000,b=3.000000,c=1.000000时,有没有两不等实根！</span><br><span class="line">在a=38.000000,b=1.000000,c=1.000000时,有没有两不等实根！</span><br><span class="line">在a=38.000000,b=1.000000,c=2.000000时,有没有两不等实根！</span><br><span class="line">在a=38.000000,b=2.000000,c=1.000000时,有没有两不等实根！</span><br><span class="line">在a=39.000000,b=1.000000,c=1.000000时,有没有两不等实根！</span><br><span class="line">共循环 102937 次,a+b+c的最小值是41,此时a=29,b=11,c=1</span><br><span class="line"></span><br><span class="line">--------------------------------</span><br><span class="line">Process exited after 160.06 seconds with return value 0</span><br></pre></td></tr></table></figure><p> 后来发现从c开始加有点费劲，而且一边有<code>cout</code>,另一边用<code>printf</code>,有点不爽(当时没反应过来).<br> 蛋疼的是输出结果还是双精度的…</p><p> 改了一下,顺便附上解释:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># <span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta"># <span class="keyword">include</span> <span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta"># <span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std; </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span> <span class="params">()</span></span>&#123;</span><br><span class="line"><span class="type">int</span> min=<span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> i;<span class="comment">//定义循环 </span></span><br><span class="line"><span class="type">double</span> mid,root,a,b,c,a1,b1,c1,delta;<span class="comment">//此处必须双精度，否则会算出3，5，2这一组 </span></span><br><span class="line">a=b=c=<span class="number">1</span>;<span class="comment">//设定起点 </span></span><br><span class="line"><span class="keyword">for</span>(;a+b+c&lt;=min;i++)&#123;<span class="comment">//开始循环 </span></span><br><span class="line">cout&lt;&lt;<span class="string">&quot;在a=&quot;</span>&lt;&lt;a&lt;&lt;<span class="string">&quot;，b=&quot;</span>&lt;&lt;b&lt;&lt;<span class="string">&quot;c=&quot;</span>&lt;&lt;c&lt;&lt;<span class="string">&quot;，的情况下：&quot;</span>;<span class="comment">//头输出 </span></span><br><span class="line">delta=b*b<span class="number">-4</span>*a*c;<span class="comment">//定义delta </span></span><br><span class="line"><span class="keyword">if</span>(delta&gt;<span class="number">0</span>)&#123;<span class="comment">//有无双实根？ </span></span><br><span class="line">mid=(-b/<span class="number">2</span>)/a;</span><br><span class="line">root=((<span class="built_in">sqrt</span>(delta))/<span class="number">2</span>)/a;<span class="comment">//这两步就是算解 </span></span><br><span class="line"><span class="keyword">if</span>((mid+root)&gt;(<span class="number">-0.25</span>) <span class="built_in">and</span> (mid+root)&lt;<span class="number">0.25</span>)&#123;<span class="comment">//x1范围？ </span></span><br><span class="line"><span class="keyword">if</span>((mid-root)&gt;(<span class="number">-0.25</span>) <span class="built_in">and</span> (mid-root)&lt;<span class="number">0.25</span>)&#123;<span class="comment">//x2范围？ </span></span><br><span class="line"><span class="keyword">if</span>(a+b+c&lt;min)&#123;</span><br><span class="line">a1=a;</span><br><span class="line">b1=b;</span><br><span class="line">c1=c;</span><br><span class="line">min=a+b+c;<span class="comment">//重新设定阈值 </span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;有min=%d ！\n&quot;</span>,min); </span><br><span class="line">&#125;<span class="keyword">else</span> cout&lt;&lt;<span class="string">&quot;a+b+c不是min值！&quot;</span>&lt;&lt;endl;<span class="comment">//不解释 </span></span><br><span class="line">&#125;<span class="keyword">else</span> cout&lt;&lt;<span class="string">&quot;较小值超出范围！&quot;</span>&lt;&lt;endl; <span class="comment">//同上 </span></span><br><span class="line">&#125;<span class="keyword">else</span> cout&lt;&lt;<span class="string">&quot;较大值超出范围！&quot;</span>&lt;&lt;endl; <span class="comment">//同上 </span></span><br><span class="line">&#125;<span class="keyword">else</span> cout&lt;&lt;<span class="string">&quot;没有两不等实根！&quot;</span>&lt;&lt;endl; <span class="comment">//同上 </span></span><br><span class="line">b++;<span class="comment">//还是b开加快一点 </span></span><br><span class="line"><span class="keyword">if</span>(a+b+c&gt;min)&#123;</span><br><span class="line">b=<span class="number">1</span>;</span><br><span class="line">c++;</span><br><span class="line"><span class="keyword">if</span>(a+b+c&gt;min)&#123;</span><br><span class="line">c=<span class="number">1</span>;</span><br><span class="line">a++;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;共循环 &quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot; 次,a+b+c的最小值是&quot;</span>&lt;&lt;min&lt;&lt;<span class="string">&quot;,此时a=&quot;</span>&lt;&lt;a1&lt;&lt;<span class="string">&quot;,b=&quot;</span>&lt;&lt;b1&lt;&lt;<span class="string">&quot;,c=&quot;</span>&lt;&lt;c1&lt;&lt;endl; <span class="comment">//最后输出 </span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125; </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line">在a=35，b=1c=5，的情况下：没有两不等实根！</span><br><span class="line">在a=36，b=1c=1，的情况下：没有两不等实根！</span><br><span class="line">在a=36，b=2c=1，的情况下：没有两不等实根！</span><br><span class="line">在a=36，b=3c=1，的情况下：没有两不等实根！</span><br><span class="line">在a=36，b=4c=1，的情况下：没有两不等实根！</span><br><span class="line">在a=36，b=1c=2，的情况下：没有两不等实根！</span><br><span class="line">在a=36，b=2c=2，的情况下：没有两不等实根！</span><br><span class="line">在a=36，b=3c=2，的情况下：没有两不等实根！</span><br><span class="line">在a=36，b=1c=3，的情况下：没有两不等实根！</span><br><span class="line">在a=36，b=2c=3，的情况下：没有两不等实根！</span><br><span class="line">在a=36，b=1c=4，的情况下：没有两不等实根！</span><br><span class="line">在a=37，b=1c=1，的情况下：没有两不等实根！</span><br><span class="line">在a=37，b=2c=1，的情况下：没有两不等实根！</span><br><span class="line">在a=37，b=3c=1，的情况下：没有两不等实根！</span><br><span class="line">在a=37，b=1c=2，的情况下：没有两不等实根！</span><br><span class="line">在a=37，b=2c=2，的情况下：没有两不等实根！</span><br><span class="line">在a=37，b=1c=3，的情况下：没有两不等实根！</span><br><span class="line">在a=38，b=1c=1，的情况下：没有两不等实根！</span><br><span class="line">在a=38，b=2c=1，的情况下：没有两不等实根！</span><br><span class="line">在a=38，b=1c=2，的情况下：没有两不等实根！</span><br><span class="line">在a=39，b=1c=1，的情况下：没有两不等实根！</span><br><span class="line">共循环 102347 次,a+b+c的最小值是41,此时a=29,b=11,c=1</span><br><span class="line"></span><br><span class="line">--------------------------------</span><br><span class="line">Process exited after 142.5 seconds with return value 0</span><br></pre></td></tr></table></figure><p>果然快了不少！也少循环一段时间！</p><p><em>★,°</em>:.☆(￣▽￣)/$:<em>.°★</em> 。撒花！落幕！！ </p>]]></content>
      
      
      <categories>
          
          <category> 爱折腾 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> 题目 </tag>
            
            <tag> 编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>回归啦！这是见面礼：寒蝉！</title>
      <link href="/posts/93fc72ce/"/>
      <url>/posts/93fc72ce/</url>
      
        <content type="html"><![CDATA[<p>呜呜呜，经历了千万作业的压迫，一个学生终于摸到了久别的电脑。<br>转眼间就到2020了，我连个新年快乐都没说，差点都忘了自己还有博客。<br>细数一下这5个月发生的事：</p><ul><li>php供应商不给我薅羊毛了，000webhost连续给我断掉了好几条。(￢︿̫̿￢☆)，我再也不用你的服务了。后来断线1个月后转到了heroku，虽然有很多问题，勉强能用嘛。</li><li>成绩不滑反而上涨了。（意料之外）</li><li>5个月闲着没事用用Tor和I2P，顺便研究了一下DHT，倒有不少收获。新年将近，我会好好谈谈的。</li><li>将博客上传方式由https转到了SSH，上传更快乐！</li></ul><p>呜呜呜，抱着自己的电脑就是好啊……博客都不仅长草了，还长霉菌了 …</p><p>好了，进入正题吧。</p><h1 id="寒蝉：用科学字体渲染科学文字"><a href="#寒蝉：用科学字体渲染科学文字" class="headerlink" title="寒蝉：用科学字体渲染科学文字"></a>寒蝉：用科学字体渲染科学文字</h1><blockquote><h2 id="政治观念警告！"><a href="#政治观念警告！" class="headerlink" title="政治观念警告！"></a>政治观念警告！</h2><p>在博客简介里写的很清楚，在本站中没有任何政治倾向。如有，则本人是中华人民共和国 <del>公民</del> 人民，会坚定不移坚持党和国家的领导！<br>本人「东城渐觉风光好」2INdCH/IXVs2。 ，仅是为了学习用途！<br>请有心人注意你的言行！</p></blockquote><p>「寒蝉」是一款Chrome浏览器扩展程序。安装该浏览器插件后，可以将网页中的特殊文本用科学字体来渲染。</p><p>这款插件…真的是…很适合我们这种<code>「晴雪小园春未到」682Gc/27p5rz。</code>使用啊!!!!</p><p>它,可以把一些关键词伪装成一些很正常的词语.</p><p>比如,我打入<code>我爱跑路</code>,经过寒蝉伪装,成<code>「娇鬟堆枕钗横凤」Tdm31/2ceTfz。</code>.</p><p>前面一句文言文,后面一堆软七八糟的东西,关键词过滤能过滤出来真的是才怪呢.</p><h2 id="安装："><a href="#安装：" class="headerlink" title="安装："></a>安装：</h2><p>(官方文档)[<a href="https://github.com/guyujiezi/cicada/blob/master/README.md">https://github.com/guyujiezi/cicada/blob/master/README.md</a>] 里写的很清楚了，自己去看吧。</p><p>底下是抄官方的：</p><ol><li>前往 <a href="https://github.com/guyujiezi/cicada/releases">https://github.com/guyujiezi/cicada/releases</a> 下载「寒蝉」最新版的压缩包；<br><br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/寒蝉/cicada-install-step-1.png" alt="步骤1"></li><li>找一个文件目录，将刚才下载的压缩包在此解压；</li><li>打开 Chrome 浏览器主菜单 &gt; 更多工具 &gt; 扩展程序，或直接在 Chrome 浏览器地址栏中访问 chrome://extensions/；<br><br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/寒蝉/cicada-install-step-2.png" alt="步骤2"></li><li>开启「开发者模式」；</li><li>点击「加载已解压的扩展程序」按钮，定位第2步解压的目录，点击「确定」。</li></ol><p>由于Chrome 网上应用商店发布需要等待漫长的待审核状态，所以最新版会直接发布在 github 上，而Chrome 网上应用商店只会发布大版本更新。</p><h2 id="如何使用？"><a href="#如何使用？" class="headerlink" title="如何使用？"></a>如何使用？</h2><p>扩展程序成功安装后，浏览器地址栏右侧会出现「寒蝉」的按钮。点击该按钮打开弹出窗口，输入你想加密的文本内容并提交：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/寒蝉/cicada-usage-step-1.png" alt="用法1"><br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/寒蝉/cicada-usage-step-2.png" alt="用法2"></p><p>「寒蝉」会随机生成一段诗词作为阴书内容。复制完整的内容，发布到论坛或其他地方，同样安装了「寒蝉」的用户将会看到你发布的真实内容。</p><h2 id="那么-它是如何做到的"><a href="#那么-它是如何做到的" class="headerlink" title="那么,它是如何做到的??"></a>那么,它是如何做到的??</h2><p>官方文档中有说明其基于谷雨解字。官方文档显然讲的太繁琐了，以下是我略略简介：</p><p>问题：</p><h3 id="我们浏览器中的字都是怎么出来的？"><a href="#我们浏览器中的字都是怎么出来的？" class="headerlink" title="我们浏览器中的字都是怎么出来的？"></a>我们浏览器中的字都是怎么出来的？</h3><p>无论如何，你不可能直接在浏览器中显示字，除非是图片。</p><p>事实上，浏览器的字是这样显示的：；</p><ol><li>我在这里写了个A。</li><li>实际上文档先会把它转成ASCII码<code>65</code>，然后询问我用的是什么字体，如果制定了，如微软雅黑;如果没指定，则默认用宋体。</li><li>接着，你看到了我的A，浏览器发现我用的是微软雅黑，就用微软雅黑的ttf 65号字，大概长这样：<style type="text/css">.yahei { font-family: "微软雅黑 Light"; font-size: 72pt;}.fouze { font-size: 72pt;}</style></li></ol><p class="yahei">A</p><p>否则大概是：</p><p class="fouze">A</p><p>看懂了吗？</p><p>实际上，是字体改变了字的外观，对吧？</p><p>所以说，在字体上动点手脚，就可以让显示的字完全不一样呢！</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/寒蝉/flow.png" alt="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/寒蝉/flow.png"></p><p>而寒蝉，只不过是把最后一步作为插件，再把最后的密文发给服务器交其解密，最后回来阴文。</p><p>就这么简单。</p><h2 id="官方文档："><a href="#官方文档：" class="headerlink" title="官方文档："></a>官方文档：</h2><p>网页字体格式<br>目前网络上使用的字体容器格式有四种： EOT、 TTF、 WOFF 和 WOFF2。 遗憾的是，尽管选择范围很广，但仍然缺少在所有新旧浏览器上都能使用的单一通用格式： EOT 只有 IE 支持，TTF 获得了部分 IE 支持，WOFF 获得了最广泛的支持，但在某些较旧的浏览器上不受支持，而 WOFF 2.0 支持对许多浏览器来说尚未实现。</p><p>那我们该怎么办？不存在在所有浏览器上都能使用的单一格式，这意味着我们需要提供多种格式才能实现一致的体验：</p><ul><li>将 WOFF 2.0 变体提供给支持的浏览器。</li><li>将 WOFF 变体提供给大多数浏览器。</li><li>将 TTF 变体提供给旧版 Android（4.4 版以下）浏览器。</li><li>将 EOT 变体提供给旧版 IE（IE9 版以下）浏览器。</li><li>注：从技术上讲，还有另一种容器格式，即 SVG 字体容器，但 IE 或 Firefox 从未为其提供支持，并且现在 Chrome 也放弃了对它的支持。 因此，它的用途很有限，本指南中有意将其忽略。</li></ul><p>通过压缩减小字体大小<br>字体是字形的集合，其中的每个字形都是一组描述字母形状的路径。 各个字形不同，但它们仍然包含大量相似信息，这些信息可通过 GZIP 或兼容的压缩工具进行压缩：</p><p>EOT 和 TTF 格式默认情况下不进行压缩。 提供这些格式时，确保您的服务器配置为应用 GZIP 压缩。<br>WOFF 具有内建压缩。 确保您的 WOFF 压缩工具使用了最佳压缩设置。<br>WOFF2 采用自定义预处理和压缩算法，提供的文件大小压缩率比其他格式高大约 30%。 如需了解详细信息，请参阅 WOFF 2.0 评估报告。<br>最后，值得注意的是，某些字体格式包含附加的元数据，如字体提示和字距调整信息，这些信息在某些平台上可能并非必要信息，这样便可进一步优化文件大小。 查询您的字体压缩工具是否提供了优化选项，如果您这样做，请确保您有适合的基础架构来测试这些优化过的字体并将它们提供给每个特定浏览器。 例如，Google Fonts 为每一种字体维护有 30 多种优化过的变体，并自动检测和提供适合每一个平台和浏览器的最佳变体。<br>注：考虑使用 Zopfli 压缩处理 EOT、TTF 和 WOFF 格式。 Zopfli 是一种兼容 zlib 的压缩工具，提供的文件大小压缩率比 gzip 高大约 5%。</p><p>您可以通过<code>@font-face CSS at-rule</code>定义特定字体资源的位置、其样式特性及其应该用于的 Unicode 代码点。 可组合使用上述 <code>@font-face</code>声明来构建“字体系列”，浏览器将使用该系列来评估哪些字体资源需要下载并应用到当前网页。</p><p>格式选择<br>每个 <code>@font-face</code>声明都提供字体系列的名称，它充当多个声明的逻辑组、字体属性（如样式、粗细和拉伸）以及为字体资源指定位置优先级列表的 src 描述符。<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">@font-face &#123;</span><br><span class="line">    font-family:&#x27;Awesome Font&#x27;;</span><br><span class="line">    font-style: normal;</span><br><span class="line">    font-weight: 400;</span><br><span class="line">    src: local(&#x27;Awesome Font&#x27;),</span><br><span class="line">         url(&#x27;/fonts/awesome.woff2&#x27;) format(&#x27;woff2&#x27;),</span><br><span class="line">         url(&#x27;/fonts/awesome.woff&#x27;) format(&#x27;woff&#x27;),</span><br><span class="line">         url(&#x27;/fonts/awesome.ttf&#x27;) format(&#x27;truetype&#x27;),</span><br><span class="line">         url(&#x27;/fonts/awesome.eot&#x27;) format(&#x27;embedded-opentype&#x27;);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  @font-face &#123;</span><br><span class="line">    font-family:&#x27;Awesome Font&#x27;;</span><br><span class="line">    font-style: italic;</span><br><span class="line">    font-weight: 400;</span><br><span class="line">    src: local(&#x27;Awesome Font Italic&#x27;),</span><br><span class="line">         url(&#x27;/fonts/awesome-i.woff2&#x27;) format(&#x27;woff2&#x27;),</span><br><span class="line">         url(&#x27;/fonts/awesome-i.woff&#x27;) format(&#x27;woff&#x27;),</span><br><span class="line">         url(&#x27;/fonts/awesome-i.ttf&#x27;) format(&#x27;truetype&#x27;),</span><br><span class="line">         url(&#x27;/fonts/awesome-i.eot&#x27;) format(&#x27;embedded-opentype&#x27;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><br>首先，请注意以上示例使用两种样式（normal 和<em>italic</em>）来定义单个 Awesome Font 系列，其中的每个样式均指向一个不同的字体资源集。 每个 src 描述符则又包含一个用逗号分隔的资源变体优先级列表：</p><p>local() 指令用于引用、加载和使用安装在本地的字体。<br>url() 指令用于加载外部字体，它可以包含可选的 format() 提示，指示由提供的网址引用的字体格式。<br>注：除非您引用的是其中一种默认系统字体，用户很少将其安装在本地，特别是在移动设备上，在移动设备上“安装” 附加字体实际上根本无法实现。 您始终应该从“以防万一”的 local() 条目入手，然后提供一个 url() 条目列表。</p><p>当浏览器确定需要字体时，它会按指定顺序循环访问提供的资源列表，并尝试加载相应的资源。 例如，接着上面的示例：</p><p>浏览器执行页面布局并确定需要使用哪些字体变体来渲染网页上的指定文本。<br>对于每一种必需字体，浏览器会检查字体文件是否位于本地。<br>如果字体文件不在本地，则浏览器会遍历外部定义：<br>如果存在格式提示，则浏览器会在启动下载之前检查其是否支持提示。 如果浏览器不支持此提示，则会前进到下一格式提示。<br>如果不存在格式提示，则浏览器会下载资源。<br>您可以将本地和外部指令与相应的格式提示相结合来指定所有可用字体格式，其余工作交由浏览器进行处理。 浏览器确定需要哪些资源，并选择最佳格式。</p><ul><li>注：字体变体的指定顺序很重要。 浏览器将选取其支持的第一种格式。 因此，如果您希望较新的浏览器使用 WOFF2，则应将 WOFF2 声明置于 WOFF 之上，依此类推。</li></ul><p>优化加载和渲染<br>与普遍的观点相反，使用网页字体不需要延迟网页渲染，也不会对其他性能指标产生不良影响。 在充分优化的情况下使用字体可大幅提升总体用户体验：出色的品牌推广，改进的可读性、易用性和可搜索性，并一直提供可扩展的多分辨率解决方案，能够出色地适应各种屏幕格式和分辨率。 不要害怕使用网页字体！</p><p>不过，直接实现可能招致下载内容庞大和不必要的延迟。 您需要通过对字体资产本身及其在网页上的提取和使用方式进行优化来为浏览器提供协助的环节。</p><p>审核并监控您的字体使用情况：不要在网页上使用过多字体，并且对于每一种字体，最大限度减少使用的变体数量。 这将有助于为您的用户带来更加一致且更加快速的体验。<br>对您的字体资源进行子集内嵌：许多字体都可进行子集内嵌，或者拆分成多个 unicode-range 以仅提供特定网页需要的字形。 这样即可减小文件大小，并提高资源的下载速度。 不过，在定义子集时要注意针对字体重复使用的情况进行优化。 例如，您一定不希望在每个网页上都下载不同但重叠的字符集。 最好根据文字系统（例如拉丁文、西里尔文等）进行子集内嵌。<br>向每个浏览器提供优化过的字体格式：每一种字体都应以 WOFF2、WOFF、EOT 和 TTF 格式提供。 务必对 EOT 和 TTF 格式应用 GZIP 压缩，因为默认情况下不会对其进行压缩。<br>在 src 列表中优先列出 local()：在 src 列表中首先列出 local(‘Font Name’) 可确保不会针对已安装的字体发出 HTTP 请求。<br>使用 <link rel="preload">、font-display 或 Font Loading API 来自定义字体加载和渲染：默认的延迟加载行为可能会导致延迟渲染文本。 您可以通过这些网络平台功能为特定字体替换这一行为，以及为网页上的不同内容指定自定义渲染和超时策略。<br>指定重新验证和最佳缓存策略：字体是不经常更新的静态资源。 确保您的服务器提供长期的 max-age 时间戳和重新验证令牌，以实现不同网页之间高效的字体重复使用。 如果使用 Service Worker，则适合采用缓存优先策略。</p><h2 id="结尾："><a href="#结尾：" class="headerlink" title="结尾："></a>结尾：</h2><p>那么，他有什么用呢？</p><p>很简单，为了防止关键字过滤，本博客简单采用这种方法减少被封的概率。</p><p>不过为了防止对手机用户的干扰，我只对关键词语掩护。</p><ul><li>完 -</li></ul>]]></content>
      
      
      <categories>
          
          <category> 丆插件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 阴文 </tag>
            
            <tag> 谷雨解字 </tag>
            
            <tag> 字体 </tag>
            
            <tag> 关键字 </tag>
            
            <tag> 寒蝉 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>標籤外掛(Tag Plugins)</title>
      <link href="/posts/2df239ce/"/>
      <url>/posts/2df239ce/</url>
      
        <content type="html"><![CDATA[<h2 id="Tabs"><a href="#Tabs" class="headerlink" title="Tabs"></a>Tabs</h2><div class="tabs" id="tags"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#tags-1">出師表</button></li><li class="tab"><button type="button" data-href="#tags-2">圖庫</button></li><li class="tab"><button type="button" data-href="#tags-3">李白</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="tags-1"><p>臣亮言：先帝創業未半而中道崩殂，今天下三分，益州疲弊，此誠危急存亡之秋也。然侍衞之臣不懈於內，忠志之士忘身於外者，蓋追先帝之殊遇，欲報之於陛下也。誠宜開張聖聽，以光先帝遺德，恢弘志士之氣，不宜妄自菲薄，引喻失義，以塞忠諫之路也。<br>宮中府中，俱為一體；陟罰臧否，不宜異同：若有作奸犯科及為忠善者，宜付有司論其刑賞，以昭陛下平明之理；不宜偏私，使內外異法也。<br>侍中、侍郎郭攸之、費禕、董允等，此皆良實，志慮忠純，是以先帝簡拔以遺陛下：愚以為宮中之事，事無大小，悉以諮之，然後施行，必能裨補闕漏，有所廣益。<br>將軍向寵，性行淑均，曉暢軍事，試用於昔日，先帝稱之曰“能”，是以眾議舉寵為督：愚以為營中之事，悉以諮之，必能使行陣和睦，優劣得所。<br>親賢臣，遠小人，此先漢所以興隆也；親小人，遠賢臣，此後漢所以傾頹也。先帝在時，每與臣論此事，未嘗不歎息痛恨於桓、靈也。侍中、尚書、長史、參軍，此悉貞良死節之臣，願陛下親之、信之，則漢室之隆，可計日而待也。<br>臣本布衣，躬耕於南陽，苟全性命於亂世，不求聞達於諸侯。先帝不以臣卑鄙，猥自枉屈，三顧臣於草廬之中，諮臣以當世之事，由是感激，遂許先帝以驅馳。後值傾覆，受任於敗軍之際，奉命於危難之間：爾來二十有一年矣。<br>先帝知臣謹慎，故臨崩寄臣以大事也。受命以來，夙夜憂歎，恐託付不效，以傷先帝之明；故五月渡瀘，深入不毛。今南方已定，兵甲已足，當獎率三軍，北定中原，庶竭駑鈍，攘除奸兇，興復漢室，還於舊都。此臣所以報先帝而忠陛下之職分也。至於斟酌損益，進盡忠言，則攸之、禕、允之任也。<br>願陛下託臣以討賊興復之效，不效，則治臣之罪，以告先帝之靈。若無興德之言，則責攸之、禕、允等之慢，以彰其咎；陛下亦宜自謀，以諮諏善道，察納雅言，深追先帝遺詔。臣不勝受恩感激。<br>今當遠離，臨表涕零，不知所言。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="tags-2"><div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Jj8FXuKVlOea4Ec.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/eqBGrXx9tWsZOao.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/LjW2CfNSD7OaY4v.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/pGIhaPjxtl438U9.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/hzjJBR2x5SEmsbC.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ucNDmUqQkrFfAWv.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/oj1wAnGSKtFvXIJ.jpg" alt=""></p>          </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="tags-3"><p>李白（701年5月19日－762年11月30日），字太白，號青蓮居士，中國唐朝詩人，自言祖籍隴西成紀（今甘肅省天水市秦安縣），先世西涼武昭王李暠之後，與李唐皇室同宗。幼時內遷，寄籍劍南道綿州（今四川省江油市青蓮鎮）。另外，郭沫若研究認為李白出生於吉爾吉斯碎葉河上的碎葉城，屬唐安西都護府（今楚河州托克馬克市），該説有一定影響。有「詩仙」、「詩俠」、「酒仙」、「謫仙人」等稱呼，活躍於盛唐，為傑出的浪漫主義詩人。與杜甫合稱「李杜」。被賀知章驚呼為「天上謫仙」。</p><div class="tabs" id="李白詩集"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#李白詩集-1">行路難</button></li><li class="tab"><button type="button" data-href="#李白詩集-2">將進酒</button></li><li class="tab"><button type="button" data-href="#李白詩集-3">清平調</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="李白詩集-1"><p>金樽清酒鬥十千，玉盤珍羞值萬錢。<br>停杯投箸不能食，拔劍四顧心茫然。<br>欲渡黃河冰塞川，將登太行雪暗天。<br>閒來垂釣碧溪上，忽復乘舟夢日邊。<br>行路難，行路難，多歧路，今安在？<br>長風破浪會有時，直掛雲帆濟滄海。<br>大道如青天，我獨不得出。<br>羞逐長安社中兒，赤雞白狗賭梨慄。<br>彈劍作歌奏苦聲，曳裾王門不稱情。<br>淮陰市井笑韓信，漢朝公卿忌賈生。<br>君不見昔時燕家重郭隗，擁篲折節無嫌猜。<br>劇辛樂毅感恩分，輸肝剖膽效英才。<br>昭王白骨縈蔓草，誰人更掃黃金台？<br>行路難，歸去來！<br>有耳莫洗潁川水，有口莫食首陽蕨。<br>含光混世貴無名，何用孤高比雲月？<br>吾觀自古賢達人，功成不退皆殞身。<br>子胥既棄吳江上，屈原終投湘水濱。<br>陸機雄才豈自保，李斯税駕苦不早。<br>華亭鶴唳詎可聞，上蔡蒼鷹何足道。<br>君不見吳中張翰稱達生，秋風忽憶江東行。<br>且樂生前一杯酒，何須身後千載名！</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="李白詩集-2"><p>君不見，黃河之水天上來，<br>奔流到海不復回？<br>君不見，高堂明鏡悲白髮，<br>朝如青絲暮成雪？<br>人生得意須盡歡，<br>莫使金樽空對月。<br>天生我材必有用，<br>千金散盡還復來。<br>烹羊宰牛且為樂，<br>會須一飲三百杯。<br>岑夫子，丹丘生，<br>將進酒，君莫停。<br>與君歌一曲，<br>請君為我側耳聽：<br>鐘鼓饌玉不足貴，<br>但願長醉不願醒。<br>古來聖賢皆寂寞，<br>惟有飲者留其名。<br>陳王昔時宴平樂，<br>斗酒十千恣歡謔。<br>主人何為言小錢？<br>徑須沽取對君酌。<br>五花馬，千金裘。<br>呼兒將出換美酒，<br>與爾同銷萬古愁。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="李白詩集-3"><p>《清平調詞三首》是唐代大詩人李白的組詩作品，共三首七言樂府詩。第一首從空間角度寫，以牡丹花比楊貴妃的美豔；第二首從時間角度寫，表現楊貴妃的受寵幸；第三首總承一、二兩首，把牡丹和楊貴妃與君王糅合，融為一體。全詩構思精巧，辭藻豔麗，將花與人渾融在一起寫，描繪出人花交映、迷離恍惚的景象，顯示了詩人高超的藝術功力。</p><div class="tabs" id="清平調"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#清平調-1">清平調(一)</button></li><li class="tab"><button type="button" data-href="#清平調-2">清平調(二)</button></li><li class="tab"><button type="button" data-href="#清平調-3">清平調(三)</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="清平調-1"><p>雲想衣裳花想容，春風拂檻露華濃；<br>　<br>若非羣玉山頭見，會向瑤台月下逢。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="清平調-2"><p>一枝紅豔露凝香，雲雨巫山空斷腸。<br>　<br>借問漢宮誰得似？可憐飛燕倚新粧。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="清平調-3"><p>名花傾國兩相歡，常得君王帶笑看。<br>　<br>解識春風無限恨，沉香亨北倚闌千。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="Button"><a href="#Button" class="headerlink" title="Button"></a>Button</h2><h3 id="Inline"><a href="#Inline" class="headerlink" title="Inline"></a>Inline</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">This is my website, click the button &#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly %&#125;</span><br><span class="line">This is my website, click the button &#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,,outline%&#125;</span><br></pre></td></tr></table></figure><p>This is my website, click the button <a class="btn-beautify " href="https://butterfly.js.org"   title="Butterfly"><span>Butterfly</span></a></p><p>This is my website, click the button <a class="btn-beautify outline" href="https://butterfly.js.org"   title="Butterfly"><span>Butterfly</span></a></p><h3 id="Block"><a href="#Block" class="headerlink" title="Block"></a>Block</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">This is my website, click the button  &#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,block larger %&#125;</span><br><span class="line">This is my website, click the button  &#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,block center larger %&#125;</span><br><span class="line">This is my website, click the button  &#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,block right blue larger %&#125;</span><br></pre></td></tr></table></figure><a class="btn-beautify block larger" href="https://butterfly.js.org"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify block center larger" href="https://butterfly.js.org"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify block right blue larger" href="https://butterfly.js.org"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><h3 id="option"><a href="#option" class="headerlink" title="option"></a>option</h3><blockquote><p>more than one button in center</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn-center&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,blue larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,pink larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,red larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,purple larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,orange larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,green larger %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><div class="btn-center"><a class="btn-beautify larger" href="https://butterfly.js.org"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify blue larger" href="https://butterfly.js.org"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify pink larger" href="https://butterfly.js.org"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify red larger" href="https://butterfly.js.org"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify purple larger" href="https://butterfly.js.org"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify orange larger" href="https://butterfly.js.org"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify green larger" href="https://butterfly.js.org"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a></div><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn-center&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,outline larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,outline blue larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,outline pink larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,outline red larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,outline purple larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,outline orange larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,outline green larger %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><div class="btn-center"><a class="btn-beautify outline larger" href="https://butterfly.js.org"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify outline blue larger" href="https://butterfly.js.org"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify outline pink larger" href="https://butterfly.js.org"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify outline red larger" href="https://butterfly.js.org"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify outline purple larger" href="https://butterfly.js.org"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify outline orange larger" href="https://butterfly.js.org"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><a class="btn-beautify outline green larger" href="https://butterfly.js.org"   title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a></div><h2 id="mermaid"><a href="#mermaid" class="headerlink" title="mermaid"></a>mermaid</h2><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  pie    title Key elements in Product X    &quot;Calcium&quot; : 42.96    &quot;Potassium&quot; : 50.05    &quot;Magnesium&quot; : 10.01    &quot;Iron&quot; :  5  </pre></div><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  gantt    title A Gantt Diagram    dateFormat  YYYY-MM-DD    section Section    A task           :a1, 2014-01-01, 30d    Another task     :after a1  , 20d    section Another    Task in sec      :2014-01-12  , 12d    another task      : 24d  </pre></div><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  gantt    title A Gantt Diagram    dateFormat  YYYY-MM-DD    section Section    A task           :a1, 2014-01-01, 30d    Another task     :after a1  , 20d    section Another    Task in sec      :2014-01-12  , 12d    another task      : 24d  </pre></div><h2 id="Note-Bootstrap-Callout"><a href="#Note-Bootstrap-Callout" class="headerlink" title="Note (Bootstrap Callout)"></a>Note (Bootstrap Callout)</h2><h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><blockquote><p>simple</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note simple %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default simple %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary simple %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success simple %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info simple %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning simple %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger simple %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note flat"><p>默認 提示塊標籤</p></div><div class="note default flat"><p>default 提示塊標籤</p></div><div class="note primary flat"><p>primary 提示塊標籤</p></div><div class="note success flat"><p>success 提示塊標籤</p></div><div class="note info flat"><p>info 提示塊標籤</p></div><div class="note warning flat"><p>warning 提示塊標籤</p></div><div class="note danger flat"><p>danger 提示塊標籤</p></div><blockquote><p>modern</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note modern %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default modern %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary modern %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success modern %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info modern %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning modern %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger modern %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note modern"><p>默認 提示塊標籤</p></div><div class="note default modern"><p>default 提示塊標籤</p></div><div class="note primary modern"><p>primary 提示塊標籤</p></div><div class="note success modern"><p>success 提示塊標籤</p></div><div class="note info modern"><p>info 提示塊標籤</p></div><div class="note warning modern"><p>warning 提示塊標籤</p></div><div class="note danger modern"><p>danger 提示塊標籤</p></div><blockquote><p>flat</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note flat %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default flat %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary flat %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success flat %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info flat %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning flat %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger flat %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note flat"><p>默認 提示塊標籤</p></div><div class="note default flat"><p>default 提示塊標籤</p></div><div class="note primary flat"><p>primary 提示塊標籤</p></div><div class="note success flat"><p>success 提示塊標籤</p></div><div class="note info flat"><p>info 提示塊標籤</p></div><div class="note warning flat"><p>warning 提示塊標籤</p></div><div class="note danger flat"><p>danger 提示塊標籤</p></div><blockquote><p>disabled</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note disabled %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default disabled %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary disabled %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success disabled %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info disabled %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning disabled %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger disabled %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note disabled"><p>默認 提示塊標籤</p></div><div class="note default disabled"><p>default 提示塊標籤</p></div><div class="note primary disabled"><p>primary 提示塊標籤</p></div><div class="note success disabled"><p>success 提示塊標籤</p></div><div class="note info disabled"><p>info 提示塊標籤</p></div><div class="note warning disabled"><p>warning 提示塊標籤</p></div><div class="note danger disabled"><p>danger 提示塊標籤</p></div><blockquote><p>no-icon</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default no-icon %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary no-icon %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success no-icon %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info no-icon %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning no-icon %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger no-icon %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note no-icon flat"><p>默認 提示塊標籤</p></div><div class="note default no-icon flat"><p>default 提示塊標籤</p></div><div class="note primary no-icon flat"><p>primary 提示塊標籤</p></div><div class="note success no-icon flat"><p>success 提示塊標籤</p></div><div class="note info no-icon flat"><p>info 提示塊標籤</p></div><div class="note warning no-icon flat"><p>warning 提示塊標籤</p></div><div class="note danger no-icon flat"><p>danger 提示塊標籤</p></div><h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><blockquote><p>simple</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; simple %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; simple %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; simple %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; simple%&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; simple %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; simple %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; simple %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding simple"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note blue icon-padding simple"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了….</p></div><div class="note pink icon-padding simple"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p></div><div class="note red icon-padding simple"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p></div><div class="note orange icon-padding simple"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note purple icon-padding simple"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p></div><div class="note green icon-padding simple"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p></div><blockquote><p>modern</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; modern %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; modern %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; modern%&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; modern %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; modern %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; modern %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding modern"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了….</p></div><div class="note pink icon-padding modern"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p></div><div class="note red icon-padding modern"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p></div><div class="note orange icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note purple icon-padding modern"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p></div><div class="note green icon-padding modern"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p></div><blockquote><p>flat</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; flat %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; flat %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; flat %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; flat%&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; flat %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; flat %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; flat %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding flat"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了….</p></div><div class="note pink icon-padding flat"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p></div><div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note purple icon-padding flat"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p></div><div class="note green icon-padding flat"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p></div><blockquote><p>disabled</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; disabled %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; disabled %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; disabled %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; disabled %&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; disabled %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; disabled %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; disabled %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note icon-padding disabled"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note blue icon-padding disabled"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了….</p></div><div class="note pink icon-padding disabled"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p></div><div class="note red icon-padding disabled"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p></div><div class="note orange icon-padding disabled"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p></div><div class="note purple icon-padding disabled"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p></div><div class="note green icon-padding disabled"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p></div><blockquote><p>no-icon</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue no-icon %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink no-icon %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red no-icon %&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange no-icon %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple no-icon %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green no-icon %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><div class="note no-icon flat"><p>你是刷 Visa 還是 UnionPay</p></div><div class="note blue no-icon flat"><p>2021年快到了….</p></div><div class="note pink no-icon flat"><p>小心開車 安全至上</p></div><div class="note red no-icon flat"><p>這是三片呢？還是四片？</p></div><div class="note orange no-icon flat"><p>你是刷 Visa 還是 UnionPay</p></div><div class="note purple no-icon flat"><p>剪刀石頭布</p></div><div class="note green no-icon flat"><p>前端最討厭的瀏覽器</p></div><h2 id="Gallery-相冊圖庫"><a href="#Gallery-相冊圖庫" class="headerlink" title="Gallery 相冊圖庫"></a>Gallery 相冊圖庫</h2><div class="gallery-group-main">  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">壁紙</div>  <p>收藏的一些壁紙</p>  <a href='/Gallery/wallpaper'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">漫威</div>  <p>關於漫威的圖片</p>  <a href='/Gallery/marvel'></a>  </figcaption>  </figure>    <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">OH MY GIRL</div>  <p>關於OH MY GIRL的圖片</p>  <a href='/Gallery/ohmygirl'></a>  </figcaption>  </figure>  </div><h2 id="Gallery-相冊"><a href="#Gallery-相冊" class="headerlink" title="Gallery 相冊"></a>Gallery 相冊</h2><div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Jj8FXuKVlOea4Ec.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/eqBGrXx9tWsZOao.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/LjW2CfNSD7OaY4v.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/pGIhaPjxtl438U9.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/hzjJBR2x5SEmsbC.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ucNDmUqQkrFfAWv.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/oj1wAnGSKtFvXIJ.jpg" alt=""></p>          </div><h2 id="tag-hide"><a href="#tag-hide" class="headerlink" title="tag-hide"></a>tag-hide</h2><p>隱藏文字，點擊顯示文章</p><h3 id="hide-inline"><a href="#hide-inline" class="headerlink" title="hide-inline"></a>hide-inline</h3><p>哪個英文字母最酷？ <span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案  </button><span class="hide-content">因為西裝褲(C裝酷)</span></span></p><p>門裡站著一個人? <span class="hide-inline"><button type="button" class="hide-button" style="">Click  </button><span class="hide-content">閃</span></span></p><h3 id="hide-block"><a href="#hide-block" class="headerlink" title="hide-block"></a>hide-block</h3><p>美女</p><div class="hide-block"><button type="button" class="hide-button" style="">查看答案    </button><div class="hide-content"><div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg" alt=""></p>          </div></div></div><h3 id="hide-toggle"><a href="#hide-toggle" class="headerlink" title="hide-toggle"></a>hide-toggle</h3><details class="toggle" ><summary class="toggle-button" style="">Butterfly安裝方法</summary><div class="toggle-content"><p>在你的博客根目錄裏</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br></pre></td></tr></table></figure><p>如果想要安裝比較新的dev分支，可以</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b dev https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br></pre></td></tr></table></figure><div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg" alt=""></p>          </div></div></details>]]></content>
      
      
      <categories>
          
          <category> Demo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 標籤外掛 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>来，破解版的Google访问助手</title>
      <link href="/posts/2b9edbbb/"/>
      <url>/posts/2b9edbbb/</url>
      
        <content type="html"><![CDATA[<h1 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h1><p>中秋快乐！</p><p>（迟到的祝福）o(￣┰￣*)ゞ</p><p>好吧好吧，那就给份中秋礼物吧！</p><p>在中国，访问Google是最蛋疼的事了，原因是显然易见的。</p><p>可是作为一个雪深+三流程序猿，上Google是相当重要的。</p><p>基本上自己都是白嫖我同学康哥的ss，白嫖总是麻烦，还要用ss客户端。</p><p>网上的谷歌访问助手，现在官网都挂了，虽然能用，但是让我强制改主页确实不爽，而且图标也死丑，看着恶心。</p><p>于是看看如何破解。</p><h1 id="Going："><a href="#Going：" class="headerlink" title="Going："></a>Going：</h1><p>既然它会检测有没有广告，那我干脆直接在所有页面上都加上被隐藏的广告链接，这样既不会视觉干扰，又可以破解。</p><p>然后我高高兴兴的在Github上搜索原版源代码，结果发现…好像…有人已经破解了</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/GOG.png" alt="图片" title="好尴尬啊"></p><p>那我一不做，二不休，直接就用这个吧！</p><p>不过这位老兄的图标似乎没改，那我就改了一下，以下是我改动的：</p><ul><li>[x] 去除Google+(今年四月Google把它关了)</li><li>[x] 添加Google Earth(亲测速度爆表,酸爽!)</li><li>[x] 更换Google全家古老的图标，换成新的。</li><li>[x] 更换插件图标,换了个Google Studio的(加了个小星星和滤镜)</li><li>[x] 厚颜无耻的加上了自己的名字.</li></ul><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/GGFWZS.png" alt="图片" title="一阵酸爽"></p><p>然而上Google是爽,加载速度极快:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/GHS.bmp" alt="图片" title="速度不错"></p><p>1.1MB的网页在2.1秒内打开,和百度打开速度相比:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/BHS.bmp" alt="图片" title="相差不多"></p><p>1.4秒内打开也挺小,只有0.7s的相差,也是不多,完全可以用Google当引擎啦!</p><p>然而缺点也很多,学术研究完全不能上,Youtube不支持,wikipedia也不行.</p><p>对于维基百科,完全可以用Google翻译当跳板曲线救国.</p><p>总之,能乐和几天十几天!(≧∀≦)ゞ</p><p><a class="btn" href="https://pan.cyfan.top/插件/crx/Google访问助手破解版.7z"></p><pre><code>          &gt;&gt;CYF的私有云         &lt;/a&gt;</code></pre><p>特征码：<code>glabchgbmippkhlcjkcmdmclmapehoha</code></p>]]></content>
      
      
      <categories>
          
          <category> 丆插件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 插件 </tag>
            
            <tag> Google </tag>
            
            <tag> Chrome </tag>
            
            <tag> 破解 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Valine：一款极简评论系统的安装到升级</title>
      <link href="/posts/90e223e4/"/>
      <url>/posts/90e223e4/</url>
      
        <content type="html"><![CDATA[<h1 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h1><blockquote><p>这可能就是这个暑假最后一篇了，好怀念啊(ノへ￣、)</p></blockquote><p>几天前我的博客评论系统还是来比力的，这几天我把它换成了Valine，为什么呢？我列了一张表，你可以参考一下：</p><p>（这些都是还活着、中国能访问的评论系统）</p><div class="table-container"><table><thead><tr><th>项目&amp;评论系统：</th><th>Gitalk</th><th>Gitment</th><th>Livere</th><th>Valine</th><th>畅言</th></tr></thead><tbody><tr><td>需要备案？</td><td>❌</td><td>❌</td><td>❌</td><td>外国版❌，国内版未来✔</td><td>✔</td><td></td></tr><tr><td>评论系统存储服务器地址？</td><td>Github issues</td><td>Github issues</td><td>Livere服务器</td><td>Leancloud</td><td>畅言服务器</td><td></td></tr><tr><td>速度？</td><td>较快</td><td>快</td><td>很慢</td><td>快</td><td>较快</td><td></td></tr><tr><td>延迟？</td><td>&lt;6s</td><td>&lt;6s</td><td>&gt;10s</td><td>&lt;3s</td><td>&lt;3s</td><td></td></tr><tr><td>支持匿名？</td><td>❌</td><td>❌</td><td>✔</td><td>✔</td><td>未知</td><td></td></tr><tr><td>登陆方式？</td><td>Github账号</td><td>Github账号</td><td>多种SNS账号</td><td>邮箱</td><td>多种SNS账号</td><td></td></tr><tr><td>UI风格？</td><td>极简</td><td>一般</td><td>一般</td><td>极简</td><td>一般</td><td></td></tr><tr><td>缺陷</td><td>只支持Github账号</td><td>只支持Github账号</td><td>加载极慢</td><td>免费版每天强制休眠6小时</td><td>要备案</td><td></td></tr></tbody></table></div><p>这么看来，还Valine最优秀。</p><h1 id="What’s-Valine"><a href="#What’s-Valine" class="headerlink" title="What’s Valine?"></a>What’s Valine?</h1><p>Valine 诞生于2017年8月7日，是一款基于LeanCloud的快速、简洁且高效的无后端评论系统。</p><p>理论上支持但不限于静态博客，目前已有Hexo、Jekyll、Typecho、Hugo、Ghost 等博客程序在使用Valine。</p><h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><ul><li>快速</li><li>安全</li><li>Emoji 😉</li><li>无后端实现</li><li>MarkDown 全语法支持</li><li>轻量易用(~15kb gzipped)</li><li>文章阅读量统计 v1.2.0+</li></ul><h1 id="开始安装："><a href="#开始安装：" class="headerlink" title="开始安装："></a>开始安装：</h1><h2 id="注册LeanCloud账号。"><a href="#注册LeanCloud账号。" class="headerlink" title="注册LeanCloud账号。"></a>注册LeanCloud账号。</h2><blockquote><p>注意一下，如果你不想手持身份证拍照，还是乖乖使用国际版吧！</p></blockquote><p><a href="https://leancloud.cn">国内LeanCloud</a> <a href="https://leancloud.app">国外LeanCloud</a> </p><p>好在国际版也支持中文。</p><p>注册-&gt;绑定手机号（这一步逃不了的）-&gt;手持身份证拍照（海外版可以跳过这一步）-&gt;创建一个应用，选择开发板</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/VALINE/CREATE.jpg" alt="创建应用" title="创建应用"></p><p>到此注册已完成了，确实很简单吧？</p><h2 id="安装Valine"><a href="#安装Valine" class="headerlink" title="安装Valine"></a>安装Valine</h2><h3 id="获取App-ID和App-Key"><a href="#获取App-ID和App-Key" class="headerlink" title="获取App ID和App Key"></a>获取<code>App ID</code>和<code>App Key</code></h3><p>进入设置-&gt;应用Key,可以看到<code>App ID</code>和<code>App Key</code>,<code>Master Key</code>用不着,先不用管.</p><blockquote><h2 id="安全提示"><a href="#安全提示" class="headerlink" title="安全提示"></a>安全提示</h2><p>Master Key 是最高权限的 Key，一旦泄露，请立刻使用「重置」按钮重置。<br>App Key 是客户端中使用的 Key，理论上客户端中所有请求都不应被信任，默认应认为 App Key 是泄露的。<br>防御恶意请求，不应通过加密 App Key，而应通过设置 ACL（访问权限控制列表）来实现，详细请参考 <a href="https://console.leancloud.app/docs/data_security.html">「数据与安全文档」 </a>。</p></blockquote><h3 id="Hexo-NexT用户："><a href="#Hexo-NexT用户：" class="headerlink" title="Hexo+NexT用户："></a>Hexo+NexT用户：</h3><p>打开<code>/theme/next/_config</code>文件,搜索<code>Valine</code>,你会看到类似的字样:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># Valine.</span><br><span class="line"># You can get your appid and appkey from https://leancloud.cn</span><br><span class="line"># more info please open https://valine.js.org</span><br><span class="line">valine:</span><br><span class="line">  enable: false</span><br><span class="line">  appid: </span><br><span class="line">  appkey: </span><br><span class="line">  notify: false # mail notifier , https://github.com/xCss/Valine/wiki</span><br><span class="line">  verify: false # Verification code</span><br><span class="line">  placeholder:  # comment box placeholder</span><br><span class="line">  avatar: mp # gravatar style</span><br><span class="line">  guest_info: nick,mail,link # custom comment header</span><br><span class="line">  pageSize: 10 # pagination size</span><br></pre></td></tr></table></figure></p><p>这里解释一下:</p><ul><li><code>enable</code>: 表示Valine是否开启,请把它修改为<code>true</code></li><li><code>appid</code>: 你的<code>App id</code></li><li><code>appkey</code>: 你的<code>App Key</code></li><li><code>notify</code>: 邮箱提醒,这个功能并不完善,请保持为<code>false</code>,以后我们会有更好的邮件系统.</li><li><code>verify</code>: 人机验证,最好开起来,避免恶意灌水,但是发的评论越多,题目越难,有点反人类.</li><li><code>placeholder</code>: 默认在评论框内显示的文字</li><li><code>avatar</code>: 没有留下<a href="https://cn.gravatar.com">Gravatar</a> 账号的用户默认头像，具体前往<a href="https://valine.js.org">https://valine.js.org</a>查看更多。</li><li><code>guest_info</code>: 默认显示的三个信息输入框</li><li><code>pageSize</code>: 单页显示评论量，默认十条。</li></ul><p>接着<code>hexo g</code>自己看一看吧!</p><h3 id="其它用户"><a href="#其它用户" class="headerlink" title="其它用户:"></a>其它用户:</h3><p>先在<code>&lt;head&gt;</code>和<code>&lt;/head&gt;</code>间添加:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&#x27;//unpkg.com/valine/dist/Valine.min.js&#x27;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>接着在<code>&lt;body&gt;</code>和<code>&lt;/body&gt;</code>间在你要添加的区间添加:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;vcomments&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">new</span> <span class="title class_">Valine</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&#x27;#vcomments&#x27;</span> ,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">appId</span>: <span class="string">&#x27;&lt;APP_ID&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">appKey</span>: <span class="string">&#x27;&lt;APP_KEY&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">notify</span>: <span class="literal">false</span>, </span></span><br><span class="line"><span class="language-javascript"><span class="attr">verify</span>: <span class="literal">false</span>, </span></span><br><span class="line"><span class="language-javascript"><span class="attr">avatar</span>: <span class="string">&#x27;mp&#x27;</span>, </span></span><br><span class="line"><span class="language-javascript"><span class="attr">placeholder</span>: <span class="string">&#x27;just go go&#x27;</span> &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>与上面相同:</p><ul><li><code>appid</code>: 你的<code>App id</code></li><li><code>appkey</code>: 你的<code>App Key</code></li><li><code>notify</code>: 邮箱提醒,这个功能并不完善,请保持为<code>false</code>,以后我们会有更好的邮件系统.</li><li><code>verify</code>: 人机验证,最好开起来,避免恶意灌水,但是发的评论越多,题目越难,有点反人类.</li><li><code>placeholder</code>: 默认在评论框内显示的文字</li><li><code>avatar</code>: 没有留下<a href="https://cn.gravatar.com">Gravatar</a> 账号的用户默认头像，具体前往<a href="https://valine.js.org">https://valine.js.org</a>查看更多。</li></ul><blockquote><p><strong>手动填坑</strong><br>在 <code>:</code>后一定要有一个<kbd>Space</kbd>!</p></blockquote><p>搞定了!</p><h2 id="去除Powered-by-Valine"><a href="#去除Powered-by-Valine" class="headerlink" title="去除Powered by Valine"></a>去除<code>Powered by Valine</code></h2><p>在<code>&lt;/script&gt;</code>前添加以下文字:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> infoEle = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#comments .info&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span> (infoEle &amp;&amp; infoEle.<span class="property">childNodes</span> &amp;&amp; infoEle.<span class="property">childNodes</span>.<span class="property">length</span> &gt; <span class="number">0</span>)&#123;</span><br><span class="line">  infoEle.<span class="property">childNodes</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">item</span>) &#123;</span><br><span class="line">    item.<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(item);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>你会看到版权神秘失踪了.</p><h1 id="升阶"><a href="#升阶" class="headerlink" title="升阶:"></a>升阶:</h1><p>Valine主打无后台,虽然避免了种种麻烦的事,但为管理造成了一定麻烦.</p><p>况且邮箱发送提醒也有很大缺陷,这时,我们就要祭出神器: <code>Valine-Admin</code> !</p><p>感谢<a href="https://gitee.com/a1401358759/Valine-Admin">杨学峰</a> 的贡献!本篇转载以下。</p><h2 id="部署环境"><a href="#部署环境" class="headerlink" title="部署环境:"></a>部署环境:</h2><p>在Leancloud中<code>云引擎</code>-&gt;<code>设置</code>-&gt;<code>源码部署</code>-&gt;<code>代码库</code>,设置为<a href="https://github.com/ChenYFan/Valine-Admin.git">https://github.com/ChenYFan/Valine-Admin.git</a>,接着进入<code>云引擎</code>-&gt;<code>部署</code>,点击部署,过一下就部署完成啦!</p><h2 id="设置变量"><a href="#设置变量" class="headerlink" title="设置变量:"></a>设置变量:</h2><div class="table-container"><table><thead><tr><th>变量</th><th>示例</th><th>说明</th></tr></thead><tbody><tr><td>SITE_NAME</td><td>CYFの博客</td><td>[必填]博客名称</td></tr><tr><td>SITE_URL</td><td><a href="https://blog.cyfan.ga">https://blog.cyfan.ga</a></td><td>[必填]首页地址 </td></tr><tr><td><strong>SMTP_SERVICE</strong></td><td>163</td><td>[新版支持]邮件服务提供商，支持 QQ、163、126、Gmail 以及 <a href="https://nodemailer.com/smtp/well-known/#supported-services">更多</a> ,不建议使用QQex.</td></tr><tr><td>SMTP_USER</td><td>xxxxxx@163.com</td><td>[必填]SMTP登录用户</td></tr><tr><td>SMTP_PASS</td><td>xxxxxxxx</td><td>[必填]SMTP登录密码（QQ邮箱需要获取独立密码,建议使用163） </td></tr><tr><td>SENDER_NAME</td><td>CYF</td><td>[必填]发件人 </td></tr><tr><td>SENDER_EMAIL</td><td>xxxxxx@163.com</td><td>[必填]发件邮箱</td></tr><tr><td>ADMIN_URL</td><td><a href="https://xxx.avosapps.us/">https://xxx.avosapps.us/</a></td><td>[建议]Web主机二级域名，用于自动唤醒</td></tr><tr><td>BLOGGER_EMAIL</td><td>xxxxx@gmail.com</td><td>[可选]博主通知收件地址，默认使用SENDER_EMAIL</td></tr><tr><td>AKISMET_KEY</td><td>xxxxxxxxxxxx</td><td>[可选]Akismet Key 用于垃圾评论检测，设为MANUAL_REVIEW开启人工审核，留空不使用反垃圾</td></tr></tbody></table></div><p>接着<code>云引擎</code>-&gt;<code>Web主机域名</code>,自主设置,比如<code>xxx</code>,然后访问<a href="https://xxx.avosapps.us/sign-up">https://xxx.avosapps.us/sign-up</a>，快速注册自己的管理员账号。</p><blockquote><p>注：使用原版Valine如果遇到注册页面不显示直接跳转至登录页的情况，请手动删除_User表中的全部数据。</p><p>注: 国内版更可能是<code>xxx.leancloudapp.cn</code>,具体看情况.</p></blockquote><p>此后，可以通过<code>https://xxx.avosapps.us/</code>管理评论。</p><h2 id="定时任务设置"><a href="#定时任务设置" class="headerlink" title="定时任务设置"></a>定时任务设置</h2><p>开发版有限制，每天强制休眠6小时和每半小时睡眠。</p><p>解决：</p><p>目前实现了两种云函数定时任务：(1)自动唤醒，定时访问Web APP二级域名防止云引擎休眠；(2)每天定时检查24小时内漏发的邮件通知。</p><p>进入云引擎-定时任务中，创建定时器，创建两个定时任务。</p><h3 id="自动唤醒"><a href="#自动唤醒" class="headerlink" title="自动唤醒"></a>自动唤醒</h3><p>选择self-wake云函数，Cron表达式为<code>0 0/30 7-23 * * ?</code>，表示每天早7点到晚23点每隔30分钟访问云引擎，<code>ADMIN_URL</code>环境变量务必设置正确：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/VALINE/SW.png" alt="" title="自唤醒"></p><blockquote><p>不建议添加该函数，这回导致你的评论系统在半夜无法正常运行。</p></blockquote><h3 id="邮件通知"><a href="#邮件通知" class="headerlink" title="邮件通知"></a>邮件通知</h3><p>选择resend-mails云函数，Cron表达式为<code>0 0 8 * * ?</code>，表示每天早8点检查过去24小时内漏发的通知邮件并补发：<br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/VALINE/MAIL.png" alt="" title="邮件通知"></p><p><del><strong>添加定时器后记得点击启动方可生效。</strong></del></p><p>[2020年6月6日更新]</p><p>注意!LeanCloud于2020-4-14 流控：<br><a href="https://forum.leancloud.cn/t/topic/22595">官网链接</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">我们近期发现有大量云引擎的体验版（免费版）用户创建了在同一时刻触发的定时任务唤醒容器运行，会对服务的负载产生一定影响。因此我们决定根据服务器的负载，对这些定时任务添加流控，通过定时任务唤醒容器将有可能会失败。这个改动不会对云引擎的标准版（付费版）用户产生影响。</span><br></pre></td></tr></table></figure><p>简单地说就是赶人,拒绝自动唤醒.这可以理解,毕竟这么多人白嫖也不对;但同时还有一个问题,你一个LeanCloud商业版一天30￥，这怎么说我都觉得付不起，我认为，搞个0.1￥/日的套餐没准白嫖的人就少些呢</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/postpic/20200606145909.png" alt=""></p><p>所以,要么就不添加定时任务【此时评论依旧可以导入，只不过不会发邮件而已】，要么就外部自唤醒【可以试试GithubAction、CloudFlareWorkers、CronJob，甚至最简单的UpTimeRobot都可以】。至于我么，懒得自唤醒了，毕竟所有评论都是要我手动审核的，审核完了才发邮件，这个时候老早就唤醒了。</p><p><strong>至此，Valine Admin 已经可以正常工作，更多以下是可选的进阶配置。</strong></p><div class="table-container"><table><thead><tr><th>环境变量</th><th>示例</th><th>说明</th></tr></thead><tbody><tr><td>MAIL_SUBJECT</td><td>${PARENT_NICK}，您在${SITE_NAME}上的评论收到了回复</td><td>[可选]@通知邮件主题（标题）模板</td></tr><tr><td>MAIL_TEMPLATE</td><td>见下文</td><td>[可选]@通知邮件内容模板</td></tr><tr><td>MAIL_SUBJECT_ADMIN</td><td>${SITE_NAME}上有新评论了</td><td>[可选]博主邮件通知主题模板</td></tr><tr><td>MAIL_TEMPLATE_ADMIN</td><td>见下文</td><td>[可选]博主邮件通知内容模板</td></tr></tbody></table></div><p>邮件通知包含两种，分别是被@通知和博主通知，这两种模板都可以完全自定义。默认使用经典的蓝色风格模板（样式来源未知）。</p><p>默认被@通知邮件内容模板如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;border-top:2px solid #12ADDB;box-shadow:0 1px 3px #AAAAAA;line-height:180%;padding:0 15px 12px;margin:50px auto;font-size:12px;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">&quot;border-bottom:1px solid #DDD;font-size:14px;font-weight:normal;padding:13px 0 10px 8px;&quot;</span>&gt;</span>您在<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration:none;color: #12ADDB;&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;SITE_URL&#125;&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>            $&#123;SITE_NAME&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>上的评论有了新的回复<span class="tag">&lt;/<span class="name">h2</span>&gt;</span> $&#123;PARENT_NICK&#125; 同学，您曾发表评论：<span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding:0 12px 0 12px;margin-top:18px&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #f5f5f5;padding: 10px 15px;margin:18px 0;word-wrap:break-word;&quot;</span>&gt;</span>            $&#123;PARENT_COMMENT&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span>$&#123;NICK&#125;<span class="tag">&lt;/<span class="name">strong</span>&gt;</span>回复说：<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #f5f5f5;padding: 10px 15px;margin:18px 0;word-wrap:break-word;&quot;</span>&gt;</span> $&#123;COMMENT&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>您可以点击<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration:none; color:#12addb&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;POST_URL&#125;&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>查看回复的完整內容<span class="tag">&lt;/<span class="name">a</span>&gt;</span>，欢迎再次光临<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration:none; color:#12addb&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;SITE_URL&#125;&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>$&#123;SITE_NAME&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>。<span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下图：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/VALINE/MB.png" alt="mail-blue-template"></p><p>@通知模板中的可用变量如下（注，这是邮件模板变量，请勿与云引擎环境变量混淆）：</p><div class="table-container"><table><thead><tr><th>模板变量</th><th>说明</th></tr></thead><tbody><tr><td>SITE_NAME</td><td>博客名称</td></tr><tr><td>SITE_URL</td><td>博客首页地址</td></tr><tr><td>POST_URL</td><td>文章地址（完整路径）</td></tr><tr><td>PARENT_NICK</td><td>收件人昵称（被@者，父级评论人）</td></tr><tr><td>PARENT_COMMENT</td><td>父级评论内容</td></tr><tr><td>NICK</td><td>新评论者昵称</td></tr><tr><td>COMMENT</td><td>新评论内容</td></tr></tbody></table></div><p>默认博主通知邮件内容模板如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;border-top:2px solid #12ADDB;box-shadow:0 1px 3px #AAAAAA;line-height:180%;padding:0 15px 12px;margin:50px auto;font-size:12px;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">&quot;border-bottom:1px solid #DDD;font-size:14px;font-weight:normal;padding:13px 0 10px 8px;&quot;</span>&gt;</span>您在<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration:none;color: #12ADDB;&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;SITE_URL&#125;&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>$&#123;SITE_NAME&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>上的文章有了新的评论<span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span>$&#123;NICK&#125;<span class="tag">&lt;/<span class="name">strong</span>&gt;</span>回复说：<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #f5f5f5;padding: 10px 15px;margin:18px 0;word-wrap:break-word;&quot;</span>&gt;</span> $&#123;COMMENT&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>您可以点击<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration:none; color:#12addb&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;POST_URL&#125;&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>查看回复的完整內容<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>博主通知邮件模板中的可用变量与@通知中的基本一致， <code>PARENT_NICK</code> 和 <code>PARENT_COMMENT</code> 变量不再可用。 </p><p>这里还提供一个彩虹风格的@通知邮件模板代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;border-radius: 10px 10px 10px 10px;font-size:13px;    color: #555555;width: 666px;font-family:&#x27;Century Gothic&#x27;,&#x27;Trebuchet MS&#x27;,&#x27;Hiragino Sans GB&#x27;,微软雅黑,&#x27;Microsoft Yahei&#x27;,Tahoma,Helvetica,Arial,&#x27;SimSun&#x27;,sans-serif;margin:50px auto;border:1px solid #eee;max-width:100%;background: #ffffff repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width:100%;background:#49BDAD;color:#ffffff;border-radius: 10px 10px 0 0;background-image: -moz-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));background-image: -webkit-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));height: 66px;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;font-size:15px;word-break:break-all;padding: 23px 32px;margin:0;background-color: hsla(0,0%,100%,.4);border-radius: 10px 10px 0 0;&quot;</span>&gt;</span>您在<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration:none;color: #ffffff;&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;SITE_URL&#125;&quot;</span>&gt;</span> $&#123;SITE_NAME&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>上的留言有新回复啦！<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin:40px auto;width:90%&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>$&#123;PARENT_NICK&#125; 同学，您曾在文章上发表评论：<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background: #fafafa repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);margin:20px 0px;padding:15px;border-radius:5px;font-size:14px;color:#555555;&quot;</span>&gt;</span>$&#123;PARENT_COMMENT&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>$&#123;NICK&#125; 给您的回复如下：<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background: #fafafa repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);margin:20px 0px;padding:15px;border-radius:5px;font-size:14px;color:#555555;&quot;</span>&gt;</span>$&#123;COMMENT&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>您可以点击<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration:none; color:#12addb&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;POST_URL&#125;#comments&quot;</span>&gt;</span>查看回复的完整內容<span class="tag">&lt;/<span class="name">a</span>&gt;</span>，欢迎再次光临<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration:none; color:#12addb&quot;</span>                <span class="attr">href</span>=<span class="string">&quot;$&#123;SITE_URL&#125;&quot;</span>&gt;</span> $&#123;SITE_NAME&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>。<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"><span class="selector-tag">a</span><span class="selector-pseudo">:link</span>&#123;<span class="attribute">text-decoration</span>:none&#125;<span class="selector-tag">a</span><span class="selector-pseudo">:visited</span>&#123;<span class="attribute">text-decoration</span>:none&#125;<span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;<span class="attribute">text-decoration</span>:none&#125;<span class="selector-tag">a</span><span class="selector-pseudo">:active</span>&#123;<span class="attribute">text-decoration</span>:none&#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如图：</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/VALINE/RB.png" alt="彩虹模板"></p><h2 id="垃圾评论检测"><a href="#垃圾评论检测" class="headerlink" title="垃圾评论检测"></a>垃圾评论检测</h2><blockquote><p>Akismet (Automattic Kismet)是应用广泛的一个垃圾留言过滤系统，其作者是大名鼎鼎的WordPress 创始人 Matt Mullenweg，Akismet也是WordPress默认安装的插件，其使用非常广泛，设计目标便是帮助博客网站来过滤留言Spam。有了Akismet之后，基本上不用担心垃圾留言的烦恼了。<br>启用Akismet后，当博客再收到留言会自动将其提交到Akismet并与Akismet上的黑名单进行比对，如果名列该黑名单中，则该条留言会被标记为垃圾评论且不会发布。</p></blockquote><p>如果还没有Akismet Key，你可以去 <a href="https://akismet.com/development/">AKISMET FOR DEVELOPERS 免费申请一个</a>；<br><strong>当AKISMET_KEY设为MANUAL_REVIEW时，开启人工审核模式；</strong><br>如果你不需要反垃圾评论，Akismet Key 环境变量可以忽略。</p><p><strong>为了实现较为精准的垃圾评论识别，采集的判据除了评论内容、邮件地址和网站地址外，还包括评论者的IP地址、浏览器信息等，但仅在云引擎后台使用这些数据，确保隐私和安全。</strong></p><p><strong>如果使用了本站最新的Valine和Valine Admin，并设置了Akismet Key，可以有效地拦截垃圾评论。被标为垃圾的评论可以在管理页面取消标注。</strong></p><div class="table-container"><table><thead><tr><th>环境变量</th><th>示例</th><th>说明</th></tr></thead><tbody><tr><td>AKISMET_KEY</td><td>xxxxxxxxxxxx</td><td>[可选]Akismet Key 用于垃圾评论检测</td></tr></tbody></table></div><p>到此位置，Valine设置完全啦！赶紧试一试吧！</p>]]></content>
      
      
      <categories>
          
          <category> 丆插件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 评论 </tag>
            
            <tag> 站长必备 </tag>
            
            <tag> Valine </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Live2D：为你的hexo博客添加萌萌哒看板娘</title>
      <link href="/posts/abf13c7a/"/>
      <url>/posts/abf13c7a/</url>
      
        <content type="html"><![CDATA[<h1 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h1><p>19号我就要上学了，以后可能会突然失踪一段时间，9月1号正式开学后，我会恢复到2周一更新的频率。在这里对所有关注我博客的人说声抱歉。</p><p>我寥寥无几的评论区里突然有人问我右下角的看板娘是怎么做到的：</p><blockquote><p>wpaladins •*********@163.com •2019-08-13 13:33:44<br>你网站的各种东西确实很炫，只是打开你的博客之后我垃圾mba的风扇就一直转个不停😂我想知道左下角的妹子怎么搞？😁</p></blockquote><p>这让我感动了一分钟….</p><p>本来我就有写这一篇文章的感觉，只是没有这个打算，既然您问了，那我就写吧。</p><p>live2D for hexo 作者：<a href="https://huaji8.top/post/live2d-plugin-2.0/">原作大大的博客</a></p><h1 id="材料："><a href="#材料：" class="headerlink" title="材料："></a>材料：</h1><ul><li>Hexo：如果你不是使用Hexo，那很抱歉，我们不会也没有提到其他博客的部署方法，不过这里添加几个链接：<ul><li>Wordpress用户看这里：<a href="https://www.mom1.cn/4231.html">WordPress插件给博客加上live2d伊斯特瓦尔</a></li><li>Typecho用户试一试：<a href="https://qqdie.com/archives/l2d233.html">Live2D看板娘来了！typecho插件</a></li><li>Jekll用户可以参考： <a href="https://done.moe/tutorial/2018/08/11/how-to-add-cute-live2d-in-jekyll-blog/">如何给你的Jekyll博客添加可爱的二次元看板娘(Live2D)</a></li><li>野路子用户： （很抱歉没有教程）</li></ul></li><li>Node.js (&gt;=6.0)</li></ul><h1 id="简单开始："><a href="#简单开始：" class="headerlink" title="简单开始："></a>简单开始：</h1><h2 id="安装Live2D："><a href="#安装Live2D：" class="headerlink" title="安装Live2D："></a>安装Live2D：</h2><p>请先cd到你的hexo安装目录下！</p><p>如果你安装过低版本的Live2D，那先运行：<code>npm uninstall hexo-helper-live2d</code> 。<br>安装： <code>npm uninstall hexo-helper-live2d</code></p><blockquote><p>注意<br>中国用户由于<code>显而易见的原因</code>，速度超级慢，具体解决方案前往<a href="/2019/07/19/国内加快NPM下载速度/#more">我早年写的文章</a> 查看</p></blockquote><p>安装完成之后，就会在博客的根目录<code>package.json</code>文件中存在依赖,同时出现<code>node_moduels</code>文件夹</p><h2 id="选择模型："><a href="#选择模型：" class="headerlink" title="选择模型："></a>选择模型：</h2><p>原生模型：</p><ul><li>Epsilon2.1</li><li>Gantzert_Felixander</li><li>haru</li><li>miku</li><li>ni-j</li><li>nico</li><li>nietzche</li><li>nipsilon</li><li>nito</li><li>shizuku</li><li>tsumiki</li><li>wanko</li><li>z16</li><li>hibiki</li><li>koharu</li><li>haruto</li><li>Unitychan</li><li>tororo</li><li>hijiki</li></ul><p>额外模型：<br>可以前往<a href="https://github.com/summerscar/live2dDemo">summerscar大佬的Github</a>查看。</p><p>模型预览：<br>进入<a href="https://summerscar.me/live2dDemo/">https://summerscar.me/live2dDemo/</a>，在<code>modelName:</code>键入模型名即可。</p><h2 id="安装模型："><a href="#安装模型：" class="headerlink" title="安装模型："></a>安装模型：</h2><p>原生模型： 在hexo文件夹根下键入<code>npm install --save live2d-widget-模型名</code>即可。<br>额外模型： 把文件夹下载到<code>node_moduels</code>下即可。</p><h2 id="配置："><a href="#配置：" class="headerlink" title="配置："></a>配置：</h2><p>打开<code>站点配置文件</code>,在末尾填上:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">live2d:</span><br><span class="line">  model:</span><br><span class="line">    scale: 1</span><br><span class="line">    hHeadPos: 0.5</span><br><span class="line">    vHeadPos: 0.618</span><br><span class="line">    use: live2d-widget-model-tororo // 下载的动画模型名称</span><br><span class="line">  display:</span><br><span class="line">    superSample: 2</span><br><span class="line">    width: 120</span><br><span class="line">    height: 200</span><br><span class="line">    position: left // 模型在网页显示位置,left为左,right为右</span><br><span class="line">    hOffset: 20</span><br><span class="line">    vOffset: 50</span><br><span class="line">  mobile:</span><br><span class="line">    show: true  // 移动设备是否显示,true则显示,false则不显示</span><br><span class="line">    scale: 0.5</span><br><span class="line">  react:</span><br><span class="line">    opacityDefault: 0.7</span><br><span class="line">    opacityOnHover: 0.2</span><br></pre></td></tr></table></figure><p>接着<code>hexo server</code>看看吧!</p><h1 id="进阶"><a href="#进阶" class="headerlink" title="进阶:"></a>进阶:</h1><p>你看到别人的的看板娘会说话,能拍照,还能打游戏?<br>那你也能!</p><blockquote><p>警告:<br>这会严重拖慢你的网站加载速度,并且功能比较鸡肋,并不建议添加.如果你的博客建立在Github Pages上,添加会造成加载困难以致无法加载!</p><p>由于我没有使用进阶版,本文以下部分转载来自<a href="https://blog.csdn.net/qq_39610915/article/details/90679768">https://blog.csdn.net/qq_39610915/article/details/90679768</a></p></blockquote><p>使用大神定制作品<br><a href="https://github.com/stevenjoezhang/live2d-widget">https://github.com/stevenjoezhang/live2d-widget</a></p><p>按照教程<br><a href="https://blog.pangao.vip/Hexo博客NexT主题美化之新增看板娘(能说话、能换装)/">https://blog.pangao.vip/Hexo博客NexT主题美化之新增看板娘(能说话、能换装)/</a><br>设定了一番<br>但网页中并没有出现看板娘<br>如果你和我一样是纯新手，而且完全按照上述教程进行，那么恭喜你，看板娘一定不会出现！<br>这是为什么呢？<br>首先我们去查看这个项目的说明</p><blockquote><h2 id="依赖-Dependencies"><a href="#依赖-Dependencies" class="headerlink" title="依赖 Dependencies"></a>依赖 Dependencies</h2><p>本插件需要jQuery和font-awesome支持，请确保它们已在页面中加载，例如在<code>&lt;head&gt;</code>中加入：<br>jQuery and font-awesome is required for this plugin. You can add this to <code>&lt;head&gt;</code>:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://npm.elemecdn.com/jquery/dist/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://npm.elemecdn.com/font-awesome/css/font-awesome.min.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><br>否则无法正常显示。（如果你的网页已经加载了jQuery，就不要重复加载了）</p></blockquote><p>而教程中并没有指出这一点，因此缺少依赖的博客，一定不会加载出看板娘。<br>其次是autoload.js的路径设置问题。</p><p>正确的步骤如下</p><h3 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h3><p>下载大神项目，解压到本地博客目录的<code>themes/next/source</code>下，修改<code>autoload.js</code>文件，将其中<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const live2d_path = &quot;https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget/&quot;;</span><br></pre></td></tr></table></figure><br>改为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const live2d_path = &quot;/live2d/&quot;;</span><br></pre></td></tr></table></figure><p><code>autoload.js</code>中的注释的绝对地址指的是，将资源打包放到<code>hexo/theme/next/source</code>中后，以<code>hexo/theme/next/source</code>为根目录（/）的绝对路径，一般我们下载下来的是master分支，那么修改路径就是<code>/live2d-widget-master/xxx.js</code>，<code>autoload.js</code>的最后一个函数initWidget(“/live2d-widget-master/“, “<a href="https://api.fghrsh.net/live2d”">https://api.fghrsh.net/live2d”</a>); 中的第二个参数不要变，是一个后台api。我选择将文件夹重命名为“live2d”，因此按照如上方式修改。</p><h3 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h3><p>在<code>/themes/next/layout/_layout.swing</code>中,<code>&lt;body&gt;</code>标签中新增如下内容，<code>########</code>为你自己的github账号：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;https://########.github.io/live2d/autoload.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><code>&lt;head&gt;</code>标签中新增如下内容：一定一定要加上依赖！！！！！</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;https://npm.elemecdn.com/jquery/dist/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://npm.elemecdn.com/font-awesome/css/font-awesome.min.css&quot;/&gt;</span><br></pre></td></tr></table></figure><h3 id="第三步"><a href="#第三步" class="headerlink" title="第三步"></a>第三步</h3><p>在主题配置文件<code>_config.yml</code> 中,新增如下内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">live2d:</span><br><span class="line">  enable: true</span><br></pre></td></tr></table></figure><p>想修改看板娘大小、位置、格式、文本内容等，可查看并修改 <code>waifu-tips.js</code> 、 <code>waifu-tips.json</code> 和 <code>waifu.css</code>。</p><p>最终效果如图：<br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/KBN.png" alt="" title="最终效果"><br>后端API地址：<br><a href="https://github.com/fghrsh/live2d_api">https://github.com/fghrsh/live2d_api</a></p><p>特别提醒！！！！！！<br>根据原作者反映，2018年十月，使用人数过多曾让该api暂时停止提供服务，更稳妥的方法是自建api。</p><hr>]]></content>
      
      
      <categories>
          
          <category> 爱学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 站长必备 </tag>
            
            <tag> Live2D </tag>
            
            <tag> 萌萌哒 </tag>
            
            <tag> 看板娘 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【致歉】全能音乐搜索Bug修复</title>
      <link href="/posts/58d8c071/"/>
      <url>/posts/58d8c071/</url>
      
        <content type="html"><![CDATA[<h1 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h1><p>就在昨天，一位孜孜不倦的网友 <a href="https://github.com/qwqdanchun">qwqdanchun</a> 跑到我的issues中，追了我一整天，原因是音乐搜索出现程序错误。</p><p>刚开始我有点不以为然，本来有些接口就坏掉了，打不开又以为是php服务商的问题，后来ta部署到heroku上，搜索功能有问题，只能显示主页，帮助页显示也有问题，一搜索直接刷新了，这才意识到严重性。</p><p>后来我打开电脑，仔细查看，终于发现了问题。</p><h1 id="问题："><a href="#问题：" class="headerlink" title="问题："></a>问题：</h1><p>我打开储存在本地的文件，和压缩包内文件进行比较，终于发现少了一个文件：<code>.htaccess</code></p><p>这个文件丢了可就了不得了，这会导致伪静态直接找不到自己在哪。</p><p>原来在解压时，Windows不允许创建一个无名字的文件，而Liunx允许，这导致我的阉割版好压直接略过错误不报提醒。</p><p>找到问题就好办了。</p><h1 id="解决："><a href="#解决：" class="headerlink" title="解决："></a>解决：</h1><p>直接在Github储存库添加一个<code>.htaccess</code>，里面填上：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;IfModule mod_rewrite.c&gt;</span><br><span class="line">RewriteEngine on</span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !-d</span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !-f</span><br><span class="line">RewriteRule ^(.*)$ index.php [L,E=PATH_INFO:$<span class="number">1</span>]</span><br><span class="line">&lt;/IfModule&gt;</span><br></pre></td></tr></table></figure><h1 id="结果："><a href="#结果：" class="headerlink" title="结果："></a>结果：</h1><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/MUSIC/OK.jpg" alt="修复完成" title="修复完成"></p><h1 id="心得："><a href="#心得：" class="headerlink" title="心得："></a>心得：</h1><p>凡事都要细心，不能毛糙，要及时比对啊！！！</p><hr>]]></content>
      
      
      <categories>
          
          <category> 爱学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 音乐 </tag>
            
            <tag> 致歉 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>User-Agent野史</title>
      <link href="/posts/fbcbe4bc/"/>
      <url>/posts/fbcbe4bc/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>关于这几天为什么不更新博客，原因很简单，台风来了，我家断电了。</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/TY.jpg" alt="台风" title="我在台风旁边啊！！！"></p><p>好吧，当我有网络后，我去 <a href="https://baiduwp.com">https://baiduwp.com</a> 下载百度网盘上的东西时,弹出这样的一句话:</p><blockquote><p>[公告] 因百度网盘服务器升级，目前需要修改浏览器UA才能获取到高速下载地址（点击查看教程）</p></blockquote><p>点击就点击，进入后，Chrome要求下载<a href="https://chrome.google.com/webstore/detail/user-agent-switcher-for-c/djflhoibgkdhkhhcedjiklpkjnoahfmg"> User-Agent Switcher for Chrome </a>，把UA改成<code>Opera</code><br>当然，显然易见，你上不去的，本人备份了一份在私有云上</p><p><a class="btn" href="http://pan.cyfan.top/%E6%8F%92%E4%BB%B6/crx/User-Agent_Switcher_for_Chrome.7z"></p><pre><code>          &gt;&gt;CYF的私有云         &lt;/a&gt;</code></pre><p>顿时，我就好奇了，那Chorme的UA是什么？<br>于是在地址栏键入</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">javascript</span>:<span class="variable language_">document</span>.<span class="title function_">write</span>(navigator.<span class="property">userAgent</span>);</span><br></pre></td></tr></table></figure><p>你也可以试一试!! <a href="javascript:document.write(navigator.userAgent);">点我看你的UA!</a></p><p>返回：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36</span><br></pre></td></tr></table></figure></p><p>………………</p><p>我当时就懵逼了，<br>话不能说清楚吗?<br>我TM**一个<code>Chrome</code>怎么哪来<code>Mozilla</code>    这不是火狐的吗?<code>AppleWebKit</code>和<code>Safari</code>又是哪来的?????当我是<code>Safari</code>吗`?</p><p>不是说我不知道User-Agent,我也了解过,只是浏览器的标识而已,但是…..<br>标识有那么混乱吗??????</p><h1 id="What’s-User-Agent"><a href="#What’s-User-Agent" class="headerlink" title="What’s User-Agent?"></a>What’s User-Agent?</h1><h2 id="UA"><a href="#UA" class="headerlink" title="UA"></a>UA</h2><p>User Agent中文名为用户代理，简称 UA，它是一个特殊字符串头，使得服务器能够识别客户使用的操作系统及版本、CPU 类型、浏览器及版本、浏览器渲染引擎、浏览器语言、浏览器插件等。</p><p>一些网站常常通过判断 UA 来给不同的操作系统、不同的浏览器发送不同的页面，因此可能造成某些页面无法在某个浏览器中正常显示，但通过伪装 UA 可以绕过检测。</p><h2 id="浏览器的-UA-字串"><a href="#浏览器的-UA-字串" class="headerlink" title="浏览器的 UA 字串"></a>浏览器的 UA 字串</h2><p>标准格式为： 浏览器标识 (操作系统标识; 加密等级标识; 浏览器语言) 渲染引擎标识 版本信息</p><h2 id="浏览器标识"><a href="#浏览器标识" class="headerlink" title="浏览器标识"></a>浏览器标识</h2><p>由于很多网站在进行 UA 检测的时候忽略了两位数版本号，所以可能造成 浏览器及之后版本收到糟糕的页面，因此自 浏览器 10 之后的版本中浏览器标识项固定为 浏览器，在 UA 字串尾部添加真实版本信息。</p><blockquote><p>来自百度百科</p></blockquote><h1 id="野史"><a href="#野史" class="headerlink" title="野史:"></a>野史:</h1><blockquote><p>可能有一些人和我写了同样的文章,如<a href="http://litten.me/2014/09/26/history-of-browser-useragent/">Litten的博客</a>，好吧╮(╯-╰)╭，我承认，题目是抄他的，内容也是借鉴他的，但是由于他的内容是2014年的，比较古老，本人就顺便更新和补充他的博文吧（以书签形式夹在原文中。）。</p></blockquote><h3 id="大事年表"><a href="#大事年表" class="headerlink" title="大事年表"></a>大事年表</h3><ul><li>1990年: Nexus(WorldWideWeb)诞生</li><li>1993年1月23日：Mosaic诞生</li><li>1994年12月：Netscape(Mozilla)诞生</li><li>1995年4月：Opera诞生</li><li>1995年8月16日：Internet Explorer诞生</li><li>2002年9月23日：Firefox诞生</li><li>2003年1月7日：Safari诞生</li><li>2008年9月2日：Chrome诞生</li><li>2018年8月15日：红芯浏览器打脸</li></ul><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/UA.jpg" alt="UA" title="不，这是你的UA"></p><h2 id="一、盘古开天地"><a href="#一、盘古开天地" class="headerlink" title="一、盘古开天地"></a>一、盘古开天地</h2><p>很久很久之前，上古大神Berners-Lee发明了WorldWideWeb，即万维网。同时，李大神也发明了第一款浏览器。真是具有跨时代意义的工具呀，好伟大呀，人们在想，叫什么好呢？<br>但大神就是大神，大神内心的想法又岂是尔等凡人能够肆意揣摩？</p><p>万万没想到，李大神说，我这浏览器，也叫WorldWideWeb！不行么？<br>行行行。</p><p>虽然李大神起名字这么拽，但他后来发觉，还是得赋予一点承上启下的历史意义，就改名成“Nexus”。值得注意的是，这浏览器，居然是可以兼容Unix跟Microsoft DOS的。它在当时流行的各种电脑上跑得飞起，应用也越来越广，被称为“杀手级应用”。杀手级…你们看互联网一开始就是这么的腥风血雨。</p><blockquote><p>这里插一句话：你依然可以在现实中找到他。还记得你奶奶的老年机吗？接上<code>2G</code>,使用浏览器,内核就是他.<br>然而你没想到,它也可以玩游戏!<br>文字游戏.</p></blockquote><p>但这个浏览器，还不支持图片的显示，这是出现UserAgent的导火索。</p><h2 id="二、唐尧虞舜"><a href="#二、唐尧虞舜" class="headerlink" title="二、唐尧虞舜"></a>二、唐尧虞舜</h2><p>93年，伊利诺大学的NCSA组织认为，浏览器无图无真相，这不好。因而他们发明了第一款可显示图片的浏览器。<br>真是具有跨时代意义的工具呀，好伟大呀，人们在想，叫什么好呢？<br>但大神就是大神，大神就是连起名字都让你惊心动魄。</p><p>NCSA组织说，它能显示图片，偏偏我们就要叫它“马赛克(Mosaic)”！不行么？<br>行行行。</p><blockquote><p>老司机们别开车啦!!我都忍住了啦!!!</p></blockquote><p>但有人就问了，Nexus不显示图片，Mosaic能显示，你们让html提供者怎么写代码？你们是不是想逼死选择困难症患者？有没有考虑过天秤座的感受？</p><p>因而UserAgent就诞生了。Mosaic将自己标志为<code>NCSA_Mosaic/2.0 (Windows 3.1)</code>，大家该怎么写代码就怎么写，但请求会带上这个信息，服务器就知道该不该返回能显示图片的html。UserAgent君，出生时跟我们设想的一样简单，仅仅标明了自己是什么浏览器，在什么系统运行，以及各自的版本号。</p><p>新旧浏览器们像彬彬有礼的君王，商议和让位是为了更好的繁荣。但风雨欲来。</p><h2 id="三、楚汉争霸"><a href="#三、楚汉争霸" class="headerlink" title="三、楚汉争霸"></a>三、楚汉争霸</h2><p>像刘邦一样，走出来一个搅局的小流氓。当然他还是很有志向的，他的目标，就是战胜霸主Mosaic。后来，他还真的做到了。<br>如今，所有现代浏览器的UserAgent里都有它的标志，就像汉朝之后，我们都称为“汉”人。一群很有天赋的程序员，一起缔造了它的辉煌。</p><p>真是具有跨时代意义的工具呀，好伟大呀，人们在想，它叫什么呢？<br>但大神就是大神，大神就是让你永远也猜不到他们想了个什么名字。<br>大神们说，叫Mozilla，不行么？<br>行。但什么意思呢？</p><p>含义有二。其一，哥斯拉(Godzilla)谐音，诚然是一头野心勃勃的怪兽；其二，”Mosaic Killa”之意，Killa是俚语中Killer的拼法，即“马赛克的终结者”，赤裸裸的挑战。</p><p>惊呆了的Mosaic小心翼翼的念着Mozilla这发音：“Mo…摸咋了？”勃然大怒，“摸你妹！”</p><p>鉴于Mosaic当时的权势，Mozilla改名成<code>Netscape Navigator</code>(网景航海家)。小怪兽突然变成有点文艺小清新的名字，郁闷得很，但内心的血液沸腾着。虽然叫大名叫网景，但它把UserAgent偷偷设置成<code>Mozilla/1.0 (Win3.1)</code>。还是摸咋了？咬我？</p><h2 id="四、宋元之战"><a href="#四、宋元之战" class="headerlink" title="四、宋元之战"></a>四、宋元之战</h2><p>很快，NetScape战胜了Mosaic，成为了新的霸主，因为其更优的展示。<br>NetScape最先支持了html框架显示，就是简单的table布局，内外边距之类，仅仅这点就将Mosaic抛诸身后。区别这两个浏览器，还是用的UserAgent。如果是UserAgent里含有“Mozilla”字样，那就发送支持框架的页面，否则，就发送不含框架的页面。</p><p>NetScape帝国日益庞大，歌舞升平，一切风平浪静，直到微软的铁骑挥军南下。</p><p>微软发布了一款跟系统强绑定的浏览器，真是具有跨时代意义的工具呀，好伟大呀，人们在想，它叫什么呢？<br>不用想了，就是IE。这命名也相当简单粗暴，<code>Internet Explorer</code>(网络浏览器)，直接把这工具的用途拍在你脸上。连说明书都可以免了。</p><p>IE也是支持html标准框架的，但由于前面的历史原因，人们只会给UserAgent里含有“Mozilla”字样的浏览器发送含框架的页面。但这点小事能难倒我大微软？IE呵呵一笑，把自己的UserAgent改成<code>Mozilla/1.22 (compatible; MSIE 2.0; Windows 95)</code>。看，我这里也有“Mozilla”字样，也能收到含框架的页面了！</p><blockquote><p>这也是微软迫不得已啊.</p></blockquote><p>当然，这个小流氓行为，跟后来把IE和Windows捆绑一起销售的大流氓行为比起来，根本不为足道。后面的故事我们也知道了，IE把NetScape干掉了。但它的身体上，却永远的烙上了“Mozilla”的印记。</p><h2 id="五、康乾盛世"><a href="#五、康乾盛世" class="headerlink" title="五、康乾盛世"></a>五、康乾盛世</h2><p>看过奥特曼的都知道，怪兽被打败了会再回来。别忘了NetScape曾拥有一批大神们，失败后，他们围绕着浏览器排版引擎Gecko(壁虎)成立了非正式组织Mozilla。小怪兽再次出发。大神们发明了另一款优秀的浏览器，它在插件拓展和开发调试领域做出的贡献，绝对可以载入互联网历史。</p><p>真是具有跨时代意义的工具呀，好伟大呀，人们在想，它叫什么呢？<br>但大神就是大神，大神就是即使你知道了Mozilla的命名都是野兽，却还是猜不到是什么。<br>Mozilla说，我们浴火重生，叫<code>Phoenix</code>(凤凰)！不行么？<br>真不行。</p><p>刚推出就被人告了，原来已经有一家公司叫做“凤凰科技”。<br>Mozilla瀑布汗，改名叫<code>Firebird</code>(火鸟)！还不行么？<br>我们得原谅一下他们的取名，虽然现在看来满满的山寨感，可放在那个时代，Firebird这名字很炫酷。就像你当初的QQ昵称叫赤炎天使感觉依然良好一样。</p><p>但是，他们发现，业内有个数据库系统，也叫的Firebird…泪流满面的Mozilla感慨重生好难呀。最后才决定叫<code>Firefox</code>(火狐)。</p><p>基于Gecko引擎的Firefox非常优秀，为了告诉大家，我使用了这个引擎，它标志自己的UserAgent为<code>Mozilla/5.0 (Windows; U; Windows NT 5.1; sv-SE; rv:1.7.5) Gecko/20041108 Firefox/1.0</code>。</p><blockquote><p>emmmmm,给自家打自家标签,确实没错.</p></blockquote><p>这时候的UserAgent，虽然长了点，但它并不混乱，准确的标明了系统，排版引擎，浏览器名称等信息。虽然IE这时已经占有了很大的市场份额，但基本停步不前；而Mozilla经过一段时间的修生养息，Firefox在业内广受好评，得到了快速的发展。</p><p>时值2003年，web2.0的浪潮前夕，浏览器的发展达到了空前的盛世。<br>然而所谓否极泰来，盛极则衰。涅槃的Firefox迎来盛世，却又恰恰由于盛世，决定了UserAgent纠结的命运。</p><h2 id="六、师夷长技"><a href="#六、师夷长技" class="headerlink" title="六、师夷长技"></a>六、师夷长技</h2><p>前面说到，微软靠Windows系统捆绑IE销售。而Windows自然也有它的对手，Linux。一个技术快速发展的时代，系统的世界里也是战火纷飞。Linux系统自从有了可视化界面，也需要浏览器呀。桌面系统KDE的缔造者们就发明了一个。</p><p>真是具有跨时代意义的工具呀，好伟大呀，人们在想，它叫什么呢？<br>但大神就是大神，大神就是讲究先从文字上占据压垮你的气势。<br>先有Navigator航海家，再有Explorer探索者，咱就叫Konqueror(Conqueror的变体)征服者吧。<br>行行行。我已懒得理这帮大神…</p><p>可是，问题来了。Konqueror使用KHTML排版引擎，即使它们认为自己跟Gecko引擎一样优秀，但用户不买单。你UserAgent里没有“Gecko”字样，我就不给你经过优良排版的html。<br>结果，Konqueror思来想去，做了一个艰难但很萌的决定，把UserAgent写成<code>Mozilla/5.0 (compatible; Konqueror/3.2; FreeBSD) (KHTML, like Gecko)</code>…<br>这就是现代浏览器里like Gecko这一萌词的由来。</p><p>就这样，伟大的排版引擎KHTML为了获得更好的资源，师夷长技。这并没什么不好，却造成了UserAgent的越发混乱。<br>KHTML与Gecko这一对，永远卿卿我我比翼双飞在UserAgent里面了。那个满含深意的“like”，有人觉得翻译成“像”，但也有人觉得应该是“喜欢”…</p><blockquote><p>我觉得更有可能是<code>爱</code> ~~~~</p></blockquote><h2 id="七、世界大战"><a href="#七、世界大战" class="headerlink" title="七、世界大战"></a>七、世界大战</h2><p>首先是IE冷静下来了，他觉得，你们不带这么玩的？<br>就我年少时不懂事，首先改了个Mozilla字样，后面追究这历史我岂不是成了罪魁祸首？我改还不行吗？<br>在IE6，它明确自己<code>UserAgent为Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0)</code>。除去已经注定不可抹去的“Mozilla”字样，其余信息简洁，准确，清晰。</p><p>微软脑子是转过来了,但事态已经不可收拾。</p><p>Opera给这狂躁的世界添了一把火。它觉得，易容术非常炫酷呀。Opera直接在菜单提供了三个UA:</p><ul><li><code>Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; en)Opera 9.51，</code></li><li><code>Mozilla/5.0 (Windows NT 6.0; U; en; rv:1.8.1) Gecko/20061208 Firefox/2.0.0 Opera 9.51，</code></li><li><code>Opera/9.51 (Windows NT 5.1; U; en)</code></li></ul><p>三个选择项。第一个是易容成IE，第二个是易容成火狐，第三个才是自己，选谁就是谁！</p><p>其实这并不是一件坏事。因为Opera是站在能够让用户通过选择，去获得更好的浏览体验的基础上的。你提供选择，或是不提供，混乱的UserAgent还是在这，不离，不弃。再者，这对网页的开发者有极大的好处，在某些情况，你不必同时打开几个不同的浏览器去调试。到目前，最新的Chrome浏览器更加炫酷，能够支持近40种不同的UserAgent，甚至你还可以自定义。当然这是后话。</p><blockquote><p>这里又要打断一下啦.<br>Opera自带了<code>普通节约</code>和<code>超级节约</code>两个功能.前者用的是<code>Mozilla/1.0 (Win3.1)</code>,<code>Nexus</code>的<code>UA</code><br>后者一度导致<code>JS</code>和图片无法加载,而前者也有缺陷,阻止(其实是识别不了)了<code>SSL1.1</code>以上的安全连接</p></blockquote><p>与此同时，苹果公司依靠内核WebKit，开发出Safari，命名UserAgent为<code>Mozilla/5.0 (Macintosh; U; PPC Mac OS X; de-de) AppleWebKit/85.7 (KHTML, like Gecko) Safari/85.5</code>。</p><p>有人就会问了，不是Webkit内核吗，怎么还有KHTML, like Gecko？注意，内核Webkit包含了一个排版引擎叫WebCore，而WebCore是KHTML衍生而来的。也就是说，WebCore是KHTML的儿子，子承父业，基因差不多。为了能够正常排版，safari只能这么写。</p><p>后来，google也开发了自己的浏览器Chrome，其内核也是Webkit，但它设定UserAgent为<code>Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/525.13 (KHTML, like Gecko) Chrome/0.2.149.27 Safari/525.13</code>。Safari一看，不对劲啊！你怎么也在后面写有Safari？Chrome呵呵一笑，你懂的。</p><p>因此，请让我一口气说完下面这一段：<br>Chrome希望能得到为Safari编写的网页，于是决定装成Safari，Safari使用了WebKit渲染引擎，而WebKit呢又伪装自己是KHTML，KHTML呢又是伪装成Gecko的。同时所有的浏览器又都宣称自己是Mozilla。</p><p>这就是整个UserAgent世界大战的格局…</p><h2 id="八、军阀混战"><a href="#八、军阀混战" class="headerlink" title="八、军阀混战"></a>八、军阀混战</h2><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/3Q.jpg" alt="UA" title="军阀混战"></p><p>将目光聚焦到国内，更是狼烟四起，混乱不堪。大家都知道，浏览器是互联网的入口，这块肥肉谁也不想丢。因而一个接一个的“国产”浏览器进入斗兽场。<br>360，百度，QQ，UC，搜狗，猎豹，遨游，世界之窗…你能说出一大堆。连淘宝，酷狗，hao123都有浏览器，不信你搜。<br>注意我前面“国产”两个字必须加上双引号，因为这个<code>made in china</code>并不纯。国人并没能像远古大神一样，硬生生发明一个内核出来，我们更擅长“微创新”。</p><p>利用Trident（IE的内核），包装一下皮肤，美化一下，就可以说：完美兼容<br>利用Webkit，包装一下皮肤，美化一下，就可以说：极速浏览<br>把两个内核都包起来，就可以说：智能双核</p><p>是微创新！读书人的事，能叫偷吗？</p><p>在这插播一下，浏览器的“双核”，并不是你听说手机双核电脑双核那回事。再多个核，速度也不会更快，当然这么说，会显得很厉害的样子。德艺双馨，智勇双全，名利双收，才貌双绝，夫妻双双把家还，你看带“双”字的词都很牛的。</p><blockquote><p>而且更慢了,你想想,同时开启两个浏览器,其中一个用不到,只用另一个,能不慢吗?</p></blockquote><p>但我上面的叙述，的确有夸张的成分。浏览器的诞生，肯定不仅仅是包一下皮肤那么简单，国内的工程师们，也苦心研究做了许多工作。如果要说优化策略，我可以再写一篇超级长的文章。优化无止境，路漫漫其修远，向同行们致敬。只是我非常讨厌那些不把事实说清楚，纯粹靠文案去忽悠人的产品…</p><p>话说回来，这么多国产浏览器，总得靠不同UserAgent标志自己呀。<br>大家自动分为两个阵营：使用Trident内核的，在IE已有UserAgent后添加自己的名称；使用Webkit内核的，就在Chrome的UserAgent后面添加。</p><p>前者像QQ浏览器：<code>Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; QQBrowser/7.7.26717.400)</code>。<br>后者像猎豹：<code>Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/34.0.1847.137 Safari/537.36 LBBROWSER</code>。<br>当然双核浏览器诚然就是墙头草，切换内核时UserAgent也需要跟着变化。</p><p>如此的混战格局，这厢的IE和Chome想必也是醉了。</p><h2 id="九、3Q内战"><a href="#九、3Q内战" class="headerlink" title="九、3Q内战"></a>九、3Q内战</h2><blockquote><p>我承认,3Q大战不是发生在我们的时代.所以,我连笔记都做不了…..</p></blockquote><p>适者生存是不变的生存法则，国产浏览器们经过一段时间的用户筛选，自然优胜劣汰。时值2010年，真正还在运营和更新的浏览器数量慢慢下降，用户集中在几家表现更优异的厂商手中。就在这时，好看的故事来了——3Q大战爆发。</p><p>有人说，腾讯电脑管家的推出是导火索。其实这场仗，大家都忍了好久，推不推出，都一定会在某个事件后爆发。360浏览器是奇虎的重量级产品，用户量众多，2009年它推出一个功能：过滤其它网站的广告。诚然民众们都很喜欢。可是其他互联网公司肯定就不乐意了，用户看不到更点击不到广告，这钱还怎么赚？</p><p>因而在3Q大战爆发后，腾讯的一个手段就是：如果你使用360浏览器，就不能访问QQ的网站（单单QQ空间就有巨大的用户量），也直接反攻360的最大收入来源。一个艰难的决定背后，往往是需要无数种的技术战略支撑的。企鹅判断用户是否使用360浏览器，依靠的就是UserAgent里是否有“360SE”的字样。</p><p>战报传来：号外，360浏览器上不了QQ空间！已经买了黄钻的杀马特贵族急了呀！只能换浏览器了呀！感覺侢乜卟哙噯嘞呀！<br>2011年11月3日，腾讯网站封杀360浏览器<br>2011年11月4日，360浏览器访问量仅为昨日一半<br>2011年11月5日，360浏览器访问量几乎为0</p><p>有人说，腾讯就这么快赢了？恰恰相反，360浏览器通过一次强制的自动升级，又可以访问QQ的网站了。360的工程师们在5日使用了伪装术——把“360SE”字样从UserAgent中去掉！<br>意思就是，360浏览器的UserAgent跟IE完全一样，你根本判断不出来（因而访问量为0）。就怕流氓有文化！企鹅傻眼了，总不能把大微软的IE也一并给禁了吧…</p><p>这场土匪遇恶霸的耍流氓大战，最终通过法律而化解。企鹅在技术侧拿360没办法，而360则得到了一个跟IE一样的身份证。在这场内战中，受伤的除了广大网民们，其实还有令人心疼UserAgent君，以往让它越长越长就算了，这次长了还得阉割掉，真心dan疼呀。</p><h2 id="十、疯狂打脸-￣ε-￣"><a href="#十、疯狂打脸-￣ε-￣" class="headerlink" title="十、疯狂打脸(￣ε(#￣)"></a>十、疯狂打脸(￣ε(#￣)</h2><blockquote><p>原创，转载注明。</p></blockquote><p>上面说的国产浏览器还是诚实的，起码它们自己承认了是双核Chrome+IE。</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/RC/RC.jpg" alt="RC" title="RedCore"></p><p><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=476114873&auto=0&height=66"></iframe><br>（自己配上音乐读下面的话更带劲）</p><p>很久很久以前，国产一片混乱，带来了IE又带来了FF。<br>市场一片危机，UA一片乱糟，红芯跳了出来，大声喊：<br>我要打破美国垄断，拥有中国首个自主创新智能的浏览器内核！！我是世界第五,也是唯一一颗,属于中国人自己的浏览器内核——红芯Redcore!我还是中国第一个,也是唯一个，获得国产飞腾芯片和银河麒麟国产操作系统兼容性认证的浏览器!</p><p>（关音乐吧）</p><p>一天后，有人查看了它的UA：怎么和Chrome这么相似呢?</p><p>再解压红芯浏览器时，赫然发现该浏览器exe里全都是Chrome里的东西，用的还是好几年前的CHrome49版本内核……</p><p>好吧,Chrome49只是为了兼容XP.</p><p>接着,彩蛋降临:</p><p>号外号外!红芯浏览器也可以再没网时跳恐龙!!!(Chrome内置菜单)</p><p>红芯一看，完了完了，暴露了，赶紧把<code>谣言</code>压下去啊!</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/RC/NO.jpg" alt="RC" title="红芯：我不是在作假！！！"></p><p>接着,就出现了种种闹剧:</p><blockquote><p>红芯浏览器一到应用商店，所有浏览器便都看着他笑，有的叫道，“红芯浏览器，你又偷chrome的内核了！”他不回答，对柜里说，“来两轮融资，2.5亿起步。”便排出浏览器的广告。<br>他们又故意的高声嚷道， “你一定又偷了人家的内核了！”红芯浏览器睁大眼睛说，“你怎么这样凭空污人清白……” “什么清白？我前天亲眼见你反复封装chrome浏览器的内核，被大家解包吊着打脸。”<br>红芯浏览器便涨红了icon，图标的青筋条条绽出，争辩道，“换内核不能算抄……半定制！……浏览器内核的事，能算抄么？”接连便是难懂的话，什么“中国首个自主内核”，什么“多个企业和部门都在使用”之类，引得众浏览器都哄笑起来：应用商店内外充满了快活的空气。</p></blockquote><p>更有工程师拆代码，在红芯浏览器的安装包中有两个浏览器插件可以看到源代码。不少互联网工程师通过阅读代码发现，红芯的代码存在过度注释、代码冗余、语言陈旧等问题。甚至还有工程师测试后发现，它在插件的保密性上存在虚假宣传。一位从事数据相关业务的工程师表示，红芯浏览器插件的源代码中存在大量的注释，显得注释过度，产品上线后大量注释都没有处理，另外其插件代码中，大量使用常量字符串，这使得之后可能的重构变得非常困难，以及不利于国际化等进一步开发。除了代码的被指显得不够专业，更值得注意的是，红芯浏览器插件在数据安全方面也值得商榷。一位程序员试验发现，红芯的密码管家插件中所存储的密码仅存储于本地并且没有加密，即用户可知道使用同一台计算机的其他人的密码。</p><p>结果就道歉了:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/RC/SORRY.jpg" alt="RC" title="红芯：好吧好吧，我承认了！！"></p><h2 id="十一、明日边缘"><a href="#十一、明日边缘" class="headerlink" title="十一、明日边缘"></a>十一、明日边缘</h2><p>看到这里，大家会明白一个道理：如果未来不出现一款霸主级别的浏览器（或内核），UserAgent应该不会有大变化了。</p><p>不过，这道理并不全对。别忘了，移动侧也是有浏览器的。</p><p>在早期能上网的手机里，内置了各手机厂商自研的浏览器。这些浏览器并不需要像PC一样的复杂设计，可以访问wap网页就足够了。因而它们的UserAgent命名，怎么简单怎么来，就直接叫诺基亚 <code>3100 Nokia3100/06.01 (UCWEB 3.3B)，PHILIPS755 ObigoInternetBrowser/2.0</code> 这样，有甚者连浏览器叫什么都不带 TCL-3199，三星 E618 SEC-SGHE618。</p><p>这样任由发展下去，一种要历史重演，往日重现的即视感压迫而来。</p><p>web世界的联合国——W3C组织，站在明日边缘，面对着历史和未来，终于发话，它制定UserAgent标准，以后都得按这规范去起名字。详细请阅User Agent Accessibility Guidelines。至此，命运坎坷的UserAgent终于逐步走向规范。W3C大法好，有人说你怎么不早点来拯救世界呀！其实W3C一直在努力，但规范的制定，到推广至大家认可并执行，是一条漫长的道路，需要时间，也需要实践。</p><p>W3C组织，在制定web标准这件工作之外，再我看来，还有两个身份：1、和事佬；2、背黑锅。和事不成，就得背黑锅。是的就是这样。</p><h3 id="彩蛋"><a href="#彩蛋" class="headerlink" title="彩蛋"></a>彩蛋</h3><p>那么，我们的故事接近尾声。还有一些有趣的小彩蛋。</p><ol><li>Chome 28开始，与苹果正式分道扬镳，采用Blink内核，但它的UserAgent并不改变。</li><li>淘宝封杀微信打开淘宝页面，靠的就是微信内置浏览器UserAgent里的MicroMessenger字样。其实微信也可以像当初360一样把UserAgent去掉，但微信并不这样做。</li><li>360出招之时留有后招。也许，它一开始就想到了腾讯会告他们对于UserAgent的欺瞒，因而它其实提供了设置项。默认设置是“保持跟IE一样的UserAgent”，但用户也可以不勾选。只是这选项比较隐蔽，而且你重启浏览器后…又会变回默认设置。如果没有这个小小的设置，结果大家可以自行想象。</li><li>微软又玩新花样了，在泄露版IE 11中，去掉了以往的MSIE字样。初步猜测此举是为了使现有的 CSS hack 失效，避免过去网页设计师对IE差别对待的情况再度发生。但又会引发其他问题啊亲。</li><li>在红芯浏览器被打脸前,红芯联合创始人高婧对外宣传时毕业于，美国哈佛大学&amp;香港科技大学。而红芯浏览器打脸后之后，高婧的介绍改为了毕业于香港科技大学，而哈佛大学则被移至介绍的下方小字中，并标注为（交流学生）。至于红芯CEO陈本峰早年间，在媒体采访中自称自己是科大讯飞的创世团队成员，也遭到了科大讯飞董事长刘庆峰的当场打脸：“与事实不符，就是在科大讯飞实验室的一个实习学生”。</li></ol><hr>]]></content>
      
      
      <categories>
          
          <category> 有故事 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> User-Agent </tag>
            
            <tag> 历史 </tag>
            
            <tag> 浏览器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>每日bing美图获取</title>
      <link href="/posts/3fae9307/"/>
      <url>/posts/3fae9307/</url>
      
        <content type="html"><![CDATA[<h1 id="前言（废话）："><a href="#前言（废话）：" class="headerlink" title="前言（废话）："></a>前言（废话）：</h1><p>(<em>Φ皿Φ</em>)百忙之中抽出来更一更。<br>关于Bing美图获取，早就有想法了，来源于<a href="http://tool.liumingye.cn/bingimg/">刘明野大佬的工具箱</a><br>然而该方式有个特点,获取到的图片会以301方式跳到bing图床上.<br>本来也没有什么问题,我写了一个C++开机自动下载bing图片,可是当我使用wget(on Windows10)时工具,给我来了这么一出:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">--13:12:33--  http://tool.liumingye.cn/bingimg/img.php</span><br><span class="line">           =&gt; `img.php&#x27;</span><br><span class="line">Resolving tool.liumingye.cn... 47.52.74.81</span><br><span class="line">Connecting to tool.liumingye.cn|47.52.74.81|:80... connected.</span><br><span class="line">HTTP request sent, awaiting response... 302 Found</span><br><span class="line">Location: https://www.bing.com/th?id=OHR.NubbleLight_EN-US4307721919_1920x1080.jpg&amp;rf=LaDigue_1920x1080.jpg&amp;pid=hp [following]</span><br><span class="line">https://www.bing.com/th?id=OHR.NubbleLight_EN-US4307721919_1920x1080.jpg&amp;rf=LaDigue_1920x1080.jpg&amp;pid=hp: Unsupported scheme.</span><br></pre></td></tr></table></figure><p>注意一下,刘明野的bing是跳向了https的bing文件,<br>而原生wget是不支持https的!<br>这就有点尴尬了。<br>于是我把方向集中到wget下载https中：<br>rpm安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl http://www.stargard.ca/aix/RPMS/wget-1.12-1ssl.aix6.1.ppc.rpm &gt; wget-1.12-1ssl.aix6.1.ppc.rpm</span><br><span class="line">rpm -e wget</span><br><span class="line">rpm -ivh wget-1.12-1ssl.aix6.1.ppc.rpm</span><br></pre></td></tr></table></figure><p>可这语言是liunx的啊!!!!!!</p><p><code>砸桌子ing|(*x*)|~</code></p><h1 id="自己解决"><a href="#自己解决" class="headerlink" title="自己解决!"></a>自己解决!</h1><p>然后我就在想,可不可以自己写一个php不跳转呢??<br>点击刘明野的工具箱下的<kdb>源码</kdb>,进入了他的博客,里面有源码:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@author</span> www.liumingye.cn</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="variable">$filename</span> = <span class="string">&quot;./cache.json&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">file_exists</span>(<span class="variable">$filename</span>) === <span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$filename</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$handle</span> = <span class="title function_ invoke__">fopen</span>(<span class="variable">$filename</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line"><span class="variable">$contents</span> = <span class="title function_ invoke__">fread</span>(<span class="variable">$handle</span>, <span class="title function_ invoke__">filesize</span>(<span class="variable">$filename</span>));</span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$handle</span>);</span><br><span class="line"><span class="variable">$contents</span> = <span class="title function_ invoke__">json_decode</span>(<span class="variable">$contents</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">filesize</span>(<span class="variable">$filename</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// echo &quot;获取\r\n&quot;;</span></span><br><span class="line">    <span class="title function_ invoke__">getBingImg</span>();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$contents</span>[<span class="string">&#x27;time&#x27;</span>] === <span class="title function_ invoke__">date</span>(<span class="string">&quot;Ymd&quot;</span>)) &#123;</span><br><span class="line">        <span class="comment">// echo &quot;缓存\r\n&quot;;</span></span><br><span class="line">        <span class="title function_ invoke__">Header</span>(<span class="string">&quot;Location: &quot;</span>.<span class="variable">$contents</span>[<span class="string">&#x27;url&#x27;</span>]);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// echo &quot;过期\r\n&quot;;</span></span><br><span class="line">        <span class="title function_ invoke__">getBingImg</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBingImg</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$str</span> = <span class="title function_ invoke__">file_get_contents</span>(<span class="string">&#x27;http://cn.bing.com/HPImageArchive.aspx?idx=0&amp;n=1&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/&lt;url&gt;(.+?)&lt;\/url&gt;/ies&quot;</span>, <span class="variable">$str</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">        <span class="variable">$imgurl</span> = <span class="string">&#x27;https://cn.bing.com&#x27;</span> . <span class="variable">$matches</span>[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$imgurl</span>) &#123;</span><br><span class="line">        <span class="keyword">global</span> <span class="variable">$contents</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$contents</span>[<span class="string">&#x27;url&#x27;</span>] !== <span class="variable">$imgurl</span>)&#123;</span><br><span class="line">            <span class="keyword">global</span> <span class="variable">$filename</span>;</span><br><span class="line">            <span class="variable">$data</span> = <span class="keyword">array</span>(</span><br><span class="line">                <span class="string">&quot;time&quot;</span> =&gt; <span class="title function_ invoke__">date</span>(<span class="string">&quot;Ymd&quot;</span>) ,</span><br><span class="line">                <span class="string">&quot;url&quot;</span> =&gt; <span class="variable">$imgurl</span></span><br><span class="line">            );</span><br><span class="line">            <span class="variable">$data</span> = <span class="title function_ invoke__">json_encode</span>(<span class="variable">$data</span>);</span><br><span class="line">            <span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$filename</span>, <span class="variable">$data</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_ invoke__">Header</span>(<span class="string">&quot;Location: &quot;</span>.<span class="variable">$imgurl</span>);</span><br><span class="line">        <span class="keyword">exit</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">exit</span>(<span class="string">&#x27;error&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可见原理是先缓存json到本地,接着读取源地址.<br>接着我注意到了第27行:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$str</span> = <span class="title function_ invoke__">file_get_contents</span>(<span class="string">&#x27;http://cn.bing.com/HPImageArchive.aspx?idx=0&amp;n=1&#x27;</span>);</span><br></pre></td></tr></table></figure><p>可见其<code>http://cn.bing.com/HPImageArchive.aspx?idx=0&amp;n=1</code>就是原址!<br>直接打开,得到一堆<code>xml</code>:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">images</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">startdate</span>&gt;</span>20190807<span class="tag">&lt;/<span class="name">startdate</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">fullstartdate</span>&gt;</span>201908070900<span class="tag">&lt;/<span class="name">fullstartdate</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">enddate</span>&gt;</span>20190808<span class="tag">&lt;/<span class="name">enddate</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url</span>&gt;</span></span><br><span class="line">/th?id=OHR.LinyantiLeopard_ZH-CN9934758728_1920x1080.jpg&amp;rf=LaDigue_1920x1080.jpg&amp;pid=hp</span><br><span class="line"><span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">urlBase</span>&gt;</span>/th?id=OHR.LinyantiLeopard_ZH-CN9934758728<span class="tag">&lt;/<span class="name">urlBase</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">copyright</span>&gt;</span></span><br><span class="line">利尼扬蒂野生动物保护区中的一只雄性豹子，博茨瓦纳 (© Karine Aigner/Tandem Stills + Motion)</span><br><span class="line"><span class="tag">&lt;/<span class="name">copyright</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">copyrightlink</span>&gt;</span></span><br><span class="line">https://www.bing.com/search?q=%E8%B1%B9%E5%AD%90&amp;form=hpcapt&amp;mkt=zh-cn</span><br><span class="line"><span class="tag">&lt;/<span class="name">copyrightlink</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">headline</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">drk</span>&gt;</span>1<span class="tag">&lt;/<span class="name">drk</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">top</span>&gt;</span>1<span class="tag">&lt;/<span class="name">top</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bot</span>&gt;</span>1<span class="tag">&lt;/<span class="name">bot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hotspots</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tooltips</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">loadMessage</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">message</span>&gt;</span>正在加载...<span class="tag">&lt;/<span class="name">message</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">loadMessage</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">previousImage</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>上一个图像<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">previousImage</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nextImage</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>下一个图像<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nextImage</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">play</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>播放视频<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">play</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pause</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>暂停视频<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">pause</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tooltips</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">images</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>很明显，第六行<code>url</code>下就是图片地址啦!<br>我试着修改了一下参数,<code>idx</code>是天数,最多缓存七日,<code>n</code>是张数,<code>n</code>为几就返回几张图片.<br>那就写一个php吧!</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="variable">$str</span>=<span class="title function_ invoke__">file_get_contents</span>(<span class="string">&#x27;https://cn.bing.com/HPImageArchive.aspx?idx=0&amp;n=1&#x27;</span>);<span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/&lt;url&gt;(.+?)&lt;\/url&gt;/ies&quot;</span>, <span class="variable">$str</span>, <span class="variable">$matches</span>)) &#123; <span class="variable">$imgurl</span>=<span class="string">&#x27;https://cn.bing.com&#x27;</span>.<span class="variable">$matches</span>[<span class="number">1</span>];&#125;<span class="keyword">if</span> (<span class="variable">$imgurl</span>) &#123; <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Type: image/JPEG&#x27;</span>); @<span class="title function_ invoke__">ob_end_clean</span>(); @<span class="title function_ invoke__">readfile</span>(<span class="variable">$imgurl</span>); @<span class="title function_ invoke__">flush</span>(); @<span class="title function_ invoke__">ob_flush</span>(); <span class="keyword">exit</span>();&#125; <span class="keyword">else</span> &#123; <span class="keyword">exit</span>(<span class="string">&#x27;error&#x27;</span>);&#125;<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>下面是返回的图片(每天都不一样):</p><p><img src="https://tools.cyfan.ga/bingpic/bing.php" alt="bing" title="今日bing美图"></p><p>修改了一下Cloudflare,支持http直接访问.<br>接着用wget下载:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">--13:38:17--  http://tools.cyfan.ga/bingpic/bing.php</span><br><span class="line">           =&gt; `bing.php.1&#x27;</span><br><span class="line">Resolving tools.cyfan.ga... 104.28.17.222, 104.28.16.222</span><br><span class="line">Connecting to tools.cyfan.ga|104.28.17.222|:80... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: unspecified [image/JPEG]</span><br><span class="line"></span><br><span class="line">    [        &lt;=&gt;                                                                     ] 343,869     76.5K/s</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>下载中…<br>等一下后：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">--13:38:17--  http://tools.cyfan.ga/bingpic/bing.php</span><br><span class="line">           =&gt; `bing.php.1&#x27;</span><br><span class="line">Resolving tools.cyfan.ga... 104.28.17.222, 104.28.16.222</span><br><span class="line">Connecting to tools.cyfan.ga|104.28.17.222|:80... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: unspecified [image/JPEG]</span><br><span class="line"></span><br><span class="line">    [       &lt;=&gt;                                                                      ] 343,869      176K/s   in 1.9s</span><br><span class="line"></span><br><span class="line">13:38:20 (176 KB/s) - `bing.php.1&#x27; saved [343869]</span><br><span class="line"></span><br><span class="line">--13:38:20--  http://1.jpg/</span><br><span class="line">           =&gt; `index.html&#x27;</span><br><span class="line">Resolving 1.jpg... failed: Unknown host.</span><br><span class="line">FINISHED --13:38:20--</span><br><span class="line">Downloaded: 1 files, 336K in 1.9s (176 KB/s)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>(〃￣︶￣)人(￣︶￣〃)搞定啦!<br>更多请前往<a href="https://tools.cyfan.ga/bingpic/">我的工具页</a>了解更多!</p><h1 id="危机来袭"><a href="#危机来袭" class="headerlink" title="危机来袭:"></a>危机来袭:</h1><p>兴奋之余，我上了一下<a href="bing主页">https://bing.com</a>,结果一盆凉水泼下来:图片不一样!<br>????????<br>上了一下刘明野的工具箱,也是同样的问题!<br>懵逼ing……<br>不对啊,我用梯子上了一下Bing,结果返回又一样了!<br>emmmmmmmm.<br>查询一下IP:<br>我的tools是<code>美国 cloudflare公司cdn节点</code>，运行在<code>000webhost荷兰节点</code>,而刘明野的工具箱来自<code>香港特别行政区 阿里云</code><br>(话说回来为什么Cloudflare不把我的ip解析到香港节点呢?Cloudflare不是有香港节点吗???)<br>接着用梯子上了一下<code>http://bing.com/HPImageArchive.aspx?idx=0&amp;n=1</code>,得到:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">images</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">startdate</span>&gt;</span>20190807<span class="tag">&lt;/<span class="name">startdate</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">fullstartdate</span>&gt;</span>201908070000<span class="tag">&lt;/<span class="name">fullstartdate</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">enddate</span>&gt;</span>20190808<span class="tag">&lt;/<span class="name">enddate</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url</span>&gt;</span></span><br><span class="line">/th?id=OHR.NubbleLight_ROW6148679105_1920x1080.jpg&amp;rf=LaDigue_1920x1080.jpg&amp;pid=hp</span><br><span class="line"><span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">urlBase</span>&gt;</span>/th?id=OHR.NubbleLight_ROW6148679105<span class="tag">&lt;/<span class="name">urlBase</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">copyright</span>&gt;</span></span><br><span class="line">Cape Neddick Light in York, Maine (© Haizhan Zheng/Getty Images)</span><br><span class="line"><span class="tag">&lt;/<span class="name">copyright</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">copyrightlink</span>&gt;</span>javascript:void(0)<span class="tag">&lt;/<span class="name">copyrightlink</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">headline</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">drk</span>&gt;</span>1<span class="tag">&lt;/<span class="name">drk</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">top</span>&gt;</span>1<span class="tag">&lt;/<span class="name">top</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bot</span>&gt;</span>1<span class="tag">&lt;/<span class="name">bot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hotspots</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tooltips</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">loadMessage</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">message</span>&gt;</span>正在加载...<span class="tag">&lt;/<span class="name">message</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">loadMessage</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">previousImage</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>上一个图像<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">previousImage</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nextImage</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>下一个图像<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nextImage</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">play</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>播放视频<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">play</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pause</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>暂停视频<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">pause</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tooltips</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">images</span>&gt;</span></span><br></pre></td></tr></table></figure><p>~~瞬间懂了,原来是国内外bing提供的图片不同,php获取到的图片也不一样.<br>可是,在国内找到稳定高速的php运行商又有多困难?<br>算了算了,国外就国外吧.╮(╯▽╰)╭<br>~~<br>不对不对，后来查明原因了，原来是时差原因…</p><hr>]]></content>
      
      
      <categories>
          
          <category> 爱学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PHP </tag>
            
            <tag> Bing </tag>
            
            <tag> 美图 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Momentum：一款美化你Chrome新标签页的插件</title>
      <link href="/posts/3d76e8ac/"/>
      <url>/posts/3d76e8ac/</url>
      
        <content type="html"><![CDATA[<p>最近在折腾站点收录，有点忙，今天就过来水一片吧。</p><h1 id="Momentum-chrome插件概述"><a href="#Momentum-chrome插件概述" class="headerlink" title="Momentum chrome插件概述"></a>Momentum chrome插件概述</h1><p>Momentum插件是一款自动更换壁纸，自带时钟，任务日历和工作清单的chrome浏览器插件。官方的解释就是：替换你 Chrome 浏览器默认的“标签页”。里面的图片全部来自500PX里面的高清图，无广告，无弹窗，非常适合笔记本使用，让装逼再上新台阶。让我来感受下出自细节，触及心灵的美。</p><h1 id="Momentum-chrome插件功能介绍"><a href="#Momentum-chrome插件功能介绍" class="headerlink" title="Momentum chrome插件功能介绍"></a>Momentum chrome插件功能介绍</h1><p>我们知道Chrome 的新标签页默认会显示经常访问的网页，多数情况下会比导航网站靠谱，但是我们是不是会觉得新标签页由于多年没换过，偶尔换个新鲜养眼的也不错？Momentum插件就是能帮助我们解决这个问题的，能给老掉牙的 Chrome 新标签页换个样式，首先添加一个漂亮的风景照，右上角显示当前城市天气，右下角可添加待办事项 Todo 列表，正中间显示系统时间以及今天的主要目标，想切换回原标签页，点击左上角 Apps 即可</p><ul><li>[x] 华丽的、赏心悦目的图片充满整个Tab页，忘掉Google默认的那个吧！</li><li>[x] 轻度的任务管理：设置今天的目标，以及查看过往Todo list来巡视完成情况。</li><li>[x] 时间、所在地天气、格言（英语谚语或来自某经典电影的台词…），合理的排布位置并没有让页面显得臃肿。</li><li>[x] 当然，常用网址和Chrome应用列表页也保留了。（点击左上角“Apps”进入）</li></ul><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/M.jpg" alt="棒棒哒" title="↑每天都能换壁纸呢!!"></p><h1 id="Momentum-chrome插件下载"><a href="#Momentum-chrome插件下载" class="headerlink" title="Momentum chrome插件下载"></a>Momentum chrome插件下载</h1><p>在chrome应用商店搜索momentum插件，直接安装就可以.但无法直连,这里提供私有云链接:</p><p><a class="btn" href="https://pan.cyfan.top/%E6%8F%92%E4%BB%B6/crx/Momentum.7z"></p><pre><code>          &gt;&gt;CYF的私有云         &lt;/a&gt;</code></pre><hr>]]></content>
      
      
      <categories>
          
          <category> 丆插件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 插件 </tag>
            
            <tag> 标签页 </tag>
            
            <tag> 美化 </tag>
            
            <tag> Chrome </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>移除000webhost右下角Powered by 000webhost字样</title>
      <link href="/posts/f3eb3ee1/"/>
      <url>/posts/f3eb3ee1/</url>
      
        <content type="html"><![CDATA[<h1 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h1><p>这几天都忙着部署私有云和工具页，忘记更新了，今天发一片干货。<br>由于资金周转困难（没钱），个人的私有云和在线工具全部部署在000webhost上，因为这是一个少有的免费php可视化部署云。<br>而且最最最好的是可以用CNAME绑定自定义域名,(heroku要信用卡验证)<br>当然了,由于<code>不可抗因素</code>,全程<code>爬城</code>,<br>结果在部署的时候发生了一件令我恶心的事。</p><h1 id="右下角广告："><a href="#右下角广告：" class="headerlink" title="右下角广告："></a>右下角广告：</h1><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/000AD.jpg" alt="广告" title="↑这是什么??????"></p><p>哇,这么一大块东西看的我恶心.<br>打广告也不能打的那么显眼吧?(((φ(◎ロ◎;)φ)))</p><h1 id="试图解决"><a href="#试图解决" class="headerlink" title="试图解决:"></a>试图解决:</h1><p>我登入三蛋空间后台,看看有没有可以去除广告选项:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/000ADE.jpg" alt="广告不可抗" title="↑F**K,居然不给关"></p><p>可能大家不懂英语,google翻译一下:</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/000ADC.jpg" alt="广告不可抗" title="↑咳咳,怎么办?"></p><p>呵呵,居然威胁我升级高级版,我要是有钱还用得着说吗?</p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h1><p>后来查看了一下源代码,在<code>&lt;/html&gt;</code>前面狠狠的插上了这么一段代码:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: right;position: fixed;z-index:9999999;bottom: 0;width: auto;right: 1%;cursor: pointer;line-height: 0;display:block !important;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">title</span>=<span class="string">&quot;Hosted on free web hosting 000webhost.com. Host your own website for FREE.&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://www.000webhost.com/?utm_source=000webhostapp&amp;utm_campaign=000_logo&amp;utm_medium=website&amp;utm_content=footer_img&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.000webhost.com/000webhost/logo/footer-powered-by-000webhost-white2.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;www.000webhost.com&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">getCookie</span>(<span class="params">e</span>)&#123;<span class="keyword">for</span>(<span class="keyword">var</span> t=e+<span class="string">&quot;=&quot;</span>,n=<span class="built_in">decodeURIComponent</span>(<span class="variable language_">document</span>.<span class="property">cookie</span>).<span class="title function_">split</span>(<span class="string">&quot;;&quot;</span>),o=<span class="number">0</span>;o&lt;n.<span class="property">length</span>;o++)&#123;<span class="keyword">for</span>(<span class="keyword">var</span> i=n[o];<span class="string">&quot; &quot;</span>==i.<span class="title function_">charAt</span>(<span class="number">0</span>);)i=i.<span class="title function_">substring</span>(<span class="number">1</span>);<span class="keyword">if</span>(<span class="number">0</span>==i.<span class="title function_">indexOf</span>(t))<span class="keyword">return</span> i.<span class="title function_">substring</span>(t.<span class="property">length</span>,i.<span class="property">length</span>)&#125;<span class="keyword">return</span><span class="string">&quot;&quot;</span>&#125;<span class="title function_">getCookie</span>(<span class="string">&quot;hostinger&quot;</span>)&amp;&amp;(<span class="variable language_">document</span>.<span class="property">cookie</span>=<span class="string">&quot;hostinger=;expires=Thu, 01 Jan 1970 00:00:01 GMT;&quot;</span>,location.<span class="title function_">reload</span>());<span class="keyword">var</span> notification=<span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;notice notice-success is-dismissible&quot;</span>),hostingerLogo=<span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;hlogo&quot;</span>),mainContent=<span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;notice_content&quot;</span>)[<span class="number">0</span>],newList=[<span class="string">&quot;Powerful and Easy-To-Use Control Panel.&quot;</span>,<span class="string">&quot;1-Click Auto Installer and 24/7 Live Support.&quot;</span>,<span class="string">&quot;Free Domain, Email and SSL Bundle.&quot;</span>,<span class="string">&quot;5x faster WordPress performance&quot;</span>,<span class="string">&quot;Weekly Backups and Fast Response Time.&quot;</span>];<span class="keyword">if</span>(<span class="number">0</span>&lt;notification.<span class="property">length</span>&amp;&amp;<span class="literal">null</span>!=mainContent)&#123;<span class="keyword">var</span> googleFont=<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;link&quot;</span>);googleFontHref=<span class="variable language_">document</span>.<span class="title function_">createAttribute</span>(<span class="string">&quot;href&quot;</span>),googleFontRel=<span class="variable language_">document</span>.<span class="title function_">createAttribute</span>(<span class="string">&quot;rel&quot;</span>),googleFontHref.<span class="property">value</span>=<span class="string">&quot;https://fonts.googleapis.com/css?family=Open+Sans:300,400,600&quot;</span>,googleFontRel.<span class="property">value</span>=<span class="string">&quot;stylesheet&quot;</span>,googleFont.<span class="title function_">setAttributeNode</span>(googleFontHref),googleFont.<span class="title function_">setAttributeNode</span>(googleFontRel);<span class="keyword">var</span> css=<span class="string">&quot;@media only screen and (max-width: 768px) &#123;.web-hosting-90-off-image-wrapper &#123;position: absolute;&#125; .notice_content &#123;justify-content: center;&#125; .web-hosting-90-off-image &#123;opacity: 0.3;&#125;&#125; @media only screen and (min-width: 769px) &#123;.notice_content &#123;justify-content: space-between;&#125; .web-hosting-90-off-image-wrapper &#123;padding: 0 5%&#125;&#125; .content-wrapper &#123;z-index: 5&#125; .notice_content &#123;display: flex; align-items: center;&#125; * &#123;-webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;&#125; .upgrade_button_red_sale&#123;border: 0; border-radius: 3px; background-color: #ff123a !important; padding: 15px 55px !important; margin-left: 30px; font-family: &#x27;Open Sans&#x27;, sans-serif; font-size: 16px; font-weight: 600; color: #ffffff;&#125; .upgrade_button_red_sale:hover&#123;color: #ffffff !important; background: #d10303 !important;&#125;&quot;</span>,style=<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;style&quot;</span>),sheet=<span class="variable language_">window</span>.<span class="property">document</span>.<span class="property">styleSheets</span>[<span class="number">0</span>];style.<span class="property">styleSheet</span>?style.<span class="property">styleSheet</span>.<span class="property">cssText</span>=<span class="attr">css</span>:style.<span class="title function_">appendChild</span>(<span class="variable language_">document</span>.<span class="title function_">createTextNode</span>(css)),<span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;head&quot;</span>)[<span class="number">0</span>].<span class="title function_">appendChild</span>(style),<span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;head&quot;</span>)[<span class="number">0</span>].<span class="title function_">appendChild</span>(googleFont);<span class="keyword">var</span> button=<span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;upgrade_button_red&quot;</span>)[<span class="number">0</span>],link=button.<span class="property">parentElement</span>;link.<span class="title function_">setAttribute</span>(<span class="string">&quot;href&quot;</span>,<span class="string">&quot;https://www.hostinger.com/special/000webhost?utm_source=000webhost&amp;utm_medium=panel&amp;utm_campaign=000-wp&quot;</span>),link.<span class="property">innerHTML</span>=<span class="string">&#x27;&lt;button class=&quot;upgrade_button_red_sale&quot;&gt;TRANSFER NOW&lt;/button&gt;&#x27;</span>,(notification=notification[<span class="number">0</span>]).<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>,<span class="string">&quot;padding-bottom: 10px; padding-top: 5px; background-image: url(https://cdn.000webhost.com/000webhost/promotions/springsale/mountains-neon-background.jpg); background-color: #000000; background-size: cover; background-repeat: no-repeat; color: #ffffff; border-color: #ff123a; border-width: 8px;&quot;</span>),notification.<span class="property">className</span>=<span class="string">&quot;notice notice-error is-dismissible&quot;</span>,(hostingerLogo=hostingerLogo[<span class="number">0</span>]).<span class="title function_">setAttribute</span>(<span class="string">&quot;src&quot;</span>,<span class="string">&quot;https://cdn.000webhost.com/000webhost/promotions/springsale/logo-hostinger-white.svg&quot;</span>),hostingerLogo.<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>,<span class="string">&quot;float: none !important; height: auto; max-width: 100%; margin: 40px 20px 10px 30px;&quot;</span>);<span class="keyword">var</span> h1Tag=notification.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;H1&quot;</span>)[<span class="number">0</span>];h1Tag.<span class="title function_">remove</span>();<span class="keyword">var</span> paragraph=notification.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;p&quot;</span>)[<span class="number">0</span>];paragraph.<span class="property">innerHTML</span>=<span class="string">&quot;Fast &amp; Secure Web Hosting. &lt;br&gt;Limited time offer: get an SSL certificate for FREE&quot;</span>,paragraph.<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>,<span class="string">&#x27;max-width: 600px; margin-left: 30px; font-family: &quot;Open Sans&quot;, sans-serif; font-size: 22px; font-weight: 600;&#x27;</span>);<span class="keyword">var</span> list=notification.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;UL&quot;</span>)[<span class="number">0</span>];list.<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>,<span class="string">&quot;max-width: 675px;&quot;</span>);<span class="keyword">for</span>(<span class="keyword">var</span> listElements=list.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;LI&quot;</span>),i=<span class="number">0</span>;i&lt;newList.<span class="property">length</span>;i++)listElements[i].<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>,<span class="string">&quot;color:#ffffff; list-style-type: disc; margin-left: 30px; font-family: &#x27;Open Sans&#x27;, sans-serif; font-size: 14px; font-weight: 300; line-height: 1.5;&quot;</span>),listElements[i].<span class="property">innerHTML</span>=newList[i];listElements[listElements.<span class="property">length</span>-<span class="number">1</span>].<span class="title function_">remove</span>();<span class="keyword">var</span> org_html=mainContent.<span class="property">innerHTML</span>,new_html=<span class="string">&#x27;&lt;div class=&quot;content-wrapper&quot;&gt;&#x27;</span>+mainContent.<span class="property">innerHTML</span>+<span class="string">&#x27;&lt;/div&gt;&lt;div class=&quot;web-hosting-90-off-image-wrapper&quot;&gt;&lt;img class=&quot;web-hosting-90-off-image&quot; src=&quot;https://cdn.000webhost.com/000webhost/promotions/springsale/web-hosting-90-off.png&quot;&gt;&lt;/div&gt;&#x27;</span>;mainContent.<span class="property">innerHTML</span>=new_html;<span class="keyword">var</span> saleImage=mainContent.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;web-hosting-90-off-image&quot;</span>)[<span class="number">0</span>];!<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> t=<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;body.wp-admin&quot;</span>)[<span class="number">0</span>];<span class="keyword">function</span> <span class="title function_">e</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> e=<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;iframe&quot;</span>);e.<span class="property">id</span>=<span class="string">&quot;hgr-promo-widget&quot;</span>,e.<span class="title function_">setAttribute</span>(<span class="string">&quot;src&quot;</span>,<span class="string">&quot;https://www.hostinger.com/widgets/bottom-banner-sale/000_wp_admin&quot;</span>),e.<span class="title function_">setAttribute</span>(<span class="string">&quot;allowfullscreen&quot;</span>,!<span class="number">0</span>),e.<span class="title function_">setAttribute</span>(<span class="string">&quot;frameborder&quot;</span>,<span class="number">0</span>),e.<span class="property">style</span>.<span class="property">cssText</span>=<span class="string">&quot;z-index: 2147483000 !important;position: fixed !important;bottom: 0; width: 100%;!important; left: 0!important;&quot;</span>,e.<span class="property">style</span>.<span class="property">opacity</span>=<span class="number">0</span>,e.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="title function_">iFrameResize</span>(&#123;&#125;,<span class="string">&quot;#hgr-promo-widget&quot;</span>),e.<span class="property">style</span>.<span class="property">opacity</span>=<span class="number">1</span>&#125;,t.<span class="title function_">insertAdjacentElement</span>(<span class="string">&quot;afterend&quot;</span>,e)&#125;<span class="keyword">if</span>(<span class="variable language_">window</span>.<span class="property">iFrameResize</span>)<span class="title function_">e</span>();<span class="keyword">else</span>&#123;<span class="keyword">var</span> n=<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>);n.<span class="property">type</span>=<span class="string">&quot;text/javascript&quot;</span>,t.<span class="title function_">insertAdjacentElement</span>(<span class="string">&quot;afterend&quot;</span>,n),n.<span class="property">onload</span>=e,n.<span class="property">src</span>=<span class="string">&quot;https://unpkg.com/iframe-resizer@3.6.3/js/iframeResizer.min.js&quot;</span>&#125;&#125;()&#125;</span></span><br></pre></td></tr></table></figure><p>这个真的恨,硬生生插在<code>&lt;/html&gt;</code>标签前.<br>注意一下,这说明广告代码被插了进去,而不是添加在后面.<br>后来细思熟虑了一下,干脆在不要最后的<code>&lt;/html&gt;</code>了,直接把它们全部变成注释得了.<br>在<code>&lt;/html&gt;</code>前直接填上<code>&lt;!--</code>,把广告代码变成了注释.<br>(￢︿̫̿￢☆),干脆把你变成注释算了!<br>修复结果: <a href="http://pan.cyfan.top">http://pan.cyfan.top</a><br>搞定!</p><hr>]]></content>
      
      
      <categories>
          
          <category> 好方法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 奇淫巧技 </tag>
            
            <tag> 广告 </tag>
            
            <tag> 000webhost </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Adobe2019年Windows全家桶</title>
      <link href="/posts/e464ba8a/"/>
      <url>/posts/e464ba8a/</url>
      
        <content type="html"><![CDATA[<h1 id="警告："><a href="#警告：" class="headerlink" title="警告："></a>警告：</h1><p>文件过大，故放在百度网盘上。<br>先贴链接：</p><p><a class="btn" href="https://pan.baidu.com/s/1YUwQCaov_fPEmbHi7BH0lQ"></p><pre><code>          &gt;&gt;百度网盘 提取码: rxx1        &lt;/a&gt;</code></pre><p>这可是百年难见的好东西啊！</p><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/ADOBE.png" alt="旗舰店上的价格" title="旗舰店上的价格"></p><h1 id="什么是Adobe-CC"><a href="#什么是Adobe-CC" class="headerlink" title="什么是Adobe CC?"></a>什么是Adobe CC?</h1><p>adobe是Photoshop的原始软件名称，CC即为：Creative Cloud ，也就是创意云。<br>所有Adobe创意相关的服务和软件工具都是通过CC服务体系交付给设计师、客户和开发者。CC不仅能够提供Adobe旗下所有的创意软件，还具有一定大小的云存储服务，所有软件工具的升级、下载和安装均能够在CC内的Adobe Application manager内完成。Creative Cloud 集成了用户创作作品所需要的所有元素，能够带给用户最棒、最新的 Adobe 创意工具和服务，Creative Cloud 将用户需要的所有元素集中整合到一个平台，简化了整个创意过程，为用户的使用带来便利。</p><h1 id="我有这些有什么用"><a href="#我有这些有什么用" class="headerlink" title="我有这些有什么用?"></a>我有这些有什么用?</h1><p>…….<br>此处不做回答</p>]]></content>
      
      
      <categories>
          
          <category> 繡软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Adobe </tag>
            
            <tag> 全家桶 </tag>
            
            <tag> 年度 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何在中国以免【爬城】的体位下使用Google的reCAPTCHA</title>
      <link href="/posts/67db86ca/"/>
      <url>/posts/67db86ca/</url>
      
        <content type="html"><![CDATA[<h1 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h1><p>在中国，每每用到<a href="https://www.clipconverter.cc">clipconverter</a>时下载youtube上的视频,reCAPTCHA一直没有加载出来.<br>后来意识到Google的人机验证好像在中国<strong>不能用</strong>.<br>……<br>这是就进入<code>前有狼后又虎的尴尬状态了</code>,,ԾㅂԾ,,.<br>不代理,人机验证加载不出来,挂代理,50Mbps的代理速度估计是要把我活生生等死.</p><h2 id="为什么在中国不能用"><a href="#为什么在中国不能用" class="headerlink" title="为什么在中国不能用??????"></a>为什么在中国不能用??????</h2><p>自2014年5月27日后，Google 公司的各项服务遭到疑似来自<code>不可告人的秘密</code>的<del>善</del>意干扰，导致中国大陆地区的用户无法正常使用其服务的事件。自当天起，来自中国大陆的用户发现 Google 旗下的各个分站以及 Google 的其他服务（Google 搜索、Google Play、Gmail 等）均无法正常访问与使用，所有 google.cn 以外的 Google 服务均受影响无法使用，用户甚至无法登陆 Google 账户。然而，不同于 2009 年至 2013 年仅针对敏感时期的行为规律，XX运动纪念日结束后攻击者对 Google 的<del>善意</del>打扰仍未停止。——维基百科<br>而 reCaptcha 人机验证就是 Google 的服务之一。所以，reCaptcha 也没能逃过这次封锁，才导致国内 reCaptcha 验证码无法显示。</p><blockquote><p><strong>现在打个岔</strong><br>本文图片较少,故接下来要强制添加图片:<br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/QZYT.png" alt="强制有图" title="强制有图"><br>哈哈哈哈哈哈哈哈(●’◡’●)开玩笑.</p></blockquote><h2 id="reCaptcha有哪些-有什么用"><a href="#reCaptcha有哪些-有什么用" class="headerlink" title="reCaptcha有哪些,有什么用?"></a>reCaptcha有哪些,有什么用?</h2><p>reCaptcha有三个版本V1、V2、V3,通常现在使用的是v2.<br>这些往往在原网站上的去，又用上recaptcha的网站，比如谷歌镜像之类的。</p><h1 id="试图解决"><a href="#试图解决" class="headerlink" title="试图解决:"></a>试图解决:</h1><h2 id="直接绕开"><a href="#直接绕开" class="headerlink" title="直接绕开:"></a>直接绕开:</h2><p>既然你不让我用,那我就不用了.(￢︿̫̿￢☆)<br>打开<code>开发者工具</code>找到js脚本,指向空白.<br>当然这样行不通了.</p><h2 id="ATP"><a href="#ATP" class="headerlink" title="ATP"></a>ATP</h2><p><del>就是<a href="https://baike.baidu.com/item/atp/10948513?fr=aladdin">Ass-To-Pussy</a></del><br>w(ﾟДﾟ)w我在说什么????千万不要点链接啊啊啊!<br>呸呸呸,就是指在爬出去的情况下通过人机验证,再回来下载.<br>而这也很快被防盗链挡住了.<br>emmmmmmm……</p><h1 id="后来解决"><a href="#后来解决" class="headerlink" title="后来解决:"></a>后来解决:</h1><p>其实大家都没想到,reCaptcha在国内还是有镜像的.<br>网址是:<a href="http://recaptcha.net">http://recaptcha.net</a>,很简单暴力的域名.<br>甚至连维基中文都认为镜像网址挂了。因为你直接打开,恭喜,你会收获这个</p><font size=92>Not Found</font><font size=67>Error 404</font><p>于是就孪生了两种方法:</p><h2 id="小白解法："><a href="#小白解法：" class="headerlink" title="小白解法："></a>小白解法：</h2><p>Tampermonkey脚本：(感谢原作者an_anthony的贡献！)<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==UserScript==</span></span><br><span class="line"><span class="comment">// @namespacexyz.tree0</span></span><br><span class="line"><span class="comment">// @namereCaptcha 验证码镜像加载</span></span><br><span class="line"><span class="comment">// @description替换使用官方地址的 reCaptcha 为官方镜像地址，让墙内用户的 reCaptch 能正常显示。</span></span><br><span class="line"><span class="comment">// @description似乎只能用于 reCaptcha v2</span></span><br><span class="line"><span class="comment">// @authoran_anthony</span></span><br><span class="line"><span class="comment">// @version0.1.2</span></span><br><span class="line"><span class="comment">// @grantnone</span></span><br><span class="line"><span class="comment">// @match             *://*/*</span></span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> scrArr = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;script&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> k = <span class="number">0</span>;k &lt; scrArr.<span class="property">length</span>;++k)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(scrArr[k].<span class="property">src</span> !== <span class="literal">null</span> &amp;&amp; scrArr[k].<span class="property">src</span>.<span class="title function_">indexOf</span>(<span class="string">&quot;https://www.google.com/recaptcha/api.js&quot;</span>) != -<span class="number">1</span>)&#123;</span><br><span class="line"><span class="keyword">var</span> scrAppend = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>);</span><br><span class="line">    scrAppend.<span class="property">src</span> = scrArr[k].<span class="property">src</span>.<span class="title function_">replace</span>(<span class="string">&quot;google.com&quot;</span>,<span class="string">&quot;recaptcha.net&quot;</span>);</span><br><span class="line">scrAppend.<span class="property">type</span> = <span class="string">&quot;text/javascript&quot;</span>;</span><br><span class="line">    scrAppend.<span class="property">async</span> = <span class="literal">true</span>;</span><br><span class="line">    scrArr[k].<span class="property">parentNode</span>.<span class="title function_">appendChild</span>(scrAppend); </span><br><span class="line">    scrArr[k].<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(scrArr[k]);</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;已替换该页面的 reCaptcha 地址，如果还未显示出 reCaptcha Logo，请稍等(约30s)&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><blockquote><p><strong>Attention！</strong><br>对那些使用了 Content-Security-Policy 属性的网站无效。Content-Security-Policy 属性会验证资源的地址，导致更换的镜像地址被阻止。如果你查看了 F12，会发现很多类似下面的错误信息：</p><blockquote><p>Refused to load the script ‘xxx’ because it violates the following Content Security Policy directive<br>解决方案:请使用大神解法：</p></blockquote></blockquote><h2 id="大神来此："><a href="#大神来此：" class="headerlink" title="大神来此："></a>大神来此：</h2><p>打开开发者工具，搜索<code>www.google.com/recaptcha/api.js</code><br><code>.com</code>之类的以情况而定.<br>接着把他替换成<code>https://recaptcha.net/recaptcha/api.js</code><br>等一会儿就好了.<br>其实这与js原理相同，但此种解法在CSP检测完成后进行，相当于绕开CSP。</p><p>完毕!</p><hr>]]></content>
      
      
      <categories>
          
          <category> 好方法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 人机验证 </tag>
            
            <tag> 善用技术上网 </tag>
            
            <tag> JavaScript </tag>
            
            <tag> Tampermonkey </tag>
            
            <tag> Google </tag>
            
            <tag> 奇淫巧技 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github无法注册：Unable to verify your captcha response</title>
      <link href="/posts/6708e52c/"/>
      <url>/posts/6708e52c/</url>
      
        <content type="html"><![CDATA[<h1 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h1><p>前几天就想注册一个Github账号，话说回来早就该注册了。<br>前面注册时也是正常的，结果在人机验证（Github Captcha）卡住了。<br>点击<kbd>Create an Account</kbd>,结果…</p><h1 id="注册时报错："><a href="#注册时报错：" class="headerlink" title="注册时报错："></a>注册时报错：</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Unable to verify your captcha response. </span><br><span class="line">Please visit https://help.github.com/articles/troubleshooting-connectivity-problems/#troubleshooting-the-captcha</span><br><span class="line">for troubleshooting information.</span><br></pre></td></tr></table></figure><p>一脸懵逼…<br>什么鬼,可是在按下之前人机验证不都是打钩了吗？U•ェ•*<br>???</p><h1 id="试图解决："><a href="#试图解决：" class="headerlink" title="试图解决："></a>试图解决：</h1><p>网上查了一下，也有很多类似的事，如<a href="https://blog.csdn.net/m0_37617778/article/details/83098985">https://blog.csdn.net/m0_37617778/article/details/83098985</a><br>其中博主提出解决方案：</p><blockquote><p>使用IE就可以了.</p></blockquote><p>(/≧▽≦)/,笑死我了,连Chrome都做不到,怎么可能在IE中做到?<br>后来在评论中看到这样的话:</p><blockquote><p><strong>欧二lord：</strong><br>善用技术上网吧，我换了三个浏览器都不行，后来善用技术上网用chrome就可以了.</p></blockquote><p>善用技术上网么…<br>我挂上代理后再次进入,结果还是老样子:<br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/GITHUB_ERROR.jpg" alt="老样子" title="还是老样子啊"></p><p>…</p><h1 id="最后解决"><a href="#最后解决" class="headerlink" title="最后解决:"></a>最后解决:</h1><p>然后我一直点着<kbd>Create an Account</kbd>,一直报错.大概点了5下后:<br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/GITHUB_CAPTCHA.jpg" alt="新样子" title="=_=换了个样子"><br>终于报出真正的人机验证了!点进去,人机验证的方式是旋转小狗小牛到正确的位置.<br>人机验证完成,我就直接被跳到邮箱验证了.<br>^3^,终于解决了!</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结:"></a>总结:</h1><ol><li>浏览器:<ul><li>[x] Chrome</li><li>[x] Firefox</li><li>[x] Chromium</li><li>[ ] IE</li></ul></li><li>网络状态<ul><li>[x] 善用技术上网</li></ul></li><li>连续点击直到出现真正的人机验证<br>OK!</li></ol><hr>]]></content>
      
      
      <categories>
          
          <category> 干问题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github </tag>
            
            <tag> 错误 </tag>
            
            <tag> 人机验证 </tag>
            
            <tag> 善用技术上网 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Code Highlight Style test</title>
      <link href="/posts/9db656e5/"/>
      <url>/posts/9db656e5/</url>
      
        <content type="html"><![CDATA[<p>Make sure all the code blocks highlighted correctly. All the code samples are come from the demo of <a href="https://highlightjs.org">https://highlightjs.org</a></p><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#x27;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</span><br></pre></td></tr></table></figure><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">enum</span> <span class="title class_">State</span> &#123;</span><br><span class="line">    Start,</span><br><span class="line">    Transient,</span><br><span class="line">    Closed,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">From</span>&lt;&amp;<span class="symbol">&#x27;a</span> <span class="type">str</span>&gt; <span class="keyword">for</span> <span class="title class_">State</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">from</span>(s: &amp;<span class="symbol">&#x27;a</span> <span class="type">str</span>) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">        <span class="keyword">match</span> s &#123;</span><br><span class="line">            <span class="string">&quot;start&quot;</span> =&gt; State::Start,</span><br><span class="line">            <span class="string">&quot;closed&quot;</span> =&gt; State::Closed,</span><br><span class="line">            _ =&gt; <span class="built_in">unreachable!</span>(),</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;apples&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;count&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">12000</span><span class="punctuation">,</span> <span class="number">20000</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;...&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;sensitive&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;oranges&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;count&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="number">17500</span><span class="punctuation">,</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;...&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;sensitive&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@requires_authorization</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">somefunc</span>(<span class="params">param1=<span class="string">&#x27;&#x27;</span>, param2=<span class="number">0</span></span>):</span><br><span class="line">    <span class="string">r&#x27;&#x27;&#x27;A docstring&#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> param1 &gt; param2: <span class="comment"># interesting</span></span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Gre\&#x27;ater&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> (param2 - param1 + <span class="number">1</span> + <span class="number">0b10l</span>) <span class="keyword">or</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SomeClass</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>message = <span class="string">&#x27;&#x27;&#x27;interpreter</span></span><br><span class="line"><span class="string"><span class="meta">... </span>prompt&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"><span class="selector-tag">body</span> &#123;<span class="attribute">width</span>: <span class="number">500px</span>;&#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;application/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">$init</span>(<span class="params"></span>) &#123;<span class="keyword">return</span> <span class="literal">true</span>;&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">checked</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span> <span class="attr">id</span>=<span class="string">&#x27;title&#x27;</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- here goes the rest of the page --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">$initHighlight</span>(<span class="params">block, cls</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (cls.<span class="title function_">search</span>(<span class="regexp">/\bno\-highlight\b/</span>) != -<span class="number">1</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">process</span>(block, <span class="literal">true</span>, <span class="number">0x0F</span>) +</span><br><span class="line">             <span class="string">` class=&quot;<span class="subst">$&#123;cls&#125;</span>&quot;`</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="comment">/* handle exception */</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span> / <span class="number">2</span>; i &lt; classes.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">checkCondition</span>(classes[i]) === <span class="literal">undefined</span>)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;undefined&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">web-component</span>&gt;</span>&#123;block&#125;<span class="tag">&lt;/<span class="name">web-component</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> $initHighlight;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* An annoying &quot;Hello World&quot; example */</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> i = <span class="number">0</span>; i &lt; <span class="number">0xFFFF</span>; i++)</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Hello, World!&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">  <span class="type">char</span> c = <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">  unordered_map &lt;string, vector&lt;string&gt; &gt; m;</span><br><span class="line">  m[<span class="string">&quot;key&quot;</span>] = <span class="string">&quot;\\\\&quot;</span>; <span class="comment">// this is an error</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">-2e3</span> + <span class="number">12l</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> &quot;topic&quot; (</span><br><span class="line">    &quot;id&quot; serial <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    &quot;forum_id&quot; <span class="type">integer</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    &quot;subject&quot; <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> &quot;topic&quot;</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> forum_id <span class="keyword">FOREIGN</span> KEY (&quot;forum_id&quot;)</span><br><span class="line"><span class="keyword">REFERENCES</span> &quot;forum&quot; (&quot;id&quot;);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Initials</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> &quot;topic&quot; (&quot;forum_id&quot;, &quot;subject&quot;)</span><br><span class="line"><span class="keyword">values</span> (<span class="number">2</span>, <span class="string">&#x27;D&#x27;&#x27;artagnian&#x27;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="string">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="string">&quot;Dependency.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">WorldDataSource</span></span></span><br><span class="line"><span class="keyword">@optional</span></span><br><span class="line">- (<span class="built_in">NSString</span>*)worldName;</span><br><span class="line"><span class="keyword">@required</span></span><br><span class="line">- (<span class="type">BOOL</span>)allowsToLive;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">NSString</span> *title;</span><br><span class="line">- (<span class="keyword">IBAction</span>) show;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> John Smith &lt;john.smith@example.com&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> l2f.gameserver.model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">L2Char</span> <span class="keyword">extends</span> <span class="title class_">L2Object</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Short</span> <span class="variable">ERROR</span> <span class="operator">=</span> <span class="number">0x0001</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moveTo</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> z)</span> &#123;</span><br><span class="line">    _ai = <span class="literal">null</span>;</span><br><span class="line">    log(<span class="string">&quot;Should not be called&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">1</span> &gt; <span class="number">5</span>) &#123; <span class="comment">// wtf!?</span></span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="keyword">@objc</span> <span class="keyword">class</span> <span class="title class_">Person</span>: <span class="title class_">Entity</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span>!</span><br><span class="line">  <span class="keyword">var</span> age:  <span class="type">Int</span>!</span><br><span class="line"></span><br><span class="line">  <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">age</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="comment">/* <span class="comment">/* ... */</span> */</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Return a descriptive string for this person</span></span><br><span class="line">  <span class="keyword">func</span> <span class="title function_">description</span>(<span class="params">offset</span>: <span class="type">Int</span> <span class="operator">=</span> <span class="number">0</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;<span class="subst">\(name)</span> is <span class="subst">\(age <span class="operator">+</span> offset)</span> years old&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: Chunkfive; <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;Chunkfive.otf&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span>, <span class="selector-class">.usertext</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#F0F0F0</span>; <span class="attribute">background</span>: <span class="number">#600</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: Chunkfive, sans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@import</span> url(print.css);</span><br><span class="line"><span class="keyword">@media</span> print &#123;</span><br><span class="line">  <span class="selector-tag">a</span><span class="selector-attr">[href^=http]</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">attr</span>(href)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The Greeter class</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Greeter</span></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">initialize</span>(<span class="params">name</span>)</span><br><span class="line">    <span class="variable">@name</span> = name.capitalize</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">salute</span></span><br><span class="line">    puts <span class="string">&quot;Hello <span class="subst">#&#123;<span class="variable">@name</span>&#125;</span>!&quot;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">g = <span class="title class_">Greeter</span>.new(<span class="string">&quot;world&quot;</span>)</span><br><span class="line">g.salute</span><br></pre></td></tr></table></figure><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Makefile</span></span><br><span class="line"></span><br><span class="line">BUILDDIR      = _build</span><br><span class="line">EXTRAS       ?= <span class="variable">$(BUILDDIR)</span>/extras</span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>: main clean</span></span><br><span class="line"></span><br><span class="line"><span class="section">main:</span></span><br><span class="line">@echo <span class="string">&quot;Building main facility...&quot;</span></span><br><span class="line">build_main <span class="variable">$(BUILDDIR)</span></span><br><span class="line"></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">rm -rf <span class="variable">$(BUILDDIR)</span>/*</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">float64</span>)</span><br><span class="line">    ch &lt;- <span class="number">1.0e10</span>    <span class="comment">// magic number</span></span><br><span class="line">    x, ok := &lt;- ch</span><br><span class="line">    <span class="keyword">defer</span> fmt.Println(<span class="string">`exitting now\`</span>)</span><br><span class="line">    <span class="keyword">go</span> <span class="built_in">println</span>(<span class="built_in">len</span>(<span class="string">&quot;hello world!&quot;</span>))</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###### CONFIG</span></span><br><span class="line">ACCEPTED_HOSTS=<span class="string">&quot;/root/.hag_accepted.conf&quot;</span></span><br><span class="line">BE_VERBOSE=<span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$UID</span>&quot;</span> -ne 0 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Superuser rights required&quot;</span></span><br><span class="line">  <span class="built_in">exit</span> 2</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">genApacheConf</span></span>()&#123;</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;# Host <span class="variable">$&#123;HOME_DIR&#125;</span><span class="variable">$1</span>/<span class="variable">$2</span> :&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">; boilerplate</span></span><br><span class="line"><span class="section">[package]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;some_name&quot;</span></span><br><span class="line"><span class="attr">authors</span> = [<span class="string">&quot;Author&quot;</span>]</span><br><span class="line"><span class="attr">description</span> = <span class="string">&quot;This is \</span></span><br><span class="line"><span class="string">a description&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="section">[[lib]]</span></span><br><span class="line"><span class="attr">name</span> = <span class="variable">$&#123;NAME&#125;</span></span><br><span class="line"><span class="attr">default</span> = <span class="literal">True</span></span><br><span class="line"><span class="attr">auto</span> = <span class="literal">no</span></span><br><span class="line"><span class="attr">counter</span> = <span class="number">1_000</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Demo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> highlight </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS特效：一个打字绚烂烟花的特效</title>
      <link href="/posts/d81838f5/"/>
      <url>/posts/d81838f5/</url>
      
        <content type="html"><![CDATA[<h1 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h1><blockquote><p><strong>转载警告</strong><br>该特效转载<a href="http://mlldxe.cn/archives/541">http://mlldxe.cn/archives/541</a>,本来是仅仅支持wordpress的,但顺手被我抠出来放回javascript中了。(●’◡’●)好有成就感呢！</p><p><strong>绚烂警告</strong><br>该代码效果及其绚烂,注意安全!</p></blockquote><p>好吧好吧,乱解刨别人代码也是不对的.</p><h1 id="代码"><a href="#代码" class="headerlink" title="代码:"></a>代码:</h1><h2 id="原生代码"><a href="#原生代码" class="headerlink" title="原生代码:"></a>原生代码:</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sw = <span class="variable language_">window</span>.<span class="property">screen</span>.<span class="property">width</span>;</span><br><span class="line"><span class="keyword">if</span> (sw &gt; <span class="number">1200</span>) &#123;</span><br><span class="line">    (<span class="keyword">function</span> <span class="title function_">webpackUniversalModuleDefinition</span>(<span class="params">root, factory</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">exports</span> === <span class="string">&#x27;object&#x27;</span> &amp;&amp; <span class="keyword">typeof</span> <span class="variable language_">module</span> === <span class="string">&#x27;object&#x27;</span>)</span><br><span class="line">                <span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">factory</span>();</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> define === <span class="string">&#x27;function&#x27;</span> &amp;&amp; define.<span class="property">amd</span>)</span><br><span class="line">                <span class="title function_">define</span>([], factory);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">exports</span> === <span class="string">&#x27;object&#x27;</span>)</span><br><span class="line">                <span class="built_in">exports</span>[<span class="string">&quot;POWERMODE&quot;</span>] = <span class="title function_">factory</span>();</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                root[<span class="string">&quot;POWERMODE&quot;</span>] = <span class="title function_">factory</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    )(<span class="variable language_">this</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">function</span>(<span class="params">modules</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> installedModules = &#123;&#125;;</span><br><span class="line">                <span class="keyword">function</span> <span class="title function_">__webpack_require__</span>(<span class="params">moduleId</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (installedModules[moduleId])</span><br><span class="line">                        <span class="keyword">return</span> installedModules[moduleId].<span class="property">exports</span>;</span><br><span class="line">                    <span class="keyword">var</span> <span class="variable language_">module</span> = installedModules[moduleId] = &#123;</span><br><span class="line">                        <span class="attr">exports</span>: &#123;&#125;,</span><br><span class="line">                        <span class="attr">id</span>: moduleId,</span><br><span class="line">                        <span class="attr">loaded</span>: <span class="literal">false</span></span><br><span class="line">                    &#125;;</span><br><span class="line">                    modules[moduleId].<span class="title function_">call</span>(<span class="variable language_">module</span>.<span class="property">exports</span>, <span class="variable language_">module</span>, <span class="variable language_">module</span>.<span class="property">exports</span>, __webpack_require__);</span><br><span class="line">                    <span class="variable language_">module</span>.<span class="property">loaded</span> = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">return</span> <span class="variable language_">module</span>.<span class="property">exports</span></span><br><span class="line">                &#125;</span><br><span class="line">                __webpack_require__.<span class="property">m</span> = modules;</span><br><span class="line">                __webpack_require__.<span class="property">c</span> = installedModules;</span><br><span class="line">                __webpack_require__.<span class="property">p</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="title function_">__webpack_require__</span>(<span class="number">0</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        )([(<span class="keyword">function</span>(<span class="params"><span class="variable language_">module</span>, <span class="built_in">exports</span>, __webpack_require__</span>) &#123;</span><br><span class="line">                <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line">                <span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>);</span><br><span class="line">                canvas.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span><br><span class="line">                canvas.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span><br><span class="line">                canvas.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&#x27;position:fixed;top:0;left:0;pointer-events:none;z-index:999999&#x27;</span>;</span><br><span class="line">                <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    canvas.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span><br><span class="line">                    canvas.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span></span><br><span class="line">                &#125;);</span><br><span class="line">                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(canvas);</span><br><span class="line">                <span class="keyword">var</span> context = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line">                <span class="keyword">var</span> particles = [];</span><br><span class="line">                <span class="keyword">var</span> particlePointer = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">var</span> rendering = <span class="literal">false</span>;</span><br><span class="line">                <span class="variable constant_">POWERMODE</span>.<span class="property">shake</span> = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">function</span> <span class="title function_">getRandom</span>(<span class="params">min, max</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">random</span>() * (max - min) + min</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">function</span> <span class="title function_">getColor</span>(<span class="params">el</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable constant_">POWERMODE</span>.<span class="property">colorful</span>) &#123;</span><br><span class="line">                        <span class="keyword">var</span> u = <span class="title function_">getRandom</span>(<span class="number">0</span>, <span class="number">360</span>);</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;hsla(&#x27;</span> + <span class="title function_">getRandom</span>(u - <span class="number">10</span>, u + <span class="number">10</span>) + <span class="string">&#x27;, 100%, &#x27;</span> + <span class="title function_">getRandom</span>(<span class="number">50</span>, <span class="number">80</span>) + <span class="string">&#x27;%, &#x27;</span> + <span class="number">1</span> + <span class="string">&#x27;)&#x27;</span></span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="variable language_">window</span>.<span class="title function_">getComputedStyle</span>(el).<span class="property">color</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">function</span> <span class="title function_">getCaret</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> el = <span class="variable language_">document</span>.<span class="property">activeElement</span>;</span><br><span class="line">                    <span class="keyword">var</span> bcr;</span><br><span class="line">                    <span class="keyword">if</span> (el.<span class="property">tagName</span> === <span class="string">&#x27;TEXTAREA&#x27;</span> || (el.<span class="property">tagName</span> === <span class="string">&#x27;INPUT&#x27;</span> &amp;&amp; el.<span class="title function_">getAttribute</span>(<span class="string">&#x27;type&#x27;</span>) === <span class="string">&#x27;text&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">var</span> offset = <span class="title function_">__webpack_require__</span>(<span class="number">1</span>)(el, el.<span class="property">selectionEnd</span>);</span><br><span class="line">                        bcr = el.<span class="title function_">getBoundingClientRect</span>();</span><br><span class="line">                        <span class="keyword">return</span> &#123;</span><br><span class="line">                            <span class="attr">x</span>: offset.<span class="property">left</span> + bcr.<span class="property">left</span>,</span><br><span class="line">                            <span class="attr">y</span>: offset.<span class="property">top</span> + bcr.<span class="property">top</span>,</span><br><span class="line">                            <span class="attr">color</span>: <span class="title function_">getColor</span>(el)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">var</span> selection = <span class="variable language_">window</span>.<span class="title function_">getSelection</span>();</span><br><span class="line">                    <span class="keyword">if</span> (selection.<span class="property">rangeCount</span>) &#123;</span><br><span class="line">                        <span class="keyword">var</span> range = selection.<span class="title function_">getRangeAt</span>(<span class="number">0</span>);</span><br><span class="line">                        <span class="keyword">var</span> startNode = range.<span class="property">startContainer</span>;</span><br><span class="line">                        <span class="keyword">if</span> (startNode.<span class="property">nodeType</span> === <span class="variable language_">document</span>.<span class="property">TEXT_NODE</span>) &#123;</span><br><span class="line">                            startNode = startNode.<span class="property">parentNode</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        bcr = range.<span class="title function_">getBoundingClientRect</span>();</span><br><span class="line">                        <span class="keyword">return</span> &#123;</span><br><span class="line">                            <span class="attr">x</span>: bcr.<span class="property">left</span>,</span><br><span class="line">                            <span class="attr">y</span>: bcr.<span class="property">top</span>,</span><br><span class="line">                            <span class="attr">color</span>: <span class="title function_">getColor</span>(startNode)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> &#123;</span><br><span class="line">                        <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">                        <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">                        <span class="attr">color</span>: <span class="string">&#x27;transparent&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">function</span> <span class="title function_">createParticle</span>(<span class="params">x, y, color</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> &#123;</span><br><span class="line">                        <span class="attr">x</span>: x,</span><br><span class="line">                        <span class="attr">y</span>: y,</span><br><span class="line">                        <span class="attr">alpha</span>: <span class="number">1</span>,</span><br><span class="line">                        <span class="attr">color</span>: color,</span><br><span class="line">                        <span class="attr">velocity</span>: &#123;</span><br><span class="line">                            <span class="attr">x</span>: -<span class="number">1</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">2</span>,</span><br><span class="line">                            <span class="attr">y</span>: -<span class="number">3.5</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">2</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">function</span> <span class="title function_">POWERMODE</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">var</span> caret = <span class="title function_">getCaret</span>();</span><br><span class="line">                        <span class="keyword">var</span> numParticles = <span class="number">5</span> + <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">10</span>);</span><br><span class="line">                        <span class="keyword">while</span> (numParticles--) &#123;</span><br><span class="line">                            particles[particlePointer] = <span class="title function_">createParticle</span>(caret.<span class="property">x</span>, caret.<span class="property">y</span>, caret.<span class="property">color</span>);</span><br><span class="line">                            particlePointer = (particlePointer + <span class="number">1</span>) % <span class="number">500</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">if</span> (<span class="variable constant_">POWERMODE</span>.<span class="property">shake</span>) &#123;</span><br><span class="line">                            <span class="keyword">var</span> intensity = <span class="number">1</span> + <span class="number">2</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>();</span><br><span class="line">                            <span class="keyword">var</span> x = intensity * (<span class="title class_">Math</span>.<span class="title function_">random</span>() &gt; <span class="number">0.5</span> ? -<span class="number">1</span> : <span class="number">1</span>);</span><br><span class="line">                            <span class="keyword">var</span> y = intensity * (<span class="title class_">Math</span>.<span class="title function_">random</span>() &gt; <span class="number">0.5</span> ? -<span class="number">1</span> : <span class="number">1</span>);</span><br><span class="line">                            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">marginLeft</span> = x + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">                            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">marginTop</span> = y + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">                            <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">marginLeft</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">                                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">marginTop</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">                            &#125;, <span class="number">75</span>)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (!rendering) &#123;</span><br><span class="line">                        <span class="title function_">requestAnimationFrame</span>(loop)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                ;<span class="variable constant_">POWERMODE</span>.<span class="property">colorful</span> = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">function</span> <span class="title function_">loop</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    rendering = <span class="literal">true</span>;</span><br><span class="line">                    context.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, canvas.<span class="property">width</span>, canvas.<span class="property">height</span>);</span><br><span class="line">                    <span class="keyword">var</span> rendered = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">var</span> rect = canvas.<span class="title function_">getBoundingClientRect</span>();</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; particles.<span class="property">length</span>; ++i) &#123;</span><br><span class="line">                        <span class="keyword">var</span> particle = particles[i];</span><br><span class="line">                        <span class="keyword">if</span> (particle.<span class="property">alpha</span> &lt;= <span class="number">0.1</span>)</span><br><span class="line">                            <span class="keyword">continue</span>;</span><br><span class="line">                        particle.<span class="property">velocity</span>.<span class="property">y</span> += <span class="number">0.075</span>;</span><br><span class="line">                        particle.<span class="property">x</span> += particle.<span class="property">velocity</span>.<span class="property">x</span>;</span><br><span class="line">                        particle.<span class="property">y</span> += particle.<span class="property">velocity</span>.<span class="property">y</span>;</span><br><span class="line">                        particle.<span class="property">alpha</span> *= <span class="number">0.96</span>;</span><br><span class="line">                        context.<span class="property">globalAlpha</span> = particle.<span class="property">alpha</span>;</span><br><span class="line">                        context.<span class="property">fillStyle</span> = particle.<span class="property">color</span>;</span><br><span class="line">                        context.<span class="title function_">fillRect</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(particle.<span class="property">x</span> - <span class="number">1.5</span>) - rect.<span class="property">left</span>, <span class="title class_">Math</span>.<span class="title function_">round</span>(particle.<span class="property">y</span> - <span class="number">1.5</span>) - rect.<span class="property">top</span>, <span class="number">3</span>, <span class="number">3</span>);</span><br><span class="line">                        rendered = <span class="literal">true</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (rendered) &#123;</span><br><span class="line">                        <span class="title function_">requestAnimationFrame</span>(loop)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        rendering = <span class="literal">false</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="variable language_">module</span>.<span class="property">exports</span> = <span class="variable constant_">POWERMODE</span></span><br><span class="line">            &#125;</span><br><span class="line">        ), (<span class="keyword">function</span>(<span class="params"><span class="variable language_">module</span>, <span class="built_in">exports</span></span>) &#123;</span><br><span class="line">                (<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> properties = [<span class="string">&#x27;direction&#x27;</span>, <span class="string">&#x27;boxSizing&#x27;</span>, <span class="string">&#x27;width&#x27;</span>, <span class="string">&#x27;height&#x27;</span>, <span class="string">&#x27;overflowX&#x27;</span>, <span class="string">&#x27;overflowY&#x27;</span>, <span class="string">&#x27;borderTopWidth&#x27;</span>, <span class="string">&#x27;borderRightWidth&#x27;</span>, <span class="string">&#x27;borderBottomWidth&#x27;</span>, <span class="string">&#x27;borderLeftWidth&#x27;</span>, <span class="string">&#x27;borderStyle&#x27;</span>, <span class="string">&#x27;paddingTop&#x27;</span>, <span class="string">&#x27;paddingRight&#x27;</span>, <span class="string">&#x27;paddingBottom&#x27;</span>, <span class="string">&#x27;paddingLeft&#x27;</span>, <span class="string">&#x27;fontStyle&#x27;</span>, <span class="string">&#x27;fontVariant&#x27;</span>, <span class="string">&#x27;fontWeight&#x27;</span>, <span class="string">&#x27;fontStretch&#x27;</span>, <span class="string">&#x27;fontSize&#x27;</span>, <span class="string">&#x27;fontSizeAdjust&#x27;</span>, <span class="string">&#x27;lineHeight&#x27;</span>, <span class="string">&#x27;fontFamily&#x27;</span>, <span class="string">&#x27;textAlign&#x27;</span>, <span class="string">&#x27;textTransform&#x27;</span>, <span class="string">&#x27;textIndent&#x27;</span>, <span class="string">&#x27;textDecoration&#x27;</span>, <span class="string">&#x27;letterSpacing&#x27;</span>, <span class="string">&#x27;wordSpacing&#x27;</span>, <span class="string">&#x27;tabSize&#x27;</span>, <span class="string">&#x27;MozTabSize&#x27;</span>];</span><br><span class="line">                    <span class="keyword">var</span> isFirefox = <span class="variable language_">window</span>.<span class="property">mozInnerScreenX</span> != <span class="literal">null</span>;</span><br><span class="line">                    <span class="keyword">function</span> <span class="title function_">getCaretCoordinates</span>(<span class="params">element, position, options</span>) &#123;</span><br><span class="line">                        <span class="keyword">var</span> debug = options &amp;&amp; options.<span class="property">debug</span> || <span class="literal">false</span>;</span><br><span class="line">                        <span class="keyword">if</span> (debug) &#123;</span><br><span class="line">                            <span class="keyword">var</span> el = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#input-textarea-caret-position-mirror-div&#x27;</span>);</span><br><span class="line">                            <span class="keyword">if</span> (el) &#123;</span><br><span class="line">                                el.<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(el)</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">                        div.<span class="property">id</span> = <span class="string">&#x27;input-textarea-caret-position-mirror-div&#x27;</span>;</span><br><span class="line">                        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(div);</span><br><span class="line">                        <span class="keyword">var</span> style = div.<span class="property">style</span>;</span><br><span class="line">                        <span class="keyword">var</span> computed = <span class="variable language_">window</span>.<span class="property">getComputedStyle</span> ? <span class="title function_">getComputedStyle</span>(element) : element.<span class="property">currentStyle</span>;</span><br><span class="line">                        style.<span class="property">whiteSpace</span> = <span class="string">&#x27;pre-wrap&#x27;</span>;</span><br><span class="line">                        <span class="keyword">if</span> (element.<span class="property">nodeName</span> !== <span class="string">&#x27;INPUT&#x27;</span>)</span><br><span class="line">                            style.<span class="property">wordWrap</span> = <span class="string">&#x27;break-word&#x27;</span>;</span><br><span class="line">                        style.<span class="property">position</span> = <span class="string">&#x27;absolute&#x27;</span>;</span><br><span class="line">                        <span class="keyword">if</span> (!debug)</span><br><span class="line">                            style.<span class="property">visibility</span> = <span class="string">&#x27;hidden&#x27;</span>;</span><br><span class="line">                        properties.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">prop</span>) &#123;</span><br><span class="line">                            style[prop] = computed[prop]</span><br><span class="line">                        &#125;);</span><br><span class="line">                        <span class="keyword">if</span> (isFirefox) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (element.<span class="property">scrollHeight</span> &gt; <span class="built_in">parseInt</span>(computed.<span class="property">height</span>))</span><br><span class="line">                                style.<span class="property">overflowY</span> = <span class="string">&#x27;scroll&#x27;</span></span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            style.<span class="property">overflow</span> = <span class="string">&#x27;hidden&#x27;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        div.<span class="property">textContent</span> = element.<span class="property">value</span>.<span class="title function_">substring</span>(<span class="number">0</span>, position);</span><br><span class="line">                        <span class="keyword">if</span> (element.<span class="property">nodeName</span> === <span class="string">&#x27;INPUT&#x27;</span>)</span><br><span class="line">                            div.<span class="property">textContent</span> = div.<span class="property">textContent</span>.<span class="title function_">replace</span>(<span class="regexp">/\s/g</span>, <span class="string">&quot;\u00a0&quot;</span>);</span><br><span class="line">                        <span class="keyword">var</span> span = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;span&#x27;</span>);</span><br><span class="line">                        span.<span class="property">textContent</span> = element.<span class="property">value</span>.<span class="title function_">substring</span>(position) || <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">                        div.<span class="title function_">appendChild</span>(span);</span><br><span class="line">                        <span class="keyword">var</span> coordinates = &#123;</span><br><span class="line">                            <span class="attr">top</span>: span.<span class="property">offsetTop</span> + <span class="built_in">parseInt</span>(computed[<span class="string">&#x27;borderTopWidth&#x27;</span>]),</span><br><span class="line">                            <span class="attr">left</span>: span.<span class="property">offsetLeft</span> + <span class="built_in">parseInt</span>(computed[<span class="string">&#x27;borderLeftWidth&#x27;</span>])</span><br><span class="line">                        &#125;;</span><br><span class="line">                        <span class="keyword">if</span> (debug) &#123;</span><br><span class="line">                            span.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;#aaa&#x27;</span></span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(div)</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">return</span> coordinates</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable language_">module</span> != <span class="string">&quot;undefined&quot;</span> &amp;&amp; <span class="keyword">typeof</span> <span class="variable language_">module</span>.<span class="property">exports</span> != <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">                        <span class="variable language_">module</span>.<span class="property">exports</span> = getCaretCoordinates</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="variable language_">window</span>.<span class="property">getCaretCoordinates</span> = getCaretCoordinates</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;())</span><br><span class="line">            &#125;</span><br><span class="line">        )])</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> sw=<span class="variable language_">window</span>.<span class="property">screen</span>.<span class="property">width</span>;</span><br><span class="line">    <span class="keyword">if</span> (sw&gt;<span class="number">1200</span>) &#123;</span><br><span class="line">        <span class="variable constant_">POWERMODE</span>.<span class="property">colorful</span>=<span class="literal">true</span>;</span><br><span class="line">        <span class="variable constant_">POWERMODE</span>.<span class="property">shake</span>=<span class="literal">true</span>;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;input&#x27;</span>,<span class="variable constant_">POWERMODE</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="Tampermonkey用户有福了"><a href="#Tampermonkey用户有福了" class="headerlink" title="Tampermonkey用户有福了!"></a>Tampermonkey用户有福了!</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==UserScript==</span></span><br><span class="line"><span class="comment">// @name         打字敲击特效</span></span><br><span class="line"><span class="comment">// @namespace    /</span></span><br><span class="line"><span class="comment">// @version      0.1</span></span><br><span class="line"><span class="comment">// @description  ?</span></span><br><span class="line"><span class="comment">// @author       CYF</span></span><br><span class="line"><span class="comment">// @match        *://*/*</span></span><br><span class="line"><span class="comment">// @grant        none</span></span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sw = <span class="variable language_">window</span>.<span class="property">screen</span>.<span class="property">width</span>;</span><br><span class="line"><span class="keyword">if</span> (sw &gt; <span class="number">1200</span>) &#123;</span><br><span class="line">    (<span class="keyword">function</span> <span class="title function_">webpackUniversalModuleDefinition</span>(<span class="params">root, factory</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">exports</span> === <span class="string">&#x27;object&#x27;</span> &amp;&amp; <span class="keyword">typeof</span> <span class="variable language_">module</span> === <span class="string">&#x27;object&#x27;</span>)</span><br><span class="line">                <span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">factory</span>();</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> define === <span class="string">&#x27;function&#x27;</span> &amp;&amp; define.<span class="property">amd</span>)</span><br><span class="line">                <span class="title function_">define</span>([], factory);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">exports</span> === <span class="string">&#x27;object&#x27;</span>)</span><br><span class="line">                <span class="built_in">exports</span>[<span class="string">&quot;POWERMODE&quot;</span>] = <span class="title function_">factory</span>();</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                root[<span class="string">&quot;POWERMODE&quot;</span>] = <span class="title function_">factory</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    )(<span class="variable language_">this</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">function</span>(<span class="params">modules</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> installedModules = &#123;&#125;;</span><br><span class="line">                <span class="keyword">function</span> <span class="title function_">__webpack_require__</span>(<span class="params">moduleId</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (installedModules[moduleId])</span><br><span class="line">                        <span class="keyword">return</span> installedModules[moduleId].<span class="property">exports</span>;</span><br><span class="line">                    <span class="keyword">var</span> <span class="variable language_">module</span> = installedModules[moduleId] = &#123;</span><br><span class="line">                        <span class="attr">exports</span>: &#123;&#125;,</span><br><span class="line">                        <span class="attr">id</span>: moduleId,</span><br><span class="line">                        <span class="attr">loaded</span>: <span class="literal">false</span></span><br><span class="line">                    &#125;;</span><br><span class="line">                    modules[moduleId].<span class="title function_">call</span>(<span class="variable language_">module</span>.<span class="property">exports</span>, <span class="variable language_">module</span>, <span class="variable language_">module</span>.<span class="property">exports</span>, __webpack_require__);</span><br><span class="line">                    <span class="variable language_">module</span>.<span class="property">loaded</span> = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">return</span> <span class="variable language_">module</span>.<span class="property">exports</span></span><br><span class="line">                &#125;</span><br><span class="line">                __webpack_require__.<span class="property">m</span> = modules;</span><br><span class="line">                __webpack_require__.<span class="property">c</span> = installedModules;</span><br><span class="line">                __webpack_require__.<span class="property">p</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="title function_">__webpack_require__</span>(<span class="number">0</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        )([(<span class="keyword">function</span>(<span class="params"><span class="variable language_">module</span>, <span class="built_in">exports</span>, __webpack_require__</span>) &#123;</span><br><span class="line">                <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line">                <span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>);</span><br><span class="line">                canvas.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span><br><span class="line">                canvas.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span><br><span class="line">                canvas.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&#x27;position:fixed;top:0;left:0;pointer-events:none;z-index:999999&#x27;</span>;</span><br><span class="line">                <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    canvas.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span><br><span class="line">                    canvas.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span></span><br><span class="line">                &#125;);</span><br><span class="line">                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(canvas);</span><br><span class="line">                <span class="keyword">var</span> context = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line">                <span class="keyword">var</span> particles = [];</span><br><span class="line">                <span class="keyword">var</span> particlePointer = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">var</span> rendering = <span class="literal">false</span>;</span><br><span class="line">                <span class="variable constant_">POWERMODE</span>.<span class="property">shake</span> = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">function</span> <span class="title function_">getRandom</span>(<span class="params">min, max</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">random</span>() * (max - min) + min</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">function</span> <span class="title function_">getColor</span>(<span class="params">el</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable constant_">POWERMODE</span>.<span class="property">colorful</span>) &#123;</span><br><span class="line">                        <span class="keyword">var</span> u = <span class="title function_">getRandom</span>(<span class="number">0</span>, <span class="number">360</span>);</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;hsla(&#x27;</span> + <span class="title function_">getRandom</span>(u - <span class="number">10</span>, u + <span class="number">10</span>) + <span class="string">&#x27;, 100%, &#x27;</span> + <span class="title function_">getRandom</span>(<span class="number">50</span>, <span class="number">80</span>) + <span class="string">&#x27;%, &#x27;</span> + <span class="number">1</span> + <span class="string">&#x27;)&#x27;</span></span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="variable language_">window</span>.<span class="title function_">getComputedStyle</span>(el).<span class="property">color</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">function</span> <span class="title function_">getCaret</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> el = <span class="variable language_">document</span>.<span class="property">activeElement</span>;</span><br><span class="line">                    <span class="keyword">var</span> bcr;</span><br><span class="line">                    <span class="keyword">if</span> (el.<span class="property">tagName</span> === <span class="string">&#x27;TEXTAREA&#x27;</span> || (el.<span class="property">tagName</span> === <span class="string">&#x27;INPUT&#x27;</span> &amp;&amp; el.<span class="title function_">getAttribute</span>(<span class="string">&#x27;type&#x27;</span>) === <span class="string">&#x27;text&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">var</span> offset = <span class="title function_">__webpack_require__</span>(<span class="number">1</span>)(el, el.<span class="property">selectionEnd</span>);</span><br><span class="line">                        bcr = el.<span class="title function_">getBoundingClientRect</span>();</span><br><span class="line">                        <span class="keyword">return</span> &#123;</span><br><span class="line">                            <span class="attr">x</span>: offset.<span class="property">left</span> + bcr.<span class="property">left</span>,</span><br><span class="line">                            <span class="attr">y</span>: offset.<span class="property">top</span> + bcr.<span class="property">top</span>,</span><br><span class="line">                            <span class="attr">color</span>: <span class="title function_">getColor</span>(el)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">var</span> selection = <span class="variable language_">window</span>.<span class="title function_">getSelection</span>();</span><br><span class="line">                    <span class="keyword">if</span> (selection.<span class="property">rangeCount</span>) &#123;</span><br><span class="line">                        <span class="keyword">var</span> range = selection.<span class="title function_">getRangeAt</span>(<span class="number">0</span>);</span><br><span class="line">                        <span class="keyword">var</span> startNode = range.<span class="property">startContainer</span>;</span><br><span class="line">                        <span class="keyword">if</span> (startNode.<span class="property">nodeType</span> === <span class="variable language_">document</span>.<span class="property">TEXT_NODE</span>) &#123;</span><br><span class="line">                            startNode = startNode.<span class="property">parentNode</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        bcr = range.<span class="title function_">getBoundingClientRect</span>();</span><br><span class="line">                        <span class="keyword">return</span> &#123;</span><br><span class="line">                            <span class="attr">x</span>: bcr.<span class="property">left</span>,</span><br><span class="line">                            <span class="attr">y</span>: bcr.<span class="property">top</span>,</span><br><span class="line">                            <span class="attr">color</span>: <span class="title function_">getColor</span>(startNode)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> &#123;</span><br><span class="line">                        <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">                        <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">                        <span class="attr">color</span>: <span class="string">&#x27;transparent&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">function</span> <span class="title function_">createParticle</span>(<span class="params">x, y, color</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> &#123;</span><br><span class="line">                        <span class="attr">x</span>: x,</span><br><span class="line">                        <span class="attr">y</span>: y,</span><br><span class="line">                        <span class="attr">alpha</span>: <span class="number">1</span>,</span><br><span class="line">                        <span class="attr">color</span>: color,</span><br><span class="line">                        <span class="attr">velocity</span>: &#123;</span><br><span class="line">                            <span class="attr">x</span>: -<span class="number">1</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">2</span>,</span><br><span class="line">                            <span class="attr">y</span>: -<span class="number">3.5</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">2</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">function</span> <span class="title function_">POWERMODE</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">var</span> caret = <span class="title function_">getCaret</span>();</span><br><span class="line">                        <span class="keyword">var</span> numParticles = <span class="number">5</span> + <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">10</span>);</span><br><span class="line">                        <span class="keyword">while</span> (numParticles--) &#123;</span><br><span class="line">                            particles[particlePointer] = <span class="title function_">createParticle</span>(caret.<span class="property">x</span>, caret.<span class="property">y</span>, caret.<span class="property">color</span>);</span><br><span class="line">                            particlePointer = (particlePointer + <span class="number">1</span>) % <span class="number">500</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">if</span> (<span class="variable constant_">POWERMODE</span>.<span class="property">shake</span>) &#123;</span><br><span class="line">                            <span class="keyword">var</span> intensity = <span class="number">1</span> + <span class="number">2</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>();</span><br><span class="line">                            <span class="keyword">var</span> x = intensity * (<span class="title class_">Math</span>.<span class="title function_">random</span>() &gt; <span class="number">0.5</span> ? -<span class="number">1</span> : <span class="number">1</span>);</span><br><span class="line">                            <span class="keyword">var</span> y = intensity * (<span class="title class_">Math</span>.<span class="title function_">random</span>() &gt; <span class="number">0.5</span> ? -<span class="number">1</span> : <span class="number">1</span>);</span><br><span class="line">                            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">marginLeft</span> = x + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">                            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">marginTop</span> = y + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">                            <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">marginLeft</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">                                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">marginTop</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">                            &#125;, <span class="number">75</span>)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (!rendering) &#123;</span><br><span class="line">                        <span class="title function_">requestAnimationFrame</span>(loop)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                ;<span class="variable constant_">POWERMODE</span>.<span class="property">colorful</span> = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">function</span> <span class="title function_">loop</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    rendering = <span class="literal">true</span>;</span><br><span class="line">                    context.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, canvas.<span class="property">width</span>, canvas.<span class="property">height</span>);</span><br><span class="line">                    <span class="keyword">var</span> rendered = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">var</span> rect = canvas.<span class="title function_">getBoundingClientRect</span>();</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; particles.<span class="property">length</span>; ++i) &#123;</span><br><span class="line">                        <span class="keyword">var</span> particle = particles[i];</span><br><span class="line">                        <span class="keyword">if</span> (particle.<span class="property">alpha</span> &lt;= <span class="number">0.1</span>)</span><br><span class="line">                            <span class="keyword">continue</span>;</span><br><span class="line">                        particle.<span class="property">velocity</span>.<span class="property">y</span> += <span class="number">0.075</span>;</span><br><span class="line">                        particle.<span class="property">x</span> += particle.<span class="property">velocity</span>.<span class="property">x</span>;</span><br><span class="line">                        particle.<span class="property">y</span> += particle.<span class="property">velocity</span>.<span class="property">y</span>;</span><br><span class="line">                        particle.<span class="property">alpha</span> *= <span class="number">0.96</span>;</span><br><span class="line">                        context.<span class="property">globalAlpha</span> = particle.<span class="property">alpha</span>;</span><br><span class="line">                        context.<span class="property">fillStyle</span> = particle.<span class="property">color</span>;</span><br><span class="line">                        context.<span class="title function_">fillRect</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(particle.<span class="property">x</span> - <span class="number">1.5</span>) - rect.<span class="property">left</span>, <span class="title class_">Math</span>.<span class="title function_">round</span>(particle.<span class="property">y</span> - <span class="number">1.5</span>) - rect.<span class="property">top</span>, <span class="number">3</span>, <span class="number">3</span>);</span><br><span class="line">                        rendered = <span class="literal">true</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (rendered) &#123;</span><br><span class="line">                        <span class="title function_">requestAnimationFrame</span>(loop)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        rendering = <span class="literal">false</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="variable language_">module</span>.<span class="property">exports</span> = <span class="variable constant_">POWERMODE</span></span><br><span class="line">            &#125;</span><br><span class="line">        ), (<span class="keyword">function</span>(<span class="params"><span class="variable language_">module</span>, <span class="built_in">exports</span></span>) &#123;</span><br><span class="line">                (<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> properties = [<span class="string">&#x27;direction&#x27;</span>, <span class="string">&#x27;boxSizing&#x27;</span>, <span class="string">&#x27;width&#x27;</span>, <span class="string">&#x27;height&#x27;</span>, <span class="string">&#x27;overflowX&#x27;</span>, <span class="string">&#x27;overflowY&#x27;</span>, <span class="string">&#x27;borderTopWidth&#x27;</span>, <span class="string">&#x27;borderRightWidth&#x27;</span>, <span class="string">&#x27;borderBottomWidth&#x27;</span>, <span class="string">&#x27;borderLeftWidth&#x27;</span>, <span class="string">&#x27;borderStyle&#x27;</span>, <span class="string">&#x27;paddingTop&#x27;</span>, <span class="string">&#x27;paddingRight&#x27;</span>, <span class="string">&#x27;paddingBottom&#x27;</span>, <span class="string">&#x27;paddingLeft&#x27;</span>, <span class="string">&#x27;fontStyle&#x27;</span>, <span class="string">&#x27;fontVariant&#x27;</span>, <span class="string">&#x27;fontWeight&#x27;</span>, <span class="string">&#x27;fontStretch&#x27;</span>, <span class="string">&#x27;fontSize&#x27;</span>, <span class="string">&#x27;fontSizeAdjust&#x27;</span>, <span class="string">&#x27;lineHeight&#x27;</span>, <span class="string">&#x27;fontFamily&#x27;</span>, <span class="string">&#x27;textAlign&#x27;</span>, <span class="string">&#x27;textTransform&#x27;</span>, <span class="string">&#x27;textIndent&#x27;</span>, <span class="string">&#x27;textDecoration&#x27;</span>, <span class="string">&#x27;letterSpacing&#x27;</span>, <span class="string">&#x27;wordSpacing&#x27;</span>, <span class="string">&#x27;tabSize&#x27;</span>, <span class="string">&#x27;MozTabSize&#x27;</span>];</span><br><span class="line">                    <span class="keyword">var</span> isFirefox = <span class="variable language_">window</span>.<span class="property">mozInnerScreenX</span> != <span class="literal">null</span>;</span><br><span class="line">                    <span class="keyword">function</span> <span class="title function_">getCaretCoordinates</span>(<span class="params">element, position, options</span>) &#123;</span><br><span class="line">                        <span class="keyword">var</span> debug = options &amp;&amp; options.<span class="property">debug</span> || <span class="literal">false</span>;</span><br><span class="line">                        <span class="keyword">if</span> (debug) &#123;</span><br><span class="line">                            <span class="keyword">var</span> el = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#input-textarea-caret-position-mirror-div&#x27;</span>);</span><br><span class="line">                            <span class="keyword">if</span> (el) &#123;</span><br><span class="line">                                el.<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(el)</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">                        div.<span class="property">id</span> = <span class="string">&#x27;input-textarea-caret-position-mirror-div&#x27;</span>;</span><br><span class="line">                        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(div);</span><br><span class="line">                        <span class="keyword">var</span> style = div.<span class="property">style</span>;</span><br><span class="line">                        <span class="keyword">var</span> computed = <span class="variable language_">window</span>.<span class="property">getComputedStyle</span> ? <span class="title function_">getComputedStyle</span>(element) : element.<span class="property">currentStyle</span>;</span><br><span class="line">                        style.<span class="property">whiteSpace</span> = <span class="string">&#x27;pre-wrap&#x27;</span>;</span><br><span class="line">                        <span class="keyword">if</span> (element.<span class="property">nodeName</span> !== <span class="string">&#x27;INPUT&#x27;</span>)</span><br><span class="line">                            style.<span class="property">wordWrap</span> = <span class="string">&#x27;break-word&#x27;</span>;</span><br><span class="line">                        style.<span class="property">position</span> = <span class="string">&#x27;absolute&#x27;</span>;</span><br><span class="line">                        <span class="keyword">if</span> (!debug)</span><br><span class="line">                            style.<span class="property">visibility</span> = <span class="string">&#x27;hidden&#x27;</span>;</span><br><span class="line">                        properties.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">prop</span>) &#123;</span><br><span class="line">                            style[prop] = computed[prop]</span><br><span class="line">                        &#125;);</span><br><span class="line">                        <span class="keyword">if</span> (isFirefox) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (element.<span class="property">scrollHeight</span> &gt; <span class="built_in">parseInt</span>(computed.<span class="property">height</span>))</span><br><span class="line">                                style.<span class="property">overflowY</span> = <span class="string">&#x27;scroll&#x27;</span></span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            style.<span class="property">overflow</span> = <span class="string">&#x27;hidden&#x27;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        div.<span class="property">textContent</span> = element.<span class="property">value</span>.<span class="title function_">substring</span>(<span class="number">0</span>, position);</span><br><span class="line">                        <span class="keyword">if</span> (element.<span class="property">nodeName</span> === <span class="string">&#x27;INPUT&#x27;</span>)</span><br><span class="line">                            div.<span class="property">textContent</span> = div.<span class="property">textContent</span>.<span class="title function_">replace</span>(<span class="regexp">/\s/g</span>, <span class="string">&quot;\u00a0&quot;</span>);</span><br><span class="line">                        <span class="keyword">var</span> span = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;span&#x27;</span>);</span><br><span class="line">                        span.<span class="property">textContent</span> = element.<span class="property">value</span>.<span class="title function_">substring</span>(position) || <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">                        div.<span class="title function_">appendChild</span>(span);</span><br><span class="line">                        <span class="keyword">var</span> coordinates = &#123;</span><br><span class="line">                            <span class="attr">top</span>: span.<span class="property">offsetTop</span> + <span class="built_in">parseInt</span>(computed[<span class="string">&#x27;borderTopWidth&#x27;</span>]),</span><br><span class="line">                            <span class="attr">left</span>: span.<span class="property">offsetLeft</span> + <span class="built_in">parseInt</span>(computed[<span class="string">&#x27;borderLeftWidth&#x27;</span>])</span><br><span class="line">                        &#125;;</span><br><span class="line">                        <span class="keyword">if</span> (debug) &#123;</span><br><span class="line">                            span.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;#aaa&#x27;</span></span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(div)</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">return</span> coordinates</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable language_">module</span> != <span class="string">&quot;undefined&quot;</span> &amp;&amp; <span class="keyword">typeof</span> <span class="variable language_">module</span>.<span class="property">exports</span> != <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">                        <span class="variable language_">module</span>.<span class="property">exports</span> = getCaretCoordinates</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="variable language_">window</span>.<span class="property">getCaretCoordinates</span> = getCaretCoordinates</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;())</span><br><span class="line">            &#125;</span><br><span class="line">        )])</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> sw=<span class="variable language_">window</span>.<span class="property">screen</span>.<span class="property">width</span>;</span><br><span class="line">    <span class="keyword">if</span> (sw&gt;<span class="number">1200</span>) &#123;</span><br><span class="line">        <span class="variable constant_">POWERMODE</span>.<span class="property">colorful</span>=<span class="literal">true</span>;</span><br><span class="line">        <span class="variable constant_">POWERMODE</span>.<span class="property">shake</span>=<span class="literal">true</span>;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;input&#x27;</span>,<span class="variable constant_">POWERMODE</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="修改提示"><a href="#修改提示" class="headerlink" title="修改提示:"></a>修改提示:</h1><p>最后几行:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sw=<span class="variable language_">window</span>.<span class="property">screen</span>.<span class="property">width</span>;</span><br><span class="line"><span class="keyword">if</span> (sw&gt;<span class="number">1200</span>) &#123;</span><br><span class="line">    <span class="variable constant_">POWERMODE</span>.<span class="property">colorful</span>=<span class="literal">true</span>; </span><br><span class="line">    <span class="variable constant_">POWERMODE</span>.<span class="property">shake</span>=<span class="literal">true</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;input&#x27;</span>,<span class="variable constant_">POWERMODE</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>中<code>POWERMODE.colorful=true;</code>指是否开启多彩颜色。而<code>POWERMODE.shake=true;</code>指是否开启屏幕震荡.<br>默认全部开启.</p><hr>]]></content>
      
      
      <categories>
          
          <category> 屌代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 特效 </tag>
            
            <tag> Tampermonkey </tag>
            
            <tag> 站长必备 </tag>
            
            <tag> 萌哒哒 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MarkDown语法详解（高级版）</title>
      <link href="/posts/6290e861/"/>
      <url>/posts/6290e861/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言:"></a>前言:</h1><blockquote><p><strong>注意</strong><br>文章内所有名字纯属虚构,如有雷同,纯属巧合!</p><p>这是第三篇MarkDown语法详解（高级版），如果你想要学习第二篇，请前往<a href="/2019/07/22/MarkDown语法详解（中级版）">MarkDown语法详解（中级版）</a>；如果你想要学习第一篇，请前往<a href="/2019/07/21/MarkDown语法详解（初级版）">MarkDown语法详解（初级版）</a></p><p><strong>警告</strong><br>本次授课相对来说比较难,请做好心理准备!</p></blockquote><h2 id="列表："><a href="#列表：" class="headerlink" title="列表："></a>列表：</h2><h3 id="正常方法"><a href="#正常方法" class="headerlink" title="正常方法:"></a>正常方法:</h3><p>Markdown 制作表格使用<code>|</code>来分隔不同的单元格，使用<code>-</code>来分隔表头和其他行。<br>语法格式如下：<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|  表头   | 表头  |</span><br><span class="line">|  ----  | ----  |</span><br><span class="line">| 单元格  | 单元格 |</span><br><span class="line">| 单元格  | 单元格 |</span><br></pre></td></tr></table></figure><br>|  表头   | 表头  |<br>|  ——  | ——  |<br>| 单元格  | 单元格 |<br>| 单元格  | 单元格 |</p><p>当然你也可以在表格中使用特殊符号如:<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">|人物|技能一|技能二|技能三|大招|</span><br><span class="line">|----|----|----|----|----|</span><br><span class="line">|刘老师|讲一个段子|加一张试卷|/|考一场试|</span><br><span class="line">|梁M法|抢体育课|<span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">yello</span>&gt;</span></span>抢电脑课<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span>|<span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">red</span>&gt;</span></span>抢美术课<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span>|<span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">green</span>&gt;</span></span>连续考试<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span>|</span><br><span class="line">|刘老师老婆|[<span class="string">哭</span>](<span class="link">https://baike.baidu.com/item/一哭二闹三上吊/838254</span>)|[<span class="string">闹</span>](<span class="link">https://baike.baidu.com/item/一哭二闹三上吊/838254</span>)|[<span class="string">上吊</span>](<span class="link">https://baike.baidu.com/item/一哭二闹三上吊/838254</span>)|向刘老师发射一张离婚协议书.对其造成5000点物理伤害|</span><br></pre></td></tr></table></figure><br>|人物|技能一|技能二|技能三|大招|<br>|——|——|——|——|——|<br>|刘老师|讲一个段子|加一张试卷|/|考一场试|<br>|梁M法|抢体育课|<font color=yello>抢电脑课</font>|<font color=red>抢美术课</font>|<font color=green>连续考试</font>|<br>|刘老师老婆|<a href="https://baike.baidu.com/item/一哭二闹三上吊/838254">哭</a>|<a href="https://baike.baidu.com/item/一哭二闹三上吊/838254">闹</a>|<a href="https://baike.baidu.com/item/一哭二闹三上吊/838254">上吊</a>|向刘老师发射一张离婚协议书.对其造成5000点物理伤害|</p><h3 id="对齐"><a href="#对齐" class="headerlink" title="对齐:"></a>对齐:</h3><p>我们可以设置表格的对齐方式：</p><ul><li>-: 设置内容和标题栏居右对齐。</li><li>:- 设置内容和标题栏居左对齐。</li><li>:-: 设置内容和标题栏居中对齐。<br>实例如下：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">| 左对齐 | 右对齐 | 居中对齐 |</span><br><span class="line">| :-----| ----: | :----: |</span><br><span class="line">| 单元格 | 单元格 | 单元格 |</span><br><span class="line">| 单元格 | 单元格 | 单元格 |</span><br></pre></td></tr></table></figure>| 左对齐 | 右对齐 | 居中对齐 |<br>| :——-| ——: | :——: |<br>| 单元格 | 单元格 | 单元格 |<br>| 单元格 | 单元格 | 单元格 |</li></ul><blockquote><p><strong>提示</strong>:<br>表格打完要空一行啊!</p></blockquote><h2 id="流程图"><a href="#流程图" class="headerlink" title="流程图:"></a>流程图:</h2><p>Hexo用户可能要额外安装插件: <code>npm install --save hexo-filter-flowchart</code></p><p>st=&gt;start: Start:&gt;<a href="http://www.google.com[blank">http://www.google.com[blank</a>] e=&gt;end:&gt;<a href="http://www.google.com">http://www.google.com</a> op1=&gt;operation: My Operation sub1=&gt;subroutine: My Subroutine cond=&gt;condition: Yes or No?:&gt;<a href="http://www.google.com">http://www.google.com</a> io=&gt;inputoutput: catch something… para=&gt;parallel: parallel tasks st-&gt;op1-&gt;cond cond(yes)-&gt;io-&gt;e cond(no)-&gt;para para(path1, bottom)-&gt;sub1(right)-&gt;op1 para(path2, top)-&gt;op1<br>具体写法前往<a href="http://flowchart.js.org">官网</a>了解更多.</p><h2 id="打出正常符号来"><a href="#打出正常符号来" class="headerlink" title="打出正常符号来:"></a>打出正常符号来:</h2><p>用<code>\</code>反斜杠来转义,转义表格如下:</p><div class="table-container"><table><thead><tr><th>你要打出的符号</th><th>你应该写出的符号</th></tr></thead><tbody><tr><td><code>!</code></td><td>`!</td></tr><tr><td>`</td><td>\`</td></tr><tr><td><code>#</code></td><td><code>\#</code></td></tr><tr><td><code>-</code></td><td><code>\-</code></td></tr><tr><td><code>&amp;</code></td><td><code>\&amp;</code></td></tr><tr><td><code>*</code></td><td><code>\*</code></td></tr><tr><td><code>+</code></td><td><code>\+</code></td></tr></tbody></table></div><p>等等等等只要以单个<code>\</code>放在需转义的单个字符前即可.</p><blockquote><p><strong>注意</strong><br>多字符转义需要一个一个添加<code>\</code>!<br>被`和```包裹起来的代码无需转义!</p></blockquote><h2 id="公式"><a href="#公式" class="headerlink" title="公式:"></a>公式:</h2><h3 id="单行公式"><a href="#单行公式" class="headerlink" title="单行公式:"></a>单行公式:</h3><p>用一个<code>$</code>来包裹单行代码(Hexo不支持)</p><h3 id="多行公式："><a href="#多行公式：" class="headerlink" title="多行公式："></a>多行公式：</h3><p>用两个<code>$</code>来包裹单行代码(Hexo不支持)</p><h2 id="Todo"><a href="#Todo" class="headerlink" title="Todo:"></a>Todo:</h2><p>用<code>[ ]</code>代替未完成的事项:</p><ul><li>[ ] 语文作业<br>用<code>[x]</code>代替已完成的事项:</li><li>[x] 科学作业</li></ul><blockquote><p><strong>注意</strong><br>如果你显示不出来….<br>说明你踩坑里去了!<br>在每一个<code>[ ]</code>和<code>[x]</code>前要加上<a href="/2019/07/22/MarkDown语法详解（中级版）/#无序排序">无序列表的符号</a>!!<br>反正我是踩坑里去了!</p></blockquote><h2 id="HTML标签："><a href="#HTML标签：" class="headerlink" title="HTML标签："></a>HTML标签：</h2><p>Markdown本身就能与html互相转换,比如:<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">baidu</span>](<span class="link">https://baidu.com</span>)</span><br></pre></td></tr></table></figure><br>转换成html:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://baidu.com&quot;</span>&gt;</span>baidu<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><br>不在 Markdown 涵盖范围之内的标签，都可以直接在文档里面用 HTML 撰写。<br>目前支持的 HTML 元素有：<code>&amp;amp;lt;kbd&amp;amp;gt; &amp;amp;lt;b&amp;amp;gt; &amp;amp;lt;i&amp;amp;gt; &amp;amp;lt;em&amp;amp;gt; &amp;amp;lt;sup&amp;amp;gt; &amp;amp;lt;sub&amp;amp;gt; &amp;amp;lt;br&amp;amp;gt;</code>等 ，如：<br>此处讲解几个不能被markdown使用的标签:</p><h3 id="按键符号"><a href="#按键符号" class="headerlink" title="按键符号:"></a>按键符号:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">按&amp;amp;lt;kbd&amp;amp;gt; &amp;amp;lt;b&amp;amp;gt; &amp;amp;lt;i&amp;amp;gt; &amp;amp;lt;em&amp;amp;gt; &amp;amp;lt;sup&amp;amp;gt; &amp;amp;lt;sub&amp;amp;gt; &amp;amp;lt;br&amp;amp;gt;就可以调出任务管理器了！</span><br></pre></td></tr></table></figure><p>按<kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>Esc</kbd>就可以调出任务管理器了！</p><h3 id="上标"><a href="#上标" class="headerlink" title="上标"></a>上标</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">我是正常的刘老师<span class="tag">&lt;<span class="name">sup</span>&gt;</span>我是上标刘老师<span class="tag">&lt;/<span class="name">sup</span>&gt;</span></span><br></pre></td></tr></table></figure><p>我是正常的刘老师<sup>我是上标刘老师</sup></p><h3 id="下标"><a href="#下标" class="headerlink" title="下标:"></a>下标:</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">我是正常的刘老师<span class="tag">&lt;<span class="name">sub</span>&gt;</span>我是下标刘老师<span class="tag">&lt;/<span class="name">sub</span>&gt;</span></span><br></pre></td></tr></table></figure><p>我是正常的刘老师<sub>我是下标刘老师</sub></p><h3 id="改字体颜色"><a href="#改字体颜色" class="headerlink" title="改字体颜色:"></a>改字体颜色:</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">#F7FE2E</span>&gt;</span>刘:我的心和我一样颜色<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br></pre></td></tr></table></figure><font color=#F7FE2E>刘:我的心和我一样颜色</font>### 改字体背景颜色:<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;background:#F7FE2E&quot;</span>&gt;</span>刘:我的心和背景一样颜色!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p style="background:#F7FE2E">刘:我的心和背景一样颜色!</p>### 改字体大小:<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span>=<span class="string">72</span>&gt;</span>刘:我的\*和我一样大<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br></pre></td></tr></table></figure><font size=72>刘:我的\*和我一样大</font><h2 id="js-css"><a href="#js-css" class="headerlink" title="js/css"></a>js/css</h2><p>与正常使用无差异</p><p>完</p><hr>]]></content>
      
      
      <categories>
          
          <category> 爱学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MarkDown </tag>
            
            <tag> 语法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS特效：鼠标单击出现爱心</title>
      <link href="/posts/7904cecd/"/>
      <url>/posts/7904cecd/</url>
      
        <content type="html"><![CDATA[<h1 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h1><p>用久了blog会感觉单调。<br>好吧确实挺单调的。<br>这次推一个爱心特效的代码，百度上都烂大街了，所以就不注明转载了！<br>其实用起来还是可以的，自我感觉良好啊。<br>不说了，直接贴演示：</p><h1 id="演示："><a href="#演示：" class="headerlink" title="演示："></a>演示：</h1><p><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/HEART.jpg" alt="演示" title="爱心特效"></p><h2 id="Javascript代码"><a href="#Javascript代码" class="headerlink" title="Javascript代码:"></a>Javascript代码:</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params"><span class="variable language_">window</span>,<span class="variable language_">document</span>,<span class="literal">undefined</span></span>)&#123;</span><br><span class="line"><span class="keyword">var</span> hearts = [];</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> = (<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> ||</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">webkitRequestAnimationFrame</span> ||</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">mozRequestAnimationFrame</span> ||</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">oRequestAnimationFrame</span> ||</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">msRequestAnimationFrame</span> ||</span><br><span class="line"><span class="keyword">function</span> (<span class="params">callback</span>)&#123;</span><br><span class="line"><span class="built_in">setTimeout</span>(callback,<span class="number">1000</span>/<span class="number">60</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="title function_">init</span>();</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">init</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="title function_">css</span>(<span class="string">&quot;.heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: &#x27;&#x27;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: absolute;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;&quot;</span>);</span><br><span class="line"><span class="title function_">attachEvent</span>();</span><br><span class="line"><span class="title function_">gameloop</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">gameloop</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;hearts.<span class="property">length</span>;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(hearts[i].<span class="property">alpha</span> &lt;=<span class="number">0</span>)&#123;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(hearts[i].<span class="property">el</span>);</span><br><span class="line">hearts.<span class="title function_">splice</span>(i,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">hearts[i].<span class="property">y</span>--;</span><br><span class="line">hearts[i].<span class="property">scale</span> += <span class="number">0.004</span>;</span><br><span class="line">hearts[i].<span class="property">alpha</span> -= <span class="number">0.013</span>;</span><br><span class="line">hearts[i].<span class="property">el</span>.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&quot;left:&quot;</span>+hearts[i].<span class="property">x</span>+<span class="string">&quot;px;top:&quot;</span>+hearts[i].<span class="property">y</span>+<span class="string">&quot;px;opacity:&quot;</span>+hearts[i].<span class="property">alpha</span>+<span class="string">&quot;;transform:scale(&quot;</span>+hearts[i].<span class="property">scale</span>+<span class="string">&quot;,&quot;</span>+hearts[i].<span class="property">scale</span>+<span class="string">&quot;) rotate(45deg);background:&quot;</span>+hearts[i].<span class="property">color</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">requestAnimationFrame</span>(gameloop);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">attachEvent</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">var</span> old = <span class="keyword">typeof</span> <span class="variable language_">window</span>.οnclick===<span class="string">&quot;function&quot;</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">onclick</span>;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params">event</span>)&#123;</span><br><span class="line">old &amp;&amp; <span class="title function_">old</span>();</span><br><span class="line"><span class="title function_">createHeart</span>(event);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createHeart</span>(<span class="params">event</span>)&#123;</span><br><span class="line"><span class="keyword">var</span> d = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">d.<span class="property">className</span> = <span class="string">&quot;heart&quot;</span>;</span><br><span class="line">hearts.<span class="title function_">push</span>(&#123;</span><br><span class="line">el : d,</span><br><span class="line">x : event.<span class="property">clientX</span> - <span class="number">5</span>,</span><br><span class="line">y : event.<span class="property">clientY</span> - <span class="number">5</span>,</span><br><span class="line">scale : <span class="number">1</span>,</span><br><span class="line">alpha : <span class="number">1</span>,</span><br><span class="line">color : <span class="title function_">randomColor</span>()</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(d);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">css</span>(<span class="params">css</span>)&#123;</span><br><span class="line"><span class="keyword">var</span> style = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;style&quot;</span>);</span><br><span class="line">style.<span class="property">type</span>=<span class="string">&quot;text/css&quot;</span>;</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">style.<span class="title function_">appendChild</span>(<span class="variable language_">document</span>.<span class="title function_">createTextNode</span>(css));</span><br><span class="line">&#125;<span class="keyword">catch</span>(ex)&#123;</span><br><span class="line">style.<span class="property">styleSheet</span>.<span class="property">cssText</span> = css;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;head&#x27;</span>)[<span class="number">0</span>].<span class="title function_">appendChild</span>(style);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">randomColor</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;rgb(&quot;</span>+(~~(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">255</span>))+<span class="string">&quot;,&quot;</span>+(~~(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">255</span>))+<span class="string">&quot;,&quot;</span>+(~~(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">255</span>))+<span class="string">&quot;)&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)(<span class="variable language_">window</span>,<span class="variable language_">document</span>);</span><br></pre></td></tr></table></figure><p>把它夹在<code>&lt;script&gt;</code>和<code>&lt;/script&gt;</code>就可以了.</p><h2 id="如果你想在所有界面都使用这个特效"><a href="#如果你想在所有界面都使用这个特效" class="headerlink" title="如果你想在所有界面都使用这个特效:"></a>如果你想在所有界面都使用这个特效:</h2><p>请先安装<a href="https://www.tampermonkey.net">Tampermonkey</a>,再安装一下代码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==UserScript==</span></span><br><span class="line"><span class="comment">// @name         鼠标单击心型特效</span></span><br><span class="line"><span class="comment">// @namespace    /</span></span><br><span class="line"><span class="comment">// @version      0.1</span></span><br><span class="line"><span class="comment">// @description  萌哒哒的特效</span></span><br><span class="line"><span class="comment">// @author       陈YF</span></span><br><span class="line"><span class="comment">// @match        *://*/*</span></span><br><span class="line"><span class="comment">// @grant        none</span></span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"><span class="variable language_">window</span>,<span class="variable language_">document</span>,<span class="literal">undefined</span></span>)&#123;</span><br><span class="line"><span class="keyword">var</span> hearts = [];</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> = (<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> ||</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">webkitRequestAnimationFrame</span> ||</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">mozRequestAnimationFrame</span> ||</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">oRequestAnimationFrame</span> ||</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">msRequestAnimationFrame</span> ||</span><br><span class="line"><span class="keyword">function</span> (<span class="params">callback</span>)&#123;</span><br><span class="line"><span class="built_in">setTimeout</span>(callback,<span class="number">1000</span>/<span class="number">60</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="title function_">init</span>();</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">init</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="title function_">css</span>(<span class="string">&quot;.heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: &#x27;&#x27;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: absolute;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;&quot;</span>);</span><br><span class="line"><span class="title function_">attachEvent</span>();</span><br><span class="line"><span class="title function_">gameloop</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">gameloop</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;hearts.<span class="property">length</span>;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(hearts[i].<span class="property">alpha</span> &lt;=<span class="number">0</span>)&#123;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(hearts[i].<span class="property">el</span>);</span><br><span class="line">hearts.<span class="title function_">splice</span>(i,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">hearts[i].<span class="property">y</span>--;</span><br><span class="line">hearts[i].<span class="property">scale</span> += <span class="number">0.004</span>;</span><br><span class="line">hearts[i].<span class="property">alpha</span> -= <span class="number">0.013</span>;</span><br><span class="line">hearts[i].<span class="property">el</span>.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&quot;left:&quot;</span>+hearts[i].<span class="property">x</span>+<span class="string">&quot;px;top:&quot;</span>+hearts[i].<span class="property">y</span>+<span class="string">&quot;px;opacity:&quot;</span>+hearts[i].<span class="property">alpha</span>+<span class="string">&quot;;transform:scale(&quot;</span>+hearts[i].<span class="property">scale</span>+<span class="string">&quot;,&quot;</span>+hearts[i].<span class="property">scale</span>+<span class="string">&quot;) rotate(45deg);background:&quot;</span>+hearts[i].<span class="property">color</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">requestAnimationFrame</span>(gameloop);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">attachEvent</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">var</span> old = <span class="keyword">typeof</span> <span class="variable language_">window</span>.οnclick===<span class="string">&quot;function&quot;</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">onclick</span>;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params">event</span>)&#123;</span><br><span class="line">old &amp;&amp; <span class="title function_">old</span>();</span><br><span class="line"><span class="title function_">createHeart</span>(event);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createHeart</span>(<span class="params">event</span>)&#123;</span><br><span class="line"><span class="keyword">var</span> d = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">d.<span class="property">className</span> = <span class="string">&quot;heart&quot;</span>;</span><br><span class="line">hearts.<span class="title function_">push</span>(&#123;</span><br><span class="line">el : d,</span><br><span class="line">x : event.<span class="property">clientX</span> - <span class="number">5</span>,</span><br><span class="line">y : event.<span class="property">clientY</span> - <span class="number">5</span>,</span><br><span class="line">scale : <span class="number">1</span>,</span><br><span class="line">alpha : <span class="number">1</span>,</span><br><span class="line">color : <span class="title function_">randomColor</span>()</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(d);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">css</span>(<span class="params">css</span>)&#123;</span><br><span class="line"><span class="keyword">var</span> style = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;style&quot;</span>);</span><br><span class="line">style.<span class="property">type</span>=<span class="string">&quot;text/css&quot;</span>;</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">style.<span class="title function_">appendChild</span>(<span class="variable language_">document</span>.<span class="title function_">createTextNode</span>(css));</span><br><span class="line">&#125;<span class="keyword">catch</span>(ex)&#123;</span><br><span class="line">style.<span class="property">styleSheet</span>.<span class="property">cssText</span> = css;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;head&#x27;</span>)[<span class="number">0</span>].<span class="title function_">appendChild</span>(style);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">randomColor</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;rgb(&quot;</span>+(~~(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">255</span>))+<span class="string">&quot;,&quot;</span>+(~~(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">255</span>))+<span class="string">&quot;,&quot;</span>+(~~(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">255</span>))+<span class="string">&quot;)&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)(<span class="variable language_">window</span>,<span class="variable language_">document</span>);</span><br></pre></td></tr></table></figure></p><hr>]]></content>
      
      
      <categories>
          
          <category> 屌代码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> 特效 </tag>
            
            <tag> Tampermonkey </tag>
            
            <tag> 站长必备 </tag>
            
            <tag> 萌哒哒 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MarkDown语法详解（中级版）</title>
      <link href="/posts/45f10239/"/>
      <url>/posts/45f10239/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言:"></a>前言:</h1><blockquote><p><strong>注意</strong><br>文章内所有名字纯属虚构,如有雷同,纯属巧合!</p><p>这是第二篇MarkDown语法详解（中级版），如果你想要学习第一篇，请前往<a href="/2019/07/21/MarkDown语法详解（初级版）">MarkDown语法详解（初级版）</a></p></blockquote><p>下面开始授课:</p><h2 id="超链接"><a href="#超链接" class="headerlink" title="超链接:"></a>超链接:</h2><p>格式如下:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[MarkDown语法详解（初级版）](/2019/07/21/MarkDown语法详解（初级版）)</span><br></pre></td></tr></table></figure></p><p>你会得到:<br><a href="/2019/07/21/MarkDown语法详解（初级版）">MarkDown语法详解（初级版）</a><br>第一个方括号内填标题,后一个圆括号内写链接.<br>这个比较简单.<br>当然你也可以这样：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;https://baidu.com&gt;</span><br></pre></td></tr></table></figure><br>结果是：<br><a href="https://baidu.com">https://baidu.com</a></p><h2 id="图片"><a href="#图片" class="headerlink" title="图片:"></a>图片:</h2><h3 id="一种方法"><a href="#一种方法" class="headerlink" title="一种方法:"></a>一种方法:</h3><p>格式如下:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![图片标题](图片地址 &quot;图片ALT&quot;)</span><br></pre></td></tr></table></figure></p><p>其中<code>图片alt</code>可不填.图片地址可以是绝对地址,也可以是相对地址.</p><p>例如:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![刘老师](https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/LLS.jpg &quot;刘老师真容&quot;)</span><br></pre></td></tr></table></figure><br>是相对地址,会得到:<br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/LLS.jpg" alt="刘老师" title="刘老师真容"><br>（这么帅气的脸只舍得打半边马赛克）<br>而<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![刘老师](https://blog.cyfblog.gahttps://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/LLS.jpg &quot;刘老师真容&quot;)</span><br></pre></td></tr></table></figure><br>是绝对地址,会得到:<br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/LLS.jpg" alt="刘老师" title="刘老师真容"></p><p>其实结果是一样的.</p><h3 id="另一种方法"><a href="#另一种方法" class="headerlink" title="另一种方法:"></a>另一种方法:</h3><p>当然，你也可以像网址那样对图片网址使用变量:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">这个链接用 1 作为网址变量 [刘老师真容][1].</span><br><span class="line">然后在文档的结尾位变量赋值（网址）</span><br><span class="line"></span><br><span class="line">[1]: https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/LLS.jpg</span><br></pre></td></tr></table></figure><br>会得到:<br>这个链接用 1 作为网址变量 <a href="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/LLS.jpg">刘老师真容</a>.<br>然后在文档的结尾位变量赋值（网址）</p><blockquote><p><strong>提示</strong><br>如果你对大小比较在意,可以使用html语法来写.具体写法在高级玩法写出.</p></blockquote><h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><h3 id="无序排序"><a href="#无序排序" class="headerlink" title="无序排序:"></a>无序排序:</h3><p>使用<code>+</code>或<code>-</code>或<code>*</code>来做首标题<br>实例如下:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+ 科学作业:无</span><br><span class="line">+ 语文作业:翻倍</span><br><span class="line">+ 数学作业:超级加倍</span><br></pre></td></tr></table></figure><br>会得到:</p><ul><li>科学作业:无</li><li>语文作业:翻倍</li><li>数学作业:超级加倍</li></ul><blockquote><p><strong>注意</strong><br>无论是<code>+</code>或<code>-</code>或<code>*</code>,使用时与要列表的文字空一格空格!</p></blockquote><h3 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表:"></a>有序列表:</h3><p>使用<code>数字</code>+<code>.</code>+<code>空格</code>+<code>文字</code>代替,如:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 写试卷</span><br><span class="line">2. 写两张试卷</span><br><span class="line">3. 写三张试卷</span><br></pre></td></tr></table></figure><br>会得到:</p><ol><li>写试卷</li><li>写两张试卷</li><li>写三张试卷</li></ol><blockquote><p><strong>警告</strong><br>一定要加空格!</p></blockquote><h2 id="列表镶嵌"><a href="#列表镶嵌" class="headerlink" title="列表镶嵌:"></a>列表镶嵌:</h2><p>如实例:在第二列前加上<kbd>Tab</kbd>一个即可!<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">+ 一级无序列表内容</span><br><span class="line">+ 二级无序列表内容</span><br><span class="line">+ 二级无序列表内容</span><br><span class="line">+ 二级无序列表内容</span><br><span class="line"></span><br><span class="line">- 一级无序列表内容</span><br><span class="line">1. 二级有序列表内容</span><br><span class="line">2. 二级有序列表内容</span><br><span class="line">3. 二级有序列表内容</span><br><span class="line"></span><br><span class="line">1. 一级有序列表内容</span><br><span class="line">+ 二级无序列表内容</span><br><span class="line">+ 二级无序列表内容</span><br><span class="line">+ 二级无序列表内容</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1. 一级有序列表内容</span><br><span class="line">1. 二级有序列表内容</span><br><span class="line">2. 二级有序列表内容</span><br><span class="line">3. 二级有序列表内容</span><br></pre></td></tr></table></figure><br>会得到:</p><ul><li>一级无序列表内容<ul><li>二级无序列表内容</li><li>二级无序列表内容</li><li>二级无序列表内容</li></ul></li></ul><ul><li>一级无序列表内容<ol><li>二级有序列表内容</li><li>二级有序列表内容</li><li>二级有序列表内容</li></ol></li></ul><ol><li>一级有序列表内容<ul><li>二级无序列表内容</li><li>二级无序列表内容</li><li>二级无序列表内容</li></ul></li></ol><ol><li>一级有序列表内容<ol><li>二级有序列表内容</li><li>二级有序列表内容</li><li>二级有序列表内容</li></ol></li></ol><h2 id="分隔符："><a href="#分隔符：" class="headerlink" title="分隔符："></a>分隔符：</h2><p>以<code>- - -</code>为例子:<br>中级教程完.</p><hr>]]></content>
      
      
      <categories>
          
          <category> 爱学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MarkDown </tag>
            
            <tag> 语法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MarkDown语法详解（初级版）</title>
      <link href="/posts/9ecd8772/"/>
      <url>/posts/9ecd8772/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言:"></a>前言:</h1><h2 id="什么是MarkDown"><a href="#什么是MarkDown" class="headerlink" title="什么是MarkDown?"></a>什么是MarkDown?</h2><p>Markdown 是一种轻量级标记语言，它允许人们使用易读易写的纯文本格式编写文档。<br>Markdown 语言在 2004 由约翰·格鲁伯（英语：John Gruber）创建。<br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/JG.jpg" alt="约翰·格鲁伯" title="约翰·格鲁伯"><br>Markdown 编写的文档可以导出 HTML 、Word、图像、PDF、Epub 等多种格式的文档。<br>Markdown 编写的文档后缀为 .md, .markdown。<br>由于Markdown的轻量化、易读易写特性，并且对于图片，图表、数学式都有支持，当前许多网站都广泛使用 Markdown 来撰写帮助文档或是用于论坛上发表消息。例如：GitHub、reddit、Diaspora、Stack Exchange、OpenStreetMap 、SourceForge等。甚至Markdown能被使用来撰写电子书。因此,很多博客把它当作语法来写,比如WordPress,Hexo,或者是Typecho.<br>常见的编辑器有<a href="https://typora.io/">Typora</a>,还有萌萌哒编辑器<a href="https://yosoro.coolecho.net/">Yosoro</a><br>下面开始讲</p><h1 id="语法"><a href="#语法" class="headerlink" title="语法:"></a>语法:</h1><blockquote><p><strong>注意</strong><br>文章内所有名字纯属虚构,如有雷同,纯属巧合!</p></blockquote><h2 id="文字"><a href="#文字" class="headerlink" title="文字"></a>文字</h2><p>MarkDown的文字直接书写，与正常无区别<br>书写<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">我是刘老师.</span><br></pre></td></tr></table></figure></p><p>会得到:</p><p>我是刘老师.</p><h2 id="标题："><a href="#标题：" class="headerlink" title="标题："></a>标题：</h2><p>基本上标题分两种：</p><h3 id="分隔符标题："><a href="#分隔符标题：" class="headerlink" title="分隔符标题："></a>分隔符标题：</h3><p>以<code>-</code>和<code>=</code>分隔成一级和二级标题:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">我是一级刘老师</span><br><span class="line">---</span><br><span class="line">我是二级刘老师</span><br><span class="line">===</span><br></pre></td></tr></table></figure><br>会得到:</p><h2 id="我是一级刘老师"><a href="#我是一级刘老师" class="headerlink" title="我是一级刘老师"></a>我是一级刘老师</h2><h1 id="我是二级刘老师"><a href="#我是二级刘老师" class="headerlink" title="我是二级刘老师"></a>我是二级刘老师</h1><blockquote><p><strong>注意:</strong><br>无论是<code>-</code>还是<code>=</code>,只要三个及以上即可!</p></blockquote><h3 id="字符标题"><a href="#字符标题" class="headerlink" title="字符标题:"></a>字符标题:</h3><p>以<code>#</code>代替标识,<code>#</code>越多`,标题级别越低:<br>例子:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 我是一级刘老师</span><br><span class="line">## 我是二级刘老师</span><br><span class="line">### 我是三级刘老师</span><br><span class="line">#### 我是四级刘老师</span><br><span class="line">##### 我是五级刘老师</span><br><span class="line">###### 我是六级刘老师</span><br></pre></td></tr></table></figure><br>会得到:</p><h1 id="我是一级刘老师-1"><a href="#我是一级刘老师-1" class="headerlink" title="我是一级刘老师"></a>我是一级刘老师</h1><h2 id="我是二级刘老师-1"><a href="#我是二级刘老师-1" class="headerlink" title="我是二级刘老师"></a>我是二级刘老师</h2><h3 id="我是三级刘老师"><a href="#我是三级刘老师" class="headerlink" title="我是三级刘老师"></a>我是三级刘老师</h3><h4 id="我是四级刘老师"><a href="#我是四级刘老师" class="headerlink" title="我是四级刘老师"></a>我是四级刘老师</h4><h5 id="我是五级刘老师"><a href="#我是五级刘老师" class="headerlink" title="我是五级刘老师"></a>我是五级刘老师</h5><h6 id="我是六级刘老师"><a href="#我是六级刘老师" class="headerlink" title="我是六级刘老师"></a>我是六级刘老师</h6><blockquote><p><strong>注意</strong><br>以#来做标题不得超过6个！</p><h2 id="段落"><a href="#段落" class="headerlink" title="段落:"></a>段落:</h2><p>MarkDown的段落直接换行，与正常无区别.</p></blockquote><h2 id="字体"><a href="#字体" class="headerlink" title="字体:"></a>字体:</h2><p>MarkDown可用字体如下:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">*我是斜着的刘老师*</span><br><span class="line">_我也是斜着的刘老师_</span><br><span class="line">**我是粗粗的刘老师**</span><br><span class="line">__我也是粗粗的刘老师__</span><br><span class="line">***我是又粗又斜的刘老师***</span><br><span class="line">___我也是又粗又斜的刘老师___</span><br></pre></td></tr></table></figure><br>你会得到:<br><em>我是斜着的刘老师</em><br><em>我也是斜着的刘老师</em><br><strong>我是粗粗的刘老师</strong><br><strong>我也是粗粗的刘老师</strong><br><strong><em>我是又粗又斜的刘老师</em></strong><br><strong><em>我也是又粗又斜的刘老师</em></strong></p><h2 id="删除线"><a href="#删除线" class="headerlink" title="删除线"></a>删除线</h2><p>用<code>~~</code>把要删除的文字包起来<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">刘老师:今天试卷加~~三张~~ 四张!</span><br></pre></td></tr></table></figure><br>会得到:</p><p>刘老师:今天试卷加<del>三张</del> 四张!</p><h2 id="引用-有时可做警告"><a href="#引用-有时可做警告" class="headerlink" title="引用(有时可做警告)"></a>引用(有时可做警告)</h2><p>语法:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; 刘：YRWS,ZSWF</span><br></pre></td></tr></table></figure><br>得到:</p><blockquote><p>刘：YRWS,ZSWF</p></blockquote><p>还可以多级引用:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; 我是被引用的刘老师.</span><br><span class="line">&gt;&gt; 我是被引用的刘老师.</span><br><span class="line">&gt;&gt;&gt; 我是被引用的刘老师.</span><br><span class="line">&gt;&gt;&gt;&gt; 我是被引用的刘老师.</span><br><span class="line">&gt;&gt;&gt;&gt;&gt; 我是被引用的刘老师.</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt; 我是被引用的刘老师.</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; 我是被引用的刘老师.</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 我是被引用的刘老师.</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 我是被引用的刘老师.</span><br></pre></td></tr></table></figure></p><blockquote><p>我是被引用的刘老师.</p><blockquote><p>我是被引用的刘老师.</p><blockquote><p>我是被引用的刘老师.</p><blockquote><p>我是被引用的刘老师.</p><blockquote><p>我是被引用的刘老师.</p><blockquote><p>我是被引用的刘老师.</p><blockquote><p>我是被引用的刘老师.</p><blockquote><p>我是被引用的刘老师.</p><blockquote><p>我是被引用的刘老师.</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><p>好像可以一直下去</p><blockquote><p><strong>注意</strong><br>如果你想要跳出引用,请换行再写!</p></blockquote><h2 id="代码"><a href="#代码" class="headerlink" title="代码:"></a>代码:</h2><h3 id="单行代码"><a href="#单行代码" class="headerlink" title="单行代码:"></a>单行代码:</h3><p>用`包裹</p><h3 id="代码块"><a href="#代码块" class="headerlink" title="代码块:"></a>代码块:</h3><p>用```把代码包裹<br>此处不好举例,不再举例了.</p><blockquote><p><strong>提示</strong><br>在```后加上代码类型可以给予代码高亮欧!</p></blockquote><p>初级教程完,接下来请去中级教程.</p><hr>]]></content>
      
      
      <categories>
          
          <category> 爱学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MarkDown </tag>
            
            <tag> 语法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>国内加快NPM下载速度</title>
      <link href="/posts/eb4a371e/"/>
      <url>/posts/eb4a371e/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>大家都知道，在国内下载Github上文件是什么情景。<br>对＜（＾－＾）＞，就是那个8kb/s的结果！<br>这是因为<code>不为人知的秘密</code>所造成的。<br>同样，在NPM下载中也是很痛苦的。<br>以下载cnpm为例：<br>在命令提示符中键入<code>npm install -g cnpm</code>,结果可能是这样:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\CYF&gt;npm install -g cnpm</span><br><span class="line">[...................]fetchMetadata: sill resolveWithNewModule cnpm@6.1.0 checking installable status</span><br></pre></td></tr></table></figure></p><p>就这样卡半天。<br>5分钟后:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\CYF\AppData\Roaming\npm\cnpm -&gt; C:\Users\CYF\AppData\Roaming\npm\node_modules\cnpm\bin\cnpm</span><br><span class="line">+ cnpm@6.1.0</span><br><span class="line">added 691 packages from 924 contributors in 308.39s</span><br></pre></td></tr></table></figure><p>308.39秒啊啊啊啊啊,这到底卡了多久啊!</p><h1 id="如何解决？"><a href="#如何解决？" class="headerlink" title="如何解决？"></a>如何解决？</h1><h2 id="方法一："><a href="#方法一：" class="headerlink" title="方法一："></a>方法一：</h2><p>在每行npm后加上<a href="registry.npm.taobao.org">npm淘宝镜像</a>(不是那个淘宝),加上<code>--registry=https://registry.npm.taobao.org</code>.<br>如<code>npm install -g cnpm</code>变成<code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code><br>那样能快很多。先卸载cnpm：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall cnpm</span><br></pre></td></tr></table></figure><br>会得到:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.9 (node_modules\fsevents):</span><br><span class="line">npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.9: wanted &#123;&quot;os&quot;:&quot;darwin&quot;,&quot;arch&quot;:&quot;any&quot;&#125; (current: &#123;&quot;os&quot;:&quot;win32&quot;,&quot;arch&quot;:&quot;x64&quot;&#125;)</span><br><span class="line">audited 9067 packages in 26.562s</span><br><span class="line">found 0 vulnerabilities</span><br></pre></td></tr></table></figure><br>呃呃呃,卸载还比安装快.<br>再安装:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\CYF\AppData\Roaming\npm\cnpm -&gt; C:\Users\CYF\AppData\Roaming\npm\node_modules\cnpm\bin\cnpm</span><br><span class="line">+ cnpm@6.1.0</span><br><span class="line">added 691 packages from 924 contributors in 97.818s</span><br></pre></td></tr></table></figure></p><h2 id="方法二："><a href="#方法二：" class="headerlink" title="方法二："></a>方法二：</h2><p>直接使用<code>cnpm</code>代替<code>npm</code>.<br>如<code>npm install -g cnpm</code>变成<code>cnpm install -g cnpm</code><br>原理与方法一相同，不再阐述。</p><h2 id="方法三："><a href="#方法三：" class="headerlink" title="方法三："></a>方法三：</h2><p>可以用全局代理软件如<code>Proxifier</code>给<code>npm</code>挂代理,使他绕过<code>不为人知的秘密</code>,加快下载速度.<br>但不建议,因为这种方法麻烦,用方法一二完全可以代替.</p><h1 id="F-amp-Q："><a href="#F-amp-Q：" class="headerlink" title="F&amp;Q："></a>F&amp;Q：</h1><h2 id="Q：镜像站是什么？"><a href="#Q：镜像站是什么？" class="headerlink" title="Q：镜像站是什么？"></a>Q：镜像站是什么？</h2><h2 id="F：所谓镜像站，就是把你现有的网站放在另外一个地方的服务器上，当然，这个服务器既可是你购置而托管的，又可是虚拟的服务器。如果你把网页放在两个以上不同国家或地区的服务器上，那就说明你已为你的网站建立了多重镜像站，这样可以加快你的网站的访问速度，称之为“多重镜像站”。镜像站就跟镜子一样。一般是个人网站的站长为自己的站做一个备份，也就是说，一个站由于流量或其它原因访问不到时，人们可以去另一个一模一样的站看。这个站还可以起到分流，减少服务器压力的作用。不过，这些都是由于个人网站的服务器不能接受太多的访问量而采取的办法。商业网站一般不用这样的办法。因为用户要记两个域名，内容要上传两次，要随时保持两个地方一致，内容一多非常麻烦。而淘宝npm的服务器构建在国内，加快了访问速度。（部分摘自百度百科：镜像站）"><a href="#F：所谓镜像站，就是把你现有的网站放在另外一个地方的服务器上，当然，这个服务器既可是你购置而托管的，又可是虚拟的服务器。如果你把网页放在两个以上不同国家或地区的服务器上，那就说明你已为你的网站建立了多重镜像站，这样可以加快你的网站的访问速度，称之为“多重镜像站”。镜像站就跟镜子一样。一般是个人网站的站长为自己的站做一个备份，也就是说，一个站由于流量或其它原因访问不到时，人们可以去另一个一模一样的站看。这个站还可以起到分流，减少服务器压力的作用。不过，这些都是由于个人网站的服务器不能接受太多的访问量而采取的办法。商业网站一般不用这样的办法。因为用户要记两个域名，内容要上传两次，要随时保持两个地方一致，内容一多非常麻烦。而淘宝npm的服务器构建在国内，加快了访问速度。（部分摘自百度百科：镜像站）" class="headerlink" title="F：所谓镜像站，就是把你现有的网站放在另外一个地方的服务器上，当然，这个服务器既可是你购置而托管的，又可是虚拟的服务器。如果你把网页放在两个以上不同国家或地区的服务器上，那就说明你已为你的网站建立了多重镜像站，这样可以加快你的网站的访问速度，称之为“多重镜像站”。镜像站就跟镜子一样。一般是个人网站的站长为自己的站做一个备份，也就是说，一个站由于流量或其它原因访问不到时，人们可以去另一个一模一样的站看。这个站还可以起到分流，减少服务器压力的作用。不过，这些都是由于个人网站的服务器不能接受太多的访问量而采取的办法。商业网站一般不用这样的办法。因为用户要记两个域名，内容要上传两次，要随时保持两个地方一致，内容一多非常麻烦。而淘宝npm的服务器构建在国内，加快了访问速度。（部分摘自百度百科：镜像站）"></a>F：所谓镜像站，就是把你现有的网站放在另外一个地方的服务器上，当然，这个服务器既可是你购置而托管的，又可是虚拟的服务器。如果你把网页放在两个以上不同国家或地区的服务器上，那就说明你已为你的网站建立了多重镜像站，这样可以加快你的网站的访问速度，称之为“多重镜像站”。镜像站就跟镜子一样。一般是个人网站的站长为自己的站做一个备份，也就是说，一个站由于流量或其它原因访问不到时，人们可以去另一个一模一样的站看。这个站还可以起到分流，减少服务器压力的作用。不过，这些都是由于个人网站的服务器不能接受太多的访问量而采取的办法。商业网站一般不用这样的办法。因为用户要记两个域名，内容要上传两次，要随时保持两个地方一致，内容一多非常麻烦。而淘宝npm的服务器构建在国内，加快了访问速度。（部分摘自百度百科：镜像站）</h2><h2 id="Q：如果镜像站上没有npm的文件，怎么办？"><a href="#Q：如果镜像站上没有npm的文件，怎么办？" class="headerlink" title="Q：如果镜像站上没有npm的文件，怎么办？"></a>Q：如果镜像站上没有npm的文件，怎么办？</h2><h2 id="F：从-registry-npm-taobao-org-安装所有模块-当安装的时候发现安装的模块还没有同步过来-淘宝-NPM-会自动在后台进行同步-并且会让你从官方-NPM-registry-npmjs-org-进行安装-下次你再安装这个模块的时候-就会直接从-淘宝-NPM-安装了"><a href="#F：从-registry-npm-taobao-org-安装所有模块-当安装的时候发现安装的模块还没有同步过来-淘宝-NPM-会自动在后台进行同步-并且会让你从官方-NPM-registry-npmjs-org-进行安装-下次你再安装这个模块的时候-就会直接从-淘宝-NPM-安装了" class="headerlink" title="F：从 registry.npm.taobao.org 安装所有模块. 当安装的时候发现安装的模块还没有同步过来, 淘宝 NPM 会自动在后台进行同步, 并且会让你从官方 NPM registry.npmjs.org 进行安装. 下次你再安装这个模块的时候, 就会直接从 淘宝 NPM 安装了."></a>F：从 registry.npm.taobao.org 安装所有模块. 当安装的时候发现安装的模块还没有同步过来, 淘宝 NPM 会自动在后台进行同步, 并且会让你从官方 NPM registry.npmjs.org 进行安装. 下次你再安装这个模块的时候, 就会直接从 淘宝 NPM 安装了.</h2><hr>]]></content>
      
      
      <categories>
          
          <category> 好方法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NPM </tag>
            
            <tag> 奇淫巧技 </tag>
            
            <tag> Node.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>巧妙去除百度首页广告</title>
      <link href="/posts/c226bfa5/"/>
      <url>/posts/c226bfa5/</url>
      
        <content type="html"><![CDATA[<h1 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h1><p>百度首页有~新闻~广告，虽然声称新闻，实际上就是你会发现其中有大量广告。<br>好吧好吧，如果你一直坚定认为它是新闻，我也没办法。<br>下面说说如何去除</p><h2 id="去除前："><a href="#去除前：" class="headerlink" title="去除前："></a>去除前：</h2><p>这是你输入<a href="https://baidu.com">https://baidu.com</a>时的场景：<br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/BAIDUADS.jpg" alt="百度首页广告" title="去除前"></p><h2 id="做法："><a href="#做法：" class="headerlink" title="做法："></a>做法：</h2><p>在baidu.com 后跟上<code>/?tn=simple</code>,变成<a href="https://baidu.com/?tn=simple">https://baidu.com?tn=simple</a><br><img src="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/BAIDUNOADS.jpg" alt="百度首页广告" title="去除后"></p><h3 id="搞定！"><a href="#搞定！" class="headerlink" title="搞定！"></a>搞定！</h3><hr>]]></content>
      
      
      <categories>
          
          <category> 好方法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 奇淫巧技 </tag>
            
            <tag> 百度 </tag>
            
            <tag> 广告 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown Style test</title>
      <link href="/posts/89757140/"/>
      <url>/posts/89757140/</url>
      
        <content type="html"><![CDATA[<p>This post is originated from <a href="https://gist.github.com/apackeer/4159268">here</a> and is used for testing markdown style. This post contains nearly every markdown usage. Make sure all the markdown elements below show up correctly.</p><span id="more"></span><hr><h2 id="Headers"><a href="#Headers" class="headerlink" title="Headers"></a>Headers</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># H1</span></span><br><span class="line"><span class="section">## H2</span></span><br><span class="line"><span class="section">### H3</span></span><br><span class="line"><span class="section">#### H4</span></span><br><span class="line"><span class="section">##### H5</span></span><br><span class="line"><span class="section">###### H6</span></span><br><span class="line"></span><br><span class="line">Alternatively, for H1 and H2, an underline-ish style:</span><br><span class="line"></span><br><span class="line"><span class="section">Alt-H1</span></span><br><span class="line"><span class="section">======</span></span><br><span class="line"></span><br><span class="line"><span class="section">Alt-H2</span></span><br><span class="line"><span class="section">------</span></span><br></pre></td></tr></table></figure><h1 id="H1"><a href="#H1" class="headerlink" title="H1"></a>H1</h1><h2 id="H2"><a href="#H2" class="headerlink" title="H2"></a>H2</h2><h3 id="H3"><a href="#H3" class="headerlink" title="H3"></a>H3</h3><h4 id="H4"><a href="#H4" class="headerlink" title="H4"></a>H4</h4><h5 id="H5"><a href="#H5" class="headerlink" title="H5"></a>H5</h5><h6 id="H6"><a href="#H6" class="headerlink" title="H6"></a>H6</h6><p>Alternatively, for H1 and H2, an underline-ish style:</p><h1 id="Alt-H1"><a href="#Alt-H1" class="headerlink" title="Alt-H1"></a>Alt-H1</h1><h2 id="Alt-H2"><a href="#Alt-H2" class="headerlink" title="Alt-H2"></a>Alt-H2</h2><h2 id="Emphasis"><a href="#Emphasis" class="headerlink" title="Emphasis"></a>Emphasis</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Emphasis, aka italics, with <span class="emphasis">*asterisks*</span> or <span class="emphasis">_underscores_</span>.</span><br><span class="line"></span><br><span class="line">Strong emphasis, aka bold, with <span class="strong">**asterisks**</span> or <span class="strong">__underscores__</span>.</span><br><span class="line"></span><br><span class="line">Combined emphasis with <span class="strong">**asterisks and <span class="emphasis">_underscores_</span>**</span>.</span><br><span class="line"></span><br><span class="line">Strikethrough uses two tildes. ~~Scratch this.~~</span><br></pre></td></tr></table></figure><p>Emphasis, aka italics, with <em>asterisks</em> or <em>underscores</em>.</p><p>Strong emphasis, aka bold, with <strong>asterisks</strong> or <strong>underscores</strong>.</p><p>Combined emphasis with <strong>asterisks and <em>underscores</em></strong>.</p><p>Strikethrough uses two tildes. <del>Scratch this.</del></p><h2 id="Lists"><a href="#Lists" class="headerlink" title="Lists"></a>Lists</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> First ordered list item</span><br><span class="line"><span class="bullet">2.</span> Another item</span><br><span class="line"><span class="bullet">  *</span> Unordered sub-list.</span><br><span class="line"><span class="bullet">1.</span> Actual numbers don&#x27;t matter, just that it&#x27;s a number</span><br><span class="line"><span class="bullet">  1.</span> Ordered sub-list</span><br><span class="line"><span class="bullet">4.</span> And another item.</span><br><span class="line"></span><br><span class="line">   You can have properly indented paragraphs within list items. Notice the blank line above, and the leading spaces (at least one, but we&#x27;ll use three here to also align the raw Markdown).</span><br><span class="line"></span><br><span class="line">   To have a line break without a paragraph, you will need to use two trailing spaces.  </span><br><span class="line">   Note that this line is separate, but within the same paragraph.  </span><br><span class="line">   (This is contrary to the typical GFM line break behaviour, where trailing spaces are not required.)</span><br><span class="line"></span><br><span class="line"><span class="bullet">*</span> Unordered list can use asterisks</span><br><span class="line"><span class="bullet">-</span> Or minuses</span><br><span class="line"><span class="bullet">+</span> Or pluses</span><br><span class="line"><span class="bullet">-</span> Paragraph In unordered list</span><br><span class="line"></span><br><span class="line">  For example like this.</span><br><span class="line"></span><br><span class="line">Common Paragraph with some text.</span><br><span class="line">And more text.</span><br></pre></td></tr></table></figure><ol><li>First ordered list item</li><li>Another item<ul><li>Unordered sub-list.</li></ul></li><li>Actual numbers don’t matter, just that it’s a number<ol><li>Ordered sub-list</li></ol></li><li><p>And another item.</p><p>You can have properly indented paragraphs within list items. Notice the blank line above, and the leading spaces (at least one, but we’ll use three here to also align the raw Markdown).</p><p>To have a line break without a paragraph, you will need to use two trailing spaces.<br>Note that this line is separate, but within the same paragraph.<br>(This is contrary to the typical GFM line break behaviour, where trailing spaces are not required.)</p></li></ol><ul><li>Unordered list can use asterisks</li></ul><ul><li>Or minuses</li></ul><ul><li>Or pluses</li></ul><ul><li><p>Paragraph In unordered list</p><p>For example like this.</p></li></ul><p>Common Paragraph with some text.<br>And more text.</p><h2 id="Inline-HTML"><a href="#Inline-HTML" class="headerlink" title="Inline HTML"></a>Inline HTML</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span>To reboot your computer, press <span class="language-xml"><span class="tag">&lt;<span class="name">kbd</span>&gt;</span></span>ctrl<span class="language-xml"><span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span>+<span class="language-xml"><span class="tag">&lt;<span class="name">kbd</span>&gt;</span></span>alt<span class="language-xml"><span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span>+<span class="language-xml"><span class="tag">&lt;<span class="name">kbd</span>&gt;</span></span>del<span class="language-xml"><span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span>.<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>To reboot your computer, press <kbd>ctrl</kbd>+<kbd>alt</kbd>+<kbd>del</kbd>.</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">dl</span>&gt;</span></span></span><br><span class="line"><span class="code">    &lt;dt&gt;Definition list&lt;/dt&gt;</span></span><br><span class="line"><span class="code">    &lt;dd&gt;Is something people use sometimes.&lt;/dd&gt;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">    &lt;dt&gt;Markdown in HTML&lt;/dt&gt;</span></span><br><span class="line"><span class="code">    &lt;dd&gt;Does *not* work **very** well. Use HTML &lt;em&gt;tags&lt;/em&gt;.&lt;/dd&gt;</span></span><br><span class="line"><span class="code">&lt;/dl&gt;</span></span><br></pre></td></tr></table></figure><dl>    <dt>Definition list</dt>    <dd>Is something people use sometimes.</dd>    <dt>Markdown in HTML</dt>    <dd>Does *not* work **very** well. Use HTML <em>tags</em>.</dd></dl><h2 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">I&#x27;m an inline-style link</span>](<span class="link">https://www.google.com</span>)</span><br><span class="line"></span><br><span class="line">[<span class="string">I&#x27;m an inline-style link with title</span>](<span class="link">https://www.google.com &quot;Google&#x27;s Homepage&quot;</span>)</span><br><span class="line"></span><br><span class="line">[<span class="string">I&#x27;m a reference-style link</span>][<span class="symbol">Arbitrary case-insensitive reference text</span>]</span><br><span class="line"></span><br><span class="line">[<span class="string">I&#x27;m a relative reference to a repository file</span>](<span class="link">../blob/master/LICENSE</span>)</span><br><span class="line"></span><br><span class="line">[<span class="string">You can use numbers for reference-style link definitions</span>][<span class="symbol">1</span>]</span><br><span class="line"></span><br><span class="line">Or leave it empty and use the [link text itself]</span><br><span class="line"></span><br><span class="line">Some text to show that the reference links can follow later.</span><br><span class="line"></span><br><span class="line">[<span class="symbol">arbitrary case-insensitive reference text</span>]: <span class="link">https://hexo.io</span></span><br><span class="line">[<span class="symbol">1</span>]: <span class="link">https://hexo.io/docs/</span></span><br><span class="line">[<span class="symbol">link text itself</span>]: <span class="link">https://hexo.io/api/</span></span><br></pre></td></tr></table></figure><p><a href="https://www.google.com">I’m an inline-style link</a></p><p><a href="https://www.google.com" title="Google&#39;s Homepage">I’m an inline-style link with title</a></p><p><a href="https://hexo.io">I’m a reference-style link</a></p><p><a href="../blob/master/LICENSE">I’m a relative reference to a repository file</a></p><p><a href="https://hexo.io/docs/">You can use numbers for reference-style link definitions</a></p><p>Or leave it empty and use the <a href="https://hexo.io/api/">link text itself</a></p><p>Some text to show that the reference links can follow later.</p><h2 id="Images"><a href="#Images" class="headerlink" title="Images"></a>Images</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">hover to see the title text:</span><br><span class="line"></span><br><span class="line">Inline-style:</span><br><span class="line"></span><br><span class="line">![<span class="string">alt text</span>](<span class="link">https://hexo.io/icon/favicon-196x196.png &quot;Logo Title Text 1&quot;</span>)</span><br><span class="line"></span><br><span class="line">Reference-style:</span><br><span class="line">![<span class="string">alt text</span>][<span class="symbol">logo</span>]</span><br><span class="line"></span><br><span class="line">[<span class="symbol">logo</span>]: <span class="link">https://hexo.io/icon/favicon-196x196.png &quot;Logo Title Text 2&quot;</span></span><br></pre></td></tr></table></figure><p>hover to see the title text:</p><p>Inline-style:</p><p><img src="https://hexo.io/icon/favicon-196x196.png" alt="alt text" title="Logo Title Text 1"></p><p>Reference-style:<br><img src="https://hexo.io/icon/favicon-196x196.png" alt="alt text" title="Logo Title Text 2"></p><h2 id="Code-and-Syntax-Highlighting"><a href="#Code-and-Syntax-Highlighting" class="headerlink" title="Code and Syntax Highlighting"></a>Code and Syntax Highlighting</h2><p>Inline <code>code</code> has <code>back-ticks around</code> it.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">&quot;JavaScript syntax highlighting&quot;</span>;</span><br><span class="line"><span class="title function_">alert</span>(s);</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;Python syntax highlighting&quot;</span></span><br><span class="line"><span class="built_in">print</span> s</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">No language indicated, so no syntax highlighting.</span><br><span class="line">But let&#x27;s throw in a &lt;b&gt;tag&lt;/b&gt;.</span><br></pre></td></tr></table></figure><h2 id="Tables"><a href="#Tables" class="headerlink" title="Tables"></a>Tables</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">|                |ASCII                          |HTML                         |</span><br><span class="line">|----------------|-------------------------------|-----------------------------|</span><br><span class="line">|Single backticks|<span class="code">`&#x27;Isn&#x27;t this fun?&#x27;`</span>            |&#x27;Isn&#x27;t this fun?&#x27;            |</span><br><span class="line">|Quotes          |<span class="code">`&quot;Isn&#x27;t this fun?&quot;`</span>            |&quot;Isn&#x27;t this fun?&quot;            |</span><br><span class="line">|Dashes          |<span class="code">`-- is en-dash, --- is em-dash`</span>|-- is en-dash, --- is em-dash|</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th></th><th>ASCII</th><th>HTML</th></tr></thead><tbody><tr><td>Single backticks</td><td><code>&#39;Isn&#39;t this fun?&#39;</code></td><td>‘Isn’t this fun?’</td></tr><tr><td>Quotes</td><td><code>&quot;Isn&#39;t this fun?&quot;</code></td><td>“Isn’t this fun?”</td></tr><tr><td>Dashes</td><td><code>-- is en-dash, --- is em-dash</code></td><td>— is en-dash, —- is em-dash</td></tr></tbody></table></div><p>Colons can be used to align columns.</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| Tables        | Are           | Cool  |</span><br><span class="line">| ------------- |:-------------:| -----:|</span><br><span class="line">| col 3 is      | right-aligned |  |</span><br><span class="line">| col 2 is      | centered      |    |</span><br><span class="line">| zebra stripes | are neat      |   </span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>Tables</th><th style="text-align:center">Are</th><th style="text-align:right">Cool</th></tr></thead><tbody><tr><td>col 3 is</td><td style="text-align:center">right-aligned</td><td style="text-align:right"></td></tr><tr><td>col 2 is</td><td style="text-align:center">centered</td><td style="text-align:right"></td></tr><tr><td>zebra stripes</td><td style="text-align:center">are neat</td></tr></tbody></table></div><p>The outer pipes (|) are optional, and you don’t need to make the raw Markdown line up prettily. You can also use inline Markdown.</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Markdown | Less | Pretty</span><br><span class="line">--- | --- | ---</span><br><span class="line"><span class="emphasis">*Still*</span> | <span class="code">`renders`</span> | <span class="strong">**nicely**</span></span><br><span class="line">1 | 2 | 3</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>Markdown</th><th>Less</th><th>Pretty</th></tr></thead><tbody><tr><td><em>Still</em></td><td><code>renders</code></td><td><strong>nicely</strong></td></tr><tr><td>1</td><td>2</td><td>3</td></tr></tbody></table></div><blockquote><p>You can find more information about <strong>LaTeX</strong> mathematical expressions <a href="https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference">here</a>.</p></blockquote><h2 id="Blockquotes"><a href="#Blockquotes" class="headerlink" title="Blockquotes"></a>Blockquotes</h2><blockquote><p>Blockquotes are very handy in email to emulate reply text.<br>This line is part of the same quote.</p></blockquote><p>Quote break.</p><blockquote><p>This is a very long line that will still be quoted properly when it wraps. Oh boy let’s keep writing to make sure this is long enough to actually wrap for everyone. Oh, you can <em>put</em> <strong>Markdown</strong> into a blockquote.</p></blockquote><h2 id="Horizontal-Rule"><a href="#Horizontal-Rule" class="headerlink" title="Horizontal Rule"></a>Horizontal Rule</h2><p>Three or more…</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line"></span><br><span class="line">Hyphens</span><br><span class="line"></span><br><span class="line"><span class="strong">**<span class="emphasis">*</span></span></span><br><span class="line"><span class="emphasis"><span class="strong"></span></span></span><br><span class="line"><span class="emphasis"><span class="strong">Asterisks</span></span></span><br><span class="line"><span class="emphasis"><span class="strong"></span></span></span><br><span class="line"><span class="emphasis"><span class="strong">___</span></span></span><br><span class="line"><span class="emphasis"><span class="strong"></span></span></span><br><span class="line"><span class="emphasis"><span class="strong">Underscores</span></span></span><br></pre></td></tr></table></figure><hr><p>Hyphens</p><hr><p>Asterisks</p><hr><p>Underscores</p><h2 id="Line-Breaks"><a href="#Line-Breaks" class="headerlink" title="Line Breaks"></a>Line Breaks</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Here&#x27;s a line for us to start with.</span><br><span class="line"></span><br><span class="line">This line is separated from the one above by two newlines, so it will be a <span class="emphasis">*separate paragraph*</span>.</span><br><span class="line"></span><br><span class="line">This line is also a separate paragraph, but...</span><br><span class="line">This line is only separated by a single newline, so it&#x27;s a separate line in the <span class="emphasis">*same paragraph*</span>.</span><br></pre></td></tr></table></figure><p>Here’s a line for us to start with.</p><p>This line is separated from the one above by two newlines, so it will be a <em>separate paragraph</em>.</p><p>This line is also a separate paragraph, but…<br>This line is only separated by a single newline, so it’s a separate line in the <em>same paragraph</em>.</p><hr><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">This is a regular paragraph.</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="code">    &lt;tr&gt;</span></span><br><span class="line"><span class="code">        &lt;td&gt;Foo&lt;/td&gt;</span></span><br><span class="line"><span class="code">    &lt;/tr&gt;</span></span><br><span class="line"><span class="code">&lt;/table&gt;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line">This is another regular paragraph.</span><br></pre></td></tr></table></figure><p>This is a regular paragraph.</p><table>    <tr>        <td>Foo</td>    </tr></table><p>This is another regular paragraph.</p><h2 id="Youtube-videos"><a href="#Youtube-videos" class="headerlink" title="Youtube videos"></a>Youtube videos</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.youtube.com/watch?feature=player_embedded&amp;v=ARted4RniaU</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://img.youtube.com/vi/ARted4RniaU/0.jpg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">alt</span>=<span class="string">&quot;IMAGE ALT TEXT HERE&quot;</span> <span class="attr">width</span>=<span class="string">&quot;240&quot;</span> <span class="attr">height</span>=<span class="string">&quot;180&quot;</span> <span class="attr">border</span>=<span class="string">&quot;10&quot;</span> /&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">Pure markdown version:</span><br><span class="line"></span><br><span class="line">[<span class="string">![IMAGE ALT TEXT HERE</span>](<span class="link">https://img.youtube.com/vi/ARted4RniaU/0.jpg</span>)](<span class="link">https://www.youtube.com/watch?v=ARted4RniaU</span>)</span><br></pre></td></tr></table></figure><p><a href="https://www.youtube.com/watch?feature=player_embedded&v=ARted4RniaU" target="_blank"><img src="https://img.youtube.com/vi/ARted4RniaU/0.jpg"alt="IMAGE ALT TEXT HERE" width="240" height="180" border="10" /></a></p><p>Pure markdown version:</p><p><a href="https://www.youtube.com/watch?v=ARted4RniaU"><img src="https://img.youtube.com/vi/ARted4RniaU/0.jpg" alt="IMAGE ALT TEXT HERE"></a></p>]]></content>
      
      
      <categories>
          
          <category> Markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> highlight </tag>
            
            <tag> Bar </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
